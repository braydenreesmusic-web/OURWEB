function db(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tx={exports:{}},gh={},Nx={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=Symbol.for("react.element"),pb=Symbol.for("react.portal"),mb=Symbol.for("react.fragment"),gb=Symbol.for("react.strict_mode"),vb=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),_b=Symbol.for("react.context"),wb=Symbol.for("react.forward_ref"),xb=Symbol.for("react.suspense"),Sb=Symbol.for("react.memo"),Eb=Symbol.for("react.lazy"),h_=Symbol.iterator;function kb(t){return t===null||typeof t!="object"?null:(t=h_&&t[h_]||t["@@iterator"],typeof t=="function"?t:null)}var bx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ix=Object.assign,Px={};function Eo(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||bx}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mx(){}Mx.prototype=Eo.prototype;function Rm(t,e,n){this.props=t,this.context=e,this.refs=Px,this.updater=n||bx}var jm=Rm.prototype=new Mx;jm.constructor=Rm;Ix(jm,Eo.prototype);jm.isPureReactComponent=!0;var d_=Array.isArray,Lx=Object.prototype.hasOwnProperty,Fm={current:null},Ax={key:!0,ref:!0,__self:!0,__source:!0};function Dx(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Lx.call(e,i)&&!Ax.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),p=0;p<c;p++)h[p]=arguments[p+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:xl,type:t,key:o,ref:a,props:r,_owner:Fm.current}}function Cb(t,e){return{$$typeof:xl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zm(t){return typeof t=="object"&&t!==null&&t.$$typeof===xl}function Tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var f_=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tb(""+t.key):e.toString(36)}function Yu(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case xl:case pb:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Zd(a,0):i,d_(r)?(n="",t!=null&&(n=t.replace(f_,"$&/")+"/"),Yu(r,e,n,"",function(p){return p})):r!=null&&(zm(r)&&(r=Cb(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(f_,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",d_(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+Zd(o,c);a+=Yu(o,e,n,h,r)}else if(h=kb(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+Zd(o,c++),a+=Yu(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wu(t,e,n){if(t==null)return t;var i=[],r=0;return Yu(t,i,"","",function(o){return e.call(n,o,r++)}),i}function Nb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Xu={transition:null},bb={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Xu,ReactCurrentOwner:Fm};function Ox(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:wu,forEach:function(t,e,n){wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wu(t,function(){e++}),e},toArray:function(t){return wu(t,function(e){return e})||[]},only:function(t){if(!zm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Eo;ve.Fragment=mb;ve.Profiler=vb;ve.PureComponent=Rm;ve.StrictMode=gb;ve.Suspense=xb;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bb;ve.act=Ox;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ix({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Fm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Lx.call(e,h)&&!Ax.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var p=0;p<h;p++)c[p]=arguments[p+2];i.children=c}return{$$typeof:xl,type:t.type,key:r,ref:o,props:i,_owner:a}};ve.createContext=function(t){return t={$$typeof:_b,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yb,_context:t},t.Consumer=t};ve.createElement=Dx;ve.createFactory=function(t){var e=Dx.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:wb,render:t}};ve.isValidElement=zm;ve.lazy=function(t){return{$$typeof:Eb,_payload:{_status:-1,_result:t},_init:Nb}};ve.memo=function(t,e){return{$$typeof:Sb,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Xu.transition;Xu.transition={};try{t()}finally{Xu.transition=e}};ve.unstable_act=Ox;ve.useCallback=function(t,e){return Qt.current.useCallback(t,e)};ve.useContext=function(t){return Qt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Qt.current.useEffect(t,e)};ve.useId=function(){return Qt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Qt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};ve.useRef=function(t){return Qt.current.useRef(t)};ve.useState=function(t){return Qt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Qt.current.useTransition()};ve.version="18.3.1";Nx.exports=ve;var b=Nx.exports;const io=Cx(b),Ib=db({__proto__:null,default:io},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb=b,Mb=Symbol.for("react.element"),Lb=Symbol.for("react.fragment"),Ab=Object.prototype.hasOwnProperty,Db=Pb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ob={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Ab.call(e,i)&&!Ob.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Mb,type:t,key:o,ref:a,props:r,_owner:Db.current}}gh.Fragment=Lb;gh.jsx=Rx;gh.jsxs=Rx;Tx.exports=gh;var d=Tx.exports,Yf={},jx={exports:{}},pn={},Fx={exports:{}},zx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,ie){var H=O.length;O.push(ie);e:for(;0<H;){var oe=H-1>>>1,_e=O[oe];if(0<r(_e,ie))O[oe]=ie,O[H]=_e,H=oe;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var ie=O[0],H=O.pop();if(H!==ie){O[0]=H;e:for(var oe=0,_e=O.length,Xe=_e>>>1;oe<Xe;){var Pe=2*(oe+1)-1,xe=O[Pe],ue=Pe+1,Mt=O[ue];if(0>r(xe,H))ue<_e&&0>r(Mt,xe)?(O[oe]=Mt,O[ue]=H,oe=ue):(O[oe]=xe,O[Pe]=H,oe=Pe);else if(ue<_e&&0>r(Mt,H))O[oe]=Mt,O[ue]=H,oe=ue;else break e}}return ie}function r(O,ie){var H=O.sortIndex-ie.sortIndex;return H!==0?H:O.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],p=[],m=1,v=null,y=3,x=!1,C=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var ie=n(p);ie!==null;){if(ie.callback===null)i(p);else if(ie.startTime<=O)i(p),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=n(p)}}function I(O){if(k=!1,S(O),!C)if(n(h)!==null)C=!0,Ye(M);else{var ie=n(p);ie!==null&&W(I,ie.startTime-O)}}function M(O,ie){C=!1,k&&(k=!1,E(j),j=-1),x=!0;var H=y;try{for(S(ie),v=n(h);v!==null&&(!(v.expirationTime>ie)||O&&!re());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,y=v.priorityLevel;var _e=oe(v.expirationTime<=ie);ie=t.unstable_now(),typeof _e=="function"?v.callback=_e:v===n(h)&&i(h),S(ie)}else i(h);v=n(h)}if(v!==null)var Xe=!0;else{var Pe=n(p);Pe!==null&&W(I,Pe.startTime-ie),Xe=!1}return Xe}finally{v=null,y=H,x=!1}}var D=!1,R=null,j=-1,J=5,X=-1;function re(){return!(t.unstable_now()-X<J)}function B(){if(R!==null){var O=t.unstable_now();X=O;var ie=!0;try{ie=R(!0,O)}finally{ie?Ie():(D=!1,R=null)}}else D=!1}var Ie;if(typeof _=="function")Ie=function(){_(B)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Li=ft.port2;ft.port1.onmessage=B,Ie=function(){Li.postMessage(null)}}else Ie=function(){N(B,0)};function Ye(O){R=O,D||(D=!0,Ie())}function W(O,ie){j=N(function(){O(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,Ye(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var ie=3;break;default:ie=y}var H=y;y=ie;try{return O()}finally{y=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,ie){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=y;y=O;try{return ie()}finally{y=H}},t.unstable_scheduleCallback=function(O,ie,H){var oe=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?oe+H:oe):H=oe,O){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=H+_e,O={id:m++,callback:ie,priorityLevel:O,startTime:H,expirationTime:_e,sortIndex:-1},H>oe?(O.sortIndex=H,e(p,O),n(h)===null&&O===n(p)&&(k?(E(j),j=-1):k=!0,W(I,H-oe))):(O.sortIndex=_e,e(h,O),C||x||(C=!0,Ye(M))),O},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(O){var ie=y;return function(){var H=y;y=ie;try{return O.apply(this,arguments)}finally{y=H}}}})(zx);Fx.exports=zx;var Rb=Fx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb=b,dn=Rb;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ux=new Set,La={};function ss(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(La[t]=e,t=0;t<e.length;t++)Ux.add(e[t])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=Object.prototype.hasOwnProperty,Fb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p_={},m_={};function zb(t){return Xf.call(m_,t)?!0:Xf.call(p_,t)?!1:Fb.test(t)?m_[t]=!0:(p_[t]=!0,!1)}function Ub(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $b(t,e,n,i){if(e===null||typeof e>"u"||Ub(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Um=/[\-:]([a-z])/g;function $m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Um,$m);It[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Um,$m);It[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Um,$m);It[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,i){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($b(e,n,r,i)&&(n=null),i||r===null?zb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Pi=jb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xu=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Is=Symbol.for("react.fragment"),Vm=Symbol.for("react.strict_mode"),Jf=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),ep=Symbol.for("react.suspense"),tp=Symbol.for("react.suspense_list"),Hm=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),Vx=Symbol.for("react.offscreen"),g_=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=g_&&t[g_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Yd;function ua(t){if(Yd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yd=e&&e[1]||""}return`
`+Yd+t}var Xd=!1;function Jd(t,e){if(!t||Xd)return"";Xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,c=o.length-1;1<=a&&0<=c&&r[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(r[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||r[a]!==o[c]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{Xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ua(t):""}function Bb(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=Jd(t.type,!1),t;case 11:return t=Jd(t.type.render,!1),t;case 1:return t=Jd(t.type,!0),t;default:return""}}function np(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Is:return"Fragment";case bs:return"Portal";case Jf:return"Profiler";case Vm:return"StrictMode";case ep:return"Suspense";case tp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bx:return(t.displayName||"Context")+".Consumer";case $x:return(t._context.displayName||"Context")+".Provider";case qm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hm:return e=t.displayName||null,e!==null?e:np(t.type)||"Memo";case Fi:e=t._payload,t=t._init;try{return np(t(e))}catch{}}return null}function Vb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return np(e);case 8:return e===Vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qb(t){var e=qx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Su(t){t._valueTracker||(t._valueTracker=qb(t))}function Hx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=qx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ip(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wx(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function rp(t,e){Wx(t,e);var n=hr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sp(t,e.type,n):e.hasOwnProperty("defaultValue")&&sp(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sp(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ca=Array.isArray;function qs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function op(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function __(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(ca(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function Kx(t,e){var n=hr(e.value),i=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function w_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ap(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eu,Gx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eu=Eu||document.createElement("div"),Eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hb=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){Hb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function Zx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function Yx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Zx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var Wb=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lp(t,e){if(e){if(Wb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=null;function Wm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hp=null,Hs=null,Ws=null;function x_(t){if(t=kl(t)){if(typeof hp!="function")throw Error(V(280));var e=t.stateNode;e&&(e=xh(e),hp(t.stateNode,t.type,e))}}function Xx(t){Hs?Ws?Ws.push(t):Ws=[t]:Hs=t}function Jx(){if(Hs){var t=Hs,e=Ws;if(Ws=Hs=null,x_(t),e)for(t=0;t<e.length;t++)x_(e[t])}}function e1(t,e){return t(e)}function t1(){}var ef=!1;function n1(t,e,n){if(ef)return t(e,n);ef=!0;try{return e1(t,e,n)}finally{ef=!1,(Hs!==null||Ws!==null)&&(t1(),Jx())}}function Da(t,e){var n=t.stateNode;if(n===null)return null;var i=xh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var dp=!1;if(vi)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){dp=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{dp=!1}function Kb(t,e,n,i,r,o,a,c,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(m){this.onError(m)}}var _a=!1,wc=null,xc=!1,fp=null,Qb={onError:function(t){_a=!0,wc=t}};function Gb(t,e,n,i,r,o,a,c,h){_a=!1,wc=null,Kb.apply(Qb,arguments)}function Zb(t,e,n,i,r,o,a,c,h){if(Gb.apply(this,arguments),_a){if(_a){var p=wc;_a=!1,wc=null}else throw Error(V(198));xc||(xc=!0,fp=p)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function S_(t){if(os(t)!==t)throw Error(V(188))}function Yb(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return S_(r),t;if(o===i)return S_(r),e;o=o.sibling}throw Error(V(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=o;break}if(c===i){a=!0,i=r,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,i=r;break}if(c===i){a=!0,i=o,n=r;break}c=c.sibling}if(!a)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function r1(t){return t=Yb(t),t!==null?s1(t):null}function s1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=s1(t);if(e!==null)return e;t=t.sibling}return null}var o1=dn.unstable_scheduleCallback,E_=dn.unstable_cancelCallback,Xb=dn.unstable_shouldYield,Jb=dn.unstable_requestPaint,rt=dn.unstable_now,eI=dn.unstable_getCurrentPriorityLevel,Km=dn.unstable_ImmediatePriority,a1=dn.unstable_UserBlockingPriority,Sc=dn.unstable_NormalPriority,tI=dn.unstable_LowPriority,l1=dn.unstable_IdlePriority,vh=null,Zn=null;function nI(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:sI,iI=Math.log,rI=Math.LN2;function sI(t){return t>>>=0,t===0?32:31-(iI(t)/rI|0)|0}var ku=64,Cu=4194304;function ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~r;c!==0?i=ha(c):(o&=a,o!==0&&(i=ha(o)))}else a=n&~r,a!==0?i=ha(a):o!==0&&(i=ha(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-An(e),r=1<<n,i|=t[n],e&=~r;return i}function oI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-An(o),c=1<<a,h=r[a];h===-1?(!(c&n)||c&i)&&(r[a]=oI(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function u1(){var t=ku;return ku<<=1,!(ku&4194240)&&(ku=64),t}function tf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=n}function lI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-An(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-An(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function c1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h1,Gm,d1,f1,p1,mp=!1,Tu=[],Yi=null,Xi=null,Ji=null,Oa=new Map,Ra=new Map,$i=[],uI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k_(t,e){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(e.pointerId)}}function Yo(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=kl(e),e!==null&&Gm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function cI(t,e,n,i,r){switch(e){case"focusin":return Yi=Yo(Yi,t,e,n,i,r),!0;case"dragenter":return Xi=Yo(Xi,t,e,n,i,r),!0;case"mouseover":return Ji=Yo(Ji,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Oa.set(o,Yo(Oa.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ra.set(o,Yo(Ra.get(o)||null,t,e,n,i,r)),!0}return!1}function m1(t){var e=Or(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=i1(n),e!==null){t.blockedOn=e,p1(t.priority,function(){d1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);cp=i,n.target.dispatchEvent(i),cp=null}else return e=kl(n),e!==null&&Gm(e),t.blockedOn=n,!1;e.shift()}return!0}function C_(t,e,n){Ju(t)&&n.delete(e)}function hI(){mp=!1,Yi!==null&&Ju(Yi)&&(Yi=null),Xi!==null&&Ju(Xi)&&(Xi=null),Ji!==null&&Ju(Ji)&&(Ji=null),Oa.forEach(C_),Ra.forEach(C_)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,mp||(mp=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,hI)))}function ja(t){function e(r){return Xo(r,t)}if(0<Tu.length){Xo(Tu[0],t);for(var n=1;n<Tu.length;n++){var i=Tu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Yi!==null&&Xo(Yi,t),Xi!==null&&Xo(Xi,t),Ji!==null&&Xo(Ji,t),Oa.forEach(e),Ra.forEach(e),n=0;n<$i.length;n++)i=$i[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<$i.length&&(n=$i[0],n.blockedOn===null);)m1(n),n.blockedOn===null&&$i.shift()}var Ks=Pi.ReactCurrentBatchConfig,kc=!0;function dI(t,e,n,i){var r=Oe,o=Ks.transition;Ks.transition=null;try{Oe=1,Zm(t,e,n,i)}finally{Oe=r,Ks.transition=o}}function fI(t,e,n,i){var r=Oe,o=Ks.transition;Ks.transition=null;try{Oe=4,Zm(t,e,n,i)}finally{Oe=r,Ks.transition=o}}function Zm(t,e,n,i){if(kc){var r=gp(t,e,n,i);if(r===null)df(t,e,i,Cc,n),k_(t,i);else if(cI(r,t,e,n,i))i.stopPropagation();else if(k_(t,i),e&4&&-1<uI.indexOf(t)){for(;r!==null;){var o=kl(r);if(o!==null&&h1(o),o=gp(t,e,n,i),o===null&&df(t,e,i,Cc,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else df(t,e,i,null,n)}}var Cc=null;function gp(t,e,n,i){if(Cc=null,t=Wm(i),t=Or(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function g1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eI()){case Km:return 1;case a1:return 4;case Sc:case tI:return 16;case l1:return 536870912;default:return 16}default:return 16}}var Ki=null,Ym=null,ec=null;function v1(){if(ec)return ec;var t,e=Ym,n=e.length,i,r="value"in Ki?Ki.value:Ki.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return ec=r.slice(t,1<i?1-i:void 0)}function tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nu(){return!0}function T_(){return!1}function mn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Nu:T_,this.isPropagationStopped=T_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),e}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xm=mn(ko),El=Ge({},ko,{view:0,detail:0}),pI=mn(El),nf,rf,Jo,yh=Ge({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(nf=t.screenX-Jo.screenX,rf=t.screenY-Jo.screenY):rf=nf=0,Jo=t),nf)},movementY:function(t){return"movementY"in t?t.movementY:rf}}),N_=mn(yh),mI=Ge({},yh,{dataTransfer:0}),gI=mn(mI),vI=Ge({},El,{relatedTarget:0}),sf=mn(vI),yI=Ge({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),_I=mn(yI),wI=Ge({},ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=mn(wI),SI=Ge({},ko,{data:0}),b_=mn(SI),EI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CI[t])?!!e[t]:!1}function Jm(){return TI}var NI=Ge({},El,{key:function(t){if(t.key){var e=EI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(t){return t.type==="keypress"?tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bI=mn(NI),II=Ge({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I_=mn(II),PI=Ge({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),MI=mn(PI),LI=Ge({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),AI=mn(LI),DI=Ge({},yh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OI=mn(DI),RI=[9,13,27,32],eg=vi&&"CompositionEvent"in window,wa=null;vi&&"documentMode"in document&&(wa=document.documentMode);var jI=vi&&"TextEvent"in window&&!wa,y1=vi&&(!eg||wa&&8<wa&&11>=wa),P_=" ",M_=!1;function _1(t,e){switch(t){case"keyup":return RI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function FI(t,e){switch(t){case"compositionend":return w1(e);case"keypress":return e.which!==32?null:(M_=!0,P_);case"textInput":return t=e.data,t===P_&&M_?null:t;default:return null}}function zI(t,e){if(Ps)return t==="compositionend"||!eg&&_1(t,e)?(t=v1(),ec=Ym=Ki=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y1&&e.locale!=="ko"?null:e.data;default:return null}}var UI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UI[t.type]:e==="textarea"}function x1(t,e,n,i){Xx(i),e=Tc(e,"onChange"),0<e.length&&(n=new Xm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xa=null,Fa=null;function $I(t){L1(t,0)}function _h(t){var e=As(t);if(Hx(e))return t}function BI(t,e){if(t==="change")return e}var S1=!1;if(vi){var of;if(vi){var af="oninput"in document;if(!af){var A_=document.createElement("div");A_.setAttribute("oninput","return;"),af=typeof A_.oninput=="function"}of=af}else of=!1;S1=of&&(!document.documentMode||9<document.documentMode)}function D_(){xa&&(xa.detachEvent("onpropertychange",E1),Fa=xa=null)}function E1(t){if(t.propertyName==="value"&&_h(Fa)){var e=[];x1(e,Fa,t,Wm(t)),n1($I,e)}}function VI(t,e,n){t==="focusin"?(D_(),xa=e,Fa=n,xa.attachEvent("onpropertychange",E1)):t==="focusout"&&D_()}function qI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _h(Fa)}function HI(t,e){if(t==="click")return _h(e)}function WI(t,e){if(t==="input"||t==="change")return _h(e)}function KI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:KI;function za(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Xf.call(e,r)||!Rn(t[r],e[r]))return!1}return!0}function O_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R_(t,e){var n=O_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O_(n)}}function k1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C1(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QI(t){var e=C1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k1(n.ownerDocument.documentElement,n)){if(i!==null&&tg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=R_(n,o);var a=R_(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GI=vi&&"documentMode"in document&&11>=document.documentMode,Ms=null,vp=null,Sa=null,yp=!1;function j_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yp||Ms==null||Ms!==_c(i)||(i=Ms,"selectionStart"in i&&tg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sa&&za(Sa,i)||(Sa=i,i=Tc(vp,"onSelect"),0<i.length&&(e=new Xm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ms)))}function bu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ls={animationend:bu("Animation","AnimationEnd"),animationiteration:bu("Animation","AnimationIteration"),animationstart:bu("Animation","AnimationStart"),transitionend:bu("Transition","TransitionEnd")},lf={},T1={};vi&&(T1=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function wh(t){if(lf[t])return lf[t];if(!Ls[t])return t;var e=Ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T1)return lf[t]=e[n];return t}var N1=wh("animationend"),b1=wh("animationiteration"),I1=wh("animationstart"),P1=wh("transitionend"),M1=new Map,F_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){M1.set(t,e),ss(e,[t])}for(var uf=0;uf<F_.length;uf++){var cf=F_[uf],ZI=cf.toLowerCase(),YI=cf[0].toUpperCase()+cf.slice(1);yr(ZI,"on"+YI)}yr(N1,"onAnimationEnd");yr(b1,"onAnimationIteration");yr(I1,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(P1,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XI=new Set("cancel close invalid load scroll toggle".split(" ").concat(da));function z_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Zb(i,e,void 0,t),t.currentTarget=null}function L1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var c=i[a],h=c.instance,p=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;z_(r,c,p),o=h}else for(a=0;a<i.length;a++){if(c=i[a],h=c.instance,p=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;z_(r,c,p),o=h}}}if(xc)throw t=fp,xc=!1,fp=null,t}function Ue(t,e){var n=e[Ep];n===void 0&&(n=e[Ep]=new Set);var i=t+"__bubble";n.has(i)||(A1(e,t,2,!1),n.add(i))}function hf(t,e,n){var i=0;e&&(i|=4),A1(n,t,i,e)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[Iu]){t[Iu]=!0,Ux.forEach(function(n){n!=="selectionchange"&&(XI.has(n)||hf(n,!1,t),hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Iu]||(e[Iu]=!0,hf("selectionchange",!1,e))}}function A1(t,e,n,i){switch(g1(e)){case 1:var r=dI;break;case 4:r=fI;break;default:r=Zm}n=r.bind(null,e,n,t),r=void 0,!dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function df(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;c!==null;){if(a=Or(c),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}c=c.parentNode}}i=i.return}n1(function(){var p=o,m=Wm(n),v=[];e:{var y=M1.get(t);if(y!==void 0){var x=Xm,C=t;switch(t){case"keypress":if(tc(n)===0)break e;case"keydown":case"keyup":x=bI;break;case"focusin":C="focus",x=sf;break;case"focusout":C="blur",x=sf;break;case"beforeblur":case"afterblur":x=sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=N_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=gI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=MI;break;case N1:case b1:case I1:x=_I;break;case P1:x=AI;break;case"scroll":x=pI;break;case"wheel":x=OI;break;case"copy":case"cut":case"paste":x=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=I_}var k=(e&4)!==0,N=!k&&t==="scroll",E=k?y!==null?y+"Capture":null:y;k=[];for(var _=p,S;_!==null;){S=_;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,E!==null&&(I=Da(_,E),I!=null&&k.push($a(_,I,S)))),N)break;_=_.return}0<k.length&&(y=new x(y,C,null,n,m),v.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==cp&&(C=n.relatedTarget||n.fromElement)&&(Or(C)||C[yi]))break e;if((x||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=p,C=C?Or(C):null,C!==null&&(N=os(C),C!==N||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=p),x!==C)){if(k=N_,I="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=I_,I="onPointerLeave",E="onPointerEnter",_="pointer"),N=x==null?y:As(x),S=C==null?y:As(C),y=new k(I,_+"leave",x,n,m),y.target=N,y.relatedTarget=S,I=null,Or(m)===p&&(k=new k(E,_+"enter",C,n,m),k.target=S,k.relatedTarget=N,I=k),N=I,x&&C)t:{for(k=x,E=C,_=0,S=k;S;S=Es(S))_++;for(S=0,I=E;I;I=Es(I))S++;for(;0<_-S;)k=Es(k),_--;for(;0<S-_;)E=Es(E),S--;for(;_--;){if(k===E||E!==null&&k===E.alternate)break t;k=Es(k),E=Es(E)}k=null}else k=null;x!==null&&U_(v,y,x,k,!1),C!==null&&N!==null&&U_(v,N,C,k,!0)}}e:{if(y=p?As(p):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var M=BI;else if(L_(y))if(S1)M=WI;else{M=qI;var D=VI}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=HI);if(M&&(M=M(t,p))){x1(v,M,n,m);break e}D&&D(t,y,p),t==="focusout"&&(D=y._wrapperState)&&D.controlled&&y.type==="number"&&sp(y,"number",y.value)}switch(D=p?As(p):window,t){case"focusin":(L_(D)||D.contentEditable==="true")&&(Ms=D,vp=p,Sa=null);break;case"focusout":Sa=vp=Ms=null;break;case"mousedown":yp=!0;break;case"contextmenu":case"mouseup":case"dragend":yp=!1,j_(v,n,m);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":j_(v,n,m)}var R;if(eg)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ps?_1(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(y1&&n.locale!=="ko"&&(Ps||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ps&&(R=v1()):(Ki=m,Ym="value"in Ki?Ki.value:Ki.textContent,Ps=!0)),D=Tc(p,j),0<D.length&&(j=new b_(j,t,null,n,m),v.push({event:j,listeners:D}),R?j.data=R:(R=w1(n),R!==null&&(j.data=R)))),(R=jI?FI(t,n):zI(t,n))&&(p=Tc(p,"onBeforeInput"),0<p.length&&(m=new b_("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:p}),m.data=R))}L1(v,e)})}function $a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Da(t,n),o!=null&&i.unshift($a(t,o,r)),o=Da(t,e),o!=null&&i.push($a(t,o,r))),t=t.return}return i}function Es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U_(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var c=n,h=c.alternate,p=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&p!==null&&(c=p,r?(h=Da(n,o),h!=null&&a.unshift($a(n,h,c))):r||(h=Da(n,o),h!=null&&a.push($a(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var JI=/\r\n?/g,e2=/\u0000|\uFFFD/g;function $_(t){return(typeof t=="string"?t:""+t).replace(JI,`
`).replace(e2,"")}function Pu(t,e,n){if(e=$_(e),$_(t)!==e&&n)throw Error(V(425))}function Nc(){}var _p=null,wp=null;function xp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sp=typeof setTimeout=="function"?setTimeout:void 0,t2=typeof clearTimeout=="function"?clearTimeout:void 0,B_=typeof Promise=="function"?Promise:void 0,n2=typeof queueMicrotask=="function"?queueMicrotask:typeof B_<"u"?function(t){return B_.resolve(null).then(t).catch(i2)}:Sp;function i2(t){setTimeout(function(){throw t})}function ff(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ja(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ja(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Co=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Co,Ba="__reactProps$"+Co,yi="__reactContainer$"+Co,Ep="__reactEvents$"+Co,r2="__reactListeners$"+Co,s2="__reactHandles$"+Co;function Or(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yi]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V_(t);t!==null;){if(n=t[Wn])return n;t=V_(t)}return e}t=n,n=t.parentNode}return null}function kl(t){return t=t[Wn]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function As(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function xh(t){return t[Ba]||null}var kp=[],Ds=-1;function _r(t){return{current:t}}function Ve(t){0>Ds||(t.current=kp[Ds],kp[Ds]=null,Ds--)}function ze(t,e){Ds++,kp[Ds]=t.current,t.current=e}var dr={},$t=_r(dr),tn=_r(!1),Kr=dr;function so(t,e){var n=t.type.contextTypes;if(!n)return dr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function nn(t){return t=t.childContextTypes,t!=null}function bc(){Ve(tn),Ve($t)}function q_(t,e,n){if($t.current!==dr)throw Error(V(168));ze($t,e),ze(tn,n)}function D1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(V(108,Vb(t)||"Unknown",r));return Ge({},n,i)}function Ic(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Kr=$t.current,ze($t,t),ze(tn,tn.current),!0}function H_(t,e,n){var i=t.stateNode;if(!i)throw Error(V(169));n?(t=D1(t,e,Kr),i.__reactInternalMemoizedMergedChildContext=t,Ve(tn),Ve($t),ze($t,t)):Ve(tn),ze(tn,n)}var ui=null,Sh=!1,pf=!1;function O1(t){ui===null?ui=[t]:ui.push(t)}function o2(t){Sh=!0,O1(t)}function wr(){if(!pf&&ui!==null){pf=!0;var t=0,e=Oe;try{var n=ui;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}ui=null,Sh=!1}catch(r){throw ui!==null&&(ui=ui.slice(t+1)),o1(Km,wr),r}finally{Oe=e,pf=!1}}return null}var Os=[],Rs=0,Pc=null,Mc=0,wn=[],xn=0,Qr=null,ci=1,hi="";function Pr(t,e){Os[Rs++]=Mc,Os[Rs++]=Pc,Pc=t,Mc=e}function R1(t,e,n){wn[xn++]=ci,wn[xn++]=hi,wn[xn++]=Qr,Qr=t;var i=ci;t=hi;var r=32-An(i)-1;i&=~(1<<r),n+=1;var o=32-An(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,ci=1<<32-An(e)+r|n<<r|i,hi=o+t}else ci=1<<o|n<<r|i,hi=t}function ng(t){t.return!==null&&(Pr(t,1),R1(t,1,0))}function ig(t){for(;t===Pc;)Pc=Os[--Rs],Os[Rs]=null,Mc=Os[--Rs],Os[Rs]=null;for(;t===Qr;)Qr=wn[--xn],wn[xn]=null,hi=wn[--xn],wn[xn]=null,ci=wn[--xn],wn[xn]=null}var cn=null,ln=null,He=!1,Ln=null;function j1(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qr!==null?{id:ci,overflow:hi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,ln=null,!0):!1;default:return!1}}function Cp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tp(t){if(He){var e=ln;if(e){var n=e;if(!W_(t,e)){if(Cp(t))throw Error(V(418));e=er(n.nextSibling);var i=cn;e&&W_(t,e)?j1(i,n):(t.flags=t.flags&-4097|2,He=!1,cn=t)}}else{if(Cp(t))throw Error(V(418));t.flags=t.flags&-4097|2,He=!1,cn=t}}}function K_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Mu(t){if(t!==cn)return!1;if(!He)return K_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xp(t.type,t.memoizedProps)),e&&(e=ln)){if(Cp(t))throw F1(),Error(V(418));for(;e;)j1(t,e),e=er(e.nextSibling)}if(K_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?er(t.stateNode.nextSibling):null;return!0}function F1(){for(var t=ln;t;)t=er(t.nextSibling)}function oo(){ln=cn=null,He=!1}function rg(t){Ln===null?Ln=[t]:Ln.push(t)}var a2=Pi.ReactCurrentBatchConfig;function ea(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=r.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function Lu(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q_(t){var e=t._init;return e(t._payload)}function z1(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function i(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function r(E,_){return E=rr(E,_),E.index=0,E.sibling=null,E}function o(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,_,S,I){return _===null||_.tag!==6?(_=xf(S,E.mode,I),_.return=E,_):(_=r(_,S),_.return=E,_)}function h(E,_,S,I){var M=S.type;return M===Is?m(E,_,S.props.children,I,S.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fi&&Q_(M)===_.type)?(I=r(_,S.props),I.ref=ea(E,_,S),I.return=E,I):(I=lc(S.type,S.key,S.props,null,E.mode,I),I.ref=ea(E,_,S),I.return=E,I)}function p(E,_,S,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Sf(S,E.mode,I),_.return=E,_):(_=r(_,S.children||[]),_.return=E,_)}function m(E,_,S,I,M){return _===null||_.tag!==7?(_=qr(S,E.mode,I,M),_.return=E,_):(_=r(_,S),_.return=E,_)}function v(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xf(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xu:return S=lc(_.type,_.key,_.props,null,E.mode,S),S.ref=ea(E,null,_),S.return=E,S;case bs:return _=Sf(_,E.mode,S),_.return=E,_;case Fi:var I=_._init;return v(E,I(_._payload),S)}if(ca(_)||Go(_))return _=qr(_,E.mode,S,null),_.return=E,_;Lu(E,_)}return null}function y(E,_,S,I){var M=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:c(E,_,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xu:return S.key===M?h(E,_,S,I):null;case bs:return S.key===M?p(E,_,S,I):null;case Fi:return M=S._init,y(E,_,M(S._payload),I)}if(ca(S)||Go(S))return M!==null?null:m(E,_,S,I,null);Lu(E,S)}return null}function x(E,_,S,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(S)||null,c(_,E,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case xu:return E=E.get(I.key===null?S:I.key)||null,h(_,E,I,M);case bs:return E=E.get(I.key===null?S:I.key)||null,p(_,E,I,M);case Fi:var D=I._init;return x(E,_,S,D(I._payload),M)}if(ca(I)||Go(I))return E=E.get(S)||null,m(_,E,I,M,null);Lu(_,I)}return null}function C(E,_,S,I){for(var M=null,D=null,R=_,j=_=0,J=null;R!==null&&j<S.length;j++){R.index>j?(J=R,R=null):J=R.sibling;var X=y(E,R,S[j],I);if(X===null){R===null&&(R=J);break}t&&R&&X.alternate===null&&e(E,R),_=o(X,_,j),D===null?M=X:D.sibling=X,D=X,R=J}if(j===S.length)return n(E,R),He&&Pr(E,j),M;if(R===null){for(;j<S.length;j++)R=v(E,S[j],I),R!==null&&(_=o(R,_,j),D===null?M=R:D.sibling=R,D=R);return He&&Pr(E,j),M}for(R=i(E,R);j<S.length;j++)J=x(R,E,j,S[j],I),J!==null&&(t&&J.alternate!==null&&R.delete(J.key===null?j:J.key),_=o(J,_,j),D===null?M=J:D.sibling=J,D=J);return t&&R.forEach(function(re){return e(E,re)}),He&&Pr(E,j),M}function k(E,_,S,I){var M=Go(S);if(typeof M!="function")throw Error(V(150));if(S=M.call(S),S==null)throw Error(V(151));for(var D=M=null,R=_,j=_=0,J=null,X=S.next();R!==null&&!X.done;j++,X=S.next()){R.index>j?(J=R,R=null):J=R.sibling;var re=y(E,R,X.value,I);if(re===null){R===null&&(R=J);break}t&&R&&re.alternate===null&&e(E,R),_=o(re,_,j),D===null?M=re:D.sibling=re,D=re,R=J}if(X.done)return n(E,R),He&&Pr(E,j),M;if(R===null){for(;!X.done;j++,X=S.next())X=v(E,X.value,I),X!==null&&(_=o(X,_,j),D===null?M=X:D.sibling=X,D=X);return He&&Pr(E,j),M}for(R=i(E,R);!X.done;j++,X=S.next())X=x(R,E,j,X.value,I),X!==null&&(t&&X.alternate!==null&&R.delete(X.key===null?j:X.key),_=o(X,_,j),D===null?M=X:D.sibling=X,D=X);return t&&R.forEach(function(B){return e(E,B)}),He&&Pr(E,j),M}function N(E,_,S,I){if(typeof S=="object"&&S!==null&&S.type===Is&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xu:e:{for(var M=S.key,D=_;D!==null;){if(D.key===M){if(M=S.type,M===Is){if(D.tag===7){n(E,D.sibling),_=r(D,S.props.children),_.return=E,E=_;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fi&&Q_(M)===D.type){n(E,D.sibling),_=r(D,S.props),_.ref=ea(E,D,S),_.return=E,E=_;break e}n(E,D);break}else e(E,D);D=D.sibling}S.type===Is?(_=qr(S.props.children,E.mode,I,S.key),_.return=E,E=_):(I=lc(S.type,S.key,S.props,null,E.mode,I),I.ref=ea(E,_,S),I.return=E,E=I)}return a(E);case bs:e:{for(D=S.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=r(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Sf(S,E.mode,I),_.return=E,E=_}return a(E);case Fi:return D=S._init,N(E,_,D(S._payload),I)}if(ca(S))return C(E,_,S,I);if(Go(S))return k(E,_,S,I);Lu(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=r(_,S),_.return=E,E=_):(n(E,_),_=xf(S,E.mode,I),_.return=E,E=_),a(E)):n(E,_)}return N}var ao=z1(!0),U1=z1(!1),Lc=_r(null),Ac=null,js=null,sg=null;function og(){sg=js=Ac=null}function ag(t){var e=Lc.current;Ve(Lc),t._currentValue=e}function Np(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Ac=t,sg=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(sg!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(Ac===null)throw Error(V(308));js=t,Ac.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Rr=null;function lg(t){Rr===null?Rr=[t]:Rr.push(t)}function $1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,lg(e)):(n.next=r.next,r.next=n),e.interleaved=n,_i(t,i)}function _i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zi=!1;function ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_i(t,n)}return r=i.interleaved,r===null?(e.next=e,lg(i)):(e.next=r.next,r.next=e),i.interleaved=e,_i(t,n)}function nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qm(t,n)}}function G_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,i){var r=t.updateQueue;zi=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,p=h.next;h.next=null,a===null?o=p:a.next=p,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=p:c.next=p,m.lastBaseUpdate=h))}if(o!==null){var v=r.baseState;a=0,m=p=h=null,c=o;do{var y=c.lane,x=c.eventTime;if((i&y)===y){m!==null&&(m=m.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,k=c;switch(y=e,x=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){v=C.call(x,v,y);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,y=typeof C=="function"?C.call(x,v,y):C,y==null)break e;v=Ge({},v,y);break e;case 2:zi=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[c]:y.push(c))}else x={eventTime:x,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(p=m=x,h=v):m=m.next=x,a|=y;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;y=c,c=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(m===null&&(h=v),r.baseState=h,r.firstBaseUpdate=p,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Zr|=a,t.lanes=a,t.memoizedState=v}}function Z_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(V(191,r));r.call(i)}}}var Cl={},Yn=_r(Cl),Va=_r(Cl),qa=_r(Cl);function jr(t){if(t===Cl)throw Error(V(174));return t}function cg(t,e){switch(ze(qa,e),ze(Va,t),ze(Yn,Cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ap(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ap(e,t)}Ve(Yn),ze(Yn,e)}function lo(){Ve(Yn),Ve(Va),Ve(qa)}function V1(t){jr(qa.current);var e=jr(Yn.current),n=ap(e,t.type);e!==n&&(ze(Va,t),ze(Yn,n))}function hg(t){Va.current===t&&(Ve(Yn),Ve(Va))}var Ke=_r(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mf=[];function dg(){for(var t=0;t<mf.length;t++)mf[t]._workInProgressVersionPrimary=null;mf.length=0}var ic=Pi.ReactCurrentDispatcher,gf=Pi.ReactCurrentBatchConfig,Gr=0,Qe=null,pt=null,_t=null,Rc=!1,Ea=!1,Ha=0,l2=0;function Lt(){throw Error(V(321))}function fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function pg(t,e,n,i,r,o){if(Gr=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?d2:f2,t=n(i,r),Ea){o=0;do{if(Ea=!1,Ha=0,25<=o)throw Error(V(301));o+=1,_t=pt=null,e.updateQueue=null,ic.current=p2,t=n(i,r)}while(Ea)}if(ic.current=jc,e=pt!==null&&pt.next!==null,Gr=0,_t=pt=Qe=null,Rc=!1,e)throw Error(V(300));return t}function mg(){var t=Ha!==0;return Ha=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Qe.memoizedState=_t=t:_t=_t.next=t,_t}function Tn(){if(pt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=_t===null?Qe.memoizedState:_t.next;if(e!==null)_t=e,pt=t;else{if(t===null)throw Error(V(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Qe.memoizedState=_t=t:_t=_t.next=t}return _t}function Wa(t,e){return typeof e=="function"?e(t):e}function vf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=pt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=a=null,h=null,p=o;do{var m=p.lane;if((Gr&m)===m)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var v={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(c=h=v,a=i):h=h.next=v,Qe.lanes|=m,Zr|=m}p=p.next}while(p!==null&&p!==o);h===null?a=i:h.next=c,Rn(i,e.memoizedState)||(en=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Qe.lanes|=o,Zr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Rn(o,e.memoizedState)||(en=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function q1(){}function H1(t,e){var n=Qe,i=Tn(),r=e(),o=!Rn(i.memoizedState,r);if(o&&(i.memoizedState=r,en=!0),i=i.queue,gg(Q1.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Ka(9,K1.bind(null,n,i,r,e),void 0,null),wt===null)throw Error(V(349));Gr&30||W1(n,e,r)}return r}function W1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function K1(t,e,n,i){e.value=n,e.getSnapshot=i,G1(e)&&Z1(t)}function Q1(t,e,n){return n(function(){G1(e)&&Z1(t)})}function G1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function Z1(t){var e=_i(t,1);e!==null&&Dn(e,t,1,-1)}function Y_(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=h2.bind(null,Qe,t),[e.memoizedState,t]}function Ka(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Y1(){return Tn().memoizedState}function rc(t,e,n,i){var r=Hn();Qe.flags|=t,r.memoizedState=Ka(1|e,n,void 0,i===void 0?null:i)}function Eh(t,e,n,i){var r=Tn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var a=pt.memoizedState;if(o=a.destroy,i!==null&&fg(i,a.deps)){r.memoizedState=Ka(e,n,o,i);return}}Qe.flags|=t,r.memoizedState=Ka(1|e,n,o,i)}function X_(t,e){return rc(8390656,8,t,e)}function gg(t,e){return Eh(2048,8,t,e)}function X1(t,e){return Eh(4,2,t,e)}function J1(t,e){return Eh(4,4,t,e)}function eS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tS(t,e,n){return n=n!=null?n.concat([t]):null,Eh(4,4,eS.bind(null,e,t),n)}function vg(){}function nS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function iS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function rS(t,e,n){return Gr&21?(Rn(n,e)||(n=u1(),Qe.lanes|=n,Zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function u2(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=gf.transition;gf.transition={};try{t(!1),e()}finally{Oe=n,gf.transition=i}}function sS(){return Tn().memoizedState}function c2(t,e,n){var i=ir(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},oS(t))aS(e,n);else if(n=$1(t,e,n,i),n!==null){var r=Kt();Dn(n,t,i,r),lS(n,e,i)}}function h2(t,e,n){var i=ir(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(oS(t))aS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(r.hasEagerState=!0,r.eagerState=c,Rn(c,a)){var h=e.interleaved;h===null?(r.next=r,lg(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=$1(t,e,r,i),n!==null&&(r=Kt(),Dn(n,t,i,r),lS(n,e,i))}}function oS(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function aS(t,e){Ea=Rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qm(t,n)}}var jc={readContext:Cn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},d2={readContext:Cn,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:X_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rc(4194308,4,eS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return rc(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Hn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=c2.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:Y_,useDebugValue:vg,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=Y_(!1),e=t[0];return t=u2.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=Hn();if(He){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),wt===null)throw Error(V(349));Gr&30||W1(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,X_(Q1.bind(null,i,o,t),[t]),i.flags|=2048,Ka(9,K1.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Hn(),e=wt.identifierPrefix;if(He){var n=hi,i=ci;n=(i&~(1<<32-An(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=l2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f2={readContext:Cn,useCallback:nS,useContext:Cn,useEffect:gg,useImperativeHandle:tS,useInsertionEffect:X1,useLayoutEffect:J1,useMemo:iS,useReducer:vf,useRef:Y1,useState:function(){return vf(Wa)},useDebugValue:vg,useDeferredValue:function(t){var e=Tn();return rS(e,pt.memoizedState,t)},useTransition:function(){var t=vf(Wa)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:q1,useSyncExternalStore:H1,useId:sS,unstable_isNewReconciler:!1},p2={readContext:Cn,useCallback:nS,useContext:Cn,useEffect:gg,useImperativeHandle:tS,useInsertionEffect:X1,useLayoutEffect:J1,useMemo:iS,useReducer:yf,useRef:Y1,useState:function(){return yf(Wa)},useDebugValue:vg,useDeferredValue:function(t){var e=Tn();return pt===null?e.memoizedState=t:rS(e,pt.memoizedState,t)},useTransition:function(){var t=yf(Wa)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:q1,useSyncExternalStore:H1,useId:sS,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kh={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Kt(),r=ir(t),o=gi(i,r);o.payload=e,n!=null&&(o.callback=n),e=tr(t,o,r),e!==null&&(Dn(e,t,r,i),nc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Kt(),r=ir(t),o=gi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=tr(t,o,r),e!==null&&(Dn(e,t,r,i),nc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),i=ir(t),r=gi(n,i);r.tag=2,e!=null&&(r.callback=e),e=tr(t,r,i),e!==null&&(Dn(e,t,i,n),nc(e,t,i))}};function J_(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!za(n,i)||!za(r,o):!0}function uS(t,e,n){var i=!1,r=dr,o=e.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(r=nn(e)?Kr:$t.current,i=e.contextTypes,o=(i=i!=null)?so(t,r):dr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function e0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kh.enqueueReplaceState(e,e.state,null)}function Ip(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},ug(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Cn(o):(o=nn(e)?Kr:$t.current,r.context=so(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(bp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&kh.enqueueReplaceState(r,r.state,null),Dc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function uo(t,e){try{var n="",i=e;do n+=Bb(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function _f(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var m2=typeof WeakMap=="function"?WeakMap:Map;function cS(t,e,n){n=gi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){zc||(zc=!0,Up=i),Pp(t,e)},n}function hS(t,e,n){n=gi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Pp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Pp(t,e),typeof i!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function t0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new m2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=I2.bind(null,t,e,n),e.then(t,t))}function n0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gi(-1,1),e.tag=2,tr(n,e,1))),n.lanes|=1),t)}var g2=Pi.ReactCurrentOwner,en=!1;function Ht(t,e,n,i){e.child=t===null?U1(e,null,n,i):ao(e,t.child,n,i)}function r0(t,e,n,i,r){n=n.render;var o=e.ref;return Qs(e,r),i=pg(t,e,n,i,o,r),n=mg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,wi(t,e,r)):(He&&n&&ng(e),e.flags|=1,Ht(t,e,i,r),e.child)}function s0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Cg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,dS(t,e,o,i,r)):(t=lc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:za,n(a,i)&&t.ref===e.ref)return wi(t,e,r)}return e.flags|=1,t=rr(o,i),t.ref=e.ref,t.return=e,e.child=t}function dS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(za(o,i)&&t.ref===e.ref)if(en=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,wi(t,e,r)}return Mp(t,e,n,i,r)}function fS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(zs,an),an|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(zs,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ze(zs,an),an|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ze(zs,an),an|=i;return Ht(t,e,r,n),e.child}function pS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mp(t,e,n,i,r){var o=nn(n)?Kr:$t.current;return o=so(e,o),Qs(e,r),n=pg(t,e,n,i,o,r),i=mg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,wi(t,e,r)):(He&&i&&ng(e),e.flags|=1,Ht(t,e,n,r),e.child)}function o0(t,e,n,i,r){if(nn(n)){var o=!0;Ic(e)}else o=!1;if(Qs(e,r),e.stateNode===null)sc(t,e),uS(e,n,i),Ip(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Cn(p):(p=nn(n)?Kr:$t.current,p=so(e,p));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==i||h!==p)&&e0(e,a,i,p),zi=!1;var y=e.memoizedState;a.state=y,Dc(e,i,a,r),h=e.memoizedState,c!==i||y!==h||tn.current||zi?(typeof m=="function"&&(bp(e,n,m,i),h=e.memoizedState),(c=zi||J_(e,n,c,i,y,h,p))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=p,i=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,B1(t,e),c=e.memoizedProps,p=e.type===e.elementType?c:Pn(e.type,c),a.props=p,v=e.pendingProps,y=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Cn(h):(h=nn(n)?Kr:$t.current,h=so(e,h));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==v||y!==h)&&e0(e,a,i,h),zi=!1,y=e.memoizedState,a.state=y,Dc(e,i,a,r);var C=e.memoizedState;c!==v||y!==C||tn.current||zi?(typeof x=="function"&&(bp(e,n,x,i),C=e.memoizedState),(p=zi||J_(e,n,p,i,y,C,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,C,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,C,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),a.props=i,a.state=C,a.context=h,i=p):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return Lp(t,e,n,i,o,r)}function Lp(t,e,n,i,r,o){pS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&H_(e,n,!1),wi(t,e,o);i=e.stateNode,g2.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ao(e,t.child,null,o),e.child=ao(e,null,c,o)):Ht(t,e,c,o),e.memoizedState=i.state,r&&H_(e,n,!0),e.child}function mS(t){var e=t.stateNode;e.pendingContext?q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q_(t,e.context,!1),cg(t,e.containerInfo)}function a0(t,e,n,i,r){return oo(),rg(r),e.flags|=256,Ht(t,e,n,i),e.child}var Ap={dehydrated:null,treeContext:null,retryLane:0};function Dp(t){return{baseLanes:t,cachePool:null,transitions:null}}function gS(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ze(Ke,r&1),t===null)return Tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Nh(a,i,0,null),t=qr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Dp(n),e.memoizedState=Ap,t):yg(e,a));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return v2(t,e,a,i,c,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=rr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=rr(c,o):(o=qr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Dp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Ap,i}return o=t.child,t=o.sibling,i=rr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function yg(t,e){return e=Nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Au(t,e,n,i){return i!==null&&rg(i),ao(e,t.child,null,n),t=yg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v2(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=_f(Error(V(422))),Au(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Nh({mode:"visible",children:i.children},r,0,null),o=qr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ao(e,t.child,null,a),e.child.memoizedState=Dp(a),e.memoizedState=Ap,o);if(!(e.mode&1))return Au(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(V(419)),i=_f(o,i,void 0),Au(t,e,a,i)}if(c=(a&t.childLanes)!==0,en||c){if(i=wt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,_i(t,r),Dn(i,t,r,-1))}return kg(),i=_f(Error(V(421))),Au(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=P2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ln=er(r.nextSibling),cn=e,He=!0,Ln=null,t!==null&&(wn[xn++]=ci,wn[xn++]=hi,wn[xn++]=Qr,ci=t.id,hi=t.overflow,Qr=e),e=yg(e,i.children),e.flags|=4096,e)}function l0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Np(t.return,e,n)}function wf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function vS(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ht(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l0(t,n,e);else if(t.tag===19)l0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),wf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Oc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}wf(e,!0,n,null,o);break;case"together":wf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y2(t,e,n){switch(e.tag){case 3:mS(e),oo();break;case 5:V1(e);break;case 1:nn(e.type)&&Ic(e);break;case 4:cg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ze(Lc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?gS(t,e,n):(ze(Ke,Ke.current&1),t=wi(t,e,n),t!==null?t.sibling:null);ze(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return vS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,fS(t,e,n)}return wi(t,e,n)}var yS,Op,_S,wS;yS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Op=function(){};_S=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,jr(Yn.current);var o=null;switch(n){case"input":r=ip(t,r),i=ip(t,i),o=[];break;case"select":r=Ge({},r,{value:void 0}),i=Ge({},i,{value:void 0}),o=[];break;case"textarea":r=op(t,r),i=op(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Nc)}lp(n,i);var a;n=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var c=r[p];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(La.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var h=i[p];if(c=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&h!==c&&(h!=null||c!=null))if(p==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(La.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Ue("scroll",t),o||c===h||(o=[])):(o=o||[]).push(p,h))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};wS=function(t,e,n,i){n!==i&&(e.flags|=4)};function ta(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function _2(t,e,n){var i=e.pendingProps;switch(ig(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return nn(e.type)&&bc(),At(e),null;case 3:return i=e.stateNode,lo(),Ve(tn),Ve($t),dg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Mu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(Vp(Ln),Ln=null))),Op(t,e),At(e),null;case 5:hg(e);var r=jr(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)_S(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(V(166));return At(e),null}if(t=jr(Yn.current),Mu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Wn]=e,i[Ba]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(r=0;r<da.length;r++)Ue(da[r],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":v_(i,o),Ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",i);break;case"textarea":__(i,o),Ue("invalid",i)}lp(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&Pu(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Pu(i.textContent,c,t),r=["children",""+c]):La.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ue("scroll",i)}switch(n){case"input":Su(i),y_(i,o,!0);break;case"textarea":Su(i),w_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Nc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Wn]=e,t[Ba]=i,yS(t,e,!1,!1),e.stateNode=t;e:{switch(a=up(n,i),n){case"dialog":Ue("cancel",t),Ue("close",t),r=i;break;case"iframe":case"object":case"embed":Ue("load",t),r=i;break;case"video":case"audio":for(r=0;r<da.length;r++)Ue(da[r],t);r=i;break;case"source":Ue("error",t),r=i;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),r=i;break;case"details":Ue("toggle",t),r=i;break;case"input":v_(t,i),r=ip(t,i),Ue("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ge({},i,{value:void 0}),Ue("invalid",t);break;case"textarea":__(t,i),r=op(t,i),Ue("invalid",t);break;default:r=i}lp(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?Yx(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Gx(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Aa(t,h):typeof h=="number"&&Aa(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(La.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ue("scroll",t):h!=null&&Bm(t,o,h,a))}switch(n){case"input":Su(t),y_(t,i,!1);break;case"textarea":Su(t),w_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+hr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?qs(t,!!i.multiple,o,!1):i.defaultValue!=null&&qs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Nc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)wS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(V(166));if(n=jr(qa.current),jr(Yn.current),Mu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Wn]=e,(o=i.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Pu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pu(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Wn]=e,e.stateNode=i}return At(e),null;case 13:if(Ve(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&ln!==null&&e.mode&1&&!(e.flags&128))F1(),oo(),e.flags|=98560,o=!1;else if(o=Mu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(V(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(V(317));o[Wn]=e}else oo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),o=!1}else Ln!==null&&(Vp(Ln),Ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?mt===0&&(mt=3):kg())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return lo(),Op(t,e),t===null&&Ua(e.stateNode.containerInfo),At(e),null;case 10:return ag(e.type._context),At(e),null;case 17:return nn(e.type)&&bc(),At(e),null;case 19:if(Ve(Ke),o=e.memoizedState,o===null)return At(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)ta(o,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oc(t),a!==null){for(e.flags|=128,ta(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&rt()>co&&(e.flags|=128,i=!0,ta(o,!1),e.lanes=4194304)}else{if(!i)if(t=Oc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ta(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!He)return At(e),null}else 2*rt()-o.renderingStartTime>co&&n!==1073741824&&(e.flags|=128,i=!0,ta(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=rt(),e.sibling=null,n=Ke.current,ze(Ke,i?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Eg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?an&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function w2(t,e){switch(ig(e),e.tag){case 1:return nn(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),Ve(tn),Ve($t),dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hg(e),null;case 13:if(Ve(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));oo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Ke),null;case 4:return lo(),null;case 10:return ag(e.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var Du=!1,Ot=!1,x2=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function Rp(t,e,n){try{n()}catch(i){Je(t,e,i)}}var u0=!1;function S2(t,e){if(_p=kc,t=C1(),tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,p=0,m=0,v=t,y=null;t:for(;;){for(var x;v!==n||r!==0&&v.nodeType!==3||(c=a+r),v!==o||i!==0&&v.nodeType!==3||(h=a+i),v.nodeType===3&&(a+=v.nodeValue.length),(x=v.firstChild)!==null;)y=v,v=x;for(;;){if(v===t)break t;if(y===n&&++p===r&&(c=a),y===o&&++m===i&&(h=a),(x=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=x}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(wp={focusedElem:t,selectionRange:n},kc=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,N=C.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:Pn(e.type,k),N);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(I){Je(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return C=u0,u0=!1,C}function ka(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Rp(e,n,o)}r=r.next}while(r!==i)}}function Ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function jp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xS(t){var e=t.alternate;e!==null&&(t.alternate=null,xS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Ba],delete e[Ep],delete e[r2],delete e[s2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SS(t){return t.tag===5||t.tag===3||t.tag===4}function c0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nc));else if(i!==4&&(t=t.child,t!==null))for(Fp(t,e,n),t=t.sibling;t!==null;)Fp(t,e,n),t=t.sibling}function zp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(zp(t,e,n),t=t.sibling;t!==null;)zp(t,e,n),t=t.sibling}var kt=null,Mn=!1;function Oi(t,e,n){for(n=n.child;n!==null;)ES(t,e,n),n=n.sibling}function ES(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:Ot||Fs(n,e);case 6:var i=kt,r=Mn;kt=null,Oi(t,e,n),kt=i,Mn=r,kt!==null&&(Mn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Mn?(t=kt,n=n.stateNode,t.nodeType===8?ff(t.parentNode,n):t.nodeType===1&&ff(t,n),ja(t)):ff(kt,n.stateNode));break;case 4:i=kt,r=Mn,kt=n.stateNode.containerInfo,Mn=!0,Oi(t,e,n),kt=i,Mn=r;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Rp(n,e,a),r=r.next}while(r!==i)}Oi(t,e,n);break;case 1:if(!Ot&&(Fs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Je(n,e,c)}Oi(t,e,n);break;case 21:Oi(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,Oi(t,e,n),Ot=i):Oi(t,e,n);break;default:Oi(t,e,n)}}function h0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x2),e.forEach(function(i){var r=M2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Mn=!1;break e;case 3:kt=c.stateNode.containerInfo,Mn=!0;break e;case 4:kt=c.stateNode.containerInfo,Mn=!0;break e}c=c.return}if(kt===null)throw Error(V(160));ES(o,a,r),kt=null,Mn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(p){Je(r,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kS(e,t),e=e.sibling}function kS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),qn(t),i&4){try{ka(3,t,t.return),Ch(3,t)}catch(k){Je(t,t.return,k)}try{ka(5,t,t.return)}catch(k){Je(t,t.return,k)}}break;case 1:In(e,t),qn(t),i&512&&n!==null&&Fs(n,n.return);break;case 5:if(In(e,t),qn(t),i&512&&n!==null&&Fs(n,n.return),t.flags&32){var r=t.stateNode;try{Aa(r,"")}catch(k){Je(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Wx(r,o),up(c,a);var p=up(c,o);for(a=0;a<h.length;a+=2){var m=h[a],v=h[a+1];m==="style"?Yx(r,v):m==="dangerouslySetInnerHTML"?Gx(r,v):m==="children"?Aa(r,v):Bm(r,m,v,p)}switch(c){case"input":rp(r,o);break;case"textarea":Kx(r,o);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?qs(r,!!o.multiple,x,!1):y!==!!o.multiple&&(o.defaultValue!=null?qs(r,!!o.multiple,o.defaultValue,!0):qs(r,!!o.multiple,o.multiple?[]:"",!1))}r[Ba]=o}catch(k){Je(t,t.return,k)}}break;case 6:if(In(e,t),qn(t),i&4){if(t.stateNode===null)throw Error(V(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){Je(t,t.return,k)}}break;case 3:if(In(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ja(e.containerInfo)}catch(k){Je(t,t.return,k)}break;case 4:In(e,t),qn(t);break;case 13:In(e,t),qn(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(xg=rt())),i&4&&h0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(p=Ot)||m,In(e,t),Ot=p):In(e,t),qn(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!m&&t.mode&1)for(Z=t,m=t.child;m!==null;){for(v=Z=m;Z!==null;){switch(y=Z,x=y.child,y.tag){case 0:case 11:case 14:case 15:ka(4,y,y.return);break;case 1:Fs(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){Je(i,n,k)}}break;case 5:Fs(y,y.return);break;case 22:if(y.memoizedState!==null){f0(v);continue}}x!==null?(x.return=y,Z=x):f0(v)}m=m.sibling}e:for(m=null,v=t;;){if(v.tag===5){if(m===null){m=v;try{r=v.stateNode,p?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=v.stateNode,h=v.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=Zx("display",a))}catch(k){Je(t,t.return,k)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(k){Je(t,t.return,k)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:In(e,t),qn(t),i&4&&h0(t);break;case 21:break;default:In(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SS(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Aa(r,""),i.flags&=-33);var o=c0(t);zp(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,c=c0(t);Fp(t,c,a);break;default:throw Error(V(161))}}catch(h){Je(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E2(t,e,n){Z=t,CS(t)}function CS(t,e,n){for(var i=(t.mode&1)!==0;Z!==null;){var r=Z,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Du;if(!a){var c=r.alternate,h=c!==null&&c.memoizedState!==null||Ot;c=Du;var p=Ot;if(Du=a,(Ot=h)&&!p)for(Z=r;Z!==null;)a=Z,h=a.child,a.tag===22&&a.memoizedState!==null?p0(r):h!==null?(h.return=a,Z=h):p0(r);for(;o!==null;)Z=o,CS(o),o=o.sibling;Z=r,Du=c,Ot=p}d0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Z=o):d0(t)}}function d0(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Ch(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Z_(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Z_(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&ja(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Ot||e.flags&512&&jp(e)}catch(y){Je(e,e.return,y)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function f0(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function p0(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ch(4,e)}catch(h){Je(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){Je(e,r,h)}}var o=e.return;try{jp(e)}catch(h){Je(e,o,h)}break;case 5:var a=e.return;try{jp(e)}catch(h){Je(e,a,h)}}}catch(h){Je(e,e.return,h)}if(e===t){Z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Z=c;break}Z=e.return}}var k2=Math.ceil,Fc=Pi.ReactCurrentDispatcher,_g=Pi.ReactCurrentOwner,kn=Pi.ReactCurrentBatchConfig,ke=0,wt=null,ut=null,Nt=0,an=0,zs=_r(0),mt=0,Qa=null,Zr=0,Th=0,wg=0,Ca=null,Xt=null,xg=0,co=1/0,li=null,zc=!1,Up=null,nr=null,Ou=!1,Qi=null,Uc=0,Ta=0,$p=null,oc=-1,ac=0;function Kt(){return ke&6?rt():oc!==-1?oc:oc=rt()}function ir(t){return t.mode&1?ke&2&&Nt!==0?Nt&-Nt:a2.transition!==null?(ac===0&&(ac=u1()),ac):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:g1(t.type)),t):1}function Dn(t,e,n,i){if(50<Ta)throw Ta=0,$p=null,Error(V(185));Sl(t,n,i),(!(ke&2)||t!==wt)&&(t===wt&&(!(ke&2)&&(Th|=n),mt===4&&Bi(t,Nt)),rn(t,i),n===1&&ke===0&&!(e.mode&1)&&(co=rt()+500,Sh&&wr()))}function rn(t,e){var n=t.callbackNode;aI(t,e);var i=Ec(t,t===wt?Nt:0);if(i===0)n!==null&&E_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&E_(n),e===1)t.tag===0?o2(m0.bind(null,t)):O1(m0.bind(null,t)),n2(function(){!(ke&6)&&wr()}),n=null;else{switch(c1(i)){case 1:n=Km;break;case 4:n=a1;break;case 16:n=Sc;break;case 536870912:n=l1;break;default:n=Sc}n=AS(n,TS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TS(t,e){if(oc=-1,ac=0,ke&6)throw Error(V(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var i=Ec(t,t===wt?Nt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=$c(t,i);else{e=i;var r=ke;ke|=2;var o=bS();(wt!==t||Nt!==e)&&(li=null,co=rt()+500,Vr(t,e));do try{N2();break}catch(c){NS(t,c)}while(!0);og(),Fc.current=o,ke=r,ut!==null?e=0:(wt=null,Nt=0,e=mt)}if(e!==0){if(e===2&&(r=pp(t),r!==0&&(i=r,e=Bp(t,r))),e===1)throw n=Qa,Vr(t,0),Bi(t,i),rn(t,rt()),n;if(e===6)Bi(t,i);else{if(r=t.current.alternate,!(i&30)&&!C2(r)&&(e=$c(t,i),e===2&&(o=pp(t),o!==0&&(i=o,e=Bp(t,o))),e===1))throw n=Qa,Vr(t,0),Bi(t,i),rn(t,rt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(V(345));case 2:Mr(t,Xt,li);break;case 3:if(Bi(t,i),(i&130023424)===i&&(e=xg+500-rt(),10<e)){if(Ec(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Kt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Sp(Mr.bind(null,t,Xt,li),e);break}Mr(t,Xt,li);break;case 4:if(Bi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-An(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*k2(i/1960))-i,10<i){t.timeoutHandle=Sp(Mr.bind(null,t,Xt,li),i);break}Mr(t,Xt,li);break;case 5:Mr(t,Xt,li);break;default:throw Error(V(329))}}}return rn(t,rt()),t.callbackNode===n?TS.bind(null,t):null}function Bp(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Vp(e)),t}function Vp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function C2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Rn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bi(t,e){for(e&=~wg,e&=~Th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-An(e),i=1<<n;t[n]=-1,e&=~i}}function m0(t){if(ke&6)throw Error(V(327));Gs();var e=Ec(t,0);if(!(e&1))return rn(t,rt()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var i=pp(t);i!==0&&(e=i,n=Bp(t,i))}if(n===1)throw n=Qa,Vr(t,0),Bi(t,e),rn(t,rt()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,Xt,li),rn(t,rt()),null}function Sg(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(co=rt()+500,Sh&&wr())}}function Yr(t){Qi!==null&&Qi.tag===0&&!(ke&6)&&Gs();var e=ke;ke|=1;var n=kn.transition,i=Oe;try{if(kn.transition=null,Oe=1,t)return t()}finally{Oe=i,kn.transition=n,ke=e,!(ke&6)&&wr()}}function Eg(){an=zs.current,Ve(zs)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,t2(n)),ut!==null)for(n=ut.return;n!==null;){var i=n;switch(ig(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bc();break;case 3:lo(),Ve(tn),Ve($t),dg();break;case 5:hg(i);break;case 4:lo();break;case 13:Ve(Ke);break;case 19:Ve(Ke);break;case 10:ag(i.type._context);break;case 22:case 23:Eg()}n=n.return}if(wt=t,ut=t=rr(t.current,null),Nt=an=e,mt=0,Qa=null,wg=Th=Zr=0,Xt=Ca=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Rr=null}return t}function NS(t,e){do{var n=ut;try{if(og(),ic.current=jc,Rc){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Rc=!1}if(Gr=0,_t=pt=Qe=null,Ea=!1,Ha=0,_g.current=null,n===null||n.return===null){mt=1,Qa=e,ut=null;break}e:{var o=t,a=n.return,c=n,h=e;if(e=Nt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,m=c,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=n0(a);if(x!==null){x.flags&=-257,i0(x,a,c,o,e),x.mode&1&&t0(o,p,e),e=x,h=p;var C=e.updateQueue;if(C===null){var k=new Set;k.add(h),e.updateQueue=k}else C.add(h);break e}else{if(!(e&1)){t0(o,p,e),kg();break e}h=Error(V(426))}}else if(He&&c.mode&1){var N=n0(a);if(N!==null){!(N.flags&65536)&&(N.flags|=256),i0(N,a,c,o,e),rg(uo(h,c));break e}}o=h=uo(h,c),mt!==4&&(mt=2),Ca===null?Ca=[o]:Ca.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=cS(o,h,e);G_(o,E);break e;case 1:c=h;var _=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(nr===null||!nr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=hS(o,c,e);G_(o,I);break e}}o=o.return}while(o!==null)}PS(n)}catch(M){e=M,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function bS(){var t=Fc.current;return Fc.current=jc,t===null?jc:t}function kg(){(mt===0||mt===3||mt===2)&&(mt=4),wt===null||!(Zr&268435455)&&!(Th&268435455)||Bi(wt,Nt)}function $c(t,e){var n=ke;ke|=2;var i=bS();(wt!==t||Nt!==e)&&(li=null,Vr(t,e));do try{T2();break}catch(r){NS(t,r)}while(!0);if(og(),ke=n,Fc.current=i,ut!==null)throw Error(V(261));return wt=null,Nt=0,mt}function T2(){for(;ut!==null;)IS(ut)}function N2(){for(;ut!==null&&!Xb();)IS(ut)}function IS(t){var e=LS(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?PS(t):ut=e,_g.current=null}function PS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w2(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ut=null;return}}else if(n=_2(n,e,an),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);mt===0&&(mt=5)}function Mr(t,e,n){var i=Oe,r=kn.transition;try{kn.transition=null,Oe=1,b2(t,e,n,i)}finally{kn.transition=r,Oe=i}return null}function b2(t,e,n,i){do Gs();while(Qi!==null);if(ke&6)throw Error(V(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(lI(t,o),t===wt&&(ut=wt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ou||(Ou=!0,AS(Sc,function(){return Gs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var a=Oe;Oe=1;var c=ke;ke|=4,_g.current=null,S2(t,n),kS(n,t),QI(wp),kc=!!_p,wp=_p=null,t.current=n,E2(n),Jb(),ke=c,Oe=a,kn.transition=o}else t.current=n;if(Ou&&(Ou=!1,Qi=t,Uc=r),o=t.pendingLanes,o===0&&(nr=null),nI(n.stateNode),rn(t,rt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(zc)throw zc=!1,t=Up,Up=null,t;return Uc&1&&t.tag!==0&&Gs(),o=t.pendingLanes,o&1?t===$p?Ta++:(Ta=0,$p=t):Ta=0,wr(),null}function Gs(){if(Qi!==null){var t=c1(Uc),e=kn.transition,n=Oe;try{if(kn.transition=null,Oe=16>t?16:t,Qi===null)var i=!1;else{if(t=Qi,Qi=null,Uc=0,ke&6)throw Error(V(331));var r=ke;for(ke|=4,Z=t.current;Z!==null;){var o=Z,a=o.child;if(Z.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var p=c[h];for(Z=p;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:ka(8,m,o)}var v=m.child;if(v!==null)v.return=m,Z=v;else for(;Z!==null;){m=Z;var y=m.sibling,x=m.return;if(xS(m),m===p){Z=null;break}if(y!==null){y.return=x,Z=y;break}Z=x}}}var C=o.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}Z=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Z=a;else e:for(;Z!==null;){if(o=Z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ka(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,Z=E;break e}Z=o.return}}var _=t.current;for(Z=_;Z!==null;){a=Z;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,Z=S;else e:for(a=_;Z!==null;){if(c=Z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ch(9,c)}}catch(M){Je(c,c.return,M)}if(c===a){Z=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,Z=I;break e}Z=c.return}}if(ke=r,wr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(vh,t)}catch{}i=!0}return i}finally{Oe=n,kn.transition=e}}return!1}function g0(t,e,n){e=uo(n,e),e=cS(t,e,1),t=tr(t,e,1),e=Kt(),t!==null&&(Sl(t,1,e),rn(t,e))}function Je(t,e,n){if(t.tag===3)g0(t,t,n);else for(;e!==null;){if(e.tag===3){g0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nr===null||!nr.has(i))){t=uo(n,t),t=hS(e,t,1),e=tr(e,t,1),t=Kt(),e!==null&&(Sl(e,1,t),rn(e,t));break}}e=e.return}}function I2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Nt&n)===n&&(mt===4||mt===3&&(Nt&130023424)===Nt&&500>rt()-xg?Vr(t,0):wg|=n),rn(t,e)}function MS(t,e){e===0&&(t.mode&1?(e=Cu,Cu<<=1,!(Cu&130023424)&&(Cu=4194304)):e=1);var n=Kt();t=_i(t,e),t!==null&&(Sl(t,e,n),rn(t,n))}function P2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),MS(t,n)}function M2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(e),MS(t,n)}var LS;LS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,y2(t,e,n);en=!!(t.flags&131072)}else en=!1,He&&e.flags&1048576&&R1(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sc(t,e),t=e.pendingProps;var r=so(e,$t.current);Qs(e,n),r=pg(null,e,i,t,r,n);var o=mg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(i)?(o=!0,Ic(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ug(e),r.updater=kh,e.stateNode=r,r._reactInternals=e,Ip(e,i,t,n),e=Lp(null,e,i,!0,o,n)):(e.tag=0,He&&o&&ng(e),Ht(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=A2(i),t=Pn(i,t),r){case 0:e=Mp(null,e,i,t,n);break e;case 1:e=o0(null,e,i,t,n);break e;case 11:e=r0(null,e,i,t,n);break e;case 14:e=s0(null,e,i,Pn(i.type,t),n);break e}throw Error(V(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),Mp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),o0(t,e,i,r,n);case 3:e:{if(mS(e),t===null)throw Error(V(387));i=e.pendingProps,o=e.memoizedState,r=o.element,B1(t,e),Dc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=uo(Error(V(423)),e),e=a0(t,e,i,n,r);break e}else if(i!==r){r=uo(Error(V(424)),e),e=a0(t,e,i,n,r);break e}else for(ln=er(e.stateNode.containerInfo.firstChild),cn=e,He=!0,Ln=null,n=U1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),i===r){e=wi(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return V1(e),t===null&&Tp(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,xp(i,r)?a=null:o!==null&&xp(i,o)&&(e.flags|=32),pS(t,e),Ht(t,e,a,n),e.child;case 6:return t===null&&Tp(e),null;case 13:return gS(t,e,n);case 4:return cg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ao(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),r0(t,e,i,r,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,ze(Lc,i._currentValue),i._currentValue=a,o!==null)if(Rn(o.value,a)){if(o.children===r.children&&!tn.current){e=wi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=gi(-1,n&-n),h.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?h.next=h:(h.next=m.next,m.next=h),p.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Np(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(V(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Np(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ht(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Qs(e,n),r=Cn(r),i=i(r),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,r=Pn(i,e.pendingProps),r=Pn(i.type,r),s0(t,e,i,r,n);case 15:return dS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),sc(t,e),e.tag=1,nn(i)?(t=!0,Ic(e)):t=!1,Qs(e,n),uS(e,i,r),Ip(e,i,r,n),Lp(null,e,i,!0,t,n);case 19:return vS(t,e,n);case 22:return fS(t,e,n)}throw Error(V(156,e.tag))};function AS(t,e){return o1(t,e)}function L2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,i){return new L2(t,e,n,i)}function Cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A2(t){if(typeof t=="function")return Cg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qm)return 11;if(t===Hm)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Cg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Is:return qr(n.children,r,o,e);case Vm:a=8,r|=8;break;case Jf:return t=En(12,n,e,r|2),t.elementType=Jf,t.lanes=o,t;case ep:return t=En(13,n,e,r),t.elementType=ep,t.lanes=o,t;case tp:return t=En(19,n,e,r),t.elementType=tp,t.lanes=o,t;case Vx:return Nh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $x:a=10;break e;case Bx:a=9;break e;case qm:a=11;break e;case Hm:a=14;break e;case Fi:a=16,i=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=En(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function qr(t,e,n,i){return t=En(7,t,i,e),t.lanes=n,t}function Nh(t,e,n,i){return t=En(22,t,i,e),t.elementType=Vx,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Sf(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Tg(t,e,n,i,r,o,a,c,h){return t=new D2(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=En(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(o),t}function O2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function DS(t){if(!t)return dr;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(nn(n))return D1(t,n,e)}return e}function OS(t,e,n,i,r,o,a,c,h){return t=Tg(n,i,!0,t,r,o,a,c,h),t.context=DS(null),n=t.current,i=Kt(),r=ir(n),o=gi(i,r),o.callback=e??null,tr(n,o,r),t.current.lanes=r,Sl(t,r,i),rn(t,i),t}function bh(t,e,n,i){var r=e.current,o=Kt(),a=ir(r);return n=DS(n),e.context===null?e.context=n:e.pendingContext=n,e=gi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=tr(r,e,a),t!==null&&(Dn(t,r,a,o),nc(t,r,a)),a}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function v0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ng(t,e){v0(t,e),(t=t.alternate)&&v0(t,e)}function R2(){return null}var RS=typeof reportError=="function"?reportError:function(t){console.error(t)};function bg(t){this._internalRoot=t}Ih.prototype.render=bg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));bh(t,e,null,null)};Ih.prototype.unmount=bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){bh(null,t,null,null)}),e[yi]=null}};function Ih(t){this._internalRoot=t}Ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=f1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$i.length&&e!==0&&e<$i[n].priority;n++);$i.splice(n,0,t),n===0&&m1(t)}};function Ig(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y0(){}function j2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var p=Bc(a);o.call(p)}}var a=OS(e,i,t,0,null,!1,!1,"",y0);return t._reactRootContainer=a,t[yi]=a.current,Ua(t.nodeType===8?t.parentNode:t),Yr(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var p=Bc(h);c.call(p)}}var h=Tg(t,0,!1,null,null,!1,!1,"",y0);return t._reactRootContainer=h,t[yi]=h.current,Ua(t.nodeType===8?t.parentNode:t),Yr(function(){bh(e,h,n,i)}),h}function Mh(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var c=r;r=function(){var h=Bc(a);c.call(h)}}bh(e,a,t,r)}else a=j2(n,e,t,r,i);return Bc(a)}h1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ha(e.pendingLanes);n!==0&&(Qm(e,n|1),rn(e,rt()),!(ke&6)&&(co=rt()+500,wr()))}break;case 13:Yr(function(){var i=_i(t,1);if(i!==null){var r=Kt();Dn(i,t,1,r)}}),Ng(t,1)}};Gm=function(t){if(t.tag===13){var e=_i(t,134217728);if(e!==null){var n=Kt();Dn(e,t,134217728,n)}Ng(t,134217728)}};d1=function(t){if(t.tag===13){var e=ir(t),n=_i(t,e);if(n!==null){var i=Kt();Dn(n,t,e,i)}Ng(t,e)}};f1=function(){return Oe};p1=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};hp=function(t,e,n){switch(e){case"input":if(rp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=xh(i);if(!r)throw Error(V(90));Hx(i),rp(i,r)}}}break;case"textarea":Kx(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};e1=Sg;t1=Yr;var F2={usingClientEntryPoint:!1,Events:[kl,As,xh,Xx,Jx,Sg]},na={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z2={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r1(t),t===null?null:t.stateNode},findFiberByHostInstance:na.findFiberByHostInstance||R2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{vh=Ru.inject(z2),Zn=Ru}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F2;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ig(e))throw Error(V(200));return O2(t,e,null,n)};pn.createRoot=function(t,e){if(!Ig(t))throw Error(V(299));var n=!1,i="",r=RS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Tg(t,1,!1,null,null,n,!1,i,r),t[yi]=e.current,Ua(t.nodeType===8?t.parentNode:t),new bg(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=r1(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return Yr(t)};pn.hydrate=function(t,e,n){if(!Ph(e))throw Error(V(200));return Mh(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Ig(t))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=RS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=OS(e,null,t,1,n??null,r,!1,o,a),t[yi]=e.current,Ua(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ih(e)};pn.render=function(t,e,n){if(!Ph(e))throw Error(V(200));return Mh(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Ph(t))throw Error(V(40));return t._reactRootContainer?(Yr(function(){Mh(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};pn.unstable_batchedUpdates=Sg;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ph(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Mh(t,e,n,!1,i)};pn.version="18.3.1-next-f1338f8080-20240426";function jS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jS)}catch(t){console.error(t)}}jS(),jx.exports=pn;var FS=jx.exports,_0=FS;Yf.createRoot=_0.createRoot,Yf.hydrateRoot=_0.hydrateRoot;class To{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Ga=typeof window>"u"||"Deno"in window;function _n(){}function U2(t,e){return typeof t=="function"?t(e):t}function qp(t){return typeof t=="number"&&t>=0&&t!==1/0}function zS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fa(t,e,n){return Tl(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function $2(t,e,n){return Tl(t)?{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function Ui(t,e,n){return Tl(t)?[{...e,queryKey:t},n]:[t||{},e]}function w0(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:o,queryKey:a,stale:c}=t;if(Tl(a)){if(i){if(e.queryHash!==Pg(a,e.options))return!1}else if(!Vc(e.queryKey,a))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||typeof r<"u"&&r!==e.state.fetchStatus||o&&!o(e))}function x0(t,e){const{exact:n,fetching:i,predicate:r,mutationKey:o}=t;if(Tl(o)){if(!e.options.mutationKey)return!1;if(n){if(Fr(e.options.mutationKey)!==Fr(o))return!1}else if(!Vc(e.options.mutationKey,o))return!1}return!(typeof i=="boolean"&&e.state.status==="loading"!==i||r&&!r(e))}function Pg(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fr)(t)}function Fr(t){return JSON.stringify(t,(e,n)=>Hp(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function Vc(t,e){return US(t,e)}function US(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!US(t[n],e[n])):!1}function $S(t,e){if(t===e)return t;const n=S0(t)&&S0(e);if(n||Hp(t)&&Hp(e)){const i=n?t.length:Object.keys(t).length,r=n?e:Object.keys(e),o=r.length,a=n?[]:{};let c=0;for(let h=0;h<o;h++){const p=n?h:r[h];a[p]=$S(t[p],e[p]),a[p]===t[p]&&c++}return i===o&&c===i?t:a}return e}function qc(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function S0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Hp(t){if(!E0(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!E0(n)||!n.hasOwnProperty("isPrototypeOf"))}function E0(t){return Object.prototype.toString.call(t)==="[object Object]"}function Tl(t){return Array.isArray(t)}function BS(t){return new Promise(e=>{setTimeout(e,t)})}function k0(t){BS(0).then(t)}function B2(){if(typeof AbortController=="function")return new AbortController}function Wp(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$S(t,e):e}class V2 extends To{constructor(){super(),this.setup=e=>{if(!Ga&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Hc=new V2,C0=["online","offline"];class q2 extends To{constructor(){super(),this.setup=e=>{if(!Ga&&window.addEventListener){const n=()=>e();return C0.forEach(i=>{window.addEventListener(i,n,!1)}),()=>{C0.forEach(i=>{window.removeEventListener(i,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setOnline(i):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Wc=new q2;function H2(t){return Math.min(1e3*2**t,3e4)}function Lh(t){return(t??"online")==="online"?Wc.isOnline():!0}class VS{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function uc(t){return t instanceof VS}function qS(t){let e=!1,n=0,i=!1,r,o,a;const c=new Promise((N,E)=>{o=N,a=E}),h=N=>{i||(x(new VS(N)),t.abort==null||t.abort())},p=()=>{e=!0},m=()=>{e=!1},v=()=>!Hc.isFocused()||t.networkMode!=="always"&&!Wc.isOnline(),y=N=>{i||(i=!0,t.onSuccess==null||t.onSuccess(N),r==null||r(),o(N))},x=N=>{i||(i=!0,t.onError==null||t.onError(N),r==null||r(),a(N))},C=()=>new Promise(N=>{r=E=>{const _=i||!v();return _&&N(E),_},t.onPause==null||t.onPause()}).then(()=>{r=void 0,i||t.onContinue==null||t.onContinue()}),k=()=>{if(i)return;let N;try{N=t.fn()}catch(E){N=Promise.reject(E)}Promise.resolve(N).then(y).catch(E=>{var _,S;if(i)return;const I=(_=t.retry)!=null?_:3,M=(S=t.retryDelay)!=null?S:H2,D=typeof M=="function"?M(n,E):M,R=I===!0||typeof I=="number"&&n<I||typeof I=="function"&&I(n,E);if(e||!R){x(E);return}n++,t.onFail==null||t.onFail(n,E),BS(D).then(()=>{if(v())return C()}).then(()=>{e?x(E):k()})})};return Lh(t.networkMode)?k():C().then(k),{promise:c,cancel:h,continue:()=>(r==null?void 0:r())?c:Promise.resolve(),cancelRetry:p,continueRetry:m}}const Mg=console;function W2(){let t=[],e=0,n=m=>{m()},i=m=>{m()};const r=m=>{let v;e++;try{v=m()}finally{e--,e||c()}return v},o=m=>{e?t.push(m):k0(()=>{n(m)})},a=m=>(...v)=>{o(()=>{m(...v)})},c=()=>{const m=t;t=[],m.length&&k0(()=>{i(()=>{m.forEach(v=>{n(v)})})})};return{batch:r,batchCalls:a,schedule:o,setNotifyFunction:m=>{n=m},setBatchNotifyFunction:m=>{i=m}}}const et=W2();class HS{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qp(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Ga?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class K2 extends HS{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Mg,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||Q2(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const i=Wp(this.state.data,e,this.options);return this.dispatch({data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const i=this.promise;return(n=this.retryer)==null||n.cancel(e),i?i.then(_n).catch(_n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!zS(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var i,r;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(C=>C.options.queryFn);x&&this.setOptions(x.options)}const a=B2(),c={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},h=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};h(c);const p=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(c)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),m={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:p};if(h(m),(i=this.options.behavior)==null||i.onFetch(m),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((r=m.fetchOptions)==null?void 0:r.meta)){var v;this.dispatch({type:"fetch",meta:(v=m.fetchOptions)==null?void 0:v.meta})}const y=x=>{if(uc(x)&&x.silent||this.dispatch({type:"error",error:x}),!uc(x)){var C,k,N,E;(C=(k=this.cache.config).onError)==null||C.call(k,x,this),(N=(E=this.cache.config).onSettled)==null||N.call(E,this.state.data,x,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=qS({fn:m.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:x=>{var C,k,N,E;if(typeof x>"u"){y(new Error(this.queryHash+" data is undefined"));return}this.setData(x),(C=(k=this.cache.config).onSuccess)==null||C.call(k,x,this),(N=(E=this.cache.config).onSettled)==null||N.call(E,x,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:y,onFail:(x,C)=>{this.dispatch({type:"failed",failureCount:x,error:C})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=i=>{var r,o;switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(r=e.meta)!=null?r:null,fetchStatus:Lh(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return uc(a)&&a.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),et.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function Q2(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class G2 extends To{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,i){var r;const o=n.queryKey,a=(r=n.queryHash)!=null?r:Pg(o,n);let c=this.get(a);return c||(c=new K2({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(o)}),this.add(c)),c}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(i=>i!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){et.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[i]=Ui(e,n);return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(r=>w0(i,r))}findAll(e,n){const[i]=Ui(e,n);return Object.keys(i).length>0?this.queries.filter(r=>w0(i,r)):this.queries}notify(e){et.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){et.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){et.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Z2 extends HS{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Mg,this.observers=[],this.state=e.state||WS(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var R;return this.retryer=qS({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(j,J)=>{this.dispatch({type:"failed",failureCount:j,error:J})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(R=this.options.retry)!=null?R:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var i,r,o,a,c,h,p,m;if(!n){var v,y,x,C;this.dispatch({type:"loading",variables:this.options.variables}),await((v=(y=this.mutationCache.config).onMutate)==null?void 0:v.call(y,this.state.variables,this));const j=await((x=(C=this.options).onMutate)==null?void 0:x.call(C,this.state.variables));j!==this.state.context&&this.dispatch({type:"loading",context:j,variables:this.state.variables})}const R=await e();return await((i=(r=this.mutationCache.config).onSuccess)==null?void 0:i.call(r,R,this.state.variables,this.state.context,this)),await((o=(a=this.options).onSuccess)==null?void 0:o.call(a,R,this.state.variables,this.state.context)),await((c=(h=this.mutationCache.config).onSettled)==null?void 0:c.call(h,R,null,this.state.variables,this.state.context,this)),await((p=(m=this.options).onSettled)==null?void 0:p.call(m,R,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:R}),R}catch(R){try{var k,N,E,_,S,I,M,D;throw await((k=(N=this.mutationCache.config).onError)==null?void 0:k.call(N,R,this.state.variables,this.state.context,this)),await((E=(_=this.options).onError)==null?void 0:E.call(_,R,this.state.variables,this.state.context)),await((S=(I=this.mutationCache.config).onSettled)==null?void 0:S.call(I,void 0,R,this.state.variables,this.state.context,this)),await((M=(D=this.options).onSettled)==null?void 0:M.call(D,void 0,R,this.state.variables,this.state.context)),R}finally{this.dispatch({type:"error",error:R})}}}dispatch(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"loading":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Lh(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...i,...e.state}}};this.state=n(this.state),et.batch(()=>{this.observers.forEach(i=>{i.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function WS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Y2 extends To{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,i){const r=new Z2({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:i,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){et.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>x0(e,n))}findAll(e){return this.mutations.filter(n=>x0(e,n))}notify(e){et.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(i=>i.state.isPaused);return et.batch(()=>n.reduce((i,r)=>i.then(()=>r.continue().catch(_n)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function X2(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,i,r,o,a;const c=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,h=(i=t.fetchOptions)==null||(r=i.meta)==null?void 0:r.fetchMore,p=h==null?void 0:h.pageParam,m=(h==null?void 0:h.direction)==="forward",v=(h==null?void 0:h.direction)==="backward",y=((o=t.state.data)==null?void 0:o.pages)||[],x=((a=t.state.data)==null?void 0:a.pageParams)||[];let C=x,k=!1;const N=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>{var R;if((R=t.signal)!=null&&R.aborted)k=!0;else{var j;(j=t.signal)==null||j.addEventListener("abort",()=>{k=!0})}return t.signal}})},E=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),_=(D,R,j,J)=>(C=J?[R,...C]:[...C,R],J?[j,...D]:[...D,j]),S=(D,R,j,J)=>{if(k)return Promise.reject("Cancelled");if(typeof j>"u"&&!R&&D.length)return Promise.resolve(D);const X={queryKey:t.queryKey,pageParam:j,meta:t.options.meta};N(X);const re=E(X);return Promise.resolve(re).then(Ie=>_(D,j,Ie,J))};let I;if(!y.length)I=S([]);else if(m){const D=typeof p<"u",R=D?p:T0(t.options,y);I=S(y,D,R)}else if(v){const D=typeof p<"u",R=D?p:J2(t.options,y);I=S(y,D,R,!0)}else{C=[];const D=typeof t.options.getNextPageParam>"u";I=(c&&y[0]?c(y[0],0,y):!0)?S([],D,x[0]):Promise.resolve(_([],x[0],y[0]));for(let j=1;j<y.length;j++)I=I.then(J=>{if(c&&y[j]?c(y[j],j,y):!0){const re=D?x[j]:T0(t.options,J);return S(J,D,re)}return Promise.resolve(_(J,x[j],y[j]))})}return I.then(D=>({pages:D,pageParams:C}))}}}}function T0(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function J2(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class eP{constructor(e={}){this.queryCache=e.queryCache||new G2,this.mutationCache=e.mutationCache||new Y2,this.logger=e.logger||Mg,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Hc.subscribe(()=>{Hc.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Wc.subscribe(()=>{Wc.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[i]=Ui(e,n);return i.fetchStatus="fetching",this.queryCache.findAll(i).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state.data}ensureQueryData(e,n,i){const r=fa(e,n,i),o=this.getQueryData(r.queryKey);return o?Promise.resolve(o):this.fetchQuery(r)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:i})=>{const r=i.data;return[n,r]})}setQueryData(e,n,i){const r=this.queryCache.find(e),o=r==null?void 0:r.state.data,a=U2(n,o);if(typeof a>"u")return;const c=fa(e),h=this.defaultQueryOptions(c);return this.queryCache.build(this,h).setData(a,{...i,manual:!0})}setQueriesData(e,n,i){return et.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,n,i)]))}getQueryState(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state}removeQueries(e,n){const[i]=Ui(e,n),r=this.queryCache;et.batch(()=>{r.findAll(i).forEach(o=>{r.remove(o)})})}resetQueries(e,n,i){const[r,o]=Ui(e,n,i),a=this.queryCache,c={type:"active",...r};return et.batch(()=>(a.findAll(r).forEach(h=>{h.reset()}),this.refetchQueries(c,o)))}cancelQueries(e,n,i){const[r,o={}]=Ui(e,n,i);typeof o.revert>"u"&&(o.revert=!0);const a=et.batch(()=>this.queryCache.findAll(r).map(c=>c.cancel(o)));return Promise.all(a).then(_n).catch(_n)}invalidateQueries(e,n,i){const[r,o]=Ui(e,n,i);return et.batch(()=>{var a,c;if(this.queryCache.findAll(r).forEach(p=>{p.invalidate()}),r.refetchType==="none")return Promise.resolve();const h={...r,type:(a=(c=r.refetchType)!=null?c:r.type)!=null?a:"active"};return this.refetchQueries(h,o)})}refetchQueries(e,n,i){const[r,o]=Ui(e,n,i),a=et.batch(()=>this.queryCache.findAll(r).filter(h=>!h.isDisabled()).map(h=>{var p;return h.fetch(void 0,{...o,cancelRefetch:(p=o==null?void 0:o.cancelRefetch)!=null?p:!0,meta:{refetchPage:r.refetchPage}})}));let c=Promise.all(a).then(_n);return o!=null&&o.throwOnError||(c=c.catch(_n)),c}fetchQuery(e,n,i){const r=fa(e,n,i),o=this.defaultQueryOptions(r);typeof o.retry>"u"&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,n,i){return this.fetchQuery(e,n,i).then(_n).catch(_n)}fetchInfiniteQuery(e,n,i){const r=fa(e,n,i);return r.behavior=X2(),this.fetchQuery(r)}prefetchInfiniteQuery(e,n,i){return this.fetchInfiniteQuery(e,n,i).then(_n).catch(_n)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const i=this.queryDefaults.find(r=>Fr(e)===Fr(r.queryKey));i?i.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(i=>Vc(e,i.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const i=this.mutationDefaults.find(r=>Fr(e)===Fr(r.mutationKey));i?i.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(i=>Vc(e,i.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Pg(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class tP extends To{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),N0(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kp(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kp(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const i=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),qc(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();const o=this.hasListeners();o&&b0(this.currentQuery,r,this.options,i)&&this.executeFetch(),this.updateResult(n),o&&(this.currentQuery!==r||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();o&&(this.currentQuery!==r||this.options.enabled!==i.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),i=this.createResult(n,e);return iP(this,i,e)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),e[i])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),i=this.client.getQueryCache().build(this.client,n);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(_n)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),Ga||this.currentResult.isStale||!qp(this.options.staleTime))return;const n=zS(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Ga||this.options.enabled===!1||!qp(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Hc.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const i=this.currentQuery,r=this.options,o=this.currentResult,a=this.currentResultState,c=this.currentResultOptions,h=e!==i,p=h?e.state:this.currentQueryInitialState,m=h?this.currentResult:this.previousQueryResult,{state:v}=e;let{dataUpdatedAt:y,error:x,errorUpdatedAt:C,fetchStatus:k,status:N}=v,E=!1,_=!1,S;if(n._optimisticResults){const j=this.hasListeners(),J=!j&&N0(e,n),X=j&&b0(e,i,n,r);(J||X)&&(k=Lh(e.options.networkMode)?"fetching":"paused",y||(N="loading")),n._optimisticResults==="isRestoring"&&(k="idle")}if(n.keepPreviousData&&!v.dataUpdatedAt&&m!=null&&m.isSuccess&&N!=="error")S=m.data,y=m.dataUpdatedAt,N=m.status,E=!0;else if(n.select&&typeof v.data<"u")if(o&&v.data===(a==null?void 0:a.data)&&n.select===this.selectFn)S=this.selectResult;else try{this.selectFn=n.select,S=n.select(v.data),S=Wp(o==null?void 0:o.data,S,n),this.selectResult=S,this.selectError=null}catch(j){this.selectError=j}else S=v.data;if(typeof n.placeholderData<"u"&&typeof S>"u"&&N==="loading"){let j;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData))j=o.data;else if(j=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof j<"u")try{j=n.select(j),this.selectError=null}catch(J){this.selectError=J}typeof j<"u"&&(N="success",S=Wp(o==null?void 0:o.data,j,n),_=!0)}this.selectError&&(x=this.selectError,S=this.selectResult,C=Date.now(),N="error");const I=k==="fetching",M=N==="loading",D=N==="error";return{status:N,fetchStatus:k,isLoading:M,isSuccess:N==="success",isError:D,isInitialLoading:M&&I,data:S,dataUpdatedAt:y,error:x,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:I,isRefetching:I&&!M,isLoadingError:D&&v.dataUpdatedAt===0,isPaused:k==="paused",isPlaceholderData:_,isPreviousData:E,isRefetchError:D&&v.dataUpdatedAt!==0,isStale:Lg(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,qc(i,n))return;this.currentResult=i;const r={cache:!0},o=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,c=typeof a=="function"?a():a;if(c==="all"||!c&&!this.trackedProps.size)return!0;const h=new Set(c??this.trackedProps);return this.options.useErrorBoundary&&h.add("error"),Object.keys(this.currentResult).some(p=>{const m=p;return this.currentResult[m]!==n[m]&&h.has(m)})};(e==null?void 0:e.listeners)!==!1&&o()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!uc(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){et.batch(()=>{if(e.onSuccess){var n,i,r,o;(n=(i=this.options).onSuccess)==null||n.call(i,this.currentResult.data),(r=(o=this.options).onSettled)==null||r.call(o,this.currentResult.data,null)}else if(e.onError){var a,c,h,p;(a=(c=this.options).onError)==null||a.call(c,this.currentResult.error),(h=(p=this.options).onSettled)==null||h.call(p,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:m})=>{m(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function nP(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function N0(t,e){return nP(t,e)||t.state.dataUpdatedAt>0&&Kp(t,e,e.refetchOnMount)}function Kp(t,e,n){if(e.enabled!==!1){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&Lg(t,e)}return!1}function b0(t,e,n,i){return n.enabled!==!1&&(t!==e||i.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Lg(t,n)}function Lg(t,e){return t.isStaleByTime(e.staleTime)}function iP(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!qc(t.getCurrentResult(),e)}let rP=class extends To{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const i=this.options;this.options=this.client.defaultMutationOptions(e),qc(i,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:WS(),n=e.status==="loading",i={...e,isLoading:n,isPending:n,isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=i}notify(e){et.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,i,r,o;(n=(i=this.mutateOptions).onSuccess)==null||n.call(i,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(r=(o=this.mutateOptions).onSettled)==null||r.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var a,c,h,p;(a=(c=this.mutateOptions).onError)==null||a.call(c,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(h=(p=this.mutateOptions).onSettled)==null||h.call(p,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:m})=>{m(this.currentResult)})})}};var KS={exports:{}},QS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=b;function sP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oP=typeof Object.is=="function"?Object.is:sP,aP=ho.useState,lP=ho.useEffect,uP=ho.useLayoutEffect,cP=ho.useDebugValue;function hP(t,e){var n=e(),i=aP({inst:{value:n,getSnapshot:e}}),r=i[0].inst,o=i[1];return uP(function(){r.value=n,r.getSnapshot=e,Ef(r)&&o({inst:r})},[t,n,e]),lP(function(){return Ef(r)&&o({inst:r}),t(function(){Ef(r)&&o({inst:r})})},[t]),cP(n),n}function Ef(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oP(t,n)}catch{return!0}}function dP(t,e){return e()}var fP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dP:hP;QS.useSyncExternalStore=ho.useSyncExternalStore!==void 0?ho.useSyncExternalStore:fP;KS.exports=QS;var pP=KS.exports;const GS=pP.useSyncExternalStore,I0=b.createContext(void 0),ZS=b.createContext(!1);function YS(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=I0),window.ReactQueryClientContext):I0)}const sn=({context:t}={})=>{const e=b.useContext(YS(t,b.useContext(ZS)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mP=({client:t,children:e,context:n,contextSharing:i=!1})=>{b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const r=YS(n,i);return b.createElement(ZS.Provider,{value:!n&&i},b.createElement(r.Provider,{value:t},e))},XS=b.createContext(!1),gP=()=>b.useContext(XS);XS.Provider;function vP(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const yP=b.createContext(vP()),_P=()=>b.useContext(yP);function JS(t,e){return typeof t=="function"?t(...e):!!t}const wP=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},xP=t=>{b.useEffect(()=>{t.clearReset()},[t])},SP=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&JS(n,[t.error,i]),EP=t=>{t.suspense&&(typeof t.staleTime!="number"&&(t.staleTime=1e3),typeof t.cacheTime=="number"&&(t.cacheTime=Math.max(t.cacheTime,1e3)))},kP=(t,e)=>t.isLoading&&t.isFetching&&!e,CP=(t,e,n)=>(t==null?void 0:t.suspense)&&kP(e,n),TP=(t,e,n)=>e.fetchOptimistic(t).then(({data:i})=>{t.onSuccess==null||t.onSuccess(i),t.onSettled==null||t.onSettled(i,null)}).catch(i=>{n.clearReset(),t.onError==null||t.onError(i),t.onSettled==null||t.onSettled(void 0,i)});function NP(t,e){const n=sn({context:t.context}),i=gP(),r=_P(),o=n.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",o.onError&&(o.onError=et.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=et.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=et.batchCalls(o.onSettled)),EP(o),wP(o,r),xP(r);const[a]=b.useState(()=>new e(n,o)),c=a.getOptimisticResult(o);if(GS(b.useCallback(h=>{const p=i?()=>{}:a.subscribe(et.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),b.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),CP(o,c,i))throw TP(o,a,r);if(SP({result:c,errorResetBoundary:r,useErrorBoundary:o.useErrorBoundary,query:a.getCurrentQuery()}))throw c.error;return o.notifyOnChangeProps?c:a.trackResult(c)}function De(t,e,n){const i=fa(t,e,n);return NP(i,tP)}function we(t,e,n){const i=$2(t,e),r=sn({context:i.context}),[o]=b.useState(()=>new rP(r,i));b.useEffect(()=>{o.setOptions(i)},[o,i]);const a=GS(b.useCallback(h=>o.subscribe(et.batchCalls(h)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=b.useCallback((h,p)=>{o.mutate(h,p).catch(bP)},[o]);if(a.error&&JS(o.options.useErrorBoundary,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}function bP(){}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Za.apply(this,arguments)}var Gi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gi||(Gi={}));const P0="popstate";function IP(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:a,hash:c}=i.location;return Qp("",{pathname:o,search:a,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Kc(r)}return MP(e,n,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ag(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PP(){return Math.random().toString(36).substr(2,8)}function M0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qp(t,e,n,i){return n===void 0&&(n=null),Za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?No(e):e,{state:n,key:e&&e.key||i||PP()})}function Kc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function No(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function MP(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,c=Gi.Pop,h=null,p=m();p==null&&(p=0,a.replaceState(Za({},a.state,{idx:p}),""));function m(){return(a.state||{idx:null}).idx}function v(){c=Gi.Pop;let N=m(),E=N==null?null:N-p;p=N,h&&h({action:c,location:k.location,delta:E})}function y(N,E){c=Gi.Push;let _=Qp(k.location,N,E);p=m()+1;let S=M0(_,p),I=k.createHref(_);try{a.pushState(S,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(I)}o&&h&&h({action:c,location:k.location,delta:1})}function x(N,E){c=Gi.Replace;let _=Qp(k.location,N,E);p=m();let S=M0(_,p),I=k.createHref(_);a.replaceState(S,"",I),o&&h&&h({action:c,location:k.location,delta:0})}function C(N){let E=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof N=="string"?N:Kc(N);return _=_.replace(/ $/,"%20"),ht(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let k={get action(){return c},get location(){return t(r,a)},listen(N){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(P0,v),h=N,()=>{r.removeEventListener(P0,v),h=null}},createHref(N){return e(r,N)},createURL:C,encodeLocation(N){let E=C(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(N){return a.go(N)}};return k}var L0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(L0||(L0={}));function LP(t,e,n){return n===void 0&&(n="/"),AP(t,e,n)}function AP(t,e,n,i){let r=typeof e=="string"?No(e):e,o=Dg(r.pathname||"/",n);if(o==null)return null;let a=eE(t);DP(a);let c=null;for(let h=0;c==null&&h<a.length;++h){let p=WP(o);c=VP(a[h],p)}return c}function eE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(ht(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let p=sr([i,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(ht(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),eE(o.children,e,m,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:$P(p,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,a);else for(let h of tE(o.path))r(o,a,h)}),e}function tE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=tE(i.join("/")),c=[];return c.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&c.push(...a),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function DP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const OP=/^:[\w-]+$/,RP=3,jP=2,FP=1,zP=10,UP=-2,A0=t=>t==="*";function $P(t,e){let n=t.split("/"),i=n.length;return n.some(A0)&&(i+=UP),e&&(i+=jP),n.filter(r=>!A0(r)).reduce((r,o)=>r+(OP.test(o)?RP:o===""?FP:zP),i)}function BP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function VP(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let c=0;c<i.length;++c){let h=i[c],p=c===i.length-1,m=o==="/"?e:e.slice(o.length)||"/",v=qP({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),y=h.route;if(!v)return null;Object.assign(r,v.params),a.push({params:r,pathname:sr([o,v.pathname]),pathnameBase:YP(sr([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=sr([o,v.pathnameBase]))}return a}function qP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=HP(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((p,m,v)=>{let{paramName:y,isOptional:x}=m;if(y==="*"){let k=c[v]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const C=c[v];return x&&!C?p[y]=void 0:p[y]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:a,pattern:t}}function HP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ag(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function WP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ag(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const KP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QP=t=>KP.test(t);function GP(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?No(t):t,o;if(n)if(QP(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ag(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=D0(n.substring(1),"/"):o=D0(n,e)}else o=e;return{pathname:o,search:XP(i),hash:JP(r)}}function D0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function kf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nE(t,e){let n=ZP(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function iE(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=No(t):(r=Za({},t),ht(!r.pathname||!r.pathname.includes("?"),kf("?","pathname","search",r)),ht(!r.pathname||!r.pathname.includes("#"),kf("#","pathname","hash",r)),ht(!r.search||!r.search.includes("#"),kf("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,c;if(a==null)c=n;else{let v=e.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),v-=1;r.pathname=y.join("/")}c=v>=0?e[v]:"/"}let h=GP(r,c),p=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}const sr=t=>t.join("/").replace(/\/\/+/g,"/"),YP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function eM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rE=["post","put","patch","delete"];new Set(rE);const tM=["get",...rE];new Set(tM);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ya.apply(this,arguments)}const Og=b.createContext(null),nM=b.createContext(null),as=b.createContext(null),Ah=b.createContext(null),ls=b.createContext({outlet:null,matches:[],isDataRoute:!1}),sE=b.createContext(null);function iM(t,e){let{relative:n}=e===void 0?{}:e;Nl()||ht(!1);let{basename:i,navigator:r}=b.useContext(as),{hash:o,pathname:a,search:c}=aE(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:sr([i,a])),r.createHref({pathname:h,search:c,hash:o})}function Nl(){return b.useContext(Ah)!=null}function Dh(){return Nl()||ht(!1),b.useContext(Ah).location}function oE(t){b.useContext(as).static||b.useLayoutEffect(t)}function rM(){let{isDataRoute:t}=b.useContext(ls);return t?vM():sM()}function sM(){Nl()||ht(!1);let t=b.useContext(Og),{basename:e,future:n,navigator:i}=b.useContext(as),{matches:r}=b.useContext(ls),{pathname:o}=Dh(),a=JSON.stringify(nE(r,n.v7_relativeSplatPath)),c=b.useRef(!1);return oE(()=>{c.current=!0}),b.useCallback(function(p,m){if(m===void 0&&(m={}),!c.current)return;if(typeof p=="number"){i.go(p);return}let v=iE(p,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:sr([e,v.pathname])),(m.replace?i.replace:i.push)(v,m.state,m)},[e,i,a,o,t])}function aE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=b.useContext(as),{matches:r}=b.useContext(ls),{pathname:o}=Dh(),a=JSON.stringify(nE(r,i.v7_relativeSplatPath));return b.useMemo(()=>iE(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function oM(t,e){return aM(t,e)}function aM(t,e,n,i){Nl()||ht(!1);let{navigator:r}=b.useContext(as),{matches:o}=b.useContext(ls),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let p=Dh(),m;if(e){var v;let N=typeof e=="string"?No(e):e;h==="/"||(v=N.pathname)!=null&&v.startsWith(h)||ht(!1),m=N}else m=p;let y=m.pathname||"/",x=y;if(h!=="/"){let N=h.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(N.length).join("/")}let C=LP(t,{pathname:x}),k=dM(C&&C.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:sr([h,r.encodeLocation?r.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:sr([h,r.encodeLocation?r.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,n,i);return e&&k?b.createElement(Ah.Provider,{value:{location:Ya({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Gi.Pop}},k):k}function lM(){let t=gM(),e=eM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,null)}const uM=b.createElement(lM,null);class cM extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ls.Provider,{value:this.props.routeContext},b.createElement(sE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hM(t){let{routeContext:e,match:n,children:i}=t,r=b.useContext(Og);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ls.Provider,{value:e},i)}function dM(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(r=n)==null?void 0:r.errors;if(c!=null){let m=a.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);m>=0||ht(!1),a=a.slice(0,Math.min(a.length,m+1))}let h=!1,p=-1;if(n&&i&&i.v7_partialHydration)for(let m=0;m<a.length;m++){let v=a[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=m),v.route.id){let{loaderData:y,errors:x}=n,C=v.route.loader&&y[v.route.id]===void 0&&(!x||x[v.route.id]===void 0);if(v.route.lazy||C){h=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((m,v,y)=>{let x,C=!1,k=null,N=null;n&&(x=c&&v.route.id?c[v.route.id]:void 0,k=v.route.errorElement||uM,h&&(p<0&&y===0?(yM("route-fallback"),C=!0,N=null):p===y&&(C=!0,N=v.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,y+1)),_=()=>{let S;return x?S=k:C?S=N:v.route.Component?S=b.createElement(v.route.Component,null):v.route.element?S=v.route.element:S=m,b.createElement(hM,{match:v,routeContext:{outlet:m,matches:E,isDataRoute:n!=null},children:S})};return n&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?b.createElement(cM,{location:n.location,revalidation:n.revalidation,component:k,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var lE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lE||{}),uE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uE||{});function fM(t){let e=b.useContext(Og);return e||ht(!1),e}function pM(t){let e=b.useContext(nM);return e||ht(!1),e}function mM(t){let e=b.useContext(ls);return e||ht(!1),e}function cE(t){let e=mM(),n=e.matches[e.matches.length-1];return n.route.id||ht(!1),n.route.id}function gM(){var t;let e=b.useContext(sE),n=pM(),i=cE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function vM(){let{router:t}=fM(lE.UseNavigateStable),e=cE(uE.UseNavigateStable),n=b.useRef(!1);return oE(()=>{n.current=!0}),b.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ya({fromRouteId:e},o)))},[t,e])}const O0={};function yM(t,e,n){O0[t]||(O0[t]=!0)}function _M(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lr(t){ht(!1)}function wM(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Gi.Pop,navigator:o,static:a=!1,future:c}=t;Nl()&&ht(!1);let h=e.replace(/^\/*/,"/"),p=b.useMemo(()=>({basename:h,navigator:o,static:a,future:Ya({v7_relativeSplatPath:!1},c)}),[h,c,o,a]);typeof i=="string"&&(i=No(i));let{pathname:m="/",search:v="",hash:y="",state:x=null,key:C="default"}=i,k=b.useMemo(()=>{let N=Dg(m,h);return N==null?null:{location:{pathname:N,search:v,hash:y,state:x,key:C},navigationType:r}},[h,m,v,y,x,C,r]);return k==null?null:b.createElement(as.Provider,{value:p},b.createElement(Ah.Provider,{children:n,value:k}))}function xM(t){let{children:e,location:n}=t;return oM(Gp(e),n)}new Promise(()=>{});function Gp(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(i,r)=>{if(!b.isValidElement(i))return;let o=[...e,r];if(i.type===b.Fragment){n.push.apply(n,Gp(i.props.children,o));return}i.type!==Lr&&ht(!1),!i.props.index||!i.props.children||ht(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Gp(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zp.apply(this,arguments)}function SM(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function EM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kM(t,e){return t.button===0&&(!e||e==="_self")&&!EM(t)}const CM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TM="6";try{window.__reactRouterVersion=TM}catch{}const NM="startTransition",R0=Ib[NM];function bM(t){let{basename:e,children:n,future:i,window:r}=t,o=b.useRef();o.current==null&&(o.current=IP({window:r,v5Compat:!0}));let a=o.current,[c,h]=b.useState({action:a.action,location:a.location}),{v7_startTransition:p}=i||{},m=b.useCallback(v=>{p&&R0?R0(()=>h(v)):h(v)},[h,p]);return b.useLayoutEffect(()=>a.listen(m),[a,m]),b.useEffect(()=>_M(i),[i]),b.createElement(wM,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:i})}const IM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ju=b.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:c,target:h,to:p,preventScrollReset:m,viewTransition:v}=e,y=SM(e,CM),{basename:x}=b.useContext(as),C,k=!1;if(typeof p=="string"&&PM.test(p)&&(C=p,IM))try{let S=new URL(window.location.href),I=p.startsWith("//")?new URL(S.protocol+p):new URL(p),M=Dg(I.pathname,x);I.origin===S.origin&&M!=null?p=M+I.search+I.hash:k=!0}catch{}let N=iM(p,{relative:r}),E=MM(p,{replace:a,state:c,target:h,preventScrollReset:m,relative:r,viewTransition:v});function _(S){i&&i(S),S.defaultPrevented||E(S)}return b.createElement("a",Zp({},y,{href:C||N,onClick:k||o?i:_,ref:n,target:h}))});var j0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(j0||(j0={}));var F0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(F0||(F0={}));function MM(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,h=rM(),p=Dh(),m=aE(t,{relative:a});return b.useCallback(v=>{if(kM(v,n)){v.preventDefault();let y=i!==void 0?i:Kc(p)===Kc(m);h(t,{replace:y,state:r,preventScrollReset:o,relative:a,viewTransition:c})}},[p,h,m,i,r,n,t,o,a,c])}var z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},LM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,c=a?t[r+1]:0,h=r+2<t.length,p=h?t[r+2]:0,m=o>>2,v=(o&3)<<4|c>>4;let y=(c&15)<<2|p>>6,x=p&63;h||(x=64,a||(y=64)),i.push(n[m],n[v],n[y],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const p=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||p==null||v==null)throw new AM;const y=o<<2|c>>4;if(i.push(y),p!==64){const x=c<<4&240|p>>2;if(i.push(x),v!==64){const C=p<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DM=function(t){const e=hE(t);return dE.encodeByteArray(e,!0)},fE=function(t){return DM(t).replace(/\./g,"")},pE=function(t){try{return dE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=()=>OM().__FIREBASE_DEFAULTS__,jM=()=>{if(typeof process>"u"||typeof z0>"u")return;const t=z0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pE(t[1]);return e&&JSON.parse(e)},Rg=()=>{try{return RM()||jM()||FM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zM=t=>{var e,n;return(n=(e=Rg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mE=()=>{var t;return(t=Rg())===null||t===void 0?void 0:t.config},gE=t=>{var e;return(e=Rg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $M(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function BM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qM(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HM(){try{return typeof indexedDB=="object"}catch{return!1}}function WM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="FirebaseError";class Mi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=KM,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?QM(o,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new Mi(r,c,i)}}function QM(t,e){return t.replace(GM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const GM=/\{\$([^}]+)}/g;function ZM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(U0(o)&&U0(a)){if(!Xa(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function U0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function YM(t,e){const n=new XM(t,e);return n.subscribe.bind(n)}class XM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");JM(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Cf),r.error===void 0&&(r.error=Cf),r.complete===void 0&&(r.complete=Cf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new UM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nL(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tL(t){return t===Ar?void 0:t}function nL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const rL={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},sL=Ne.INFO,oL={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},aL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=oL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jg{constructor(e){this.name=e,this._logLevel=sL,this._logHandler=aL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const lL=(t,e)=>e.some(n=>t instanceof n);let $0,B0;function uL(){return $0||($0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cL(){return B0||(B0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,Yp=new WeakMap,yE=new WeakMap,Tf=new WeakMap,Fg=new WeakMap;function hL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(or(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&vE.set(n,t)}).catch(()=>{}),Fg.set(e,t),e}function dL(t){if(Yp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Yp.set(t,e)}let Xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fL(t){Xp=t(Xp)}function pL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Nf(this),e,...n);return yE.set(i,e.sort?e.sort():[e]),or(i)}:cL().includes(t)?function(...e){return t.apply(Nf(this),e),or(vE.get(this))}:function(...e){return or(t.apply(Nf(this),e))}}function mL(t){return typeof t=="function"?pL(t):(t instanceof IDBTransaction&&dL(t),lL(t,uL())?new Proxy(t,Xp):t)}function or(t){if(t instanceof IDBRequest)return hL(t);if(Tf.has(t))return Tf.get(t);const e=mL(t);return e!==t&&(Tf.set(t,e),Fg.set(e,t)),e}const Nf=t=>Fg.get(t);function gL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),c=or(a);return i&&a.addEventListener("upgradeneeded",h=>{i(or(a.result),h.oldVersion,h.newVersion,or(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const vL=["get","getKey","getAll","getAllKeys","count"],yL=["put","add","delete","clear"],bf=new Map;function V0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=yL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||vL.includes(n)))return;const o=async function(a,...c){const h=this.transaction(a,r?"readwrite":"readonly");let p=h.store;return i&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),r&&h.done]))[0]};return bf.set(e,o),o}fL(t=>({...t,get:(e,n,i)=>V0(e,n)||t.get(e,n,i),has:(e,n)=>!!V0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jp="@firebase/app",q0="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new jg("@firebase/app"),xL="@firebase/app-compat",SL="@firebase/analytics-compat",EL="@firebase/analytics",kL="@firebase/app-check-compat",CL="@firebase/app-check",TL="@firebase/auth",NL="@firebase/auth-compat",bL="@firebase/database",IL="@firebase/database-compat",PL="@firebase/functions",ML="@firebase/functions-compat",LL="@firebase/installations",AL="@firebase/installations-compat",DL="@firebase/messaging",OL="@firebase/messaging-compat",RL="@firebase/performance",jL="@firebase/performance-compat",FL="@firebase/remote-config",zL="@firebase/remote-config-compat",UL="@firebase/storage",$L="@firebase/storage-compat",BL="@firebase/firestore",VL="@firebase/firestore-compat",qL="firebase",HL="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",WL={[Jp]:"fire-core",[xL]:"fire-core-compat",[EL]:"fire-analytics",[SL]:"fire-analytics-compat",[CL]:"fire-app-check",[kL]:"fire-app-check-compat",[TL]:"fire-auth",[NL]:"fire-auth-compat",[bL]:"fire-rtdb",[IL]:"fire-rtdb-compat",[PL]:"fire-fn",[ML]:"fire-fn-compat",[LL]:"fire-iid",[AL]:"fire-iid-compat",[DL]:"fire-fcm",[OL]:"fire-fcm-compat",[RL]:"fire-perf",[jL]:"fire-perf-compat",[FL]:"fire-rc",[zL]:"fire-rc-compat",[UL]:"fire-gcs",[$L]:"fire-gcs-compat",[BL]:"fire-fst",[VL]:"fire-fst-compat","fire-js":"fire-js",[qL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new Map,tm=new Map;function KL(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fo(t){const e=t.name;if(tm.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,t);for(const n of Ja.values())KL(n,t);return!0}function zg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ar=new bl("app","Firebase",QL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=HL;function _E(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:em,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ar.create("bad-app-name",{appName:String(r)});if(n||(n=mE()),!n)throw ar.create("no-options");const o=Ja.get(r);if(o){if(Xa(n,o.options)&&Xa(i,o.config))return o;throw ar.create("duplicate-app",{appName:r})}const a=new iL(r);for(const h of tm.values())a.addComponent(h);const c=new GL(n,i,a);return Ja.set(r,c),c}function ZL(t=em){const e=Ja.get(t);if(!e&&t===em&&mE())return _E();if(!e)throw ar.create("no-app",{appName:t});return e}function H0(){return Array.from(Ja.values())}function lr(t,e,n){var i;let r=(i=WL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(c.join(" "));return}fo(new Xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-heartbeat-database",XL=1,el="firebase-heartbeat-store";let If=null;function wE(){return If||(If=gL(YL,XL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(el)}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),If}async function JL(t){try{return await(await wE()).transaction(el).objectStore(el).get(xE(t))}catch(e){if(e instanceof Mi)Jr.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(n.message)}}}async function W0(t,e){try{const i=(await wE()).transaction(el,"readwrite");await i.objectStore(el).put(e,xE(t)),await i.done}catch(n){if(n instanceof Mi)Jr.warn(n.message);else{const i=ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jr.warn(i.message)}}}function xE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=1024,tA=30*24*60*60*1e3;class nA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=K0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=tA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=K0(),{heartbeatsToSend:n,unsentEntries:i}=iA(this._heartbeatsCache.heartbeats),r=fE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function K0(){return new Date().toISOString().substring(0,10)}function iA(t,e=eA){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Q0(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Q0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class rA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HM()?WM().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await JL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Q0(t){return fE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){fo(new Xr("platform-logger",e=>new _L(e),"PRIVATE")),fo(new Xr("heartbeat",e=>new nA(e),"PRIVATE")),lr(Jp,q0,t),lr(Jp,q0,"esm2017"),lr("fire-js","")}sA("");var oA="firebase",aA="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(oA,aA,"app");function Ug(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lA=SE,EE=new bl("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new jg("@firebase/auth");function uA(t,...e){Qc.logLevel<=Ne.WARN&&Qc.warn(`Auth (${bo}): ${t}`,...e)}function cc(t,...e){Qc.logLevel<=Ne.ERROR&&Qc.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,...e){throw $g(t,...e)}function Xn(t,...e){return $g(t,...e)}function cA(t,e,n){const i=Object.assign(Object.assign({},lA()),{[e]:n});return new bl("auth","Firebase",i).create(e,{appName:t.name})}function $g(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return EE.create(t,...e)}function he(t,e,...n){if(!t)throw $g(e,...n)}function di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function Si(t,e){t||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hA(){return G0()==="http:"||G0()==="https:"}function G0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hA()||BM()||"connection"in navigator)?navigator.onLine:!0}function fA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=$M()||VM()}get(){return dA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Pl(3e4,6e4);function CE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ml(t,e,n,i,r={}){return TE(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const c=Il(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),kE.fetch()(NE(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function TE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},pA),e);try{const r=new vA(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Fu(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Fu(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Fu(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw cA(t,m,p);xi(t,m)}}catch(r){if(r instanceof Mi)throw r;xi(t,"network-request-failed",{message:String(r)})}}async function gA(t,e,n,i,r={}){const o=await Ml(t,e,n,i,r);return"mfaPendingCredential"in o&&xi(t,"multi-factor-auth-required",{_serverResponse:o}),o}function NE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Bg(t.config,r):`${t.config.apiScheme}://${r}`}class vA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),mA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Xn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e){return Ml(t,"POST","/v1/accounts:delete",e)}async function _A(t,e){return Ml(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wA(t,e=!1){const n=Pt(t),i=await n.getIdToken(e),r=Vg(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Na(Pf(r.auth_time)),issuedAtTime:Na(Pf(r.iat)),expirationTime:Na(Pf(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Pf(t){return Number(t)*1e3}function Vg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const r=pE(n);return r?JSON.parse(r):(cc("Failed to decode base64 JWT payload"),null)}catch(r){return cc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function xA(t){const e=Vg(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Mi&&SA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function SA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await tl(t,_A(n,{idToken:i}));he(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?TA(o.providerUserInfo):[],c=CA(t.providerData,a),h=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new bE(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,v)}async function kA(t){const e=Pt(t);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CA(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function TA(t){return t.map(e=>{var{providerId:n}=e,i=Ug(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e){const n=await TE(t,{},async()=>{const i=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=NE(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",kE.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return he(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await NA(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new nl;return i&&(he(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await tl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wA(this,e)}reload(){return kA(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await tl(this,yA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,c,h,p,m;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,x=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,E=(p=n.createdAt)!==null&&p!==void 0?p:void 0,_=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:S,emailVerified:I,isAnonymous:M,providerData:D,stsTokenManager:R}=n;he(S&&R,e,"internal-error");const j=nl.fromJSON(this.name,R);he(typeof S=="string",e,"internal-error"),Ri(v,e.name),Ri(y,e.name),he(typeof I=="boolean",e,"internal-error"),he(typeof M=="boolean",e,"internal-error"),Ri(x,e.name),Ri(C,e.name),Ri(k,e.name),Ri(N,e.name),Ri(E,e.name),Ri(_,e.name);const J=new Hr({uid:S,auth:e,email:y,emailVerified:I,displayName:v,isAnonymous:M,photoURL:C,phoneNumber:x,tenantId:k,stsTokenManager:j,createdAt:E,lastLoginAt:_});return D&&Array.isArray(D)&&(J.providerData=D.map(X=>Object.assign({},X))),N&&(J._redirectEventId=N),J}static async _fromIdTokenResponse(e,n,i=!1){const r=new nl;r.updateFromServerResponse(n);const o=new Hr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Gc(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map;function fi(t){Si(t instanceof Function,"Expected a class definition");let e=Z0.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Z0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IE.type="NONE";const Y0=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=hc(this.userKey,r.apiKey,o),this.fullPersistenceKey=hc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Zs(fi(Y0),e,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||fi(Y0);const a=hc(i,e.config.apiKey,e.name);let c=null;for(const p of n)try{const m=await p._get(a);if(m){const v=Hr._fromJSON(e,m);p!==o&&(c=v),o=p;break}}catch{}const h=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Zs(o,e,i):(o=h[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(a)}catch{}})),new Zs(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DE(e))return"Blackberry";if(OE(e))return"Webos";if(qg(e))return"Safari";if((e.includes("chrome/")||ME(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function PE(t=Bt()){return/firefox\//i.test(t)}function qg(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ME(t=Bt()){return/crios\//i.test(t)}function LE(t=Bt()){return/iemobile/i.test(t)}function AE(t=Bt()){return/android/i.test(t)}function DE(t=Bt()){return/blackberry/i.test(t)}function OE(t=Bt()){return/webos/i.test(t)}function Oh(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bA(t=Bt()){var e;return Oh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IA(){return qM()&&document.documentMode===10}function RE(t=Bt()){return Oh(t)||AE(t)||OE(t)||DE(t)||/windows phone/i.test(t)||LE(t)}function PA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e=[]){let n;switch(t){case"Browser":n=X0(Bt());break;case"Worker":n=`${X0(Bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${i}`}async function FE(t,e){return Ml(t,"GET","/v2/recaptchaConfig",CE(t,e))}function J0(t){return t!==void 0&&t.enterprise!==void 0}class zE{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function UE(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Xn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",MA().appendChild(i)})}function LA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AA="https://www.google.com/recaptcha/enterprise.js?render=",DA="recaptcha-enterprise",OA="NO_RECAPTCHA";class RA{constructor(e){this.type=DA,this.auth=Rh(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{FE(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new zE(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,a(p.siteKey)}}).catch(h=>{c(h)})})}function r(o,a,c){const h=window.grecaptcha;J0(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{a(p)}).catch(()=>{a(OA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(c=>{if(!n&&J0(window.grecaptcha))r(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}UE(AA+c).then(()=>{r(c,o,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,c)=>{try{const h=e(o);a(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ew(this),this.idTokenSubscription=new ew(this),this.beforeStateQueue=new jA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Pt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}async initializeRecaptchaConfig(){const e=await FE(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new zE(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new RA(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return he(a,this,"internal-error"),a.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rh(t){return Pt(t)}class ew{constructor(e){this.auth=e,this.observer=null,this.addObserver=YM(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e){const n=zg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Xa(o,e??{}))return r;xi(r,"already-initialized")}return n.initialize({options:e})}function UA(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $A(t,e,n){const i=Rh(t);he(i._canInitEmulator,i,"emulator-config-failed"),he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=$E(e),{host:a,port:c}=BA(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${a}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),VA()}function $E(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BA(t){const e=$E(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:tw(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:tw(a)}}}function tw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e){return gA(t,"POST","/v1/accounts:signInWithIdp",CE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="http://localhost";class es extends BE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Ug(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new es(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ys(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ys(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ys(e,n)}buildRequest(){const e={requestUri:qA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends VE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Ll{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return es._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return qi.credential(n,i)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Ll{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Ll{constructor(){super("twitter.com")}static credential(e,n){return es._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Wi.credential(n,i)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Hr._fromIdTokenResponse(e,i,r),a=nw(i);return new po({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=nw(i);return new po({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function nw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Mi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Zc(e,n,i,r)}}function qE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(t,o,e,i):o})}async function HA(t,e,n=!1){const i=await tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return po._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await tl(t,qE(i,r,e,t),n);he(o.idToken,i,"internal-error");const a=Vg(o.idToken);he(a,i,"internal-error");const{sub:c}=a;return he(t.uid===c,i,"user-mismatch"),po._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e,n=!1){const i="signIn",r=await qE(t,i,e),o=await po._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function QA(t,e,n,i){return Pt(t).onIdTokenChanged(e,n,i)}function GA(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function ZA(t,e,n,i){return Pt(t).onAuthStateChanged(e,n,i)}function YA(t){return Pt(t).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){const t=Bt();return qg(t)||Oh(t)}const JA=1e3,eD=10;class WE extends HE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XA()&&PA(),this.fallbackToPolling=RE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);IA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const tD=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE extends HE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KE.type="SESSION";const QE=KE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new jh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(a).map(async p=>p(n.origin,o)),h=await nD(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((c,h)=>{const p=Hg("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){const y=v;if(y.data.eventId===p)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function rD(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function sD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aD(){return GE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebaseLocalStorageDb",lD=1,Xc="firebaseLocalStorage",YE="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function uD(){const t=indexedDB.deleteDatabase(ZE);return new Al(t).toPromise()}function im(){const t=indexedDB.open(ZE,lD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Xc,{keyPath:YE})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Xc)?e(i):(i.close(),await uD(),e(await im()))})})}async function iw(t,e,n){const i=Fh(t,!0).put({[YE]:e,value:n});return new Al(i).toPromise()}async function cD(t,e){const n=Fh(t,!1).get(e),i=await new Al(n).toPromise();return i===void 0?null:i.value}function rw(t,e){const n=Fh(t,!0).delete(e);return new Al(n).toPromise()}const hD=800,dD=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>dD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(aD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new iD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await iw(e,Yc,"1"),await rw(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>iw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>cD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Fh(r,!1).getAll();return new Al(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const fD=XE;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){return e?fi(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends BE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mD(t){return KA(t.auth,new Wg(t),t.bypassAuthState)}function gD(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),WA(n,new Wg(t),t.bypassAuthState)}async function vD(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),HA(n,new Wg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mD;case"linkViaPopup":case"linkViaRedirect":return vD;case"reauthViaPopup":case"reauthViaRedirect":return gD;default:xi(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Pl(2e3,1e4);class Us extends JE{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yD.get())};e()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="pendingRedirect",dc=new Map;class wD extends JE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const i=await xD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xD(t,e){const n=kD(e),i=ED(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function SD(t,e){dc.set(t._key(),e)}function ED(t){return fi(t._redirectPersistence)}function kD(t){return hc(_D,t.config.apiKey,t.name)}async function CD(t,e,n=!1){const i=Rh(t),r=pD(i,e),a=await new wD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=10*60*1e3;class ND{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!ek(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TD&&this.cachedEventUids.clear(),this.cachedEventUids.has(sw(e))}saveEventToCache(e){this.cachedEventUids.add(sw(e)),this.lastProcessedEventTime=Date.now()}}function sw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ek({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ek(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e={}){return Ml(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MD=/^https?/;async function LD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ID(t);for(const n of e)try{if(AD(n))return}catch{}xi(t,"unauthorized-domain")}function AD(t){const e=nm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!MD.test(n))return!1;if(PD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new Pl(3e4,6e4);function ow(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OD(t){return new Promise((e,n)=>{var i,r,o;function a(){ow(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ow(),n(Xn(t,"network-request-failed"))},timeout:DD.get()})}if(!((r=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)a();else{const c=LA("iframefcb");return Jn()[c]=()=>{gapi.load?a():n(Xn(t,"network-request-failed"))},UE(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw fc=null,e})}let fc=null;function RD(t){return fc=fc||OD(t),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=new Pl(5e3,15e3),FD="__/auth/iframe",zD="emulator/auth/iframe",UD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$D=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BD(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bg(e,zD):`https://${t.config.authDomain}/${FD}`,i={apiKey:e.apiKey,appName:t.name,v:bo},r=$D.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Il(i).slice(1)}`}async function VD(t){const e=await RD(t),n=Jn().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:BD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UD,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Xn(t,"network-request-failed"),c=Jn().setTimeout(()=>{o(a)},jD.get());function h(){Jn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HD=500,WD=600,KD="_blank",QD="http://localhost";class aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GD(t,e,n,i=HD,r=WD){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},qD),{width:i.toString(),height:r.toString(),top:o,left:a}),p=Bt().toLowerCase();n&&(c=ME(p)?KD:n),PE(p)&&(e=e||QD,h.scrollbars="yes");const m=Object.entries(h).reduce((y,[x,C])=>`${y}${x}=${C},`,"");if(bA(p)&&c!=="_self")return ZD(e||"",c),new aw(null);const v=window.open(e||"",c,m);he(v,t,"popup-blocked");try{v.focus()}catch{}return new aw(v)}function ZD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="__/auth/handler",XD="emulator/auth/handler",JD=encodeURIComponent("fac");async function lw(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bo,eventId:r};if(e instanceof VE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ZM(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))a[m]=v}if(e instanceof Ll){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),p=h?`#${JD}=${encodeURIComponent(h)}`:"";return`${eO(t)}?${Il(c).slice(1)}${p}`}function eO({config:t}){return t.emulator?Bg(t,XD):`https://${t.authDomain}/${YD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class tO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=CD,this._overrideRedirectResult=SD}async _openPopup(e,n,i,r){var o;Si((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await lw(e,n,i,nm(),r);return GD(e,a,Hg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await lw(e,n,i,nm(),r);return rD(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Si(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await VD(e),i=new ND(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mf,{type:Mf},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Mf];a!==void 0&&n(!!a),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RE()||qg()||Oh()}}const nO=tO;var uw="@firebase/auth",cw="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function sO(t){fo(new Xr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(t)},p=new FA(i,r,o,h);return UA(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),fo(new Xr("auth-internal",e=>{const n=Rh(e.getProvider("auth").getImmediate());return(i=>new iO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(uw,cw,rO(t)),lr(uw,cw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=5*60,aO=gE("authIdTokenMaxAge")||oO;let hw=null;const lO=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>aO)return;const r=n==null?void 0:n.token;hw!==r&&(hw=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function uO(t=ZL()){const e=zg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zA(t,{popupRedirectResolver:nO,persistence:[fD,tD,QE]}),i=gE("authTokenSyncURL");if(i){const o=lO(i);GA(n,o,()=>o(n.currentUser)),QA(n,a=>o(a))}const r=zM("auth");return r&&$A(n,`http://${r}`),n}sO("Browser");var cO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K,Kg=Kg||{},le=cO||self;function zh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Uh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hO(t,e,n){return t.call.apply(t.bind,arguments)}function dO(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ft(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ft=hO:Ft=dO,Ft.apply(null,arguments)}function zu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function St(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[r].apply(i,a)}}function xr(){this.s=this.s,this.o=this.o}var fO=0;xr.prototype.s=!1;xr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),fO!=0)};xr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Qg(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function dw(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(zh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let a=0;a<o;a++)t[r+a]=i[a]}else t.push(i)}}function zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var pO=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function il(t){return/^[\s\xa0]*$/.test(t)}function $h(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function Kn(t){return $h().indexOf(t)!=-1}function Gg(t){return Gg[" "](t),t}Gg[" "]=function(){};function mO(t,e){var n=lR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var gO=Kn("Opera"),mo=Kn("Trident")||Kn("MSIE"),nk=Kn("Edge"),rm=nk||mo,ik=Kn("Gecko")&&!($h().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),vO=$h().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge");function rk(){var t=le.document;return t?t.documentMode:void 0}var sm;e:{var Lf="",Af=function(){var t=$h();if(ik)return/rv:([^\);]+)(\)|;)/.exec(t);if(nk)return/Edge\/([\d\.]+)/.exec(t);if(mo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vO)return/WebKit\/(\S+)/.exec(t);if(gO)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Af&&(Lf=Af?Af[1]:""),mo){var Df=rk();if(Df!=null&&Df>parseFloat(Lf)){sm=String(Df);break e}}sm=Lf}var om;if(le.document&&mo){var fw=rk();om=fw||parseInt(sm,10)||void 0}else om=void 0;var yO=om;function rl(t,e){if(zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ik){e:{try{Gg(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:_O[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&rl.$.h.call(this)}}St(rl,zt);var _O={2:"touch",3:"pen",4:"mouse"};rl.prototype.h=function(){rl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Bh="closure_listenable_"+(1e6*Math.random()|0),wO=0;function xO(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++wO,this.fa=this.ia=!1}function Vh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Zg(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function SO(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function sk(t){const e={};for(const n in t)e[n]=t[n];return e}const pw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ok(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<pw.length;o++)n=pw[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function qh(t){this.src=t,this.g={},this.h=0}qh.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var a=lm(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new xO(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function am(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=tk(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Vh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function lm(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var Yg="closure_lm_"+(1e6*Math.random()|0),Of={};function ak(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ak(t,e[o],n,i,r);return null}return n=ck(n),t&&t[Bh]?t.O(e,n,Uh(i)?!!i.capture:!1,r):EO(t,e,n,!1,i,r)}function EO(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=Uh(r)?!!r.capture:!!r,c=Jg(t);if(c||(t[Yg]=c=new qh(t)),n=c.add(e,n,i,a,o),n.proxy)return n;if(i=kO(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)pO||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(uk(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function kO(){function t(n){return e.call(t.src,t.listener,n)}const e=CO;return t}function lk(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)lk(t,e[o],n,i,r);else i=Uh(i)?!!i.capture:!!i,n=ck(n),t&&t[Bh]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=lm(o,n,i,r),-1<n&&(Vh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Jg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lm(e,n,i,r)),(n=-1<t?e[t]:null)&&Xg(n))}function Xg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Bh])am(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(uk(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Jg(e))?(am(n,t),n.h==0&&(n.src=null,e[Yg]=null)):Vh(t)}}}function uk(t){return t in Of?Of[t]:Of[t]="on"+t}function CO(t,e){if(t.fa)t=!0;else{e=new rl(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Xg(t),t=n.call(i,e)}return t}function Jg(t){return t=t[Yg],t instanceof qh?t:null}var Rf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ck(t){return typeof t=="function"?t:(t[Rf]||(t[Rf]=function(e){return t.handleEvent(e)}),t[Rf])}function xt(){xr.call(this),this.i=new qh(this),this.S=this,this.J=null}St(xt,xr);xt.prototype[Bh]=!0;xt.prototype.removeEventListener=function(t,e,n,i){lk(this,t,e,n,i)};function bt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new zt(e,t);else if(e instanceof zt)e.target=e.target||t;else{var r=e;e=new zt(i,t),ok(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];r=Uu(a,i,!0,e)&&r}if(a=e.g=t,r=Uu(a,i,!0,e)&&r,r=Uu(a,i,!1,e)&&r,n)for(o=0;o<n.length;o++)a=e.g=n[o],r=Uu(a,i,!1,e)&&r}xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Vh(n[i]);delete t.g[e],t.h--}}this.J=null};xt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};xt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Uu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.fa&&a.capture==n){var c=a.listener,h=a.la||a.src;a.ia&&am(t.i,a),r=c.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var ev=le.JSON.stringify;class TO{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function NO(){var t=tv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bO{constructor(){this.h=this.g=null}add(e,n){const i=hk.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var hk=new TO(()=>new IO,t=>t.reset());class IO{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function PO(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function MO(t){le.setTimeout(()=>{throw t},0)}let sl,ol=!1,tv=new bO,dk=()=>{const t=le.Promise.resolve(void 0);sl=()=>{t.then(LO)}};var LO=()=>{for(var t;t=NO();){try{t.h.call(t.g)}catch(n){MO(n)}var e=hk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ol=!1};function Hh(t,e){xt.call(this),this.h=t||1,this.g=e||le,this.j=Ft(this.qb,this),this.l=Date.now()}St(Hh,xt);K=Hh.prototype;K.ga=!1;K.T=null;K.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bt(this,"tick"),this.ga&&(nv(this),this.start()))}};K.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function nv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}K.N=function(){Hh.$.N.call(this),nv(this),delete this.g};function iv(t,e,n){if(typeof t=="function")n&&(t=Ft(t,n));else if(t&&typeof t.handleEvent=="function")t=Ft(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function fk(t){t.g=iv(()=>{t.g=null,t.i&&(t.i=!1,fk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AO extends xr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fk(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(t){xr.call(this),this.h=t,this.g={}}St(al,xr);var mw=[];function pk(t,e,n,i){Array.isArray(n)||(n&&(mw[0]=n.toString()),n=mw);for(var r=0;r<n.length;r++){var o=ak(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function mk(t){Zg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Xg(e)},t),t.g={}}al.prototype.N=function(){al.$.N.call(this),mk(this)};al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Wh(){this.g=!0}Wh.prototype.Ea=function(){this.g=!1};function DO(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var a="",c=o.split("&"),h=0;h<c.length;h++){var p=c[h].split("=");if(1<p.length){var m=p[0];p=p[1];var v=m.split("_");a=2<=v.length&&v[1]=="type"?a+(m+"="+p+"&"):a+(m+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function OO(t,e,n,i,r,o,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+a})}function $s(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+jO(t,n)+(i?" "+i:"")})}function RO(t,e){t.info(function(){return"TIMEOUT: "+e})}Wh.prototype.info=function(){};function jO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return ev(n)}catch{return e}}var us={},gw=null;function Kh(){return gw=gw||new xt}us.Ta="serverreachability";function gk(t){zt.call(this,us.Ta,t)}St(gk,zt);function ll(t){const e=Kh();bt(e,new gk(e))}us.STAT_EVENT="statevent";function vk(t,e){zt.call(this,us.STAT_EVENT,t),this.stat=e}St(vk,zt);function Wt(t){const e=Kh();bt(e,new vk(e,t))}us.Ua="timingevent";function yk(t,e){zt.call(this,us.Ua,t),this.size=e}St(yk,zt);function Dl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Qh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_k={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rv(){}rv.prototype.h=null;function vw(t){return t.h||(t.h=t.i())}function wk(){}var Ol={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sv(){zt.call(this,"d")}St(sv,zt);function ov(){zt.call(this,"c")}St(ov,zt);var um;function Gh(){}St(Gh,rv);Gh.prototype.g=function(){return new XMLHttpRequest};Gh.prototype.i=function(){return{}};um=new Gh;function Rl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new al(this),this.P=FO,t=rm?125:void 0,this.V=new Hh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xk}function xk(){this.i=null,this.g="",this.h=!1}var FO=45e3,cm={},Jc={};K=Rl.prototype;K.setTimeout=function(t){this.P=t};function hm(t,e,n){t.L=1,t.v=Yh(Ei(e)),t.s=n,t.S=!0,Sk(t,null)}function Sk(t,e){t.G=Date.now(),jl(t),t.A=Ei(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),Pk(n.i,"t",i),t.C=0,n=t.l.J,t.h=new xk,t.g=Yk(t.l,n?e:null,!t.s),0<t.O&&(t.M=new AO(Ft(t.Pa,t,t.g),t.O)),pk(t.U,t.g,"readystatechange",t.nb),e=t.I?sk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ll(),DO(t.j,t.u,t.A,t.m,t.W,t.s)}K.nb=function(t){t=t.target;const e=this.M;e&&Qn(t)==3?e.l():this.Pa(t)};K.Pa=function(t){try{if(t==this.g)e:{const m=Qn(this.g);var e=this.g.Ia();const v=this.g.da();if(!(3>m)&&(m!=3||rm||this.g&&(this.h.h||this.g.ja()||xw(this.g)))){this.J||m!=4||e==7||(e==8||0>=v?ll(3):ll(2)),Zh(this);var n=this.g.da();this.ca=n;t:if(Ek(this)){var i=xw(this.g);t="";var r=i.length,o=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),ba(this);var a="";break t}this.h.i=new le.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,OO(this.j,this.u,this.A,this.m,this.W,m,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!il(c)){var p=c;break t}}p=null}if(n=p)$s(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dm(this,n);else{this.i=!1,this.o=3,Wt(12),zr(this),ba(this);break e}}this.S?(kk(this,m,a),rm&&this.i&&m==3&&(pk(this.U,this.V,"tick",this.mb),this.V.start())):($s(this.j,this.m,a,null),dm(this,a)),m==4&&zr(this),this.i&&!this.J&&(m==4?Kk(this.l,this):(this.i=!1,jl(this)))}else sR(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Wt(12)):(this.o=0,Wt(13)),zr(this),ba(this)}}}catch{}finally{}};function Ek(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function kk(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=zO(t,n),r==Jc){e==4&&(t.o=4,Wt(14),i=!1),$s(t.j,t.m,null,"[Incomplete Response]");break}else if(r==cm){t.o=4,Wt(15),$s(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else $s(t.j,t.m,r,null),dm(t,r);Ek(t)&&r!=Jc&&r!=cm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Wt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),dv(e),e.M=!0,Wt(11))):($s(t.j,t.m,n,"[Invalid Chunked Response]"),zr(t),ba(t))}K.mb=function(){if(this.g){var t=Qn(this.g),e=this.g.ja();this.C<e.length&&(Zh(this),kk(this,t,e),this.i&&t!=4&&jl(this))}};function zO(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Jc:(n=Number(e.substring(n,i)),isNaN(n)?cm:(i+=1,i+n>e.length?Jc:(e=e.slice(i,i+n),t.C=i+n,e)))}K.cancel=function(){this.J=!0,zr(this)};function jl(t){t.Y=Date.now()+t.P,Ck(t,t.P)}function Ck(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Dl(Ft(t.lb,t),e)}function Zh(t){t.B&&(le.clearTimeout(t.B),t.B=null)}K.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(RO(this.j,this.A),this.L!=2&&(ll(),Wt(17)),zr(this),this.o=2,ba(this)):Ck(this,this.Y-t)};function ba(t){t.l.H==0||t.J||Kk(t.l,t)}function zr(t){Zh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,nv(t.V),mk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function dm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||fm(n.i,t))){if(!t.K&&fm(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)nh(n),ed(n);else break e;hv(n),Wt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Dl(Ft(n.ib,n),6e3));if(1>=Ak(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ur(n,11)}else if((t.K||n.g==t)&&nh(n),!il(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let p=r[e];if(n.V=p[0],p=p[1],n.H==2)if(p[0]=="c"){n.K=p[1],n.pa=p[2];const m=p[3];m!=null&&(n.ra=m,n.l.info("VER="+n.ra));const v=p[4];v!=null&&(n.Ga=v,n.l.info("SVER="+n.Ga));const y=p[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const x=t.g;if(x){const C=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var o=i.i;o.g||C.indexOf("spdy")==-1&&C.indexOf("quic")==-1&&C.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(av(o,o.h),o.h=null))}if(i.F){const k=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(i.Da=k,$e(i.I,i.F,k))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=Zk(i,i.J?i.pa:null,i.Y),a.K){Dk(i.i,a);var c=a,h=i.L;h&&c.setTimeout(h),c.B&&(Zh(c),jl(c)),i.g=a}else Hk(i);0<n.j.length&&td(n)}else p[0]!="stop"&&p[0]!="close"||Ur(n,7);else n.H==3&&(p[0]=="stop"||p[0]=="close"?p[0]=="stop"?Ur(n,7):cv(n):p[0]!="noop"&&n.h&&n.h.Aa(p),n.A=0)}}ll(4)}catch{}}function UO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function $O(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Tk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=$O(t),i=UO(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var Nk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Wr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Wr){this.h=t.h,eh(this,t.j),this.s=t.s,this.g=t.g,th(this,t.m),this.l=t.l;var e=t.i,n=new ul;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yw(this,n),this.o=t.o}else t&&(e=String(t).match(Nk))?(this.h=!1,eh(this,e[1]||"",!0),this.s=pa(e[2]||""),this.g=pa(e[3]||"",!0),th(this,e[4]),this.l=pa(e[5]||"",!0),yw(this,e[6]||"",!0),this.o=pa(e[7]||"")):(this.h=!1,this.i=new ul(null,this.h))}Wr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ma(e,_w,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ma(e,_w,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ma(n,n.charAt(0)=="/"?HO:qO,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ma(n,KO)),t.join("")};function Ei(t){return new Wr(t)}function eh(t,e,n){t.j=n?pa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function th(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yw(t,e,n){e instanceof ul?(t.i=e,QO(t.i,t.h)):(n||(e=ma(e,WO)),t.i=new ul(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function Yh(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ma(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,VO),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function VO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _w=/[#\/\?@]/g,qO=/[#\?:]/g,HO=/[#\?]/g,WO=/[#\?@]/g,KO=/#/g;function ul(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Sr(t){t.g||(t.g=new Map,t.h=0,t.i&&BO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}K=ul.prototype;K.add=function(t,e){Sr(this),this.i=null,t=Io(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function bk(t,e){Sr(t),e=Io(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ik(t,e){return Sr(t),e=Io(t,e),t.g.has(e)}K.forEach=function(t,e){Sr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};K.ta=function(){Sr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};K.Z=function(t){Sr(this);let e=[];if(typeof t=="string")Ik(this,t)&&(e=e.concat(this.g.get(Io(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};K.set=function(t,e){return Sr(this),this.i=null,t=Io(this,t),Ik(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};K.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Pk(t,e,n){bk(t,e),0<n.length&&(t.i=null,t.g.set(Io(t,e),Qg(n)),t.h+=n.length)}K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=o;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function Io(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function QO(t,e){e&&!t.j&&(Sr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(bk(this,i),Pk(this,r,n))},t)),t.j=e}var GO=class{constructor(t,e){this.g=t,this.map=e}};function Mk(t){this.l=t||ZO,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ZO=10;function Lk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ak(t){return t.h?1:t.g?t.g.size:0}function fm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function av(t,e){t.g?t.g.add(e):t.h=e}function Dk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Mk.prototype.cancel=function(){if(this.i=Ok(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ok(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Qg(t.i)}var YO=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function XO(){this.g=new YO}function JO(t,e,n){const i=n||"";try{Tk(t,function(r,o){let a=r;Uh(r)&&(a=ev(r)),e.push(i+o+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function eR(t,e){const n=new Wh;if(le.Image){const i=new Image;i.onload=zu($u,n,i,"TestLoadImage: loaded",!0,e),i.onerror=zu($u,n,i,"TestLoadImage: error",!1,e),i.onabort=zu($u,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=zu($u,n,i,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function $u(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Fl(t){this.l=t.fc||null,this.j=t.ob||!1}St(Fl,rv);Fl.prototype.g=function(){return new Xh(this.l,this.j)};Fl.prototype.i=function(t){return function(){return t}}({});function Xh(t,e){xt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=lv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St(Xh,xt);var lv=0;K=Xh.prototype;K.open=function(t,e){if(this.readyState!=lv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,cl(this)};K.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zl(this)),this.readyState=lv};K.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Rk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}K.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zl(this):cl(this),this.readyState==3&&Rk(this)}};K.Za=function(t){this.g&&(this.response=this.responseText=t,zl(this))};K.Ya=function(t){this.g&&(this.response=t,zl(this))};K.ka=function(){this.g&&zl(this)};function zl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,cl(t)}K.setRequestHeader=function(t,e){this.v.append(t,e)};K.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};K.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function cl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var tR=le.JSON.parse;function tt(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jk,this.L=this.M=!1}St(tt,xt);var jk="",nR=/^https?$/i,iR=["POST","PUT"];K=tt.prototype;K.Oa=function(t){this.M=t};K.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():um.g(),this.C=this.u?vw(this.u):vw(um),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){ww(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=le.FormData&&t instanceof le.FormData,!(0<=tk(iR,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Uk(this),0<this.B&&((this.L=rR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=iv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ww(this,o)}};function rR(t){return mo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}K.ua=function(){typeof Kg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))};function ww(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Fk(t),Jh(t)}function Fk(t){t.F||(t.F=!0,bt(t,"complete"),bt(t,"error"))}K.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bt(this,"complete"),bt(this,"abort"),Jh(this))};K.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jh(this,!0)),tt.$.N.call(this)};K.La=function(){this.s||(this.G||this.v||this.l?zk(this):this.kb())};K.kb=function(){zk(this)};function zk(t){if(t.h&&typeof Kg<"u"&&(!t.C[1]||Qn(t)!=4||t.da()!=2)){if(t.v&&Qn(t)==4)iv(t.La,0,t);else if(bt(t,"readystatechange"),Qn(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(Nk)[1]||null;!r&&le.self&&le.self.location&&(r=le.self.location.protocol.slice(0,-1)),i=!nR.test(r?r.toLowerCase():"")}n=i}if(n)bt(t,"complete"),bt(t,"success");else{t.m=6;try{var o=2<Qn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Fk(t)}}finally{Jh(t)}}}}function Jh(t,e){if(t.g){Uk(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||bt(t,"ready");try{n.onreadystatechange=i}catch{}}}function Uk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}K.isActive=function(){return!!this.g};function Qn(t){return t.g?t.g.readyState:0}K.da=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}};K.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};K.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),tR(e)}};function xw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case jk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function sR(t){const e={};t=(t.g&&2<=Qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(il(t[i]))continue;var n=PO(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[r]||[];e[r]=o,o.push(n)}SO(e,function(i){return i.join(", ")})}K.Ia=function(){return this.m};K.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function $k(t){let e="";return Zg(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function uv(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=$k(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$e(t,e,n))}function ia(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bk(t){this.Ga=0,this.j=[],this.l=new Wh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ia("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ia("baseRetryDelayMs",5e3,t),this.hb=ia("retryDelaySeedMs",1e4,t),this.eb=ia("forwardChannelMaxRetries",2,t),this.xa=ia("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Mk(t&&t.concurrentRequestLimit),this.Ja=new XO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}K=Bk.prototype;K.ra=8;K.H=1;function cv(t){if(Vk(t),t.H==3){var e=t.W++,n=Ei(t.I);if($e(n,"SID",t.K),$e(n,"RID",e),$e(n,"TYPE","terminate"),Ul(t,n),e=new Rl(t,t.l,e),e.L=2,e.v=Yh(Ei(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=Yk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),jl(e)}Gk(t)}function ed(t){t.g&&(dv(t),t.g.cancel(),t.g=null)}function Vk(t){ed(t),t.u&&(le.clearTimeout(t.u),t.u=null),nh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function td(t){if(!Lk(t.i)&&!t.m){t.m=!0;var e=t.Na;sl||dk(),ol||(sl(),ol=!0),tv.add(e,t),t.C=0}}function oR(t,e){return Ak(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Dl(Ft(t.Na,t,e),Qk(t,t.C)),t.C++,!0)}K.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Rl(this,this.l,t);let o=this.s;if(this.U&&(o?(o=sk(o),ok(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=qk(this,r,e),n=Ei(this.I),$e(n,"RID",t),$e(n,"CVER",22),this.F&&$e(n,"X-HTTP-Session-Id",this.F),Ul(this,n),o&&(this.O?e="headers="+encodeURIComponent(String($k(o)))+"&"+e:this.o&&uv(n,this.o,o)),av(this.i,r),this.bb&&$e(n,"TYPE","init"),this.P?($e(n,"$req",e),$e(n,"SID","null"),r.aa=!0,hm(r,n,null)):hm(r,n,e),this.H=2}}else this.H==3&&(t?Sw(this,t):this.j.length==0||Lk(this.i)||Sw(this))};function Sw(t,e){var n;e?n=e.m:n=t.W++;const i=Ei(t.I);$e(i,"SID",t.K),$e(i,"RID",n),$e(i,"AID",t.V),Ul(t,i),t.o&&t.s&&uv(i,t.o,t.s),n=new Rl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=qk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),av(t.i,n),hm(n,i,e)}function Ul(t,e){t.na&&Zg(t.na,function(n,i){$e(e,i,n)}),t.h&&Tk({},function(n,i){$e(e,i,n)})}function qk(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ft(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){const a=["count="+n];o==-1?0<n?(o=r[0].g,a.push("ofs="+o)):o=0:a.push("ofs="+o);let c=!0;for(let h=0;h<n;h++){let p=r[h].g;const m=r[h].map;if(p-=o,0>p)o=Math.max(0,r[h].g-100),c=!1;else try{JO(m,a,"req"+p+"_")}catch{i&&i(m)}}if(c){i=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function Hk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;sl||dk(),ol||(sl(),ol=!0),tv.add(e,t),t.A=0}}function hv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Dl(Ft(t.Ma,t),Qk(t,t.A)),t.A++,!0)}K.Ma=function(){if(this.u=null,Wk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Dl(Ft(this.jb,this),t)}};K.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wt(10),ed(this),Wk(this))};function dv(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function Wk(t){t.g=new Rl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ei(t.wa);$e(e,"RID","rpc"),$e(e,"SID",t.K),$e(e,"AID",t.V),$e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$e(e,"TO",t.qa),$e(e,"TYPE","xmlhttp"),Ul(t,e),t.o&&t.s&&uv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Yh(Ei(e)),n.s=null,n.S=!0,Sk(n,t)}K.ib=function(){this.v!=null&&(this.v=null,ed(this),hv(this),Wt(19))};function nh(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function Kk(t,e){var n=null;if(t.g==e){nh(t),dv(t),t.g=null;var i=2}else if(fm(t.i,e))n=e.F,Dk(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Kh(),bt(i,new yk(i,n)),td(t)}else Hk(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&oR(t,e)||i==2&&hv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ur(t,5);break;case 4:Ur(t,10);break;case 3:Ur(t,6);break;default:Ur(t,2)}}}function Qk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ur(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Ft(t.pb,t);n||(n=new Wr("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||eh(n,"https"),Yh(n)),eR(n.toString(),i)}else Wt(2);t.H=0,t.h&&t.h.za(e),Gk(t),Vk(t)}K.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Wt(2)):(this.l.info("Failed to ping google.com"),Wt(1))};function Gk(t){if(t.H=0,t.ma=[],t.h){const e=Ok(t.i);(e.length!=0||t.j.length!=0)&&(dw(t.ma,e),dw(t.ma,t.j),t.i.i.length=0,Qg(t.j),t.j.length=0),t.h.ya()}}function Zk(t,e,n){var i=n instanceof Wr?Ei(n):new Wr(n);if(i.g!="")e&&(i.g=e+"."+i.g),th(i,i.m);else{var r=le.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Wr(null);i&&eh(o,i),e&&(o.g=e),r&&th(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&$e(i,n,e),$e(i,"VER",t.ra),Ul(t,i),i}function Yk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new tt(new Fl({ob:!0})):new tt(t.va),e.Oa(t.J),e}K.isActive=function(){return!!this.h&&this.h.isActive(this)};function Xk(){}K=Xk.prototype;K.Ba=function(){};K.Aa=function(){};K.za=function(){};K.ya=function(){};K.isActive=function(){return!0};K.Va=function(){};function ih(){if(mo&&!(10<=Number(yO)))throw Error("Environmental error: no available transport.")}ih.prototype.g=function(t,e){return new fn(t,e)};function fn(t,e){xt.call(this),this.g=new Bk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!il(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!il(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Po(this)}St(fn,xt);fn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Zk(t,null,t.Y),td(t)};fn.prototype.close=function(){cv(this.g)};fn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ev(t),t=n);e.j.push(new GO(e.fb++,t)),e.H==3&&td(e)};fn.prototype.N=function(){this.g.h=null,delete this.j,cv(this.g),delete this.g,fn.$.N.call(this)};function Jk(t){sv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}St(Jk,sv);function eC(){ov.call(this),this.status=1}St(eC,ov);function Po(t){this.g=t}St(Po,Xk);Po.prototype.Ba=function(){bt(this.g,"a")};Po.prototype.Aa=function(t){bt(this.g,new Jk(t))};Po.prototype.za=function(t){bt(this.g,new eC)};Po.prototype.ya=function(){bt(this.g,"b")};function aR(){this.blockSize=-1}function jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}St(jn,aR);jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function jf(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],a=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}jn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)jf(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){jf(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){jf(this,i),r=0;break}}this.h=r,this.i+=e};jn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var lR={};function fv(t){return-128<=t&&128>t?mO(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function Gn(t){if(isNaN(t)||!isFinite(t))return Xs;if(0>t)return Tt(Gn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=pm;return new Re(e,0)}function tC(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Tt(tC(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Gn(Math.pow(e,8)),i=Xs,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+o),e);8>o?(o=Gn(Math.pow(e,o)),i=i.R(o).add(Gn(a))):(i=i.R(n),i=i.add(Gn(a)))}return i}var pm=4294967296,Xs=fv(0),mm=fv(1),Ew=fv(16777216);K=Re.prototype;K.ea=function(){if(Sn(this))return-Tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:pm+i)*e,e*=pm}return t};K.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(pi(this))return"0";if(Sn(this))return"-"+Tt(this).toString(t);for(var e=Gn(Math.pow(t,6)),n=this,i="";;){var r=sh(n,e).g;n=rh(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,pi(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};K.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function pi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Sn(t){return t.h==-1}K.X=function(t){return t=rh(this,t),Sn(t)?-1:pi(t)?0:1};function Tt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Re(n,~t.h).add(mm)}K.abs=function(){return Sn(this)?Tt(this):this};K.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),a=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,o&=65535,a&=65535,n[r]=a<<16|o}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function rh(t,e){return t.add(Tt(e))}K.R=function(t){if(pi(this)||pi(t))return Xs;if(Sn(this))return Sn(t)?Tt(this).R(Tt(t)):Tt(Tt(this).R(t));if(Sn(t))return Tt(this.R(Tt(t)));if(0>this.X(Ew)&&0>t.X(Ew))return Gn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,a=this.D(i)&65535,c=t.D(r)>>>16,h=t.D(r)&65535;n[2*i+2*r]+=a*h,Bu(n,2*i+2*r),n[2*i+2*r+1]+=o*h,Bu(n,2*i+2*r+1),n[2*i+2*r+1]+=a*c,Bu(n,2*i+2*r+1),n[2*i+2*r+2]+=o*c,Bu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Re(n,0)};function Bu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ra(t,e){this.g=t,this.h=e}function sh(t,e){if(pi(e))throw Error("division by zero");if(pi(t))return new ra(Xs,Xs);if(Sn(t))return e=sh(Tt(t),e),new ra(Tt(e.g),Tt(e.h));if(Sn(e))return e=sh(t,Tt(e)),new ra(Tt(e.g),e.h);if(30<t.g.length){if(Sn(t)||Sn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=mm,i=e;0>=i.X(t);)n=kw(n),i=kw(i);var r=ks(n,1),o=ks(i,1);for(i=ks(i,2),n=ks(n,2);!pi(i);){var a=o.add(i);0>=a.X(t)&&(r=r.add(n),o=a),i=ks(i,1),n=ks(n,1)}return e=rh(t,r.R(e)),new ra(r,e)}for(r=Xs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=Gn(n),a=o.R(e);Sn(a)||0<a.X(t);)n-=i,o=Gn(n),a=o.R(e);pi(o)&&(o=mm),r=r.add(o),t=rh(t,a)}return new ra(r,t)}K.gb=function(t){return sh(this,t).h};K.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Re(n,this.h&t.h)};K.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Re(n,this.h|t.h)};K.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Re(n,this.h^t.h)};function kw(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Re(n,t.h)}function ks(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Re(r,t.h)}ih.prototype.createWebChannel=ih.prototype.g;fn.prototype.send=fn.prototype.u;fn.prototype.open=fn.prototype.m;fn.prototype.close=fn.prototype.close;Qh.NO_ERROR=0;Qh.TIMEOUT=8;Qh.HTTP_ERROR=6;_k.COMPLETE="complete";wk.EventType=Ol;Ol.OPEN="a";Ol.CLOSE="b";Ol.ERROR="c";Ol.MESSAGE="d";xt.prototype.listen=xt.prototype.O;tt.prototype.listenOnce=tt.prototype.P;tt.prototype.getLastError=tt.prototype.Sa;tt.prototype.getLastErrorCode=tt.prototype.Ia;tt.prototype.getStatus=tt.prototype.da;tt.prototype.getResponseJson=tt.prototype.Wa;tt.prototype.getResponseText=tt.prototype.ja;tt.prototype.send=tt.prototype.ha;tt.prototype.setWithCredentials=tt.prototype.Oa;jn.prototype.digest=jn.prototype.l;jn.prototype.reset=jn.prototype.reset;jn.prototype.update=jn.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=Gn;Re.fromString=tC;var uR=function(){return new ih},cR=function(){return Kh()},Ff=Qh,hR=_k,dR=us,Cw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fR=Fl,Vu=wk,pR=tt,mR=jn,Js=Re;const Tw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new jg("@firebase/firestore");function Nw(){return ts.logLevel}function ee(t,...e){if(ts.logLevel<=Ne.DEBUG){const n=e.map(pv);ts.debug(`Firestore (${Mo}): ${t}`,...n)}}function ki(t,...e){if(ts.logLevel<=Ne.ERROR){const n=e.map(pv);ts.error(`Firestore (${Mo}): ${t}`,...n)}}function hl(t,...e){if(ts.logLevel<=Ne.WARN){const n=e.map(pv);ts.warn(`Firestore (${Mo}): ${t}`,...n)}}function pv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: `+t;throw ki(e),new Error(e)}function qe(t,e){t||ae()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class yR{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ur,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},c=h=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ur)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new gR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Yt(e)}}class _R{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class wR{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new _R(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.T;return this.T=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?r(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.T=n.token,new xR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=ER(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function go(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new gt(0,0))}static max(){return new ce(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends dl{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const kR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends dl{construct(e,n,i){return new jt(e,n,i)}static isValidIdentifier(e){return kR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Be.fromString(e))}static fromName(e){return new ne(Be.fromString(e).popFirst(5))}static empty(){return new ne(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Be(e.slice()))}}function CR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new fr(r,ne.empty(),e)}function TR(t){return new fr(t.readTime,t.key,-1)}class fr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new fr(ce.min(),ne.empty(),-1)}static max(){return new fr(ce.max(),ne.empty(),-1)}}function NR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==bR)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,i)=>{n(e)})}static reject(e){return new q((n,i)=>{i(e)})}static waitFor(e){return new q((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=q.resolve(!1);for(const i of e)n=n.next(r=>r?q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new q((i,r)=>{const o=e.length,a=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;n(e[p]).next(m=>{a[p]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function Bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}mv.ct=-1;function nd(t){return t==null}function oh(t){return t===0&&1/t==-1/0}function PR(t){return typeof t=="number"&&Number.isInteger(t)&&!oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=r??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ct(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Ct(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new un([])}unionWith(e){let n=new Ut(jt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new rC("Invalid base64 string: "+r):r}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(qe(!!t),typeof t=="string"){let e=0;const n=MR.exec(t);if(qe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ns(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vv(t){const e=t.mapValue.fields.__previous_value__;return gv(e)?vv(e):e}function fl(t){const e=pr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,i,r,o,a,c,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}class pl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu={mapValue:{}};function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gv(t)?4:AR(t)?9007199254740991:10:ae()}function ti(t,e){if(t===e)return!0;const n=is(t);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=pr(i.timestampValue),a=pr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return ns(i.bytesValue).isEqual(ns(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return lt(i.geoPointValue.latitude)===lt(r.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return lt(i.integerValue)===lt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=lt(i.doubleValue),a=lt(r.doubleValue);return o===a?oh(o)===oh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return go(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(bw(o)!==bw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ti(o[c],a[c])))return!1;return!0}(t,e);default:return ae()}}function ml(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function vo(t,e){if(t===e)return 0;const n=is(t),i=is(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=lt(r.integerValue||r.doubleValue),c=lt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Pw(t.timestampValue,e.timestampValue);case 4:return Pw(fl(t),fl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(r,o){const a=ns(r),c=ns(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const p=Le(a[h],c[h]);if(p!==0)return p}return Le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Le(lt(r.latitude),lt(o.latitude));return a!==0?a:Le(lt(r.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let h=0;h<a.length&&h<c.length;++h){const p=vo(a[h],c[h]);if(p)return p}return Le(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Hu.mapValue&&o===Hu.mapValue)return 0;if(r===Hu.mapValue)return 1;if(o===Hu.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const v=Le(c[m],p[m]);if(v!==0)return v;const y=vo(a[c[m]],h[p[m]]);if(y!==0)return y}return Le(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Pw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=pr(t),i=pr(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function yo(t){return gm(t)}function gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=pr(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ns(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ne.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",o=!0;for(const a of i.values||[])o?o=!1:r+=",",r+=gm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${gm(i.fields[c])}`;return o+"}"}(t.mapValue):ae();var e,n}function Mw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vm(t){return!!t&&"integerValue"in t}function yv(t){return!!t&&"arrayValue"in t}function Lw(t){return!!t&&"nullValue"in t}function Aw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ia(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=jt.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=Ia(a):r.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];pc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){cs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Jt(Ia(this.value))}}function sC(t){const e=[];return cs(t.fields,(n,i)=>{const r=new jt([n]);if(pc(i)){const o=sC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Rt(e,0,ce.min(),ce.min(),ce.min(),Jt.empty(),0)}static newFoundDocument(e,n,i,r){return new Rt(e,1,n,ce.min(),i,r,0)}static newNoDocument(e,n){return new Rt(e,2,n,ce.min(),ce.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ce.min(),ce.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.position=e,this.inclusive=n}}function Dw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ne.comparator(ne.fromName(a.referenceValue),n.key):i=vo(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ow(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n="asc"){this.field=e,this.dir=n}}function DR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{}class ct extends oC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new RR(e,n,i):n==="array-contains"?new zR(e,i):n==="in"?new UR(e,i):n==="not-in"?new $R(e,i):n==="array-contains-any"?new BR(e,i):new ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new jR(e,i):new FR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends oC{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Fn(e,n)}matches(e){return aC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function aC(t){return t.op==="and"}function lC(t){return OR(t)&&aC(t)}function OR(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function ym(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+yo(t.value);if(lC(t))return t.filters.map(e=>ym(e)).join(",");{const e=t.filters.map(n=>ym(n)).join(",");return`${t.op}(${e})`}}function uC(t,e){return t instanceof ct?function(n,i){return i instanceof ct&&n.op===i.op&&n.field.isEqual(i.field)&&ti(n.value,i.value)}(t,e):t instanceof Fn?function(n,i){return i instanceof Fn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,o,a)=>r&&uC(o,i.filters[a]),!0):!1}(t,e):void ae()}function cC(t){return t instanceof ct?function(e){return`${e.field.canonicalString()} ${e.op} ${yo(e.value)}`}(t):t instanceof Fn?function(e){return e.op.toString()+" {"+e.getFilters().map(cC).join(" ,")+"}"}(t):"Filter"}class RR extends ct{constructor(e,n,i){super(e,n,i),this.key=ne.fromName(i.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class jR extends ct{constructor(e,n){super(e,"in",n),this.keys=hC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FR extends ct{constructor(e,n){super(e,"not-in",n),this.keys=hC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ne.fromName(i.referenceValue))}class zR extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yv(n)&&ml(n.arrayValue,this.value)}}class UR extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ml(this.value.arrayValue,n)}}class $R extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ml(this.value.arrayValue,n)}}class BR extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ml(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.dt=null}}function Rw(t,e=null,n=[],i=[],r=null,o=null,a=null){return new VR(t,e,n,i,r,o,a)}function _v(t){const e=pe(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ym(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>yo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>yo(i)).join(",")),e.dt=n}return e.dt}function wv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ow(t.startAt,e.startAt)&&Ow(t.endAt,e.endAt)}function _m(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=h,this.wt=null,this._t=null,this.startAt,this.endAt}}function qR(t,e,n,i,r,o,a,c){return new Lo(t,e,n,i,r,o,a,c)}function dC(t){return new Lo(t)}function jw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function id(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function fC(t){return t.collectionGroup!==null}function to(t){const e=pe(t);if(e.wt===null){e.wt=[];const n=id(e),i=xv(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new eo(n)),e.wt.push(new eo(jt.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new eo(jt.keyField(),o))}}}return e.wt}function Ci(t){const e=pe(t);if(!e._t)if(e.limitType==="F")e._t=Rw(e.path,e.collectionGroup,to(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of to(e)){const a=o.dir==="desc"?"asc":"desc";n.push(new eo(o.field,a))}const i=e.endAt?new ah(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ah(e.startAt.position,e.startAt.inclusive):null;e._t=Rw(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function wm(t,e){e.getFirstInequalityField(),id(t);const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lh(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rd(t,e){return wv(Ci(t),Ci(e))&&t.limitType===e.limitType}function pC(t){return`${_v(Ci(t))}|lt:${t.limitType}`}function xm(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>cC(i)).join(", ")}]`),nd(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>yo(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>yo(i)).join(",")),`Target(${n})`}(Ci(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ne.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of to(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,o,a){const c=Dw(r,o,a);return r.inclusive?c<=0:c<0}(n.startAt,to(n),i)||n.endAt&&!function(r,o,a){const c=Dw(r,o,a);return r.inclusive?c>=0:c>0}(n.endAt,to(n),i))}(t,e)}function HR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mC(t){return(e,n)=>{let i=!1;for(const r of to(t)){const o=WR(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function WR(t,e,n){const i=t.field.isKeyField()?ne.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),h=a.data.field(r);return c!==null&&h!==null?vo(c,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return iC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new Ze(ne.comparator);function Ti(){return KR}const gC=new Ze(ne.comparator);function ga(...t){let e=gC;for(const n of t)e=e.insert(n.key,n);return e}function vC(t){let e=gC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $r(){return Pa()}function yC(){return Pa()}function Pa(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const QR=new Ze(ne.comparator),GR=new Ut(ne.comparator);function ye(...t){let e=GR;for(const n of t)e=e.add(n);return e}const ZR=new Ut(Le);function YR(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function wC(t){return{integerValue:""+t}}function XR(t,e){return PR(e)?wC(e):_C(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function JR(t,e,n){return t instanceof gl?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&gv(r)&&(r=vv(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof vl?SC(t,e):t instanceof yl?EC(t,e):function(i,r){const o=xC(i,r),a=Fw(o)+Fw(i.gt);return vm(o)&&vm(i.gt)?wC(a):_C(i.serializer,a)}(t,e)}function ej(t,e,n){return t instanceof vl?SC(t,e):t instanceof yl?EC(t,e):n}function xC(t,e){return t instanceof uh?vm(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class gl extends od{}class vl extends od{constructor(e){super(),this.elements=e}}function SC(t,e){const n=kC(e);for(const i of t.elements)n.some(r=>ti(r,i))||n.push(i);return{arrayValue:{values:n}}}class yl extends od{constructor(e){super(),this.elements=e}}function EC(t,e){let n=kC(e);for(const i of t.elements)n=n.filter(r=>!ti(r,i));return{arrayValue:{values:n}}}class uh extends od{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Fw(t){return lt(t.integerValue||t.doubleValue)}function kC(t){return yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.field=e,this.transform=n}}function nj(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof vl&&i instanceof vl||n instanceof yl&&i instanceof yl?go(n.elements,i.elements,ti):n instanceof uh&&i instanceof uh?ti(n.gt,i.gt):n instanceof gl&&i instanceof gl}(t.transform,e.transform)}class ij{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ad{}function CC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sv(t.key,On.none()):new Vl(t.key,t.data,On.none());{const n=t.data,i=Jt.empty();let r=new Ut(jt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Er(t.key,i,new un(r.toArray()),On.none())}}function rj(t,e,n){t instanceof Vl?function(i,r,o){const a=i.value.clone(),c=Uw(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(i,r,o){if(!mc(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Uw(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(TC(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ma(t,e,n,i){return t instanceof Vl?function(r,o,a,c){if(!mc(r.precondition,o))return a;const h=r.value.clone(),p=$w(r.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof Er?function(r,o,a,c){if(!mc(r.precondition,o))return a;const h=$w(r.fieldTransforms,c,o),p=o.data;return p.setAll(TC(r)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,o,a){return mc(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sj(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=xC(i.transform,r||null);o!=null&&(n===null&&(n=Jt.empty()),n.set(i.field,o))}return n||null}function zw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&go(n,i,(r,o)=>nj(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vl extends ad{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends ad{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function TC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Uw(t,e,n){const i=new Map;qe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,ej(a,c,n[r]))}return i}function $w(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,JR(o,a,e))}return i}class Sv extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oj extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&rj(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ma(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ma(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;const h=CC(a,c);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(ce.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(n,i)=>zw(n,i))&&go(this.baseMutations,e.baseMutations,(n,i)=>zw(n,i))}}class Ev{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){qe(e.mutations.length===i.length);let r=QR;const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Ev(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ee;function cj(t){switch(t){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function NC(t){if(t===void 0)return ki("GRPC error has no .code"),F.UNKNOWN;switch(t){case at.OK:return F.OK;case at.CANCELLED:return F.CANCELLED;case at.UNKNOWN:return F.UNKNOWN;case at.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case at.INTERNAL:return F.INTERNAL;case at.UNAVAILABLE:return F.UNAVAILABLE;case at.UNAUTHENTICATED:return F.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case at.NOT_FOUND:return F.NOT_FOUND;case at.ALREADY_EXISTS:return F.ALREADY_EXISTS;case at.PERMISSION_DENIED:return F.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case at.ABORTED:return F.ABORTED;case at.OUT_OF_RANGE:return F.OUT_OF_RANGE;case at.UNIMPLEMENTED:return F.UNIMPLEMENTED;case at.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Ee=at||(at={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Wu}static getOrCreateInstance(){return Wu===null&&(Wu=new kv),Wu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Wu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new Js([4294967295,4294967295],0);function Bw(t){const e=hj().encode(t),n=new mR;return n.update(e),new Uint8Array(n.digest())}function Vw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Js([n,i],0),new Js([r,o],0)]}class Cv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(i<0)throw new va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Js.fromNumber(this.It)}Et(e,n,i){let r=e.add(n.multiply(Js.fromNumber(i)));return r.compare(dj)===1&&(r=new Js([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Bw(e),[i,r]=Vw(n);for(let o=0;o<this.hashCount;o++){const a=this.Et(i,r,o);if(!this.At(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Cv(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.It===0)return;const n=Bw(e),[i,r]=Vw(n);for(let o=0;o<this.hashCount;o++){const a=this.Et(i,r,o);this.Rt(a)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ld(ce.min(),r,new Ze(Le),Ti(),ye())}}class ql{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ql(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,i,r){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=r}}class bC{constructor(e,n){this.targetId=e,this.Vt=n}}class IC{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class qw{constructor(){this.St=0,this.Dt=Ww(),this.Ct=Vt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ye(),n=ye(),i=ye();return this.Dt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new ql(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=Ww()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class fj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ti(),this.zt=Hw(),this.Wt=new Ze(Le)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,r)=>{this.te(r)&&n(r)})}ne(e){var n;const i=e.targetId,r=e.Vt.count,o=this.se(i);if(o){const a=o.target;if(_m(a))if(r===0){const c=new ne(a.path);this.Yt(i,c,Rt.newNoDocument(c,ce.min()))}else qe(r===1);else{const c=this.ie(i);if(c!==r){const h=this.re(e,c);if(h!==0){this.ee(i);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,p)}(n=kv.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(p,m,v){var y,x,C,k,N,E;const _={localCacheCount:m,existenceFilterCount:v.count},S=v.unchangedNames;return S&&(_.bloomFilter={applied:p===0,hashCount:(y=S==null?void 0:S.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(k=(C=(x=S==null?void 0:S.bits)===null||x===void 0?void 0:x.bitmap)===null||C===void 0?void 0:C.length)!==null&&k!==void 0?k:0,padding:(E=(N=S==null?void 0:S.bits)===null||N===void 0?void 0:N.padding)!==null&&E!==void 0?E:0}),_}(h,c,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=i;let h,p;try{h=ns(o).toUint8Array()}catch(m){if(m instanceof rC)return hl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{p=new Cv(h,a,c)}catch(m){return hl(m instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return p.It===0?1:r!==n-this.oe(e.targetId,p)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const a=this.Gt.ue(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;n.vt(c)||(this.Yt(e,o,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((o,a)=>{const c=this.se(a);if(c){if(o.current&&_m(c.target)){const h=new ne(c.target.path);this.jt.get(h)!==null||this.ae(a,h)||this.Yt(a,h,Rt.newNoDocument(h,e))}o.Mt&&(n.set(a,o.Ot()),o.Ft())}});let i=ye();this.zt.forEach((o,a)=>{let c=!0;a.forEachWhile(h=>{const p=this.se(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.jt.forEach((o,a)=>a.setReadTime(e));const r=new ld(e,n,this.Wt,this.jt,i);return this.jt=Ti(),this.zt=Hw(),this.Wt=new Ze(Le),r}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new qw,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ut(Le),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new qw),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Hw(){return new Ze(ne.comparator)}function Ww(){return new Ze(ne.comparator)}const pj={asc:"ASCENDING",desc:"DESCENDING"},mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"};class vj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sm(t,e){return t.useProto3Json||nd(e)?e:{value:e}}function ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yj(t,e){return ch(t,e.toTimestamp())}function ei(t){return qe(!!t),ce.fromTimestamp(function(e){const n=pr(e);return new gt(n.seconds,n.nanos)}(t))}function Tv(t,e){return function(n){return new Be(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function MC(t){const e=Be.fromString(t);return qe(OC(e)),e}function Em(t,e){return Tv(t.databaseId,e.path)}function zf(t,e){const n=MC(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(LC(n))}function km(t,e){return Tv(t.databaseId,e)}function _j(t){const e=MC(t);return e.length===4?Be.emptyPath():LC(e)}function Cm(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LC(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Kw(t,e,n){return{name:Em(t,e),fields:n.value.mapValue.fields}}function wj(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(qe(p===void 0||typeof p=="string"),Vt.fromBase64String(p||"")):(qe(p===void 0||p instanceof Uint8Array),Vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const p=h.code===void 0?F.UNKNOWN:NC(h.code);return new G(p,h.message||"")}(a);n=new IC(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zf(t,i.document.name),o=ei(i.document.updateTime),a=i.document.createTime?ei(i.document.createTime):ce.min(),c=new Jt({mapValue:{fields:i.document.fields}}),h=Rt.newFoundDocument(r,o,a,c),p=i.targetIds||[],m=i.removedTargetIds||[];n=new gc(p,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zf(t,i.document),o=i.readTime?ei(i.readTime):ce.min(),a=Rt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new gc([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zf(t,i.document),o=i.removedTargetIds||[];n=new gc([],o,r,null)}else{if(!("filter"in e))return ae();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new uj(r,o),c=i.targetId;n=new bC(c,a)}}return n}function xj(t,e){let n;if(e instanceof Vl)n={update:Kw(t,e.key,e.value)};else if(e instanceof Sv)n={delete:Em(t,e.key)};else if(e instanceof Er)n={update:Kw(t,e.key,e.data),updateMask:Pj(e.fieldMask)};else{if(!(e instanceof oj))return ae();n={verify:Em(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uh)return{fieldPath:o.field.canonicalString(),increment:a.gt};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:yj(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ae()}(t,e.precondition)),n}function Sj(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?ei(i.updateTime):ei(r);return o.isEqual(ce.min())&&(o=ei(r)),new ij(o,i.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[km(t,e.path)]}}function kj(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=km(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=km(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(h.length!==0)return DC(Fn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(p=>function(m){return{field:Ts(m.field),direction:Nj(m.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sm(t,e.limit);var c;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function Cj(t){let e=_j(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){qe(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(m){const v=AC(m);return v instanceof Fn&&lC(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(m=>function(v){return new eo(Ns(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m)));let c=null;n.limit&&(c=function(m){let v;return v=typeof m=="object"?m.value:m,nd(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(m){const v=!!m.before,y=m.values||[];return new ah(y,v)}(n.startAt));let p=null;return n.endAt&&(p=function(m){const v=!m.before,y=m.values||[];return new ah(y,v)}(n.endAt)),qR(e,r,a,o,c,"F",h,p)}function Tj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AC(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ns(e.unaryFilter.field);return ct.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ns(e.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ns(e.unaryFilter.field);return ct.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(e.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(e){return ct.create(Ns(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Fn.create(e.compositeFilter.filters.map(n=>AC(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ae()}}(e.compositeFilter.op))}(t):ae()}function Nj(t){return pj[t]}function bj(t){return mj[t]}function Ij(t){return gj[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function Ns(t){return jt.fromServerFormat(t.fieldPath)}function DC(t){return t instanceof ct?function(e){if(e.op==="=="){if(Aw(e.value))return{unaryFilter:{field:Ts(e.field),op:"IS_NAN"}};if(Lw(e.value))return{unaryFilter:{field:Ts(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Aw(e.value))return{unaryFilter:{field:Ts(e.field),op:"IS_NOT_NAN"}};if(Lw(e.value))return{unaryFilter:{field:Ts(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(e.field),op:bj(e.op),value:e.value}}}(t):t instanceof Fn?function(e){const n=e.getFilters().map(i=>DC(i));return n.length===1?n[0]:{compositeFilter:{op:Ij(e.op),filters:n}}}(t):ae()}function Pj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,i,r,o=ce.min(),a=ce.min(),c=Vt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.fe=e}}function Lj(t){const e=Cj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.rn=new Dj}addToCollectionParentIndex(e,n){return this.rn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(fr.min())}updateCollectionGroup(e,n,i){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class Dj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ut(Be.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ut(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new _o(0)}static Mn(){return new _o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ma(i.mutation,r,un.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=ga();return o.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=$r();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=Ti();const a=Pa(),c=Pa();return n.forEach((h,p)=>{const m=i.get(p.key);r.has(p.key)&&(m===void 0||m.mutation instanceof Er)?o=o.insert(p.key,p):m!==void 0?(a.set(p.key,m.mutation.getFieldMask()),Ma(m.mutation,p,m.mutation.getFieldMask(),gt.now())):a.set(p.key,un.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,m)=>a.set(p,m)),n.forEach((p,m)=>{var v;return c.set(p,new Rj(m,(v=a.get(p))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const i=Pa();let r=new Ze((a,c)=>a-c),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const p=n.get(h);if(p===null)return;let m=i.get(h)||un.empty();m=c.applyToLocalView(p,m),i.set(h,m);const v=(r.get(c.batchId)||ye()).add(h);r=r.insert(c.batchId,v)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,m=h.value,v=yC();m.forEach(y=>{if(!o.has(y)){const x=CC(n.get(y),i.get(y));x!==null&&v.set(y,x),o=o.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,p,v))}return q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):q.resolve($r());let c=-1,h=o;return a.next(p=>q.forEach(p,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?q.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{h=h.insert(m,y)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,ye())).next(m=>({batchId:c,changes:vC(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(i=>{let r=ga();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let o=ga();return this.indexManager.getCollectionParents(e,r).next(a=>q.forEach(a,c=>{const h=function(p,m){return new Lo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i).next(p=>{p.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(o=>{r.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Rt.newInvalidDocument(p)))});let a=ga();return o.forEach((c,h)=>{const p=r.get(c);p!==void 0&&Ma(p.mutation,h,un.empty(),gt.now()),sd(n,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return q.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:ei(i.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:Lj(i.bundledQuery),readTime:ei(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.overlays=new Ze(ne.comparator),this.ls=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$r();return q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.we(e,n,o)}),q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.ls.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(i)),q.resolve()}getOverlaysForCollection(e,n,i){const r=$r(),o=n.length+1,a=new ne(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ze((p,m)=>p-m);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let m=o.get(p.largestBatchId);m===null&&(m=$r(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const c=$r(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,m)=>c.set(p,m)),!(c.size()>=r)););return q.resolve(c)}we(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new lj(n,i));let o=this.ls.get(n);o===void 0&&(o=ye(),this.ls.set(n,o)),this.ls.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.fs=new Ut(yt.ds),this.ws=new Ut(yt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new yt(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new yt(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new ne(new Be([])),i=new yt(n,e),r=new yt(n,e+1),o=[];return this.ws.forEachInRange([i,r],a=>{this.ys(a),o.push(a.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new ne(new Be([])),i=new yt(n,e),r=new yt(n,e+1);let o=ye();return this.ws.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new yt(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return ne.comparator(e.key,n.key)||Le(e.As,n.As)}static _s(e,n){return Le(e.As,n.As)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ut(yt.ds)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new aj(o,n,i,r);this.mutationQueue.push(a);for(const c of r)this.Rs=this.Rs.add(new yt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.bs(i),o=r<0?0:r;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new yt(n,0),r=new yt(n,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([i,r],a=>{const c=this.Ps(a.As);o.push(c)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ut(Le);return n.forEach(r=>{const o=new yt(r,0),a=new yt(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,a],c=>{i=i.add(c.As)})}),q.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ne.isDocumentKey(o)||(o=o.child(""));const a=new yt(new ne(o),0);let c=new Ut(Le);return this.Rs.forEachWhile(h=>{const p=h.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(c=c.add(h.As)),!0)},a),q.resolve(this.Vs(c))}Vs(e){const n=[];return e.forEach(i=>{const r=this.Ps(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){qe(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return q.forEach(n.mutations,r=>{const o=new yt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new yt(n,0),r=this.Rs.firstAfterOrEqual(i);return q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.Ds=e,this.docs=new Ze(ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return q.resolve(i?i.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let i=Ti();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Rt.newInvalidDocument(r))}),q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ti();const a=n.path,c=new ne(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||NR(TR(m),i)<=0||(r.has(m.key)||sd(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ae()}Cs(e,n){return q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Bj(this)}getSize(e){return q.resolve(this.size)}}class Bj extends Oj{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),q.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.persistence=e,this.xs=new Ao(n=>_v(n),wv),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Nv,this.targetCount=0,this.Ms=_o.kn()}forEachTarget(e,n){return this.xs.forEach((i,r)=>n(r)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),q.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new _o(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Fn(n),q.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.xs.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.xs.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),q.waitFor(o).next(()=>r)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return q.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),q.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return q.resolve(i)}containsKey(e,n){return q.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.$s={},this.overlays={},this.Os=new mv(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Vj(this),this.indexManager=new Aj,this.remoteDocumentCache=function(i){return new $j(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new Mj(n),this.qs=new Fj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new Uj(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){ee("MemoryPersistence","Starting transaction:",e);const r=new Hj(this.Os.next());return this.referenceDelegate.Us(),i(r).next(o=>this.referenceDelegate.Ks(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gs(e,n){return q.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class Hj extends IR{constructor(e){super(),this.currentSequenceNumber=e}}class bv{constructor(e){this.persistence=e,this.Qs=new Nv,this.js=null}static zs(e){return new bv(e)}get Ws(){if(this.js)return this.js;throw ae()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),q.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),q.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Ws.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Ws,i=>{const r=ne.fromPath(i);return this.Hs(e,r).next(o=>{o||n.removeEntry(r,ce.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return q.or([()=>q.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=r}static Li(e,n){let i=ye(),r=ye();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Iv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ki(e,n).next(o=>o||this.Gi(e,n,r,i)).next(o=>o||this.Qi(e,n))}Ki(e,n){if(jw(n))return q.resolve(null);let i=Ci(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=lh(n,null,"F"),i=Ci(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ye(...o);return this.Ui.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(h=>{const p=this.ji(n,c);return this.zi(n,p,a,h.readTime)?this.Ki(e,lh(n,null,"F")):this.Wi(e,p,n,h)}))})))}Gi(e,n,i,r){return jw(n)||r.isEqual(ce.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(o=>{const a=this.ji(n,o);return this.zi(n,a,i,r)?this.Qi(e,n):(Nw()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xm(n)),this.Wi(e,a,n,CR(r,-1)))})}ji(e,n){let i=new Ut(mC(e));return n.forEach((r,o)=>{sd(e,o)&&(i=i.add(o))}),i}zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Qi(e,n){return Nw()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",xm(n)),this.Ui.getDocumentsMatchingQuery(e,n,fr.min())}Wi(e,n,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,i,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new Ze(Le),this.Yi=new Ao(o=>_v(o),wv),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jj(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Qj(t,e,n,i){return new Kj(t,e,n,i)}async function RC(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],c=[];let h=ye();for(const p of r){a.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){c.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(p=>({er:p,removedBatchIds:a,addedBatchIds:c}))})})}function Gj(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Zi.newChangeBuffer({trackRemovals:!0});return function(a,c,h,p){const m=h.batch,v=m.keys();let y=q.resolve();return v.forEach(x=>{y=y.next(()=>p.getEntry(c,x)).next(C=>{const k=h.docVersions.get(x);qe(k!==null),C.version.compareTo(k)<0&&(m.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),p.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ye();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function jC(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function Zj(t,e){const n=pe(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const c=[];e.targetChanges.forEach((m,v)=>{const y=r.get(v);if(!y)return;c.push(n.Bs.removeMatchingKeys(o,m.removedDocuments,v).next(()=>n.Bs.addMatchingKeys(o,m.addedDocuments,v)));let x=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(Vt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,i)),r=r.insert(v,x),function(C,k,N){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(y,x,m)&&c.push(n.Bs.updateTargetData(o,x))});let h=Ti(),p=ye();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Yj(o,a,e.documentUpdates).next(m=>{h=m.nr,p=m.sr})),!i.isEqual(ce.min())){const m=n.Bs.getLastRemoteSnapshotVersion(o).next(v=>n.Bs.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return q.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(n.Ji=r,o))}function Yj(t,e,n){let i=ye(),r=ye();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Ti();return n.forEach((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(ce.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{nr:a,sr:r}})}function Xj(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Jj(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Bs.getTargetData(i,e).next(o=>o?(r=o,q.resolve(r)):n.Bs.allocateTargetId(i).next(a=>(r=new Zi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ji.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function Tm(t,e,n){const i=pe(t),r=i.Ji.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Bl(a))throw a;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function Qw(t,e,n){const i=pe(t);let r=ce.min(),o=ye();return i.persistence.runTransaction("Execute query","readonly",a=>function(c,h,p){const m=pe(c),v=m.Yi.get(p);return v!==void 0?q.resolve(m.Ji.get(v)):m.Bs.getTargetData(h,p)}(i,a,Ci(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(a,c.targetId).next(h=>{o=h})}).next(()=>i.Hi.getDocumentsMatchingQuery(a,e,n?r:ce.min(),n?o:ye())).next(c=>(e4(i,HR(e),c),{documents:c,ir:o})))}function e4(t,e,n){let i=t.Xi.get(e)||ce.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Xi.set(e,i)}class Gw{constructor(){this.activeTargetIds=YR()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t4{constructor(){this.Hr=new Gw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Gw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function Uf(){return Ku===null?Ku=268435456+Math.round(2147483648*Math.random()):Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class s4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,r,o){const a=Uf(),c=this.To(e,n);ee("RestConnection",`Sending RPC '${e}' ${a}:`,c,i);const h={};return this.Eo(h,r,o),this.Ao(e,c,h,i).then(p=>(ee("RestConnection",`Received RPC '${e}' ${a}: `,p),p),p=>{throw hl("RestConnection",`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",i),p})}vo(e,n,i,r,o,a){return this.Io(e,n,i,r,o)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}To(e,n){const i=i4[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,r){const o=Uf();return new Promise((a,c)=>{const h=new pR;h.setWithCredentials(!0),h.listenOnce(hR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ff.NO_ERROR:const m=h.getResponseJson();ee(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Ff.TIMEOUT:ee(Dt,`RPC '${e}' ${o} timed out`),c(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const v=h.getStatus();if(ee(Dt,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const C=function(k){const N=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN}(x.status);c(new G(C,x.message))}else c(new G(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new G(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ee(Dt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(r);ee(Dt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",p,i,15)})}Ro(e,n,i){const r=Uf(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uR(),c=cR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.xmlHttpFactory=new fR({})),this.Eo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ee(Dt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const v=a.createWebChannel(m,h);let y=!1,x=!1;const C=new r4({ro:N=>{x?ee(Dt,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(y||(ee(Dt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),y=!0),ee(Dt,`RPC '${e}' stream ${r} sending:`,N),v.send(N))},oo:()=>v.close()}),k=(N,E,_)=>{N.listen(E,S=>{try{_(S)}catch(I){setTimeout(()=>{throw I},0)}})};return k(v,Vu.EventType.OPEN,()=>{x||ee(Dt,`RPC '${e}' stream ${r} transport opened.`)}),k(v,Vu.EventType.CLOSE,()=>{x||(x=!0,ee(Dt,`RPC '${e}' stream ${r} transport closed`),C.wo())}),k(v,Vu.EventType.ERROR,N=>{x||(x=!0,hl(Dt,`RPC '${e}' stream ${r} transport errored:`,N),C.wo(new G(F.UNAVAILABLE,"The operation could not be completed")))}),k(v,Vu.EventType.MESSAGE,N=>{var E;if(!x){const _=N.data[0];qe(!!_);const S=_,I=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(I){ee(Dt,`RPC '${e}' stream ${r} received error:`,I);const M=I.status;let D=function(j){const J=at[j];if(J!==void 0)return NC(J)}(M),R=I.message;D===void 0&&(D=F.INTERNAL,R="Unknown error status: "+M+" with message "+I.message),x=!0,C.wo(new G(D,R)),v.close()}else ee(Dt,`RPC '${e}' stream ${r} received:`,_),C._o(_)}}),k(c,dR.STAT_EVENT,N=>{N.stat===Cw.PROXY?ee(Dt,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Cw.NOPROXY&&ee(Dt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){return new vj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=r,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,i,r,o,a,c,h){this.ii=e,this.$o=i,this.Oo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new FC(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===n&&this.Zo(i,r)},i=>{e(()=>{const r=new G(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o4 extends zC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=wj(this.serializer,e),i=function(r){if(!("targetChange"in r))return ce.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?ei(o.readTime):ce.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=Cm(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=_m(c)?{documents:Ej(r,c)}:{query:kj(r,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PC(r,o.resumeToken);const h=Sm(r,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=ch(r,o.snapshotVersion.toTimestamp());const h=Sm(r,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const i=Tj(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=Cm(this.serializer),n.removeTarget=e,this.Wo(n)}}class a4 extends zC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=Sj(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.cu(i,n)}return qe(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Cm(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>xj(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Io(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new G(F.UNKNOWN,r.toString())})}vo(e,n,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,n,i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class u4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ki(n),this.mu=!1):ee("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(a=>{i.enqueueAndForget(async()=>{hs(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=pe(c);h.vu.add(4),await Hl(h),h.bu.set("Unknown"),h.vu.delete(4),await cd(h)}(this))})}),this.bu=new u4(i,r)}}async function cd(t){if(hs(t))for(const e of t.Ru)await e(!0)}async function Hl(t){for(const e of t.Ru)await e(!1)}function UC(t,e){const n=pe(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Lv(n)?Mv(n):Do(n).Ko()&&Pv(n,e))}function $C(t,e){const n=pe(t),i=Do(n);n.Au.delete(e),i.Ko()&&BC(n,e),n.Au.size===0&&(i.Ko()?i.jo():hs(n)&&n.bu.set("Unknown"))}function Pv(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).su(e)}function BC(t,e){t.Vu.qt(e),Do(t).iu(e)}function Mv(t){t.Vu=new fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.bu.gu()}function Lv(t){return hs(t)&&!Do(t).Uo()&&t.Au.size>0}function hs(t){return pe(t).vu.size===0}function VC(t){t.Vu=void 0}async function h4(t){t.Au.forEach((e,n)=>{Pv(t,e)})}async function d4(t,e){VC(t),Lv(t)?(t.bu.Iu(e),Mv(t)):t.bu.set("Unknown")}async function f4(t,e,n){if(t.bu.set("Online"),e instanceof IC&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Au.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}(t,e)}catch(i){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hh(t,i)}else if(e instanceof gc?t.Vu.Ht(e):e instanceof bC?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ce.min()))try{const i=await jC(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Vu.ce(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=r.Au.get(h);p&&r.Au.set(h,p.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const p=r.Au.get(c);if(!p)return;r.Au.set(c,p.withResumeToken(Vt.EMPTY_BYTE_STRING,p.snapshotVersion)),BC(r,c);const m=new Zi(p.target,c,h,p.sequenceNumber);Pv(r,m)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){ee("RemoteStore","Failed to raise snapshot:",i),await hh(t,i)}}async function hh(t,e,n){if(!Bl(e))throw e;t.vu.add(1),await Hl(t),t.bu.set("Offline"),n||(n=()=>jC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await cd(t)})}function qC(t,e){return e().catch(n=>hh(t,n,e))}async function hd(t){const e=pe(t),n=mr(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;p4(e);)try{const r=await Xj(e.localStore,i);if(r===null){e.Eu.length===0&&n.jo();break}i=r.batchId,m4(e,r)}catch(r){await hh(e,r)}HC(e)&&WC(e)}function p4(t){return hs(t)&&t.Eu.length<10}function m4(t,e){t.Eu.push(e);const n=mr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function HC(t){return hs(t)&&!mr(t).Uo()&&t.Eu.length>0}function WC(t){mr(t).start()}async function g4(t){mr(t).hu()}async function v4(t){const e=mr(t);for(const n of t.Eu)e.uu(n.mutations)}async function y4(t,e,n){const i=t.Eu.shift(),r=Ev.from(i,e,n);await qC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await hd(t)}async function _4(t,e){e&&mr(t).ou&&await async function(n,i){if(r=i.code,cj(r)&&r!==F.ABORTED){const o=n.Eu.shift();mr(n).Qo(),await qC(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await hd(n)}var r}(t,e),HC(t)&&WC(t)}async function Yw(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const i=hs(n);n.vu.add(3),await Hl(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await cd(n)}async function w4(t,e){const n=pe(t);e?(n.vu.delete(2),await cd(n)):e||(n.vu.add(2),await Hl(n),n.bu.set("Unknown"))}function Do(t){return t.Su||(t.Su=function(e,n,i){const r=pe(e);return r.fu(),new o4(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:h4.bind(null,t),ao:d4.bind(null,t),nu:f4.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Lv(t)?Mv(t):t.bu.set("Unknown")):(await t.Su.stop(),VC(t))})),t.Su}function mr(t){return t.Du||(t.Du=function(e,n,i){const r=pe(e);return r.fu(),new a4(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:g4.bind(null,t),ao:_4.bind(null,t),au:v4.bind(null,t),cu:y4.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await hd(t)):(await t.Du.stop(),t.Eu.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,c=new Av(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dv(t,e){if(ki("AsyncQueue",`${e}: ${t}`),Bl(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ne.comparator(n.key,i.key):(n,i)=>ne.comparator(n.key,i.key),this.keyedMap=ga(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new no;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Cu=new Ze(ne.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):ae():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class wo{constructor(e,n,i,r,o,a,c,h,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new wo(e,n,no.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.Nu=void 0,this.listeners=[]}}class S4{constructor(){this.queries=new Ao(e=>pC(e),rd),this.onlineState="Unknown",this.ku=new Set}}async function E4(t,e){const n=pe(t),i=e.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new x4),r)try{o.Nu=await n.onListen(i)}catch(a){const c=Dv(a,`Initialization of query '${xm(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.listeners.push(e),e.Mu(n.onlineState),o.Nu&&e.$u(o.Nu)&&Ov(n)}async function k4(t,e){const n=pe(t),i=e.query;let r=!1;const o=n.queries.get(i);if(o){const a=o.listeners.indexOf(e);a>=0&&(o.listeners.splice(a,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function C4(t,e){const n=pe(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const c of a.listeners)c.$u(r)&&(i=!0);a.Nu=r}}i&&Ov(n)}function T4(t,e,n){const i=pe(t),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(n);i.queries.delete(e)}function Ov(t){t.ku.forEach(e=>{e.next()})}class N4{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class b4{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ye(),this.mutatedKeys=ye(),this.tc=mC(e),this.ec=new no(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new Xw,r=n?n.ec:this.ec;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{const y=r.get(m),x=sd(this.query,v)?v:null,C=!!y&&this.mutatedKeys.has(y.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;y&&x?y.data.isEqual(x.data)?C!==k&&(i.track({type:3,doc:x}),N=!0):this.rc(y,x)||(i.track({type:2,doc:x}),N=!0,(h&&this.tc(x,h)>0||p&&this.tc(x,p)<0)&&(c=!0)):!y&&x?(i.track({type:0,doc:x}),N=!0):y&&!x&&(i.track({type:1,doc:y}),N=!0,(h||p)&&(c=!0)),N&&(x?(a=a.add(x),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{ec:a,ic:i,zi:c,mutatedKeys:o}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((p,m)=>function(v,y){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return x(v)-x(y)}(p.type,m.type)||this.tc(p.doc,m.doc)),this.oc(i);const a=n?this.uc():[],c=this.Zu.size===0&&this.current?1:0,h=c!==this.Xu;return this.Xu=c,o.length!==0||h?{snapshot:new wo(this.query,e.ec,r,o,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ye(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new QC(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new KC(i))}),n}hc(e){this.Yu=e.ir,this.Zu=ye();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return wo.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class I4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class P4{constructor(e){this.key=e,this.fc=!1}}class M4{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Ao(c=>pC(c),rd),this._c=new Map,this.mc=new Set,this.gc=new Ze(ne.comparator),this.yc=new Map,this.Ic=new Nv,this.Tc={},this.Ec=new Map,this.Ac=_o.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function L4(t,e){const n=B4(t);let i,r;const o=n.wc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.lc();else{const a=await Jj(n.localStore,Ci(e)),c=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await A4(n,e,i,c==="current",a.resumeToken),n.isPrimaryClient&&UC(n.remoteStore,a)}return r}async function A4(t,e,n,i,r){t.Rc=(v,y,x)=>async function(C,k,N,E){let _=k.view.sc(N);_.zi&&(_=await Qw(C.localStore,k.query,!1).then(({documents:M})=>k.view.sc(M,_)));const S=E&&E.targetChanges.get(k.targetId),I=k.view.applyChanges(_,C.isPrimaryClient,S);return ex(C,k.targetId,I.cc),I.snapshot}(t,v,y,x);const o=await Qw(t.localStore,e,!0),a=new b4(e,o.ir),c=a.sc(o.documents),h=ql.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),p=a.applyChanges(c,t.isPrimaryClient,h);ex(t,n,p.cc);const m=new I4(e,n,a);return t.wc.set(e,m),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),p.snapshot}async function D4(t,e){const n=pe(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(o=>!rd(o,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Tm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),$C(n.remoteStore,i.targetId),Nm(n,i.targetId)}).catch($l)):(Nm(n,i.targetId),await Tm(n.localStore,i.targetId,!0))}async function O4(t,e,n){const i=V4(t);try{const r=await function(o,a){const c=pe(o),h=gt.now(),p=a.reduce((y,x)=>y.add(x.key),ye());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=Ti(),C=ye();return c.Zi.getEntries(y,p).next(k=>{x=k,x.forEach((N,E)=>{E.isValidDocument()||(C=C.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,x)).next(k=>{m=k;const N=[];for(const E of a){const _=sj(E,m.get(E.key).overlayedDocument);_!=null&&N.push(new Er(E.key,_,sC(_.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,N,a)}).next(k=>{v=k;const N=k.applyToLocalDocumentSet(m,C);return c.documentOverlayCache.saveOverlays(y,k.batchId,N)})}).then(()=>({batchId:v.batchId,changes:vC(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let h=o.Tc[o.currentUser.toKey()];h||(h=new Ze(Le)),h=h.insert(a,c),o.Tc[o.currentUser.toKey()]=h}(i,r.batchId,n),await Wl(i,r.changes),await hd(i.remoteStore)}catch(r){const o=Dv(r,"Failed to persist write");n.reject(o)}}async function GC(t,e){const n=pe(t);try{const i=await Zj(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.yc.get(o);a&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.fc=!0:r.modifiedDocuments.size>0?qe(a.fc):r.removedDocuments.size>0&&(qe(a.fc),a.fc=!1))}),await Wl(n,i,e)}catch(i){await $l(i)}}function Jw(t,e,n){const i=pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.wc.forEach((o,a)=>{const c=a.view.Mu(e);c.snapshot&&r.push(c.snapshot)}),function(o,a){const c=pe(o);c.onlineState=a;let h=!1;c.queries.forEach((p,m)=>{for(const v of m.listeners)v.Mu(a)&&(h=!0)}),h&&Ov(c)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R4(t,e,n){const i=pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),o=r&&r.key;if(o){let a=new Ze(ne.comparator);a=a.insert(o,Rt.newNoDocument(o,ce.min()));const c=ye().add(o),h=new ld(ce.min(),new Map,new Ze(Le),a,c);await GC(i,h),i.gc=i.gc.remove(o),i.yc.delete(e),Rv(i)}else await Tm(i.localStore,e,!1).then(()=>Nm(i,e,n)).catch($l)}async function j4(t,e){const n=pe(t),i=e.batch.batchId;try{const r=await Gj(n.localStore,e);YC(n,i,null),ZC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wl(n,r)}catch(r){await $l(r)}}async function F4(t,e,n){const i=pe(t);try{const r=await function(o,a){const c=pe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,a).next(m=>(qe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(i.localStore,e);YC(i,e,n),ZC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wl(i,r)}catch(r){await $l(r)}}function ZC(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function YC(t,e,n){const i=pe(t);let r=i.Tc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||XC(t,i)})}function XC(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&($C(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Rv(t))}function ex(t,e,n){for(const i of n)i instanceof KC?(t.Ic.addReference(i.key,e),z4(t,i)):i instanceof QC?(ee("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||XC(t,i.key)):ae()}function z4(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(ee("SyncEngine","New document in limbo: "+n),t.mc.add(i),Rv(t))}function Rv(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new ne(Be.fromString(e)),i=t.Ac.next();t.yc.set(i,new P4(n)),t.gc=t.gc.insert(n,i),UC(t.remoteStore,new Zi(Ci(dC(n.path)),i,"TargetPurposeLimboResolution",mv.ct))}}async function Wl(t,e,n){const i=pe(t),r=[],o=[],a=[];i.wc.isEmpty()||(i.wc.forEach((c,h)=>{a.push(i.Rc(h,e,n).then(p=>{if((p||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,p!=null&&p.fromCache?"not-current":"current"),p){r.push(p);const m=Iv.Li(h.targetId,p);o.push(m)}}))}),await Promise.all(a),i.dc.nu(r),await async function(c,h){const p=pe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(h,v=>q.forEach(v.Fi,y=>p.persistence.referenceDelegate.addReference(m,v.targetId,y)).next(()=>q.forEach(v.Bi,y=>p.persistence.referenceDelegate.removeReference(m,v.targetId,y)))))}catch(m){if(!Bl(m))throw m;ee("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const y=p.Ji.get(v),x=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(x);p.Ji=p.Ji.insert(v,C)}}}(i.localStore,o))}async function U4(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const i=await RC(n.localStore,e);n.currentUser=e,function(r,o){r.Ec.forEach(a=>{a.forEach(c=>{c.reject(new G(F.CANCELLED,o))})}),r.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wl(n,i.er)}}function $4(t,e){const n=pe(t),i=n.yc.get(e);if(i&&i.fc)return ye().add(i.key);{let r=ye();const o=n._c.get(e);if(!o)return r;for(const a of o){const c=n.wc.get(a);r=r.unionWith(c.view.nc)}return r}}function B4(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.dc.nu=C4.bind(null,e.eventManager),e.dc.Pc=T4.bind(null,e.eventManager),e}function V4(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F4.bind(null,e),e}class tx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Qj(this.persistence,new Wj,e.initialUser,this.serializer)}createPersistence(e){return new qj(bv.zs,this.serializer)}createSharedClientState(e){return new t4}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class q4{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),await w4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new S4}createDatastore(e){const n=ud(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new s4(r));var r;return function(o,a,c,h){return new l4(o,a,c,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,o=c=>Jw(this.syncEngine,c,0),a=Zw.D()?new Zw:new n4,new c4(n,i,r,o,a);var n,i,r,o,a}createSyncEngine(e,n){return function(i,r,o,a,c,h,p){const m=new M4(i,r,o,a,c,h);return p&&(m.vc=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=pe(e);ee("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Hl(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Yt.UNAUTHENTICATED,this.clientId=nC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dv(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Bf(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await RC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q4(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>Yw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>Yw(e.remoteStore,o)),t._onlineComponents=e}function K4(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!K4(n))throw n;hl("Error using user provided cache. Falling back to memory cache: "+n),await Bf(t,new tx)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Bf(t,new tx);return t._offlineComponents}async function JC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await nx(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await nx(t,new q4))),t._onlineComponents}function G4(t){return JC(t).then(e=>e.syncEngine)}async function Z4(t){const e=await JC(t),n=e.eventManager;return n.onListen=L4.bind(null,e.syncEngine),n.onUnlisten=D4.bind(null,e.syncEngine),n}function Y4(t,e,n={}){const i=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const p=new H4({next:v=>{o.enqueueAndForget(()=>k4(r,m)),v.fromCache&&c.source==="server"?h.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new N4(a,p,{includeMetadataChanges:!0,Ku:!0});return E4(r,m)}(await Z4(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X4(t,e,n,i){if(e===!0&&i===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rx(t){if(!ne.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sx(t){if(ne.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function xo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dd(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function J4(t,e){if(e<=0)throw new G(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class jv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vR;switch(n.type){case"firstParty":return new wR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=ix.get(e);n&&(ee("ComponentProvider","Removing Datastore"),ix.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class kr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class cr extends kr{constructor(e,n,i){super(e,n,dC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new ne(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function Vf(t,e,...n){if(t=Pt(t),tT("collection","path",e),t instanceof jv){const i=Be.fromString(e,...n);return sx(i),new cr(t,null,i)}{if(!(t instanceof hn||t instanceof cr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return sx(i),new cr(t.firestore,null,i)}}function bm(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=nC.A()),tT("doc","path",e),t instanceof jv){const i=Be.fromString(e,...n);return rx(i),new hn(t,null,new ne(i))}{if(!(t instanceof hn||t instanceof cr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return rx(i),new hn(t.firestore,t instanceof cr?t.converter:null,new ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new FC(this,"async_queue_retry"),this.Xc=()=>{const n=$f();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=$f();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=$f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ur;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Bl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ki("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=Av.createAndSchedule(this,e,n,i,o=>this.na(o));return this.zc.push(r),r}Zc(){this.Wc&&ae()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Kl extends jv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new e5,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iT(this),this._firestoreClient.terminate()}}function t5(t,e,n){n||(n="(default)");const i=zg(t,"firestore");if(i.isInitialized(n)){const r=i.getImmediate({identifier:n}),o=i.getOptions(n);if(Xa(o,e))return r;throw new G(F.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new G(F.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function nT(t){return t._firestoreClient||iT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iT(t){var e,n,i;const r=t._freezeSettings(),o=function(a,c,h,p){return new LR(a,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,eT(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new W4(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(Vt.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new So(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=/^__.*__$/;class i5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(e,this.data,n,this.fieldTransforms)}}class rT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class zv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new zv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return dh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(sT(this.ca)&&n5.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class r5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ud(e)}ya(e,n,i,r=!1){return new zv({ca:e,methodName:n,ga:i,path:jt.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uv(t){const e=t._freezeSettings(),n=ud(t._databaseId);return new r5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s5(t,e,n,i,r,o={}){const a=t.ya(o.merge||o.mergeFields?2:0,e,n,r);Bv("Data must be an object, but it was:",a,i);const c=oT(i,a);let h,p;if(o.merge)h=new un(a.fieldMask),p=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const v of o.mergeFields){const y=Im(e,v,n);if(!a.contains(y))throw new G(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);lT(m,y)||m.push(y)}h=new un(m),p=a.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=a.fieldTransforms;return new i5(new Jt(c),h,p)}class md extends pd{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class $v extends pd{_toFieldTransform(e){return new tj(e.path,new gl)}isEqual(e){return e instanceof $v}}function o5(t,e,n,i){const r=t.ya(1,e,n);Bv("Data must be an object, but it was:",r,i);const o=[],a=Jt.empty();cs(i,(h,p)=>{const m=Vv(e,h,n);p=Pt(p);const v=r.da(m);if(p instanceof md)o.push(m);else{const y=Ql(p,v);y!=null&&(o.push(m),a.set(m,y))}});const c=new un(o);return new rT(a,c,r.fieldTransforms)}function a5(t,e,n,i,r,o){const a=t.ya(1,e,n),c=[Im(e,i,n)],h=[r];if(o.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(Im(e,o[y])),h.push(o[y+1]);const p=[],m=Jt.empty();for(let y=c.length-1;y>=0;--y)if(!lT(p,c[y])){const x=c[y];let C=h[y];C=Pt(C);const k=a.da(x);if(C instanceof md)p.push(x);else{const N=Ql(C,k);N!=null&&(p.push(x),m.set(x,N))}}const v=new un(p);return new rT(m,v,a.fieldTransforms)}function l5(t,e,n,i=!1){return Ql(n,t.ya(i?4:3,e))}function Ql(t,e){if(aT(t=Pt(t)))return Bv("Unsupported field value:",e,t),oT(t,e);if(t instanceof pd)return function(n,i){if(!sT(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let o=0;for(const a of n){let c=Ql(a,i.wa(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Pt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return XR(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=gt.fromDate(n);return{timestampValue:ch(i.serializer,r)}}if(n instanceof gt){const r=new gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ch(i.serializer,r)}}if(n instanceof Fv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof So)return{bytesValue:PC(i.serializer,n._byteString)};if(n instanceof hn){const r=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(r))throw i._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Tv(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${dd(n)}`)}(t,e)}function oT(t,e){const n={};return iC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(i,r)=>{const o=Ql(r,e.ha(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function aT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Fv||t instanceof So||t instanceof hn||t instanceof pd)}function Bv(t,e,n){if(!aT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=dd(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function Im(t,e,n){if((e=Pt(e))instanceof fd)return e._internalPath;if(typeof e=="string")return Vv(t,e);throw dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const u5=new RegExp("[~\\*/\\[\\]]");function Vv(t,e,n){if(e.search(u5)>=0)throw dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fd(...e.split("."))._internalPath}catch{throw dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dh(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new G(F.INVALID_ARGUMENT,c+t+h)}function lT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c5 extends uT{data(){return super.data()}}function qv(t,e){return typeof e=="string"?Vv(t,e):e instanceof fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hv{}class Wv extends Hv{}function d5(t,e,...n){let i=[];e instanceof Hv&&i.push(e),i=i.concat(n),function(r){const o=r.filter(c=>c instanceof Qv).length,a=r.filter(c=>c instanceof Kv).length;if(o>1||o>0&&a>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Kv extends Wv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Kv(e,n,i)}_apply(e){const n=this._parse(e);return cT(e._query,n),new kr(e.firestore,e.converter,wm(e._query,n))}_parse(e){const n=Uv(e.firestore);return function(r,o,a,c,h,p,m){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){lx(m,p);const y=[];for(const x of m)y.push(ax(c,r,x));v={arrayValue:{values:y}}}else v=ax(c,r,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||lx(m,p),v=l5(a,o,m,p==="in"||p==="not-in");return ct.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Qv extends Hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qv(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)cT(o,c),o=wm(o,c)}(e._query,n),new kr(e.firestore,e.converter,wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gv extends Wv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gv(e,n)}_apply(e){const n=function(i,r,o){if(i.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new eo(r,o);return function(c,h){if(xv(c)===null){const p=id(c);p!==null&&hT(c,p,h.field)}}(i,a),a}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Lo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function f5(t,e="asc"){const n=e,i=qv("orderBy",t);return Gv._create(i,n)}class Zv extends Wv{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Zv(e,n,i)}_apply(e){return new kr(e.firestore,e.converter,lh(e._query,this._limit,this._limitType))}}function p5(t){return J4("limit",t),Zv._create("limit",t,"F")}function ax(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fC(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ne.isDocumentKey(i))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mw(t,new ne(i))}if(n instanceof hn)return Mw(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(n)}.`)}function lx(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cT(t,e){if(e.isInequality()){const i=id(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=xv(t);o!==null&&hT(t,r,o)}const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hT(t,e,n){if(!n.isEqual(e))throw new G(F.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class m5{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Fv(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=pr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);qe(OC(i));const r=new pl(i.get(1),i.get(3)),o=new ne(i.popFirst(5));return r.isEqual(n)||ki(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class v5 extends uT{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(qv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class vc extends v5{data(e={}){return super.data(e)}}class y5{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new vc(this._firestore,this._userDataWriter,i.key,i,new Qu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new vc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new vc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:_5(a.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class w5 extends m5{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function x5(t){t=xo(t,kr);const e=xo(t.firestore,Kl),n=nT(e),i=new w5(e);return h5(t._query),Y4(n,t._query).then(r=>new y5(e,i,t,r))}function S5(t,e,n,...i){t=xo(t,hn);const r=xo(t.firestore,Kl),o=Uv(r);let a;return a=typeof(e=Pt(e))=="string"||e instanceof fd?a5(o,"updateDoc",t._key,e,n,i):o5(o,"updateDoc",t._key,e),Yv(r,[a.toMutation(t._key,On.exists(!0))])}function E5(t){return Yv(xo(t.firestore,Kl),[new Sv(t._key,On.none())])}function k5(t,e){const n=xo(t.firestore,Kl),i=bm(t),r=g5(t.converter,e);return Yv(n,[s5(Uv(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,On.exists(!1))]).then(()=>i)}function Yv(t,e){return function(n,i){const r=new ur;return n.asyncQueue.enqueueAndForget(async()=>O4(await G4(n),i,r)),r.promise}(nT(t),e)}function ux(){return new $v("serverTimestamp")}(function(t,e=!0){(function(n){Mo=n})(bo),fo(new Xr("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),a=new Kl(new yR(n.getProvider("auth-internal")),new SR(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pl(c.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),lr(Tw,"3.13.0",t),lr(Tw,"3.13.0","esm2017")})();const mi={apiKey:"AIzaSyCg4ff72caOr1rk9y7kZAkUbcyjqfPuMLI",authDomain:"ourwebsite223.firebaseapp.com",projectId:"ourwebsite223",storageBucket:"ourwebsite223.appspot.com",messagingSenderId:"978864749848",appId:"1:978864749848:web:f1e635f87e2ddcc007f26d",measurementId:"G-823MYFCCMG"},C5=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],cx=C5.filter(t=>!mi[t]);cx.length&&console.warn("[firebase] Missing env vars:",cx.join(", "));mi.projectId&&mi.storageBucket&&!mi.storageBucket.endsWith("appspot.com")&&console.warn("[firebase] storageBucket should usually be ",`${mi.projectId}.appspot.com`);let Pm;H0().length?Pm=H0()[0]:Pm=_E(mi);const Xv=typeof window<"u"&&typeof document<"u",Mm=Xv?uO():void 0,sa=Xv?t5(Pm,{experimentalAutoDetectLongPolling:!0,useFetchStreams:!1}):void 0;if(Xv){const t=window.location.origin,e=mi.authDomain;console.info("[firebase] Init",{origin:t,projectId:mi.projectId,authDomain:e,hasApiKey:!!mi.apiKey}),e&&!e.includes("localhost")&&console.debug("[firebase] Running on origin",t,"with authDomain",e,"Ensure this origin is in Firebase Authentication > Settings > Authorized domains.")}function T5(){return new Promise(t=>{if(!Mm){t(null);return}const e=ZA(Mm,n=>{e(),t(n?{uid:n.uid,email:n.email,full_name:n.displayName||n.email}:null)})})}var hx={};function dT(t){async function e(o=void 0,a=void 0){try{let c=Vf(sa,t);const h=[];if(o){const v=o.startsWith("-"),y=v?o.slice(1):o;h.push(f5(y,v?"desc":"asc"))}a&&h.push(p5(a)),h.length&&(c=d5(Vf(sa,t),...h));const p=await x5(c),m=[];return p.forEach(v=>m.push({id:v.id,...v.data()})),m}catch(c){return console.error(`Error listing ${t}:`,c),[]}}async function n(o={}){try{const a={...o,created_date:ux()};return{id:(await k5(Vf(sa,t),a)).id,...a}}catch(a){throw console.error(`Error creating ${t}:`,a),a}}async function i(o,a={}){try{const c=bm(sa,t,o);return await S5(c,{...a,updated_date:ux()}),{id:o,...a}}catch(c){throw console.error(`Error updating ${t}/${o}:`,c),c}}async function r(o){try{const a=bm(sa,t,o);return await E5(a),{id:o}}catch(a){throw console.error(`Error deleting ${t}/${o}:`,a),a}}return{list:e,create:n,update:i,delete:r}}const N5=["Bookmark","DailyCheckIn","DateIdea","Event","Insight","ListeningSession","LocationShare","MemoryPin","Music","Note","Photo","Playlist","RelationshipData","SharedTask","User","Video","UserPresence"],fT={};N5.forEach(t=>{fT[t]=dT(t)});const b5=new Proxy(fT,{get(t,e){if(e in t)return t[e];const n=String(e),i=dT(n);return t[n]=i,i}});async function I5(){try{return await T5()}catch(t){return console.error("auth.me error:",t),null}}async function P5(){try{await YA(Mm)}catch(t){console.error("logout error:",t)}}async function M5({file:t,base64:e}={}){try{if(typeof window<"u"){const r=new FormData;if(t)r.append("file",t);else if(e)r.append("file",e);else throw new Error("No file provided");const o=await fetch("/api/upload",{method:"POST",body:r});if(!o.ok)throw new Error("Server upload failed");return await o.json()}}catch(r){console.warn("Server upload failed, falling back to client Cloudinary:",(r==null?void 0:r.message)||r)}const n=hx.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,i=hx.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;if(!n||!i)throw new Error("Cloudinary not configured");return await uploadToCloudinary({file:t,base64:e})}async function L5(t={}){try{const e=await fetch("/api/llm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("LLM invocation failed");return await e.json()}catch(e){throw console.error("InvokeLLM error:",e),e}}const $={auth:{me:I5,logout:P5},entities:b5,integrations:{Core:{UploadFile:M5,InvokeLLM:L5}}};var A5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const D5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),de=(t,e)=>{const n=b.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...h},p)=>b.createElement("svg",{ref:p,...A5,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:`lucide lucide-${D5(t)}`,...h},[...e.map(([m,v])=>b.createElement(m,v)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n},O5=de("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),dx=de("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),ds=de("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),fx=de("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),pT=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),mT=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),R5=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),gT=de("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),j5=de("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]]),dt=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),gd=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),px=de("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),F5=de("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ni=de("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),z5=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),vT=de("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),rs=de("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),yT=de("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Br=de("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),mx=de("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),qf=de("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),U5=de("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),$5=de("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Hf=de("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),gr=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_T=de("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),B5=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),gx=de("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),V5=de("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),q5=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),wT=de("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),H5=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vx=de("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),ii=de("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Gl=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),xT=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Lm=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),W5=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ST=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),K5=de("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Jv=de("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),vr=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Q5=de("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),G5=de("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Z5({startDate:t}){const[e,n]=b.useState(0),[i,r]=b.useState(0),[o,a]=b.useState(0);return b.useEffect(()=>{if(!t)return;const c=()=>{const p=new Date(t),m=new Date,v=Math.abs(m-p),y=Math.ceil(v/(1e3*60*60*24)),x=(m.getFullYear()-p.getFullYear())*12+(m.getMonth()-p.getMonth());n(y),r(x),a(Math.floor(x/12))};c();const h=setInterval(c,6e4);return()=>clearInterval(h)},[t]),d.jsxs("div",{className:"glass-card rounded-2xl p-5 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-400/20 to-purple-400/20 rounded-full blur-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-purple-400/20 to-pink-400/20 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center",children:d.jsx(dt,{className:"w-5 h-5 text-white animate-heartbeat"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold",children:"Together"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"& counting..."})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:o}),d.jsx("div",{className:"text-xs text-gray-500",children:"Years"})]}),d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:i%12}),d.jsx("div",{className:"text-xs text-gray-500",children:"Months"})]}),d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:e}),d.jsx("div",{className:"text-xs text-gray-500",children:"Days"})]})]}),t&&d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 text-xs text-gray-400",children:[d.jsx(ds,{className:"w-3 h-3"}),d.jsxs("span",{children:["Since ",new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})]})]})}function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function Ni(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function be(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ce(t){be(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||fh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ET(t,e){be(2,arguments);var n=Ce(t),i=Ni(e);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+i+1,0);var a=o.getDate();return r>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}function Y5(t,e){be(2,arguments);var n=Ce(t).getTime(),i=Ni(e);return new Date(n+i)}var X5={};function Zl(){return X5}function Am(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function yx(t){be(1,arguments);var e=Ce(t);return e.setHours(0,0,0,0),e}function yc(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function Wf(t,e){be(2,arguments);var n=yx(t),i=yx(e);return n.getTime()===i.getTime()}function J5(t){return be(1,arguments),t instanceof Date||fh(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eF(t){if(be(1,arguments),!J5(t)&&typeof t!="number")return!1;var e=Ce(t);return!isNaN(Number(e))}function tF(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function nF(t,e){return be(2,arguments),Ce(t).getTime()-Ce(e).getTime()}var iF={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},rF="trunc";function sF(t){return iF[rF]}function oF(t){be(1,arguments);var e=Ce(t);return e.setHours(23,59,59,999),e}function kT(t){be(1,arguments);var e=Ce(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function aF(t){be(1,arguments);var e=Ce(t);return oF(e).getTime()===kT(e).getTime()}function lF(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=yc(n,i),o=Math.abs(tF(n,i)),a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);var c=yc(n,i)===-r;aF(Ce(t))&&o===1&&yc(t,i)===1&&(c=!1),a=r*(o-Number(c))}return a===0?0:a}function uF(t,e,n){be(2,arguments);var i=nF(t,e)/1e3;return sF()(i)}function cF(t,e){var n;be(1,arguments);var i=t||{},r=Ce(i.start),o=Ce(i.end),a=o.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var c=[],h=r;h.setHours(0,0,0,0);var p=Number((n=void 0)!==null&&n!==void 0?n:1);if(p<1||isNaN(p))throw new RangeError("`options.step` must be a number greater than 1");for(;h.getTime()<=a;)c.push(Ce(h)),h.setDate(h.getDate()+p),h.setHours(0,0,0,0);return c}function hF(t){be(1,arguments);var e=Ce(t);return e.setDate(1),e.setHours(0,0,0,0),e}function dF(t,e){be(2,arguments);var n=Ni(e);return Y5(t,-n)}var fF=864e5;function pF(t){be(1,arguments);var e=Ce(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),r=n-i;return Math.floor(r/fF)+1}function ph(t){be(1,arguments);var e=1,n=Ce(t),i=n.getUTCDay(),r=(i<e?7:0)+i-e;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function CT(t){be(1,arguments);var e=Ce(t),n=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=ph(i),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=ph(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function mF(t){be(1,arguments);var e=CT(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var i=ph(n);return i}var gF=6048e5;function vF(t){be(1,arguments);var e=Ce(t),n=ph(e).getTime()-mF(e).getTime();return Math.round(n/gF)+1}function mh(t,e){var n,i,r,o,a,c,h,p;be(1,arguments);var m=Zl(),v=Ni((n=(i=(r=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:m.weekStartsOn)!==null&&i!==void 0?i:(h=m.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&n!==void 0?n:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=Ce(t),x=y.getUTCDay(),C=(x<v?7:0)+x-v;return y.setUTCDate(y.getUTCDate()-C),y.setUTCHours(0,0,0,0),y}function TT(t,e){var n,i,r,o,a,c,h,p;be(1,arguments);var m=Ce(t),v=m.getUTCFullYear(),y=Zl(),x=Ni((n=(i=(r=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:y.firstWeekContainsDate)!==null&&i!==void 0?i:(h=y.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=new Date(0);C.setUTCFullYear(v+1,0,x),C.setUTCHours(0,0,0,0);var k=mh(C,e),N=new Date(0);N.setUTCFullYear(v,0,x),N.setUTCHours(0,0,0,0);var E=mh(N,e);return m.getTime()>=k.getTime()?v+1:m.getTime()>=E.getTime()?v:v-1}function yF(t,e){var n,i,r,o,a,c,h,p;be(1,arguments);var m=Zl(),v=Ni((n=(i=(r=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:m.firstWeekContainsDate)!==null&&i!==void 0?i:(h=m.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1),y=TT(t,e),x=new Date(0);x.setUTCFullYear(y,0,v),x.setUTCHours(0,0,0,0);var C=mh(x,e);return C}var _F=6048e5;function wF(t,e){be(1,arguments);var n=Ce(t),i=mh(n,e).getTime()-yF(n,e).getTime();return Math.round(i/_F)+1}function Ae(t,e){for(var n=t<0?"-":"",i=Math.abs(t).toString();i.length<e;)i="0"+i;return n+i}var ji={y:function(e,n){var i=e.getUTCFullYear(),r=i>0?i:1-i;return Ae(n==="yy"?r%100:r,n.length)},M:function(e,n){var i=e.getUTCMonth();return n==="M"?String(i+1):Ae(i+1,2)},d:function(e,n){return Ae(e.getUTCDate(),n.length)},a:function(e,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(e,n){return Ae(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ae(e.getUTCHours(),n.length)},m:function(e,n){return Ae(e.getUTCMinutes(),n.length)},s:function(e,n){return Ae(e.getUTCSeconds(),n.length)},S:function(e,n){var i=n.length,r=e.getUTCMilliseconds(),o=Math.floor(r*Math.pow(10,i-3));return Ae(o,n.length)}},Cs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xF={G:function(e,n,i){var r=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(e,n,i){if(n==="yo"){var r=e.getUTCFullYear(),o=r>0?r:1-r;return i.ordinalNumber(o,{unit:"year"})}return ji.y(e,n)},Y:function(e,n,i,r){var o=TT(e,r),a=o>0?o:1-o;if(n==="YY"){var c=a%100;return Ae(c,2)}return n==="Yo"?i.ordinalNumber(a,{unit:"year"}):Ae(a,n.length)},R:function(e,n){var i=CT(e);return Ae(i,n.length)},u:function(e,n){var i=e.getUTCFullYear();return Ae(i,n.length)},Q:function(e,n,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Ae(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Ae(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,i){var r=e.getUTCMonth();switch(n){case"M":case"MM":return ji.M(e,n);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,i){var r=e.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Ae(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,i,r){var o=wF(e,r);return n==="wo"?i.ordinalNumber(o,{unit:"week"}):Ae(o,n.length)},I:function(e,n,i){var r=vF(e);return n==="Io"?i.ordinalNumber(r,{unit:"week"}):Ae(r,n.length)},d:function(e,n,i){return n==="do"?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):ji.d(e,n)},D:function(e,n,i){var r=pF(e);return n==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):Ae(r,n.length)},E:function(e,n,i){var r=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Ae(a,2);case"eo":return i.ordinalNumber(a,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});case"eeee":default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Ae(a,n.length);case"co":return i.ordinalNumber(a,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});case"cccc":default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,i){var r=e.getUTCDay(),o=r===0?7:r;switch(n){case"i":return String(o);case"ii":return Ae(o,n.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,i){var r=e.getUTCHours(),o=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,i){var r=e.getUTCHours(),o;switch(r===12?o=Cs.noon:r===0?o=Cs.midnight:o=r/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,i){var r=e.getUTCHours(),o;switch(r>=17?o=Cs.evening:r>=12?o=Cs.afternoon:r>=4?o=Cs.morning:o=Cs.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,i){if(n==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return ji.h(e,n)},H:function(e,n,i){return n==="Ho"?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ji.H(e,n)},K:function(e,n,i){var r=e.getUTCHours()%12;return n==="Ko"?i.ordinalNumber(r,{unit:"hour"}):Ae(r,n.length)},k:function(e,n,i){var r=e.getUTCHours();return r===0&&(r=24),n==="ko"?i.ordinalNumber(r,{unit:"hour"}):Ae(r,n.length)},m:function(e,n,i){return n==="mo"?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ji.m(e,n)},s:function(e,n,i){return n==="so"?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ji.s(e,n)},S:function(e,n){return ji.S(e,n)},X:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return wx(a);case"XXXX":case"XX":return Dr(a);case"XXXXX":case"XXX":default:return Dr(a,":")}},x:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"x":return wx(a);case"xxxx":case"xx":return Dr(a);case"xxxxx":case"xxx":default:return Dr(a,":")}},O:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+_x(a,":");case"OOOO":default:return"GMT"+Dr(a,":")}},z:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+_x(a,":");case"zzzz":default:return"GMT"+Dr(a,":")}},t:function(e,n,i,r){var o=r._originalDate||e,a=Math.floor(o.getTime()/1e3);return Ae(a,n.length)},T:function(e,n,i,r){var o=r._originalDate||e,a=o.getTime();return Ae(a,n.length)}};function _x(t,e){var n=t>0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),o=i%60;if(o===0)return n+String(r);var a=e;return n+String(r)+a+Ae(o,2)}function wx(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ae(Math.abs(t)/60,2)}return Dr(t,e)}function Dr(t,e){var n=e||"",i=t>0?"-":"+",r=Math.abs(t),o=Ae(Math.floor(r/60),2),a=Ae(r%60,2);return i+o+n+a}var xx=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},NT=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},SF=function(e,n){var i=e.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return xx(e,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",xx(r,n)).replace("{{time}}",NT(o,n))},EF={p:NT,P:SF},kF=["D","DD"],CF=["YY","YYYY"];function TF(t){return kF.indexOf(t)!==-1}function NF(t){return CF.indexOf(t)!==-1}function Sx(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var bF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IF=function(e,n,i){var r,o=bF[e];return typeof o=="string"?r=o:n===1?r=o.one:r=o.other.replace("{{count}}",n.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function Kf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,i=t.formats[n]||t.formats[t.defaultWidth];return i}}var PF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AF={date:Kf({formats:PF,defaultWidth:"full"}),time:Kf({formats:MF,defaultWidth:"full"}),dateTime:Kf({formats:LF,defaultWidth:"full"})},DF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OF=function(e,n,i,r){return DF[e]};function oa(t){return function(e,n){var i=n!=null&&n.context?String(n.context):"standalone",r;if(i==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{var c=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[h]||t.values[c]}var p=t.argumentCallback?t.argumentCallback(e):e;return r[p]}}var RF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$F={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BF=function(e,n){var i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},VF={ordinalNumber:BF,era:oa({values:RF,defaultWidth:"wide"}),quarter:oa({values:jF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:oa({values:FF,defaultWidth:"wide"}),day:oa({values:zF,defaultWidth:"wide"}),dayPeriod:oa({values:UF,defaultWidth:"wide",formattingValues:$F,defaultFormattingWidth:"wide"})};function aa(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;var a=o[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(c)?HF(c,function(v){return v.test(a)}):qF(c,function(v){return v.test(a)}),p;p=t.valueCallback?t.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;var m=e.slice(a.length);return{value:p,rest:m}}}function qF(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function HF(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function WF(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(t.matchPattern);if(!i)return null;var r=i[0],o=e.match(t.parsePattern);if(!o)return null;var a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;var c=e.slice(r.length);return{value:a,rest:c}}}var KF=/^(\d+)(th|st|nd|rd)?/i,QF=/\d+/i,GF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ZF={any:[/^b/i,/^(a|c)/i]},YF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XF={any:[/1/i,/2/i,/3/i,/4/i]},JF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},t3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},n3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},r3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},s3={ordinalNumber:WF({matchPattern:KF,parsePattern:QF,valueCallback:function(e){return parseInt(e,10)}}),era:aa({matchPatterns:GF,defaultMatchWidth:"wide",parsePatterns:ZF,defaultParseWidth:"any"}),quarter:aa({matchPatterns:YF,defaultMatchWidth:"wide",parsePatterns:XF,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:aa({matchPatterns:JF,defaultMatchWidth:"wide",parsePatterns:e3,defaultParseWidth:"any"}),day:aa({matchPatterns:t3,defaultMatchWidth:"wide",parsePatterns:n3,defaultParseWidth:"any"}),dayPeriod:aa({matchPatterns:i3,defaultMatchWidth:"any",parsePatterns:r3,defaultParseWidth:"any"})},bT={code:"en-US",formatDistance:IF,formatLong:AF,formatRelative:OF,localize:VF,match:s3,options:{weekStartsOn:0,firstWeekContainsDate:1}},o3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,a3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,l3=/^'([^]*?)'?$/,u3=/''/g,c3=/[a-zA-Z]/;function je(t,e,n){var i,r,o,a,c,h,p,m,v,y,x,C,k,N;be(2,arguments);var E=String(e),_=Zl(),S=(i=(r=void 0)!==null&&r!==void 0?r:_.locale)!==null&&i!==void 0?i:bT,I=Ni((o=(a=(c=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&c!==void 0?c:_.firstWeekContainsDate)!==null&&a!==void 0?a:(p=_.locale)===null||p===void 0||(m=p.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Ni((v=(y=(x=(C=void 0)!==null&&C!==void 0?C:void 0)!==null&&x!==void 0?x:_.weekStartsOn)!==null&&y!==void 0?y:(k=_.locale)===null||k===void 0||(N=k.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&v!==void 0?v:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var D=Ce(t);if(!eF(D))throw new RangeError("Invalid time value");var R=Am(D),j=dF(D,R),J={firstWeekContainsDate:I,weekStartsOn:M,locale:S,_originalDate:D},X=E.match(a3).map(function(re){var B=re[0];if(B==="p"||B==="P"){var Ie=EF[B];return Ie(re,S.formatLong)}return re}).join("").match(o3).map(function(re){if(re==="''")return"'";var B=re[0];if(B==="'")return h3(re);var Ie=xF[B];if(Ie)return NF(re)&&Sx(re,e,String(t)),TF(re)&&Sx(re,e,String(t)),Ie(j,re,S.localize,J);if(B.match(c3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return re}).join("");return X}function h3(t){var e=t.match(l3);return e?e[1].replace(u3,"'"):t}function IT(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function d3(t){return IT({},t)}var Ex=1440,f3=2520,Qf=43200,p3=86400;function m3(t,e,n){var i,r;be(2,arguments);var o=Zl(),a=(i=(r=n==null?void 0:n.locale)!==null&&r!==void 0?r:o.locale)!==null&&i!==void 0?i:bT;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var c=yc(t,e);if(isNaN(c))throw new RangeError("Invalid time value");var h=IT(d3(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:c}),p,m;c>0?(p=Ce(e),m=Ce(t)):(p=Ce(t),m=Ce(e));var v=uF(m,p),y=(Am(m)-Am(p))/1e3,x=Math.round((v-y)/60),C;if(x<2)return n!=null&&n.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,h):v<10?a.formatDistance("lessThanXSeconds",10,h):v<20?a.formatDistance("lessThanXSeconds",20,h):v<40?a.formatDistance("halfAMinute",0,h):v<60?a.formatDistance("lessThanXMinutes",1,h):a.formatDistance("xMinutes",1,h):x===0?a.formatDistance("lessThanXMinutes",1,h):a.formatDistance("xMinutes",x,h);if(x<45)return a.formatDistance("xMinutes",x,h);if(x<90)return a.formatDistance("aboutXHours",1,h);if(x<Ex){var k=Math.round(x/60);return a.formatDistance("aboutXHours",k,h)}else{if(x<f3)return a.formatDistance("xDays",1,h);if(x<Qf){var N=Math.round(x/Ex);return a.formatDistance("xDays",N,h)}else if(x<p3)return C=Math.round(x/Qf),a.formatDistance("aboutXMonths",C,h)}if(C=lF(m,p),C<12){var E=Math.round(x/Qf);return a.formatDistance("xMonths",E,h)}else{var _=C%12,S=Math.floor(C/12);return _<3?a.formatDistance("aboutXYears",S,h):_<9?a.formatDistance("overXYears",S,h):a.formatDistance("almostXYears",S+1,h)}}function g3(t,e){return be(1,arguments),m3(t,Date.now(),e)}function v3(t){return be(1,arguments),Ce(t).getTime()<Date.now()}function y3(t,e){be(2,arguments);var n=Ni(e);return ET(t,-n)}function _3({name:t,status:e,customStatus:n,avatar:i,lastSeen:r}){var h;const o={online:"bg-green-500",away:"bg-yellow-500",offline:"bg-gray-400"},a={online:"Online now",away:"Away",offline:r?`Last seen ${g3(new Date(r),{addSuffix:!0})}`:"Offline"},c=((h=t==null?void 0:t.charAt(0))==null?void 0:h.toUpperCase())||"?";return d.jsxs("div",{className:"glass-card rounded-2xl p-4 flex items-center gap-4 smooth-transition hover-lift",children:[d.jsxs("div",{className:"relative",children:[i?d.jsx("img",{src:i,alt:t,className:"w-12 h-12 rounded-full object-cover"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center",children:d.jsx("span",{className:"text-white font-semibold text-lg",children:c})}),d.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${o[e]}`})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:t}),d.jsx("p",{className:"text-sm text-gray-500",children:n||a[e]})]})]})}function Y({children:t,className:e="",variant:n,size:i,...r}){const o=e;return d.jsx("button",{className:o,...r,children:t})}function it(t){return d.jsx("input",{...t})}function bi({open:t,onOpenChange:e,children:n}){return t?d.jsx("div",{className:"dialog-root",children:n}):null}function Ii({children:t,className:e=""}){return d.jsx("div",{className:e,children:t})}function _l({children:t}){return d.jsx("div",{className:"dialog-header",children:t})}function wl({children:t,className:e=""}){return d.jsx("h3",{className:e,children:t})}function w3({current:t,goal:e,onUpdate:n}){const[i,r]=b.useState(!1),[o,a]=b.useState(""),c=typeof t=="number"&&isFinite(t)?t:0,h=typeof e=="number"&&isFinite(e)&&e>0?e:0,p=h>0?Math.min(c/h*100,100):0,m=Math.max(h-c,0),v=()=>{const x=t+parseFloat(o||0);n(x),a(""),r(!1)},y=[50,100,250,500];return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"glass-card rounded-2xl p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:d.jsx($5,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold",children:"Savings Goal"}),d.jsxs("p",{className:"text-gray-400 text-sm",children:["$",Number(m).toLocaleString()," to go"]})]})]}),d.jsx(Y,{onClick:()=>r(!0),size:"icon",className:"rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 w-9 h-9",children:d.jsx(gr,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-gray-500",children:"Progress"}),d.jsxs("span",{className:"text-gray-700 font-medium",children:[p.toFixed(0),"%"]})]}),d.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full smooth-transition",style:{width:`${p}%`}})}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"text-emerald-600 font-bold",children:["$",Number(c).toLocaleString()]}),d.jsxs("span",{className:"text-gray-400",children:["$",Number(h).toLocaleString()]})]})]})]}),d.jsx(bi,{open:i,onOpenChange:r,children:d.jsxs(Ii,{className:"glass-card",children:[d.jsx(_l,{children:d.jsx(wl,{className:"gradient-text",children:"Add to Savings"})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsx(it,{type:"number",placeholder:"Enter amount...",value:o,onChange:x=>a(x.target.value),className:"rounded-xl h-12"}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:y.map(x=>d.jsxs(Y,{variant:"outline",onClick:()=>a(x.toString()),className:"rounded-full",children:["+$",x]},x))}),d.jsxs(Y,{onClick:v,disabled:!o||parseFloat(o)<=0,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white rounded-xl h-12",children:["Add $",o||"0"]})]})]})})]})}const x3=[{value:"happy",emoji:"",label:"Happy"},{value:"excited",emoji:"",label:"Excited"},{value:"calm",emoji:"",label:"Calm"},{value:"stressed",emoji:"",label:"Stressed"},{value:"tired",emoji:"",label:"Tired"},{value:"loved",emoji:"",label:"Loved"},{value:"lonely",emoji:"",label:"Lonely"},{value:"energized",emoji:"",label:"Energized"}],S3=[{value:"words_of_affirmation",emoji:"",label:"Words of Affirmation"},{value:"quality_time",emoji:"",label:"Quality Time"},{value:"physical_touch",emoji:"",label:"Physical Touch"},{value:"acts_of_service",emoji:"",label:"Acts of Service"},{value:"receiving_gifts",emoji:"",label:"Receiving Gifts"}];function E3({user:t,onClose:e}){const n=sn(),i=je(new Date,"yyyy-MM-dd"),[r,o]=b.useState({emotion:"",energy_level:5,love_language:""}),{data:a}=De({queryKey:["checkIn",t==null?void 0:t.full_name,i],queryFn:async()=>{const v=(await $.entities.DailyCheckIn.list("-created_date",10)).find(y=>y.user_name===(t==null?void 0:t.full_name)&&y.date===i);return v&&o({emotion:v.emotion,energy_level:v.energy_level,love_language:v.love_language}),v},enabled:!!t}),c=we({mutationFn:m=>$.entities.DailyCheckIn.create({...m,user_name:t==null?void 0:t.full_name,date:i}),onSuccess:()=>{n.invalidateQueries({queryKey:["checkIn"]}),n.invalidateQueries({queryKey:["partnerCheckIn"]}),e()}}),h=we({mutationFn:m=>$.entities.DailyCheckIn.update(a.id,m),onSuccess:()=>{n.invalidateQueries({queryKey:["checkIn"]}),n.invalidateQueries({queryKey:["partnerCheckIn"]}),e()}}),p=()=>{!r.emotion||!r.love_language||(a?h.mutate(r):c.mutate(r))};return d.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto animate-slide-up shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Daily Check-In"}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-400 hover:text-gray-600",children:d.jsx(vr,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(dt,{className:"w-4 h-4 text-pink-500"}),"How are you feeling?"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:x3.map(m=>d.jsxs("button",{onClick:()=>o({...r,emotion:m.value}),className:`p-3 rounded-xl text-center smooth-transition ${r.emotion===m.value?"bg-gradient-to-br from-pink-500 to-purple-500 text-white shadow-lg scale-105":"bg-gray-50 hover:bg-gray-100 text-gray-700"}`,children:[d.jsx("div",{className:"text-2xl mb-1",children:m.emoji}),d.jsx("div",{className:"text-xs",children:m.label})]},m.value))})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(G5,{className:"w-4 h-4 text-yellow-500"}),"Energy Level: ",r.energy_level,"/10"]}),d.jsx("input",{type:"range",min:"1",max:"10",value:r.energy_level,onChange:m=>o({...r,energy_level:parseInt(m.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500"}),d.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[d.jsx("span",{children:"Low"}),d.jsx("span",{children:"High"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(rs,{className:"w-4 h-4 text-purple-500"}),"What do you need today?"]}),d.jsx("div",{className:"space-y-2",children:S3.map(m=>d.jsxs("button",{onClick:()=>o({...r,love_language:m.value}),className:`w-full p-3 rounded-xl text-left smooth-transition flex items-center gap-3 ${r.love_language===m.value?"bg-gradient-to-br from-pink-500 to-purple-500 text-white shadow-lg":"bg-gray-50 hover:bg-gray-100 text-gray-700"}`,children:[d.jsx("span",{className:"text-xl",children:m.emoji}),d.jsx("span",{className:"font-medium",children:m.label})]},m.value))})]}),d.jsx(Y,{onClick:p,disabled:!r.emotion||!r.love_language,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl h-12 text-base",children:a?"Update Check-In":"Complete Check-In"})]})]})})}function k3({memories:t,onClose:e}){const[n,i]=b.useState(null),[r,o]=b.useState("all"),a=t.filter(v=>r==="all"?!0:r==="favorites"?v.is_favorite:r==="photos"?v.url:r==="notes"?v.content&&!v.url:!0).sort((v,y)=>new Date(y.created_date)-new Date(v.created_date)),c=n!==null?a[n]:null,h=v=>v.url?gd:v.content?rs:v.date?ds:dt,p=v=>v.url?v.url:null,m=v=>v.content||v.title||v.caption||"Memory";return d.jsxs("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:[d.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(100)].map((v,y)=>d.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,opacity:Math.random()*.7+.3}},y))}),d.jsxs("div",{className:"relative z-10 flex items-center justify-between p-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ii,{className:"w-6 h-6 text-pink-400"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-white",children:"Memory Galaxy"}),d.jsxs("p",{className:"text-white/60 text-sm",children:[a.length," memories"]})]})]}),d.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 smooth-transition",children:d.jsx(vr,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"relative z-10 px-4 mb-4",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{value:"all",label:"All"},{value:"favorites",label:" Favorites"},{value:"photos",label:" Photos"},{value:"notes",label:" Notes"}].map(v=>d.jsx("button",{onClick:()=>o(v.value),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap smooth-transition ${r===v.value?"bg-white text-purple-900":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:v.label},v.value))})}),d.jsxs("div",{className:"relative z-10 px-4 pb-24 h-[calc(100vh-180px)] overflow-y-auto",children:[d.jsx("div",{className:"grid grid-cols-3 gap-3",children:a.map((v,y)=>{const x=h(v),C=p(v);return d.jsxs("button",{onClick:()=>i(y),className:`aspect-square rounded-2xl overflow-hidden relative group smooth-transition hover:scale-105 ${v.is_favorite?"ring-2 ring-pink-400 ring-offset-2 ring-offset-transparent":""}`,children:[C?d.jsx("img",{src:C,alt:"",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500/30 to-purple-500/30 backdrop-blur flex items-center justify-center",children:d.jsx(x,{className:"w-8 h-8 text-white/70"})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 smooth-transition"}),v.is_favorite&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx(dt,{className:"w-4 h-4 text-pink-400",fill:"#F472B6"})}),d.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 smooth-transition",children:d.jsx("p",{className:"text-white text-xs truncate",children:je(new Date(v.created_date),"MMM d, yyyy")})})]},v.id||y)})}),a.length===0&&d.jsxs("div",{className:"text-center py-20",children:[d.jsx(ii,{className:"w-16 h-16 mx-auto mb-4 text-white/30"}),d.jsx("p",{className:"text-white/50",children:"No memories in this category"})]})]}),c&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",children:d.jsxs("div",{className:"relative max-w-lg w-full max-h-[90vh] overflow-hidden",children:[n>0&&d.jsx("button",{onClick:()=>i(n-1),className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 backdrop-blur flex items-center justify-center text-white hover:bg-white/20",children:d.jsx(pT,{className:"w-6 h-6"})}),n<a.length-1&&d.jsx("button",{onClick:()=>i(n+1),className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 backdrop-blur flex items-center justify-center text-white hover:bg-white/20",children:d.jsx(mT,{className:"w-6 h-6"})}),d.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden",children:[c.url?d.jsx("img",{src:c.url,alt:"",className:"w-full max-h-[50vh] object-cover"}):d.jsx("div",{className:"h-40 bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:io.createElement(h(c),{className:"w-16 h-16 text-white/50"})}),d.jsxs("div",{className:"p-5",children:[d.jsx("p",{className:"text-gray-800 text-lg leading-relaxed mb-3",children:m(c)}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[d.jsx("span",{children:je(new Date(c.created_date),"MMMM d, yyyy")}),c.is_favorite&&d.jsxs("span",{className:"flex items-center gap-1 text-pink-500",children:[d.jsx(dt,{className:"w-4 h-4",fill:"#FF6B9D"})," Favorite"]})]}),d.jsx(Y,{onClick:()=>i(null),className:"w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl h-11",children:"Close"})]})]})]})})]})}function C3({relationshipData:t,onClose:e}){const n=sn(),[i,r]=b.useState(!1),{data:o=[]}=De({queryKey:["insights"],queryFn:()=>$.entities.RelationshipInsight.list("-created_date",10)}),{data:a=[]}=De({queryKey:["allCheckIns"],queryFn:()=>$.entities.DailyCheckIn.list("-created_date",14)}),{data:c=[]}=De({queryKey:["recentNotes"],queryFn:()=>$.entities.Note.list("-created_date",10)}),{data:h=[]}=De({queryKey:["recentEvents"],queryFn:()=>$.entities.Event.list("date",5)}),p=we({mutationFn:k=>$.entities.RelationshipInsight.create(k),onSuccess:()=>n.invalidateQueries({queryKey:["insights"]})}),m=we({mutationFn:k=>$.entities.RelationshipInsight.update(k,{is_read:!0}),onSuccess:()=>n.invalidateQueries({queryKey:["insights"]})}),v=async()=>{r(!0);const k={relationship_days:t!=null&&t.start_date?Math.floor((new Date-new Date(t.start_date))/(1e3*60*60*24)):0,recent_emotions:a.map(E=>({user:E.user_name,emotion:E.emotion,love_language:E.love_language})),recent_notes_count:c.length,upcoming_events:h.map(E=>E.title),savings_progress:t!=null&&t.current_savings&&(t!=null&&t.savings_goal)?(t.current_savings/t.savings_goal*100).toFixed(0):0},N=await $.integrations.Core.InvokeLLM({prompt:`Based on this couple's relationship data, generate 3 personalized insights/tips.
      
      Context:
      - Together for ${k.relationship_days} days
      - Recent emotional check-ins: ${JSON.stringify(k.recent_emotions)}
      - Upcoming events: ${k.upcoming_events.join(", ")||"None"}
      - Savings goal progress: ${k.savings_progress}%
      - Recent notes exchanged: ${k.recent_notes_count}
      
      Generate insights that are:
      1. A communication tip based on their love languages
      2. A date suggestion based on their mood patterns
      3. A relationship pattern observation
      
      Be warm, supportive, and specific to their situation.`,response_json_schema:{type:"object",properties:{insights:{type:"array",items:{type:"object",properties:{type:{type:"string"},title:{type:"string"},content:{type:"string"}}}}}}});for(const E of N.insights||[])await p.mutateAsync(E);r(!1)},y=k=>({communication_tip:rs,date_suggestion:ds,pattern:xT,milestone:dt,weekly_summary:ii})[k]||px,x=k=>({communication_tip:"from-blue-500 to-cyan-500",date_suggestion:"from-pink-500 to-rose-500",pattern:"from-purple-500 to-violet-500",milestone:"from-amber-500 to-orange-500",weekly_summary:"from-green-500 to-emerald-500"})[k]||"from-gray-500 to-slate-500",C=o.filter(k=>!k.is_read).length;return d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card rounded-3xl p-6 max-w-md w-full max-h-[85vh] overflow-y-auto animate-slide-up",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:d.jsx(ii,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold gradient-text",children:"Insights"}),C>0&&d.jsxs("p",{className:"text-xs text-white/50",children:[C," new"]})]})]}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-white/50 hover:text-white",children:d.jsx(vr,{className:"w-5 h-5"})})]}),d.jsx(Y,{onClick:v,disabled:i,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl h-12 mb-6",children:i?d.jsxs(d.Fragment,{children:[d.jsx(ni,{className:"w-5 h-5 mr-2 animate-spin"})," Analyzing..."]}):d.jsxs(d.Fragment,{children:[d.jsx(B5,{className:"w-5 h-5 mr-2"})," Generate New Insights"]})}),d.jsxs("div",{className:"space-y-4",children:[o.map(k=>{const N=y(k.type);return d.jsx("div",{className:`rounded-2xl p-4 smooth-transition cursor-pointer ${k.is_read?"bg-white/5":"bg-white/10 shadow-lg"}`,onClick:()=>!k.is_read&&m.mutate(k.id),children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${x(k.type)} flex items-center justify-center flex-shrink-0`,children:d.jsx(N,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-bold text-white",children:k.title}),!k.is_read&&d.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-500"})]}),d.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.content})]})]})},k.id)}),o.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(px,{className:"w-16 h-16 mx-auto mb-4 text-white/20"}),d.jsx("p",{className:"text-white/40",children:"No insights yet"}),d.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Generate some!"})]})]})]})})}function T3({user:t,onClose:e}){const n=sn(),[i,r]=b.useState(""),[o,a]=b.useState(!1),[c,h]=b.useState([]),[p,m]=b.useState(!1),v=b.useRef(null),{data:y=[]}=De({queryKey:["chatNotes"],queryFn:()=>$.entities.Note.list("-created_date",50),refetchInterval:3e3}),{data:x}=De({queryKey:["partnerMood"],queryFn:async()=>{const _=je(new Date,"yyyy-MM-dd");return(await $.entities.DailyCheckIn.list("-created_date")).find(I=>I.date===_&&I.user_name!==(t==null?void 0:t.full_name))}}),C=we({mutationFn:_=>$.entities.Note.create({content:_,author_name:(t==null?void 0:t.full_name)||"Anonymous"}),onSuccess:()=>{n.invalidateQueries({queryKey:["chatNotes"]}),r("")}}),k=async()=>{m(!0),a(!0);const _=x?`Partner is feeling ${x.emotion} and needs ${x.love_language.replace(/_/g," ")}`:"No mood data available",S=await $.integrations.Core.InvokeLLM({prompt:`Generate 4 sweet, romantic message suggestions for someone to send to their partner.
      Context: ${_}
      Make them warm, genuine, and varied in length.`,response_json_schema:{type:"object",properties:{suggestions:{type:"array",items:{type:"string"}}}}});h(S.suggestions||[]),m(!1)},N=()=>{i.trim()&&C.mutate(i)},E=_=>{r(_),a(!1)};return b.useEffect(()=>{var _;(_=v.current)==null||_.scrollIntoView({behavior:"smooth"})},[y]),d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card rounded-3xl w-full max-w-md h-[80vh] flex flex-col animate-slide-up",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:d.jsx(dt,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-bold text-white",children:"Love Notes"}),x&&d.jsxs("p",{className:"text-xs text-white/50",children:["Partner feels ",x.emotion]})]})]}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-white/50 hover:text-white",children:d.jsx(vr,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[[...y].reverse().map(_=>{const S=_.author_name===(t==null?void 0:t.full_name);return d.jsx("div",{className:`flex ${S?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${S?"bg-gradient-to-br from-pink-500 to-purple-600 text-white rounded-br-sm":"bg-white/10 text-white rounded-bl-sm"}`,children:[d.jsx("p",{className:"text-sm",children:_.content}),d.jsx("p",{className:`text-xs mt-1 ${S?"text-white/70":"text-white/40"}`,children:je(new Date(_.created_date),"h:mm a")})]})},_.id)}),d.jsx("div",{ref:v})]}),o&&d.jsxs("div",{className:"px-4 py-3 border-t border-white/10 bg-purple-500/10",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-xs font-semibold text-purple-300 flex items-center gap-1",children:[d.jsx(ii,{className:"w-3 h-3"})," AI Suggestions"]}),d.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 px-2 text-white/50",children:d.jsx(vr,{className:"w-3 h-3"})})]}),p?d.jsx("div",{className:"flex items-center justify-center py-4",children:d.jsx(ni,{className:"w-5 h-5 animate-spin text-purple-400"})}):d.jsx("div",{className:"space-y-2",children:c.map((_,S)=>d.jsx("button",{onClick:()=>E(_),className:"w-full text-left text-sm bg-white/5 rounded-xl px-3 py-2 text-white/80 hover:bg-white/10 smooth-transition",children:_},S))})]}),d.jsx("div",{className:"p-4 border-t border-white/10",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Y,{variant:"outline",size:"icon",onClick:k,className:"rounded-full flex-shrink-0 border-white/20 text-purple-400 hover:bg-purple-500/20",children:d.jsx(ii,{className:"w-4 h-4"})}),d.jsx(it,{value:i,onChange:_=>r(_.target.value),onKeyPress:_=>_.key==="Enter"&&N(),placeholder:"Send a love note...",className:"flex-1 bg-white/5 border-white/10 rounded-full text-white"}),d.jsx(Y,{onClick:N,disabled:!i.trim(),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full",children:d.jsx(wT,{className:"w-4 h-4"})})]})})]})})}const Gu=t=>`/${t}`;function N3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState(!1),[c,h]=b.useState(!1),[p,m]=b.useState(!1),[v,y]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const D=await $.auth.me();console.log("[Dashboard] auth.me()",D),n(D)}catch(D){console.error("Auth error:",D)}finally{y(!1)}})()},[]),b.useEffect(()=>{if(!e)return;const M=async()=>{const j=(await $.entities.UserPresence.list()).find(J=>J.user_name===e.full_name);j?await $.entities.UserPresence.update(j.id,{status:"online",last_seen:new Date().toISOString()}):await $.entities.UserPresence.create({user_name:e.full_name,status:"online",last_seen:new Date().toISOString()})};M();const D=setInterval(M,3e4);return()=>{clearInterval(D)}},[e]);const{data:x}=De({queryKey:["relationship"],queryFn:async()=>{var M,D;try{const R=(D=(M=$==null?void 0:$.entities)==null?void 0:M.RelationshipData)==null?void 0:D.list;if(typeof R!="function")return null;const j=await R();return console.log("[Dashboard] RelationshipData.list()",j),(j==null?void 0:j[0])||null}catch(R){return console.error("RelationshipData fetch error:",R),null}}}),{data:C}=De({queryKey:["presence"],queryFn:async()=>{const M=await $.entities.UserPresence.list("-last_seen"),D=new Date;return M.map(R=>{const j=new Date(R.last_seen),J=(D-j)/1e3/60;return{...R,status:J<2?"online":J<10?"away":"offline"}})},refetchInterval:15e3}),{data:k}=De({queryKey:["latestNote"],queryFn:async()=>(await $.entities.Note.list("-created_date",1))[0]||null}),{data:N}=De({queryKey:["upcomingEvents"],queryFn:async()=>{const M=await $.entities.Event.list("date",3),D=new Date;return M.filter(R=>new Date(R.date)>=D)}}),{data:E}=De({queryKey:["partnerCheckIn",e==null?void 0:e.full_name],queryFn:async()=>{const M=je(new Date,"yyyy-MM-dd");return(await $.entities.DailyCheckIn.list("-created_date")).find(R=>R.date===M&&R.user_name!==(e==null?void 0:e.full_name))},refetchInterval:6e4,enabled:!!e}),{data:_}=De({queryKey:["listeningSession"],queryFn:async()=>(await $.entities.ListeningSession.list("-created_date",1)).find(D=>D.is_active)||null,refetchInterval:3e3}),{data:S}=De({queryKey:["allMemories"],queryFn:async()=>{const[M,D,R]=await Promise.all([$.entities.Note.list("-created_date"),$.entities.Photo.list("-created_date"),$.entities.Event.list("-created_date")]);return[...M,...D,...R]}}),I=we({mutationFn:M=>$.entities.RelationshipData.update(x.id,{current_savings:M}),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship"]})}});return x?(C!=null&&C.filter(M=>M.status==="online"&&M.user_name!==(e==null?void 0:e.full_name)),d.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-6",children:[i&&d.jsx(E3,{user:e,onClose:()=>r(!1)}),o&&S&&d.jsx(k3,{memories:S,onClose:()=>a(!1)}),c&&d.jsx(C3,{relationshipData:x,onClose:()=>h(!1)}),p&&d.jsx(T3,{user:e,onClose:()=>m(!1)}),d.jsxs("div",{className:"pt-4 animate-slide-up",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Welcome Home"}),d.jsxs("p",{className:"text-gray-500 mt-1",children:[e==null?void 0:e.full_name," "]})]}),_&&d.jsx(ju,{to:Gu("Media"),className:"block",children:d.jsx("div",{className:"glass-card rounded-2xl p-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative",children:[_.cover_art?d.jsx("img",{src:_.cover_art,alt:"",className:"w-14 h-14 rounded-xl"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:d.jsx(Br,{className:"w-6 h-6 text-white"})}),d.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:d.jsx(_T,{className:"w-2 h-2 text-white"})})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-xs text-purple-600 font-medium",children:" Listening Together"}),d.jsx("p",{className:"text-gray-800 font-semibold truncate",children:_.song_title}),d.jsx("p",{className:"text-gray-500 text-sm",children:_.song_artist})]})]})})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 animate-slide-up",children:[d.jsxs("button",{onClick:()=>r(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center mb-3",children:d.jsx(dt,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Check-In"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Share how you feel"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center mb-3",children:d.jsx(ii,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Memory Galaxy"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Explore together"})]}),d.jsxs("button",{onClick:()=>h(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center mb-3",children:d.jsx(xT,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Insights"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"AI relationship tips"})]}),d.jsxs("button",{onClick:()=>m(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center mb-3",children:d.jsx(rs,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Love Notes"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Send a message"})]})]}),E&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 bg-gradient-to-br from-pink-50 to-purple-50 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(dt,{className:"w-5 h-5 text-pink-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Partner's Mood"})]}),d.jsx("span",{className:"text-xs text-gray-400",children:je(new Date(E.created_date),"MMM d, h:mm a")})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("p",{className:"text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:E.user_name})," is feeling"," ",d.jsx("span",{className:"font-semibold text-pink-600",children:E.emotion})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",style:{width:`${E.energy_level*10}%`}})}),d.jsxs("span",{className:"text-gray-500 text-sm",children:[E.energy_level,"/10 "]})]}),d.jsxs("div",{className:"bg-white/60 rounded-xl p-3",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"They need today:"}),d.jsxs("p",{className:"text-gray-800 font-semibold mt-1",children:[" ",E.love_language.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase())]})]})]})]}),d.jsx(Z5,{startDate:x.start_date}),C&&C.length>0&&d.jsxs("div",{className:"space-y-3 animate-slide-up",children:[d.jsx("h2",{className:"text-lg font-bold text-gray-800 px-1",children:"Presence"}),C.map(M=>d.jsx(_3,{name:M.user_name,status:M.status,customStatus:M.custom_status,lastSeen:M.last_seen},M.id))]}),d.jsx(w3,{current:x.current_savings,goal:x.savings_goal,onUpdate:M=>I.mutate(M)}),k&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(rs,{className:"w-5 h-5 text-purple-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Latest Note"})]}),d.jsx("p",{className:"text-gray-700 leading-relaxed mb-2",children:k.content}),d.jsxs("p",{className:"text-gray-400 text-sm",children:[k.author_name,"  ",je(new Date(k.created_date),"MMM d, h:mm a")]}),d.jsx(ju,{to:Gu("Media"),className:"text-pink-500 font-medium mt-3 inline-block text-sm",children:"View all notes "})]}),N&&N.length>0&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(ds,{className:"w-5 h-5 text-pink-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Upcoming"})]}),d.jsx("div",{className:"space-y-3",children:N.map(M=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-500 flex flex-col items-center justify-center",children:[d.jsx("span",{className:"text-[10px] font-medium text-white/80",children:je(new Date(M.date),"MMM")}),d.jsx("span",{className:"text-lg font-bold text-white",children:je(new Date(M.date),"d")})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-gray-800 font-semibold",children:M.title}),M.time&&d.jsx("p",{className:"text-gray-500 text-sm",children:M.time})]})]},M.id))}),d.jsx(ju,{to:Gu("Schedule"),className:"text-pink-500 font-medium mt-4 inline-block text-sm",children:"View calendar "})]})]})):d.jsx("div",{className:"flex items-center justify-center min-h-screen p-6",children:d.jsxs("div",{className:"text-center space-y-4 max-w-sm",children:[d.jsx(ni,{className:"w-8 h-8 animate-spin text-pink-500 mx-auto"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-700 font-semibold",children:"No relationship data yet"}),d.jsx("p",{className:"text-gray-500 text-sm",children:"Create your anniversary and partner info to get started."})]}),d.jsx(ju,{to:Gu("Profile"),children:d.jsx(Y,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Go to Profile"})})]})})}function b3(){var v;const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState({start_date:"",partner1_name:"",partner2_name:"",savings_goal:1e4});b.useEffect(()=>{$.auth.me().then(y=>{console.log("[Profile] auth.me()",y),n(y)}).catch(y=>{console.error("[Profile] auth.me error",y)})},[]);const{data:c}=De({queryKey:["relationship"],queryFn:async()=>{var y,x;try{const C=(x=(y=$==null?void 0:$.entities)==null?void 0:y.RelationshipData)==null?void 0:x.list;if(typeof C!="function")return null;const k=await C();return console.log("[Profile] RelationshipData.list()",k),(k==null?void 0:k[0])||null}catch(C){return console.error("RelationshipData fetch error:",C),null}}});b.useEffect(()=>{c&&a({start_date:c.start_date||"",partner1_name:c.partner1_name||"",partner2_name:c.partner2_name||"",savings_goal:c.savings_goal||1e4})},[c]);const{data:h}=De({queryKey:["stats"],queryFn:async()=>{const[y,x,C,k]=await Promise.all([$.entities.Note.list(),$.entities.Photo.list(),$.entities.Music.list(),$.entities.Event.list()]);return{notes:y.length,photos:x.length,music:C.length,events:k.length}}}),p=we({mutationFn:async y=>c?$.entities.RelationshipData.update(c.id,y):$.entities.RelationshipData.create(y),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship"]}),r(!1)}}),m=()=>{$.auth.logout()};return d.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24 space-y-6",children:[d.jsx("div",{className:"pt-4",children:d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Profile"})}),d.jsx("div",{className:"glass-card rounded-2xl p-5",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:d.jsx(W5,{className:"w-8 h-8 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:(e==null?void 0:e.full_name)||"User"}),d.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email})]})]})}),h&&d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(dt,{className:"w-5 h-5 text-pink-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.notes}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Notes"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(gd,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.photos}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Photos"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(Br,{className:"w-5 h-5 text-cyan-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.music}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Songs"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(ds,{className:"w-5 h-5 text-amber-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.events}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Events"})]})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(H5,{className:"w-5 h-5 text-gray-400"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Relationship Settings"})]}),!i&&d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>r(!0),className:"rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:d.jsx(U5,{className:"w-4 h-4"})})]}),i?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Anniversary Date"}),d.jsx(it,{type:"date",value:o.start_date,onChange:y=>a({...o,start_date:y.target.value}),className:"rounded-xl"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Partner 1"}),d.jsx(it,{placeholder:"Name",value:o.partner1_name,onChange:y=>a({...o,partner1_name:y.target.value}),className:"rounded-xl"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Partner 2"}),d.jsx(it,{placeholder:"Name",value:o.partner2_name,onChange:y=>a({...o,partner2_name:y.target.value}),className:"rounded-xl"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Savings Goal ($)"}),d.jsx(it,{type:"number",value:o.savings_goal,onChange:y=>a({...o,savings_goal:parseFloat(y.target.value)}),className:"rounded-xl"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Y,{variant:"outline",onClick:()=>r(!1),className:"flex-1 rounded-xl",children:"Cancel"}),d.jsxs(Y,{onClick:()=>p.mutate(o),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:[d.jsx(V5,{className:"w-4 h-4 mr-2"})," Save"]})]})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-gray-500",children:"Anniversary"}),d.jsx("span",{className:"text-gray-800 font-medium",children:c!=null&&c.start_date?new Date(c.start_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Not set"})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-gray-500",children:"Partners"}),d.jsx("span",{className:"text-gray-800 font-medium",children:c!=null&&c.partner1_name&&(c!=null&&c.partner2_name)?`${c.partner1_name} & ${c.partner2_name}`:"Not set"})]}),d.jsxs("div",{className:"flex justify-between py-2",children:[d.jsx("span",{className:"text-gray-500",children:"Savings Goal"}),d.jsxs("span",{className:"text-gray-800 font-medium",children:["$",((v=c==null?void 0:c.savings_goal)==null?void 0:v.toLocaleString())||"10,000"]})]})]})]}),d.jsxs(Y,{onClick:m,variant:"outline",className:"w-full rounded-2xl border-red-200 text-red-500 hover:bg-red-50 h-12",children:[d.jsx(z5,{className:"w-5 h-5 mr-2"}),"Log Out"]})]})}function vd(t){return d.jsx("textarea",{...t})}function PT({children:t,value:e,onChange:n,...i}){return d.jsx("select",{value:e,onChange:n,...i,children:t})}function MT({children:t}){return d.jsx("div",{className:"select-content",children:t})}function LT({children:t,value:e}){return d.jsx("option",{value:e,children:t})}function AT(t){return d.jsx("div",{...t})}function DT({children:t}){return d.jsx("span",{children:t})}const Zu=[{value:"restaurant",label:"Restaurants",icon:K5,color:"from-orange-500 to-red-500"},{value:"movie",label:"Movies",icon:j5,color:"from-purple-500 to-indigo-500"},{value:"tiktok",label:"TikToks",icon:Jv,color:"from-pink-500 to-rose-500"},{value:"date_idea",label:"Date Ideas",icon:dt,color:"from-pink-500 to-purple-500"},{value:"youtube",label:"YouTube",icon:Q5,color:"from-red-500 to-red-600"},{value:"other",label:"Other",icon:yT,color:"from-gray-500 to-gray-600"}];function I3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState("all"),[c,h]=b.useState({title:"",url:"",category:"other",notes:""}),[p,m]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:v=[]}=De({queryKey:["bookmarks"],queryFn:()=>$.entities.Bookmark.list("-created_date")}),y=we({mutationFn:_=>$.entities.Bookmark.create({..._,added_by:(e==null?void 0:e.full_name)||"Anonymous"}),onSuccess:()=>{t.invalidateQueries({queryKey:["bookmarks"]}),r(!1),h({title:"",url:"",category:"other",notes:""})}}),x=we({mutationFn:_=>$.entities.Bookmark.delete(_),onSuccess:()=>t.invalidateQueries({queryKey:["bookmarks"]})}),C=async()=>{if(!c.url)return;m(!0);const _=c.url.toLowerCase();let S="other";if(_.includes("tiktok")?S="tiktok":_.includes("youtube")||_.includes("youtu.be")?S="youtube":_.includes("yelp")||_.includes("doordash")||_.includes("uber")?S="restaurant":(_.includes("imdb")||_.includes("netflix")||_.includes("hulu"))&&(S="movie"),c.title)h(I=>({...I,category:S}));else{const I=await $.integrations.Core.InvokeLLM({prompt:`Given this URL: ${c.url}
        Extract or generate a short, descriptive title (max 50 chars).
        Return only the title, nothing else.`,response_json_schema:{type:"object",properties:{title:{type:"string"}}}});h(M=>({...M,title:I.title,category:S}))}m(!1)},k=o==="all"?v:v.filter(_=>_.category===o),N=_=>{const S=Zu.find(I=>I.value===_);return S?S.icon:yT},E=_=>{const S=Zu.find(I=>I.value===_);return S?S.color:"from-gray-500 to-gray-600"};return d.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between pt-4",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Saved"}),d.jsxs(Y,{onClick:()=>r(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-full h-10 px-5",children:[d.jsx(gr,{className:"w-4 h-4 mr-2"}),"Add"]})]}),d.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[d.jsx(Y,{variant:o==="all"?"default":"outline",onClick:()=>a("all"),className:`rounded-full whitespace-nowrap ${o==="all"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"All"}),Zu.map(_=>{const S=_.icon;return d.jsxs(Y,{variant:o===_.value?"default":"outline",onClick:()=>a(_.value),className:`rounded-full whitespace-nowrap ${o===_.value?`bg-gradient-to-r ${_.color} text-white border-0`:"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[d.jsx(S,{className:"w-4 h-4 mr-2"}),_.label]},_.value)})]}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:k.map(_=>{const S=N(_.category);return d.jsx("div",{className:"glass-card rounded-2xl p-4 hover-lift animate-slide-up",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${E(_.category)} flex items-center justify-center flex-shrink-0`,children:d.jsx(S,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-gray-800 font-semibold truncate",children:_.title}),_.notes&&d.jsx("p",{className:"text-gray-500 text-sm mt-1 line-clamp-2",children:_.notes}),d.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:["Added by ",_.added_by]})]}),d.jsxs("div",{className:"flex gap-2",children:[_.url&&d.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200 smooth-transition",children:d.jsx(gT,{className:"w-4 h-4"})}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>x.mutate(_.id),className:"w-9 h-9 rounded-full text-red-500 hover:bg-red-50",children:d.jsx(Gl,{className:"w-4 h-4"})})]})]})},_.id)})}),k.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(O5,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No bookmarks yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Save restaurants, movies, and more!"})]}),d.jsx(bi,{open:i,onOpenChange:r,children:d.jsxs(Ii,{className:"glass-card",children:[d.jsx(_l,{children:d.jsx(wl,{className:"gradient-text text-xl",children:"Save Something"})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsx(it,{placeholder:"Paste a link...",value:c.url,onChange:_=>h({...c,url:_.target.value}),onBlur:C,className:"rounded-xl h-11"}),d.jsx(it,{placeholder:"Title",value:c.title,onChange:_=>h({...c,title:_.target.value}),className:"rounded-xl h-11"}),d.jsxs(PT,{value:c.category,onValueChange:_=>h({...c,category:_}),children:[d.jsx(AT,{className:"rounded-xl h-11",children:d.jsx(DT,{placeholder:"Category"})}),d.jsx(MT,{children:Zu.map(_=>d.jsx(LT,{value:_.value,children:_.label},_.value))})]}),d.jsx(vd,{placeholder:"Notes (optional)",value:c.notes,onChange:_=>h({...c,notes:_.target.value}),className:"rounded-xl min-h-[80px]"}),d.jsx(Y,{onClick:()=>y.mutate(c),disabled:!c.title||p,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl h-11",children:p?d.jsx(ni,{className:"w-5 h-5 animate-spin"}):"Save Bookmark"})]})]})})]})}function P3(t){return d.jsx("input",{type:"checkbox",...t})}function OT({defaultValue:t,children:e,className:n}){return d.jsx("div",{className:n,children:e})}function RT({children:t,className:e}){return d.jsx("div",{className:e,children:t})}function Bs({value:t,children:e,className:n,onClick:i}){return d.jsx("button",{onClick:i,className:n,"data-value":t,children:e})}function Vs({value:t,children:e,className:n}){return d.jsx("div",{className:n,children:e})}const la=[{value:"anniversary",label:"Anniversary",icon:dt,color:"bg-pink-500",textColor:"text-pink-500",bgLight:"bg-pink-100"},{value:"together",label:"Together Time",icon:ST,color:"bg-purple-500",textColor:"text-purple-500",bgLight:"bg-purple-100"},{value:"brayden_work",label:"Brayden's Work",icon:dx,color:"bg-blue-500",textColor:"text-blue-500",bgLight:"bg-blue-100"},{value:"youna_work",label:"Youna's Work",icon:dx,color:"bg-amber-500",textColor:"text-amber-500",bgLight:"bg-amber-100"},{value:"other",label:"Other",icon:ds,color:"bg-gray-500",textColor:"text-gray-500",bgLight:"bg-gray-100"}],M3=[{label:" Date Night",title:"Date Night",category:"together"},{label:" Anniversary",title:"Monthly Anniversary",category:"anniversary",recurring:!0},{label:" Brayden Work",title:"Work",category:"brayden_work"},{label:" Youna Work",title:"Work",category:"youna_work"},{label:" Dinner",title:"Dinner Together",category:"together"},{label:" Movie Night",title:"Movie Night",category:"together"},{label:" Trip",title:"Trip",category:"together"},{label:" Stay Home",title:"Stay Home Day",category:"together"}];function L3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(new Date),[o,a]=b.useState(new Date),[c,h]=b.useState(!1),[p,m]=b.useState(null),[v,y]=b.useState(!1),[x,C]=b.useState(null),[k,N]=b.useState(""),[E,_]=b.useState(""),[S,I]=b.useState({title:"",date:je(new Date,"yyyy-MM-dd"),time:"",location:"",notes:"",link:"",category:"other",is_recurring:!1}),[M,D]=b.useState(!1),[R,j]=b.useState("calendar");b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:J=[]}=De({queryKey:["events"],queryFn:()=>$.entities.Event.list("date")}),{data:X=[]}=De({queryKey:["dateIdeas"],queryFn:()=>$.entities.DateIdea.list("-created_date")}),{data:re=[]}=De({queryKey:["tasks"],queryFn:()=>$.entities.SharedTask.list("-created_date")}),B=we({mutationFn:U=>$.entities.Event.create(U),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),h(!1),W()}}),Ie=we({mutationFn:({id:U,data:Me})=>$.entities.Event.update(U,Me),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),m(null)}}),ft=we({mutationFn:U=>$.entities.Event.delete(U),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),m(null)}}),Li=we({mutationFn:U=>$.entities.DateIdea.create({idea:U,added_by:e==null?void 0:e.full_name}),onSuccess:()=>{t.invalidateQueries({queryKey:["dateIdeas"]}),N("")}}),Ye=we({mutationFn:U=>$.entities.DateIdea.update(U,{is_used:!0,used_date:je(new Date,"yyyy-MM-dd")}),onSuccess:()=>t.invalidateQueries({queryKey:["dateIdeas"]})}),W=()=>{I({title:"",date:je(o||new Date,"yyyy-MM-dd"),time:"",location:"",notes:"",link:"",category:"other",is_recurring:!1})},O=hF(i),ie=kT(i),H=cF({start:O,end:ie}),oe=O.getDay(),_e=[...Array(oe).fill(null),...H],Xe=U=>U?J.filter(Me=>{const on=new Date(Me.date);return!!(Wf(on,U)||Me.is_recurring&&on.getDate()===U.getDate())}):[],Pe=U=>la.find(Me=>Me.value===U)||la[4],xe=U=>{U.preventDefault(),B.mutate(S)},ue=U=>{I({...S,title:U.title,category:U.category,is_recurring:U.recurring||!1,date:je(o||new Date,"yyyy-MM-dd")}),h(!0)},Mt=async U=>{if(U.preventDefault(),!E.trim())return;D(!0);const Me=await $.integrations.Core.InvokeLLM({prompt:`Parse this event: "${E}". Today: ${je(new Date,"yyyy-MM-dd")}. Extract title, date (YYYY-MM-DD), time (HH:MM), location. Category from: anniversary, together, brayden_work, youna_work, other. JSON only.`,response_json_schema:{type:"object",properties:{title:{type:"string"},date:{type:"string"},time:{type:"string"},location:{type:"string"},category:{type:"string"}},required:["title","date"]}});I({...S,title:Me.title||"",date:Me.date||je(o||new Date,"yyyy-MM-dd"),time:Me.time||"",location:Me.location||"",category:Me.category||"other"}),_(""),D(!1),h(!0)},zn=()=>{const U=X.filter(on=>!on.is_used);if(U.length===0)return;const Me=U[Math.floor(Math.random()*U.length)];C(Me)},Xl=U=>{I({...S,title:U.idea,category:"together",date:je(new Date,"yyyy-MM-dd")}),Ye.mutate(U.id),C(null),y(!1),h(!0)},fs=Xe(o);return d.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-4 pb-24",children:[d.jsxs("div",{className:"flex items-center justify-between pt-4",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Schedule"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Y,{onClick:()=>y(!0),variant:"outline",className:"rounded-full h-10 px-4 border-pink-200 text-pink-500",children:[d.jsx(vx,{className:"w-4 h-4 mr-1"})," Date Jar"]}),d.jsx(Y,{onClick:()=>{W(),h(!0)},className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full h-10 px-4",children:d.jsx(gr,{className:"w-4 h-4"})})]})]}),d.jsxs(OT,{value:R,onValueChange:j,children:[d.jsxs(RT,{className:"grid grid-cols-2 bg-gray-100 rounded-xl p-1",children:[d.jsx(Bs,{value:"calendar",className:"rounded-lg data-[state=active]:bg-white",children:"Calendar"}),d.jsx(Bs,{value:"lists",className:"rounded-lg data-[state=active]:bg-white",children:"Lists"})]}),d.jsxs(Vs,{value:"calendar",className:"space-y-4 mt-4",children:[d.jsx("form",{onSubmit:Mt,className:"glass-card rounded-2xl p-3",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(it,{value:E,onChange:U=>_(U.target.value),placeholder:'Try: "Dinner Friday 7pm at Olive Garden"',disabled:M,className:"flex-1 rounded-xl h-10"}),d.jsx(Y,{type:"submit",disabled:!E.trim()||M,className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl px-4 h-10",children:M?d.jsx(ni,{className:"w-4 h-4 animate-spin"}):d.jsx(ii,{className:"w-4 h-4"})})]})}),d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:M3.map((U,Me)=>d.jsx(Y,{variant:"outline",onClick:()=>ue(U),className:"rounded-full whitespace-nowrap text-sm h-8 border-gray-200",children:U.label},Me))}),d.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>r(y3(i,1)),className:"rounded-full h-8 w-8",children:d.jsx(pT,{className:"w-5 h-5"})}),d.jsx("h2",{className:"text-lg font-bold text-gray-800",children:je(i,"MMMM yyyy")}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>r(ET(i,1)),className:"rounded-full h-8 w-8",children:d.jsx(mT,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((U,Me)=>d.jsx("div",{className:"text-center text-xs font-semibold text-gray-400 py-1",children:U},Me))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:_e.map((U,Me)=>{const on=U?Xe(U):[],_d=U&&Wf(U,new Date),Jl=U&&o&&Wf(U,o);return d.jsxs("button",{onClick:()=>U&&a(U),disabled:!U,className:`aspect-square rounded-xl text-sm flex flex-col items-center justify-center ${U?_d?"bg-gradient-to-br from-pink-500 to-purple-500 text-white font-bold shadow-md":Jl?"bg-pink-100 text-pink-700 font-semibold ring-2 ring-pink-400":"bg-gray-50 hover:bg-gray-100 text-gray-700":"invisible"}`,children:[d.jsx("span",{children:U&&je(U,"d")}),on.length>0&&d.jsx("div",{className:"flex gap-0.5 mt-0.5",children:on.slice(0,3).map((eu,Oo)=>d.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Pe(eu.category).color}`},Oo))})]},Me)})}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100",children:la.map(U=>d.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${U.color}`}),d.jsx("span",{children:U.label})]},U.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between px-1",children:[d.jsx("h2",{className:"font-bold text-gray-800",children:o?je(o,"EEEE, MMM d"):"Select a date"}),d.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>{I({...S,date:je(o||new Date,"yyyy-MM-dd")}),h(!0)},className:"text-pink-500 h-8",children:d.jsx(gr,{className:"w-4 h-4"})})]}),fs.length>0?fs.map(U=>{const Me=Pe(U.category),on=Me.icon;return d.jsx("div",{onClick:()=>m(U),className:`rounded-xl p-3 ${Me.bgLight} border-l-4 ${Me.color.replace("bg-","border-")} cursor-pointer hover:shadow-md smooth-transition`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-9 h-9 rounded-lg ${Me.color} flex items-center justify-center`,children:d.jsx(on,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:U.title}),U.is_recurring&&d.jsx(gx,{className:"w-3 h-3 text-gray-400"}),U.link&&d.jsx(F5,{className:"w-3 h-3 text-gray-400"})]}),d.jsxs("div",{className:"flex gap-2 text-xs text-gray-500",children:[U.time&&d.jsx("span",{children:U.time}),U.location&&d.jsxs("span",{children:[" ",U.location]})]})]})]})},U.id)}):d.jsxs("div",{className:"text-center py-6 text-gray-400",children:[d.jsx(ds,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),d.jsx("p",{className:"text-sm",children:"No events"})]})]})]}),d.jsx(Vs,{value:"lists",className:"mt-4",children:d.jsx(A3,{user:e,tasks:re,queryClient:t})})]}),d.jsx(bi,{open:c,onOpenChange:h,children:d.jsxs(Ii,{className:"glass-card max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx(_l,{children:d.jsx(wl,{className:"gradient-text text-xl",children:"Add Event"})}),d.jsxs("form",{onSubmit:xe,className:"space-y-3 pt-2",children:[d.jsx(it,{placeholder:"Event title",value:S.title,onChange:U=>I({...S,title:U.target.value}),required:!0,className:"rounded-xl h-10"}),d.jsxs(PT,{value:S.category,onValueChange:U=>I({...S,category:U}),children:[d.jsx(AT,{className:"rounded-xl h-10",children:d.jsx(DT,{})}),d.jsx(MT,{children:la.map(U=>d.jsx(LT,{value:U.value,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${U.color}`}),U.label]})},U.value))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx(it,{type:"date",value:S.date,onChange:U=>I({...S,date:U.target.value}),required:!0,className:"rounded-xl h-10"}),d.jsx(it,{type:"time",value:S.time,onChange:U=>I({...S,time:U.target.value}),className:"rounded-xl h-10"})]}),d.jsx(it,{placeholder:"Location",value:S.location,onChange:U=>I({...S,location:U.target.value}),className:"rounded-xl h-10"}),d.jsx(it,{placeholder:"Link (reservation, tickets...)",value:S.link,onChange:U=>I({...S,link:U.target.value}),className:"rounded-xl h-10"}),d.jsx(vd,{placeholder:"Notes...",value:S.notes,onChange:U=>I({...S,notes:U.target.value}),className:"rounded-xl min-h-[60px]"}),d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(gx,{className:"w-4 h-4 text-gray-500"}),d.jsx("span",{className:"text-sm",children:"Repeat monthly"})]}),d.jsx(P3,{checked:S.is_recurring,onCheckedChange:U=>I({...S,is_recurring:U})})]}),d.jsxs("div",{className:"flex gap-2 pt-1",children:[d.jsx(Y,{type:"button",variant:"outline",onClick:()=>h(!1),className:"flex-1 rounded-xl h-10",children:"Cancel"}),d.jsx(Y,{type:"submit",className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-10",children:"Save"})]})]})]})}),d.jsx(D3,{event:p,onClose:()=>m(null),onUpdate:Ie,onDelete:ft,categories:la}),d.jsx(bi,{open:v,onOpenChange:y,children:d.jsxs(Ii,{className:"glass-card max-w-sm",children:[d.jsx(_l,{children:d.jsx(wl,{className:"gradient-text text-xl flex items-center gap-2",children:" Date Night Jar"})}),d.jsxs("div",{className:"space-y-4",children:[x?d.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-purple-100 rounded-2xl p-5 text-center",children:[d.jsx("p",{className:"text-2xl mb-2",children:""}),d.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-4",children:x.idea}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Y,{variant:"outline",onClick:()=>C(null),className:"flex-1 rounded-xl",children:"Try Again"}),d.jsx(Y,{onClick:()=>Xl(x),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Schedule It!"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs(Y,{onClick:zn,disabled:X.filter(U=>!U.is_used).length===0,className:"w-full h-16 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-2xl text-lg",children:[d.jsx(vx,{className:"w-5 h-5 mr-2"})," Pull a Date Idea!"]}),d.jsxs("p",{className:"text-center text-gray-400 text-sm",children:[X.filter(U=>!U.is_used).length," ideas in jar"]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Add new idea:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(it,{value:k,onChange:U=>N(U.target.value),placeholder:"Picnic in the park...",className:"flex-1 rounded-xl h-10"}),d.jsx(Y,{onClick:()=>k&&Li.mutate(k),disabled:!k,className:"rounded-xl h-10 px-4 bg-pink-500 text-white",children:"Add"})]})]}),X.length>0&&d.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:X.slice(0,10).map(U=>d.jsx("div",{className:`text-sm p-2 rounded-lg ${U.is_used?"bg-gray-100 text-gray-400 line-through":"bg-pink-50 text-gray-700"}`,children:U.idea},U.id))})]})]})})]})}function A3({user:t,tasks:e,queryClient:n}){const[i,r]=b.useState(""),[o,a]=b.useState("general"),c=[{value:"general",label:"To-Do",icon:""},{value:"groceries",label:"Groceries",icon:""},{value:"chores",label:"Chores",icon:""},{value:"movies",label:"Movies to Watch",icon:""}],h=we({mutationFn:y=>$.entities.SharedTask.create(y),onSuccess:()=>{n.invalidateQueries({queryKey:["tasks"]}),r("")}}),p=we({mutationFn:({id:y,completed:x})=>$.entities.SharedTask.update(y,{is_completed:!x,completed_by:x?null:t==null?void 0:t.full_name}),onSuccess:()=>n.invalidateQueries({queryKey:["tasks"]})}),m=we({mutationFn:y=>$.entities.SharedTask.delete(y),onSuccess:()=>n.invalidateQueries({queryKey:["tasks"]})}),v=e.filter(y=>y.list_type===o);return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:c.map(y=>d.jsxs(Y,{variant:o===y.value?"default":"outline",onClick:()=>a(y.value),className:`rounded-full whitespace-nowrap h-9 ${o===y.value?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"border-gray-200"}`,children:[y.icon," ",y.label]},y.value))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(it,{value:i,onChange:y=>r(y.target.value),placeholder:"Add item...",className:"flex-1 rounded-xl h-10",onKeyPress:y=>y.key==="Enter"&&i&&h.mutate({title:i,list_type:o,added_by:t==null?void 0:t.full_name})}),d.jsx(Y,{onClick:()=>i&&h.mutate({title:i,list_type:o,added_by:t==null?void 0:t.full_name}),disabled:!i,className:"bg-pink-500 text-white rounded-xl h-10 px-4",children:d.jsx(gr,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"space-y-2",children:[v.map(y=>d.jsxs("div",{className:`glass-card rounded-xl p-3 flex items-center gap-3 ${y.is_completed?"opacity-60":""}`,children:[d.jsx("button",{onClick:()=>p.mutate({id:y.id,completed:y.is_completed}),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center ${y.is_completed?"bg-green-500 border-green-500":"border-gray-300"}`,children:y.is_completed&&d.jsx(fx,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`font-medium ${y.is_completed?"line-through text-gray-400":"text-gray-800"}`,children:y.title}),d.jsx("p",{className:"text-xs text-gray-400",children:y.added_by})]}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>m.mutate(y.id),className:"text-gray-400 hover:text-red-500 h-8 w-8",children:d.jsx(vr,{className:"w-4 h-4"})})]},y.id)),v.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-400",children:[d.jsx(fx,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),d.jsx("p",{className:"text-sm",children:"No items yet"})]})]})]})}function D3({event:t,onClose:e,onUpdate:n,onDelete:i,categories:r}){const[o,a]=b.useState((t==null?void 0:t.memory_note)||""),[c,h]=b.useState(!1);if(!t)return null;const p=r.find(x=>x.value===t.category)||r[4],m=p.icon,v=v3(new Date(t.date)),y=async x=>{var N;const C=(N=x.target.files)==null?void 0:N[0];if(!C)return;h(!0);const{file_url:k}=await $.integrations.Core.UploadFile({file:C});n.mutate({id:t.id,data:{memory_photo:k}}),h(!1)};return d.jsx(bi,{open:!!t,onOpenChange:e,children:d.jsxs(Ii,{className:"glass-card max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:`-mx-6 -mt-6 p-4 ${p.bgLight}`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl ${p.color} flex items-center justify-center`,children:d.jsx(m,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t.title}),d.jsx("p",{className:"text-gray-500 text-sm",children:je(new Date(t.date),"EEEE, MMMM d, yyyy")})]})]})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[t.time&&d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx(R5,{className:"w-4 h-4"}),t.time]}),t.location&&d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx(vT,{className:"w-4 h-4"}),t.location]}),t.link&&d.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-pink-500 hover:underline",children:[d.jsx(gT,{className:"w-4 h-4"}),"Open Link"]}),t.notes&&d.jsx("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-700 text-sm",children:t.notes}),v&&d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[d.jsx(dt,{className:"w-4 h-4 text-pink-500"})," Memory"]}),t.memory_photo&&d.jsx("img",{src:t.memory_photo,alt:"",className:"w-full h-40 object-cover rounded-xl mb-3"}),d.jsxs("label",{className:"block mb-3",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"}),d.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed border-gray-200 rounded-xl cursor-pointer hover:border-pink-300 text-gray-500 text-sm",children:[c?d.jsx(ni,{className:"w-4 h-4 animate-spin"}):d.jsx(gd,{className:"w-4 h-4"}),t.memory_photo?"Change photo":"Add photo"]})]}),d.jsx(vd,{value:o,onChange:x=>a(x.target.value),onBlur:()=>n.mutate({id:t.id,data:{memory_note:o}}),placeholder:"Write about this memory...",className:"rounded-xl"})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx(Y,{variant:"outline",onClick:()=>i.mutate(t.id),className:"rounded-xl border-red-200 text-red-500 hover:bg-red-50",children:"Delete"}),d.jsx(Y,{onClick:e,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Close"})]})]})]})})}function jT(t,e){const n=b.useRef(e);b.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const O3=1;function R3(t){return Object.freeze({__version:O3,map:t})}function j3(t,e){return Object.freeze({...t,...e})}const FT=b.createContext(null),zT=FT.Provider;function ey(){const t=b.useContext(FT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function F3(t){function e(n,i){const{instance:r,context:o}=t(n).current;return b.useImperativeHandle(i,()=>r),n.children==null?null:io.createElement(zT,{value:o},n.children)}return b.forwardRef(e)}function z3(t){function e(n,i){const[r,o]=b.useState(!1),{instance:a}=t(n,o).current;b.useImperativeHandle(i,()=>a),b.useEffect(function(){r&&a.update()},[a,r,n.children]);const c=a._contentNode;return c?FS.createPortal(n.children,c):null}return b.forwardRef(e)}function U3(t){function e(n,i){const{instance:r}=t(n).current;return b.useImperativeHandle(i,()=>r),null}return b.forwardRef(e)}function UT(t,e){const n=b.useRef();b.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function ty(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function $3(t,e){return function(i,r){const o=ey(),a=t(ty(i,o),o);return jT(o.map,i.attribution),UT(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Dm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(fb,function(n){var i="1.9.4";function r(s){var l,u,f,g;for(u=1,f=arguments.length;u<f;u++){g=arguments[u];for(l in g)s[l]=g[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var f=u.call(arguments,2);return function(){return s.apply(l,f.length?f.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function p(s,l,u){var f,g,w,T;return T=function(){f=!1,g&&(w.apply(u,g),g=!1)},w=function(){f?g=arguments:(s.apply(u,arguments),setTimeout(T,l),f=!0)},w}function m(s,l,u){var f=l[1],g=l[0],w=f-g;return s===f&&u?s:((s-g)%w+w)%w+g}function v(){return!1}function y(s,l){if(l===!1)return s;var u=Math.pow(10,l===void 0?6:l);return Math.round(s*u)/u}function x(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return x(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in l)s.options[u]=l[u];return s.options}function N(s,l,u){var f=[];for(var g in s)f.push(encodeURIComponent(u?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function _(s,l){return s.replace(E,function(u,f){var g=l[f];if(g===void 0)throw new Error("No value provided for variable "+u);return typeof g=="function"&&(g=g(l)),g})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function I(s,l){for(var u=0;u<s.length;u++)if(s[u]===l)return u;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function D(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var R=0;function j(s){var l=+new Date,u=Math.max(0,16-(l-R));return R=l+u,window.setTimeout(s,u)}var J=window.requestAnimationFrame||D("RequestAnimationFrame")||j,X=window.cancelAnimationFrame||D("CancelAnimationFrame")||D("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function re(s,l,u){if(u&&J===j)s.call(l);else return J.call(window,a(s,l))}function B(s){s&&X.call(window,s)}var Ie={__proto__:null,extend:r,create:o,bind:a,get lastId(){return c},stamp:h,throttle:p,wrapNum:m,falseFn:v,formatNum:y,trim:x,splitWords:C,setOptions:k,getParamString:N,template:_,isArray:S,indexOf:I,emptyImageUrl:M,requestFn:J,cancelFn:X,requestAnimFrame:re,cancelAnimFrame:B};function ft(){}ft.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,f=o(u);f.constructor=l,l.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(l[g]=this[g]);return s.statics&&r(l,s.statics),s.includes&&(Li(s.includes),r.apply(null,[f].concat(s.includes))),r(f,s),delete f.statics,delete f.includes,f.options&&(f.options=u.options?o(u.options):{},r(f.options,s.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,T=f._initHooks.length;w<T;w++)f._initHooks[w].call(this)}},l},ft.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ft.mergeOptions=function(s){return r(this.prototype.options,s),this},ft.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Li(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ye={on:function(s,l,u){if(typeof s=="object")for(var f in s)this._on(f,s[f],l);else{s=C(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],l,u)}return this},off:function(s,l,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var f in s)this._off(f,s[f],l);else{s=C(s);for(var g=arguments.length===1,w=0,T=s.length;w<T;w++)g?this._off(s[w]):this._off(s[w],l,u)}return this},_on:function(s,l,u,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,u)===!1){u===this&&(u=void 0);var g={fn:l,ctx:u};f&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,l,u){var f,g,w;if(this._events&&(f=this._events[s],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=v;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(s,l,u);if(T!==!1){var P=f[T];this._firingCount&&(P.fn=v,this._events[s]=f=f.slice()),f.splice(T,1)}}},fire:function(s,l,u){if(!this.listens(s,u))return this;var f=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,T=g.length;w<T;w++){var P=g[w],A=P.fn;P.once&&this.off(s,A,P.ctx),A.call(P.ctx||this,f)}this._firingCount--}}return u&&this._propagateEvent(f),this},listens:function(s,l,u,f){typeof s!="string"&&console.warn('"string" type argument expected');var g=l;typeof l!="function"&&(f=!!l,g=void 0,u=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,g,u)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(s,l,u,f))return!0}return!1},_listens:function(s,l,u){if(!this._events)return!1;var f=this._events[s]||[];if(!l)return!!f.length;u===this&&(u=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===l&&f[g].ctx===u)return g;return!1},once:function(s,l,u){if(typeof s=="object")for(var f in s)this._on(f,s[f],l,!0);else{s=C(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],l,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Ye.addEventListener=Ye.on,Ye.removeEventListener=Ye.clearAllEventListeners=Ye.off,Ye.addOneTimeEventListener=Ye.once,Ye.fireEvent=Ye.fire,Ye.hasEventListeners=Ye.listens;var W=ft.extend(Ye);function O(s,l,u){this.x=u?Math.round(s):s,this.y=u?Math.round(l):l}var ie=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(H(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(H(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new O(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new O(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(s){s=H(s);var l=s.x-this.x,u=s.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(s){return s=H(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=H(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function H(s,l,u){return s instanceof O?s:S(s)?new O(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new O(s.x,s.y):new O(s,l,u)}function oe(s,l){if(s)for(var u=l?[s,l]:s,f=0,g=u.length;f<g;f++)this.extend(u[f])}oe.prototype={extend:function(s){var l,u;if(!s)return this;if(s instanceof O||typeof s[0]=="number"||"x"in s)l=u=H(s);else if(s=_e(s),l=s.min,u=s.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,u;return typeof s[0]=="number"||s instanceof O?s=H(s):s=_e(s),s instanceof oe?(l=s.min,u=s.max):l=u=s,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=_e(s);var l=this.min,u=this.max,f=s.min,g=s.max,w=g.x>=l.x&&f.x<=u.x,T=g.y>=l.y&&f.y<=u.y;return w&&T},overlaps:function(s){s=_e(s);var l=this.min,u=this.max,f=s.min,g=s.max,w=g.x>l.x&&f.x<u.x,T=g.y>l.y&&f.y<u.y;return w&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,u=this.max,f=Math.abs(l.x-u.x)*s,g=Math.abs(l.y-u.y)*s;return _e(H(l.x-f,l.y-g),H(u.x+f,u.y+g))},equals:function(s){return s?(s=_e(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function _e(s,l){return!s||s instanceof oe?s:new oe(s,l)}function Xe(s,l){if(s)for(var u=l?[s,l]:s,f=0,g=u.length;f<g;f++)this.extend(u[f])}Xe.prototype={extend:function(s){var l=this._southWest,u=this._northEast,f,g;if(s instanceof xe)f=s,g=s;else if(s instanceof Xe){if(f=s._southWest,g=s._northEast,!f||!g)return this}else return s?this.extend(ue(s)||Pe(s)):this;return!l&&!u?(this._southWest=new xe(f.lat,f.lng),this._northEast=new xe(g.lat,g.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),u.lat=Math.max(g.lat,u.lat),u.lng=Math.max(g.lng,u.lng)),this},pad:function(s){var l=this._southWest,u=this._northEast,f=Math.abs(l.lat-u.lat)*s,g=Math.abs(l.lng-u.lng)*s;return new Xe(new xe(l.lat-f,l.lng-g),new xe(u.lat+f,u.lng+g))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof xe||"lat"in s?s=ue(s):s=Pe(s);var l=this._southWest,u=this._northEast,f,g;return s instanceof Xe?(f=s.getSouthWest(),g=s.getNorthEast()):f=g=s,f.lat>=l.lat&&g.lat<=u.lat&&f.lng>=l.lng&&g.lng<=u.lng},intersects:function(s){s=Pe(s);var l=this._southWest,u=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>=l.lat&&f.lat<=u.lat,T=g.lng>=l.lng&&f.lng<=u.lng;return w&&T},overlaps:function(s){s=Pe(s);var l=this._southWest,u=this._northEast,f=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>l.lat&&f.lat<u.lat,T=g.lng>l.lng&&f.lng<u.lng;return w&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Pe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Pe(s,l){return s instanceof Xe?s:new Xe(s,l)}function xe(s,l,u){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,u!==void 0&&(this.alt=+u)}xe.prototype={equals:function(s,l){if(!s)return!1;s=ue(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+y(this.lat,s)+", "+y(this.lng,s)+")"},distanceTo:function(s){return zn.distance(this,ue(s))},wrap:function(){return zn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,u=l/Math.cos(Math.PI/180*this.lat);return Pe([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function ue(s,l,u){return s instanceof xe?s:S(s)&&typeof s[0]!="object"?s.length===3?new xe(s[0],s[1],s[2]):s.length===2?new xe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new xe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new xe(s,l,u)}var Mt={latLngToPoint:function(s,l){var u=this.projection.project(s),f=this.scale(l);return this.transformation._transform(u,f)},pointToLatLng:function(s,l){var u=this.scale(l),f=this.transformation.untransform(s,u);return this.projection.unproject(f)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(s),f=this.transformation.transform(l.min,u),g=this.transformation.transform(l.max,u);return new oe(f,g)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,f=s.alt;return new xe(u,l,f)},wrapLatLngBounds:function(s){var l=s.getCenter(),u=this.wrapLatLng(l),f=l.lat-u.lat,g=l.lng-u.lng;if(f===0&&g===0)return s;var w=s.getSouthWest(),T=s.getNorthEast(),P=new xe(w.lat-f,w.lng-g),A=new xe(T.lat-f,T.lng-g);return new Xe(P,A)}},zn=r({},Mt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var u=Math.PI/180,f=s.lat*u,g=l.lat*u,w=Math.sin((l.lat-s.lat)*u/2),T=Math.sin((l.lng-s.lng)*u/2),P=w*w+Math.cos(f)*Math.cos(g)*T*T,A=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*A}}),Xl=6378137,fs={R:Xl,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,s.lat),-u),g=Math.sin(f*l);return new O(this.R*s.lng*l,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var l=180/Math.PI;return new xe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Xl*Math.PI;return new oe([-s,-s],[s,s])}()};function U(s,l,u,f){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=u,this._d=f}U.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new O((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Me(s,l,u,f){return new U(s,l,u,f)}var on=r({},zn,{code:"EPSG:3857",projection:fs,transformation:function(){var s=.5/(Math.PI*fs.R);return Me(s,.5,-s,.5)}()}),_d=r({},on,{code:"EPSG:900913"});function Jl(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function eu(s,l){var u="",f,g,w,T,P,A;for(f=0,w=s.length;f<w;f++){for(P=s[f],g=0,T=P.length;g<T;g++)A=P[g],u+=(g?"L":"M")+A.x+" "+A.y;u+=l?te.svg?"z":"x":""}return u||"M0 0"}var Oo=document.documentElement.style,tu="ActiveXObject"in window,VT=tu&&!document.addEventListener,ry="msLaunchUri"in navigator&&!("documentMode"in document),wd=Un("webkit"),sy=Un("android"),oy=Un("android 2")||Un("android 3"),qT=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),HT=sy&&Un("Google")&&qT<537&&!("AudioNode"in window),xd=!!window.opera,ay=!ry&&Un("chrome"),ly=Un("gecko")&&!wd&&!xd&&!tu,WT=!ay&&Un("safari"),uy=Un("phantom"),cy="OTransition"in Oo,KT=navigator.platform.indexOf("Win")===0,hy=tu&&"transition"in Oo,Sd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!oy,dy="MozPerspective"in Oo,QT=!window.L_DISABLE_3D&&(hy||Sd||dy)&&!cy&&!uy,Ro=typeof orientation<"u"||Un("mobile"),GT=Ro&&wd,ZT=Ro&&Sd,fy=!window.PointerEvent&&window.MSPointerEvent,py=!!(window.PointerEvent||fy),my="ontouchstart"in window||!!window.TouchEvent,YT=!window.L_NO_TOUCH&&(my||py),XT=Ro&&xd,JT=Ro&&ly,eN=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tN=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return s}(),nN=function(){return!!document.createElement("canvas").getContext}(),Ed=!!(document.createElementNS&&Jl("svg").createSVGRect),iN=!!Ed&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),rN=!Ed&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),sN=navigator.platform.indexOf("Mac")===0,oN=navigator.platform.indexOf("Linux")===0;function Un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var te={ie:tu,ielt9:VT,edge:ry,webkit:wd,android:sy,android23:oy,androidStock:HT,opera:xd,chrome:ay,gecko:ly,safari:WT,phantom:uy,opera12:cy,win:KT,ie3d:hy,webkit3d:Sd,gecko3d:dy,any3d:QT,mobile:Ro,mobileWebkit:GT,mobileWebkit3d:ZT,msPointer:fy,pointer:py,touch:YT,touchNative:my,mobileOpera:XT,mobileGecko:JT,retina:eN,passiveEvents:tN,canvas:nN,svg:Ed,vml:rN,inlineSvg:iN,mac:sN,linux:oN},gy=te.msPointer?"MSPointerDown":"pointerdown",vy=te.msPointer?"MSPointerMove":"pointermove",yy=te.msPointer?"MSPointerUp":"pointerup",_y=te.msPointer?"MSPointerCancel":"pointercancel",kd={touchstart:gy,touchmove:vy,touchend:yy,touchcancel:_y},wy={touchstart:dN,touchmove:nu,touchend:nu,touchcancel:nu},ps={},xy=!1;function aN(s,l,u){return l==="touchstart"&&hN(),wy[l]?(u=wy[l].bind(this,u),s.addEventListener(kd[l],u,!1),u):(console.warn("wrong event specified:",l),v)}function lN(s,l,u){if(!kd[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(kd[l],u,!1)}function uN(s){ps[s.pointerId]=s}function cN(s){ps[s.pointerId]&&(ps[s.pointerId]=s)}function Sy(s){delete ps[s.pointerId]}function hN(){xy||(document.addEventListener(gy,uN,!0),document.addEventListener(vy,cN,!0),document.addEventListener(yy,Sy,!0),document.addEventListener(_y,Sy,!0),xy=!0)}function nu(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in ps)l.touches.push(ps[u]);l.changedTouches=[l],s(l)}}function dN(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Et(l),nu(s,l)}function fN(s){var l={},u,f;for(f in s)u=s[f],l[f]=u&&u.bind?u.bind(s):u;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var pN=200;function mN(s,l){s.addEventListener("dblclick",l);var u=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var T=Ny(w);if(!(T.some(function(A){return A instanceof HTMLLabelElement&&A.attributes.for})&&!T.some(function(A){return A instanceof HTMLInputElement||A instanceof HTMLSelectElement}))){var P=Date.now();P-u<=pN?(f++,f===2&&l(fN(w))):f=1,u=P}}}return s.addEventListener("click",g),{dblclick:l,simDblclick:g}}function gN(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Cd=su(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jo=su(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ey=jo==="webkitTransition"||jo==="OTransition"?jo+"End":"transitionend";function ky(s){return typeof s=="string"?document.getElementById(s):s}function Fo(s,l){var u=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(s,null);u=f?f[l]:null}return u==="auto"?null:u}function Te(s,l,u){var f=document.createElement(s);return f.className=l||"",u&&u.appendChild(f),f}function We(s){var l=s.parentNode;l&&l.removeChild(s)}function iu(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ms(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function gs(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Td(s,l){if(s.classList!==void 0)return s.classList.contains(l);var u=ru(s);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function me(s,l){if(s.classList!==void 0)for(var u=C(l),f=0,g=u.length;f<g;f++)s.classList.add(u[f]);else if(!Td(s,l)){var w=ru(s);Nd(s,(w?w+" ":"")+l)}}function nt(s,l){s.classList!==void 0?s.classList.remove(l):Nd(s,x((" "+ru(s)+" ").replace(" "+l+" "," ")))}function Nd(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ru(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function gn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&vN(s,l)}function vN(s,l){var u=!1,f="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):s.style.filter+=" progid:"+f+"(opacity="+l+")"}function su(s){for(var l=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in l)return s[u];return!1}function Cr(s,l,u){var f=l||new O(0,0);s.style[Cd]=(te.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(u?" scale("+u+")":"")}function st(s,l){s._leaflet_pos=l,te.any3d?Cr(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Tr(s){return s._leaflet_pos||new O(0,0)}var zo,Uo,bd;if("onselectstart"in document)zo=function(){fe(window,"selectstart",Et)},Uo=function(){Fe(window,"selectstart",Et)};else{var $o=su(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zo=function(){if($o){var s=document.documentElement.style;bd=s[$o],s[$o]="none"}},Uo=function(){$o&&(document.documentElement.style[$o]=bd,bd=void 0)}}function Id(){fe(window,"dragstart",Et)}function Pd(){Fe(window,"dragstart",Et)}var ou,Md;function Ld(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(au(),ou=s,Md=s.style.outlineStyle,s.style.outlineStyle="none",fe(window,"keydown",au))}function au(){ou&&(ou.style.outlineStyle=Md,ou=void 0,Md=void 0,Fe(window,"keydown",au))}function Cy(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ad(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var yN={__proto__:null,TRANSFORM:Cd,TRANSITION:jo,TRANSITION_END:Ey,get:ky,getStyle:Fo,create:Te,remove:We,empty:iu,toFront:ms,toBack:gs,hasClass:Td,addClass:me,removeClass:nt,setClass:Nd,getClass:ru,setOpacity:gn,testProp:su,setTransform:Cr,setPosition:st,getPosition:Tr,get disableTextSelection(){return zo},get enableTextSelection(){return Uo},disableImageDrag:Id,enableImageDrag:Pd,preventOutline:Ld,restoreOutline:au,getSizedParentNode:Cy,getScale:Ad};function fe(s,l,u,f){if(l&&typeof l=="object")for(var g in l)Od(s,g,l[g],u);else{l=C(l);for(var w=0,T=l.length;w<T;w++)Od(s,l[w],u,f)}return this}var $n="_leaflet_events";function Fe(s,l,u,f){if(arguments.length===1)Ty(s),delete s[$n];else if(l&&typeof l=="object")for(var g in l)Rd(s,g,l[g],u);else if(l=C(l),arguments.length===2)Ty(s,function(P){return I(l,P)!==-1});else for(var w=0,T=l.length;w<T;w++)Rd(s,l[w],u,f);return this}function Ty(s,l){for(var u in s[$n]){var f=u.split(/\d/)[0];(!l||l(f))&&Rd(s,f,null,null,u)}}var Dd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Od(s,l,u,f){var g=l+h(u)+(f?"_"+h(f):"");if(s[$n]&&s[$n][g])return this;var w=function(P){return u.call(f||s,P||window.event)},T=w;!te.touchNative&&te.pointer&&l.indexOf("touch")===0?w=aN(s,l,w):te.touch&&l==="dblclick"?w=mN(s,w):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Dd[l]||l,w,te.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(P){P=P||window.event,Fd(s,P)&&T(P)},s.addEventListener(Dd[l],w,!1)):s.addEventListener(l,T,!1):s.attachEvent("on"+l,w),s[$n]=s[$n]||{},s[$n][g]=w}function Rd(s,l,u,f,g){g=g||l+h(u)+(f?"_"+h(f):"");var w=s[$n]&&s[$n][g];if(!w)return this;!te.touchNative&&te.pointer&&l.indexOf("touch")===0?lN(s,l,w):te.touch&&l==="dblclick"?gN(s,w):"removeEventListener"in s?s.removeEventListener(Dd[l]||l,w,!1):s.detachEvent("on"+l,w),s[$n][g]=null}function Nr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function jd(s){return Od(s,"wheel",Nr),this}function Bo(s){return fe(s,"mousedown touchstart dblclick contextmenu",Nr),s._leaflet_disable_click=!0,this}function Et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function br(s){return Et(s),Nr(s),this}function Ny(s){if(s.composedPath)return s.composedPath();for(var l=[],u=s.target;u;)l.push(u),u=u.parentNode;return l}function by(s,l){if(!l)return new O(s.clientX,s.clientY);var u=Ad(l),f=u.boundingClientRect;return new O((s.clientX-f.left)/u.x-l.clientLeft,(s.clientY-f.top)/u.y-l.clientTop)}var _N=te.linux&&te.chrome?window.devicePixelRatio:te.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Iy(s){return te.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/_N:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Fd(s,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var wN={__proto__:null,on:fe,off:Fe,stopPropagation:Nr,disableScrollPropagation:jd,disableClickPropagation:Bo,preventDefault:Et,stop:br,getPropagationPath:Ny,getMousePosition:by,getWheelDelta:Iy,isExternalTarget:Fd,addListener:fe,removeListener:Fe},Py=W.extend({run:function(s,l,u,f){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Tr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=re(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var u=this._startPos.add(this._offset.multiplyBy(s));l&&u._round(),st(this._el,u),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=W.extend({options:{crs:on,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ue(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jo&&te.any3d&&!te.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,Ey,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ue(s),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,u.zoom):this._tryAnimatedPan(s,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,u){var f=this.getZoomScale(l),g=this.getSize().divideBy(2),w=s instanceof O?s:this.latLngToContainerPoint(s),T=w.subtract(g).multiplyBy(1-1/f),P=this.containerPointToLatLng(g.add(T));return this.setView(P,l,{zoom:u})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Pe(s);var u=H(l.paddingTopLeft||l.padding||[0,0]),f=H(l.paddingBottomRight||l.padding||[0,0]),g=this.getBoundsZoom(s,!1,u.add(f));if(g=typeof l.maxZoom=="number"?Math.min(l.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var w=f.subtract(u).divideBy(2),T=this.project(s.getSouthWest(),g),P=this.project(s.getNorthEast(),g),A=this.unproject(T.add(P).divideBy(2).add(w),g);return{center:A,zoom:g}},fitBounds:function(s,l){if(s=Pe(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=H(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Py,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){me(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,u){if(u=u||{},u.animate===!1||!te.any3d)return this.setView(s,l,u);this._stop();var f=this.project(this.getCenter()),g=this.project(s),w=this.getSize(),T=this._zoom;s=ue(s),l=l===void 0?T:l;var P=Math.max(w.x,w.y),A=P*this.getZoomScale(T,l),z=g.distanceTo(f)||1,Q=1.42,se=Q*Q;function ge(ot){var _u=ot?-1:1,lb=ot?A:P,ub=A*A-P*P+_u*se*se*z*z,cb=2*lb*se*z,Gd=ub/cb,c_=Math.sqrt(Gd*Gd+1)-Gd,hb=c_<1e-9?-18:Math.log(c_);return hb}function qt(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function vt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function yn(ot){return qt(ot)/vt(ot)}var Zt=ge(0);function Ss(ot){return P*(vt(Zt)/vt(Zt+Q*ot))}function rb(ot){return P*(vt(Zt)*yn(Zt+Q*ot)-qt(Zt))/se}function sb(ot){return 1-Math.pow(1-ot,1.5)}var ob=Date.now(),l_=(ge(1)-Zt)/Q,ab=u.duration?1e3*u.duration:1e3*l_*.8;function u_(){var ot=(Date.now()-ob)/ab,_u=sb(ot)*l_;ot<=1?(this._flyToFrame=re(u_,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(rb(_u)/z)),T),this.getScaleZoom(P/Ss(_u),T),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),u_.call(this),this},flyToBounds:function(s,l){var u=this._getBoundsCenterZoom(s,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(s){return s=Pe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var u=this.getCenter(),f=this._limitCenter(u,this._zoom,Pe(s));return u.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var u=H(l.paddingTopLeft||l.padding||[0,0]),f=H(l.paddingBottomRight||l.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(s),T=this.getPixelBounds(),P=_e([T.min.add(u),T.max.subtract(f)]),A=P.getSize();if(!P.contains(w)){this._enforcingBounds=!0;var z=w.subtract(P.getCenter()),Q=P.extend(w).getSize().subtract(A);g.x+=z.x<0?-Q.x:Q.x,g.y+=z.y<0?-Q.y:Q.y,this.panTo(this.unproject(g),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),f=l.divideBy(2).round(),g=u.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),u=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,s):navigator.geolocation.getCurrentPosition(l,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,u=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,u=s.coords.longitude,f=new xe(l,u),g=f.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var T=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(T,w.maxZoom):T)}var P={latlng:f,bounds:g,timestamp:s.timestamp};for(var A in s.coords)typeof s.coords[A]=="number"&&(P[A]=s.coords[A]);this.fire("locationfound",P)}},addHandler:function(s,l){if(!l)return this;var u=this[s]=new l(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)We(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),f=Te("div",u,l||this._mapPane);return s&&(this._panes[s]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new Xe(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,u){s=Pe(s),u=H(u||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),T=s.getNorthWest(),P=s.getSouthEast(),A=this.getSize().subtract(u),z=_e(this.project(P,f),this.project(T,f)).getSize(),Q=te.any3d?this.options.zoomSnap:1,se=A.x/z.x,ge=A.y/z.y,qt=l?Math.max(se,ge):Math.min(se,ge);return f=this.getScaleZoom(qt,f),Q&&(f=Math.round(f/(Q/100))*(Q/100),f=l?Math.ceil(f/Q)*Q:Math.floor(f/Q)*Q),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var u=this._getTopLeftPoint(s,l);return new oe(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(s)/u.scale(l)},getScaleZoom:function(s,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var f=u.zoom(s*u.scale(l));return isNaN(f)?1/0:f},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ue(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(H(s),l)},layerPointToLatLng:function(s){var l=H(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ue(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ue(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Pe(s))},distance:function(s,l){return this.options.crs.distance(ue(s),ue(l))},containerPointToLayerPoint:function(s){return H(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return H(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(H(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(s)))},mouseEventToContainerPoint:function(s){return by(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=ky(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&te.any3d,me(s,"leaflet-container"+(te.touch?" leaflet-touch":"")+(te.retina?" leaflet-retina":"")+(te.ielt9?" leaflet-oldie":"")+(te.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Fo(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(s.markerPane,"leaflet-zoom-hide"),me(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,u){st(this._mapPane,new O(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var g=this._zoom!==l;this._moveStart(g,u)._move(s,l)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,u,f){l===void 0&&(l=this._zoom);var g=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),f?u&&u.pinch&&this.fire("zoom",u):((g||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){st(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Fe:fe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),te.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=re(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var u=[],f,g=l==="mouseout"||l==="mouseover",w=s.target||s.srcElement,T=!1;w;){if(f=this._targets[h(w)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(l,!0)&&(g&&!Fd(w,s)||(u.push(f),g))||w===this._container)break;w=w.parentNode}return!u.length&&!T&&!g&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var u=s.type;u==="mousedown"&&Ld(l),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,u){if(s.type==="click"){var f=r({},s);f.type="preclick",this._fireDOMEvent(f,f.type,u)}var g=this._findEventTargets(s,l);if(u){for(var w=[],T=0;T<u.length;T++)u[T].listens(l,!0)&&w.push(u[T]);g=w.concat(g)}if(g.length){l==="contextmenu"&&Et(s);var P=g[0],A={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var z=P.getLatLng&&(!P._radius||P._radius<=10);A.containerPoint=z?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(s),A.layerPoint=this.containerPointToLayerPoint(A.containerPoint),A.latlng=z?P.getLatLng():this.layerPointToLatLng(A.layerPoint)}for(T=0;T<g.length;T++)if(g[T].fire(l,A,!0),A.originalEvent._stopped||g[T].options.bubblingMouseEvents===!1&&I(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Tr(this._mapPane)||new O(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var u=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var u=this.getSize()._divideBy(2);return this.project(s,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,u){var f=this._getNewPixelOrigin(u,l);return this.project(s,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(s,l,u){var f=this._getNewPixelOrigin(u,l);return _e([this.project(s.getSouthWest(),l)._subtract(f),this.project(s.getNorthWest(),l)._subtract(f),this.project(s.getSouthEast(),l)._subtract(f),this.project(s.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,u){if(!u)return s;var f=this.project(s,l),g=this.getSize().divideBy(2),w=new oe(f.subtract(g),f.add(g)),T=this._getBoundsOffset(w,u,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?s:this.unproject(f.add(T),l)},_limitOffset:function(s,l){if(!l)return s;var u=this.getPixelBounds(),f=new oe(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(s,l,u){var f=_e(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),g=f.min.subtract(s.min),w=f.max.subtract(s.max),T=this._rebound(g.x,-w.x),P=this._rebound(g.y,-w.y);return new O(T,P)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),u=this.getMaxZoom(),f=te.any3d?this.options.zoomSnap:1;return f&&(s=Math.round(s/f)*f),Math.max(l,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var u=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var s=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var u=Cd,f=this._proxy.style[u];Cr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Cr(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),g=this._getCenterOffset(s)._divideBy(1-1/f);return u.animate!==!0&&!this.getSize().contains(g)?!1:(re(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,u,f){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xN(s,l){return new Se(s,l)}var Nn=ft.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),u=this.getPosition(),f=s._controlCorners[u];return me(l,"leaflet-control"),u.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Vo=function(s){return new Nn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",u=this._controlContainer=Te("div",l+"control-container",this._container);function f(g,w){var T=l+g+" "+l+w;s[g+w]=Te("div",T,u)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)We(this._controlCorners[s]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var My=Nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,u,f){return u<f?-1:f<u?1:0}},initialize:function(s,l,u){k(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in s)this._addLayer(s[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Nn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Te("div",s),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Bo(l),jd(l);var f=this._section=Te("section",s+"-list");u&&(this._map.on("click",this.collapse,this),fe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Te("a",s+"-toggle",l);g.href="#",g.title="Layers",g.setAttribute("role","button"),fe(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Et(w),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Te("div",s+"-base",f),this._separator=Te("div",s+"-separator",f),this._overlaysList=Te("div",s+"-overlays",f),l.appendChild(f)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(a(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;iu(this._baseLayersList),iu(this._overlaysList),this._layerControlInputs=[];var s,l,u,f,g=0;for(u=0;u<this._layers.length;u++)f=this._layers[u],this._addItem(f),l=l||f.overlay,s=s||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),u=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(s,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=u,f.firstChild},_addItem:function(s){var l=document.createElement("label"),u=this._map.hasLayer(s.layer),f;s.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=u):f=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(f),f.layerId=h(s.layer),fe(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(f),w.appendChild(g);var T=s.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,u,f=[],g=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)l=s[w],u=this._getLayer(l.layerId).layer,l.checked?f.push(u):l.checked||g.push(u);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,u,f=this._map.getZoom(),g=s.length-1;g>=0;g--)l=s[g],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&f<u.options.minZoom||u.options.maxZoom!==void 0&&f>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,fe(s,"click",Et),this.expand();var l=this;setTimeout(function(){Fe(s,"click",Et),l._preventClick=!1})}}),SN=function(s,l,u){return new My(s,l,u)},zd=Nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",u=Te("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,u,f,g){var w=Te("a",u,f);return w.innerHTML=s,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Bo(w),fe(w,"click",br),fe(w,"click",g,this),fe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";nt(this._zoomInButton,l),nt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(me(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(me(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zd,this.addControl(this.zoomControl))});var EN=function(s){return new zd(s)},Ly=Nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",u=Te("div",l),f=this.options;return this._addScales(f,l+"-line",u),s.on(f.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,u){s.metric&&(this._mScale=Te("div",l,u)),s.imperial&&(this._iScale=Te("div",l,u))},_update:function(){var s=this._map,l=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/s)},_updateImperial:function(s){var l=s*3.2808399,u,f,g;l>5280?(u=l/5280,f=this._getRoundNum(u),this._updateScale(this._iScale,f+" mi",f/u)):(g=this._getRoundNum(l),this._updateScale(this._iScale,g+" ft",g/l))},_updateScale:function(s,l,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),u=s/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),kN=function(s){return new Ly(s)},CN='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ud=Nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(te.inlineSvg?CN+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Te("div","leaflet-control-attribution"),Bo(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Ud().addTo(this)});var TN=function(s){return new Ud(s)};Nn.Layers=My,Nn.Zoom=zd,Nn.Scale=Ly,Nn.Attribution=Ud,Vo.layers=SN,Vo.zoom=EN,Vo.scale=kN,Vo.attribution=TN;var Bn=ft.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bn.addTo=function(s,l){return s.addHandler(l,this),this};var NN={Events:Ye},Ay=te.touch?"touchstart mousedown":"mousedown",Ai=W.extend({options:{clickTolerance:3},initialize:function(s,l,u,f){k(this,f),this._element=s,this._dragStartTarget=l||s,this._preventOutline=u},enable:function(){this._enabled||(fe(this._dragStartTarget,Ay,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ai._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,Ay,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Td(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ai._dragging===this&&this.finishDrag();return}if(!(Ai._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ai._dragging=this,this._preventOutline&&Ld(this._element),Id(),zo(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,u=Cy(this._element);this._startPoint=new O(l.clientX,l.clientY),this._startPos=Tr(this._element),this._parentScale=Ad(u);var f=s.type==="mousedown";fe(document,f?"mousemove":"touchmove",this._onMove,this),fe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,u=new O(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Et(s),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),st(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){nt(document.body,"leaflet-dragging"),this._lastTarget&&(nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Pd(),Uo();var l=this._moved&&this._moving;this._moving=!1,Ai._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Dy(s,l,u){var f,g=[1,4,2,8],w,T,P,A,z,Q,se,ge;for(w=0,Q=s.length;w<Q;w++)s[w]._code=Ir(s[w],l);for(P=0;P<4;P++){for(se=g[P],f=[],w=0,Q=s.length,T=Q-1;w<Q;T=w++)A=s[w],z=s[T],A._code&se?z._code&se||(ge=lu(z,A,se,l,u),ge._code=Ir(ge,l),f.push(ge)):(z._code&se&&(ge=lu(z,A,se,l,u),ge._code=Ir(ge,l),f.push(ge)),f.push(A));s=f}return s}function Oy(s,l){var u,f,g,w,T,P,A,z,Q;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=ue([0,0]),ge=Pe(s),qt=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());qt<1700&&(se=$d(s));var vt=s.length,yn=[];for(u=0;u<vt;u++){var Zt=ue(s[u]);yn.push(l.project(ue([Zt.lat-se.lat,Zt.lng-se.lng])))}for(P=A=z=0,u=0,f=vt-1;u<vt;f=u++)g=yn[u],w=yn[f],T=g.y*w.x-w.y*g.x,A+=(g.x+w.x)*T,z+=(g.y+w.y)*T,P+=T*3;P===0?Q=yn[0]:Q=[A/P,z/P];var Ss=l.unproject(H(Q));return ue([Ss.lat+se.lat,Ss.lng+se.lng])}function $d(s){for(var l=0,u=0,f=0,g=0;g<s.length;g++){var w=ue(s[g]);l+=w.lat,u+=w.lng,f++}return ue([l/f,u/f])}var bN={__proto__:null,clipPolygon:Dy,polygonCenter:Oy,centroid:$d};function Ry(s,l){if(!l||!s.length)return s.slice();var u=l*l;return s=MN(s,u),s=PN(s,u),s}function jy(s,l,u){return Math.sqrt(qo(s,l,u,!0))}function IN(s,l,u){return qo(s,l,u)}function PN(s,l){var u=s.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(u);g[0]=g[u-1]=1,Bd(s,g,l,0,u-1);var w,T=[];for(w=0;w<u;w++)g[w]&&T.push(s[w]);return T}function Bd(s,l,u,f,g){var w=0,T,P,A;for(P=f+1;P<=g-1;P++)A=qo(s[P],s[f],s[g],!0),A>w&&(T=P,w=A);w>u&&(l[T]=1,Bd(s,l,u,f,T),Bd(s,l,u,T,g))}function MN(s,l){for(var u=[s[0]],f=1,g=0,w=s.length;f<w;f++)LN(s[f],s[g])>l&&(u.push(s[f]),g=f);return g<w-1&&u.push(s[w-1]),u}var Fy;function zy(s,l,u,f,g){var w=f?Fy:Ir(s,u),T=Ir(l,u),P,A,z;for(Fy=T;;){if(!(w|T))return[s,l];if(w&T)return!1;P=w||T,A=lu(s,l,P,u,g),z=Ir(A,u),P===w?(s=A,w=z):(l=A,T=z)}}function lu(s,l,u,f,g){var w=l.x-s.x,T=l.y-s.y,P=f.min,A=f.max,z,Q;return u&8?(z=s.x+w*(A.y-s.y)/T,Q=A.y):u&4?(z=s.x+w*(P.y-s.y)/T,Q=P.y):u&2?(z=A.x,Q=s.y+T*(A.x-s.x)/w):u&1&&(z=P.x,Q=s.y+T*(P.x-s.x)/w),new O(z,Q,g)}function Ir(s,l){var u=0;return s.x<l.min.x?u|=1:s.x>l.max.x&&(u|=2),s.y<l.min.y?u|=4:s.y>l.max.y&&(u|=8),u}function LN(s,l){var u=l.x-s.x,f=l.y-s.y;return u*u+f*f}function qo(s,l,u,f){var g=l.x,w=l.y,T=u.x-g,P=u.y-w,A=T*T+P*P,z;return A>0&&(z=((s.x-g)*T+(s.y-w)*P)/A,z>1?(g=u.x,w=u.y):z>0&&(g+=T*z,w+=P*z)),T=s.x-g,P=s.y-w,f?T*T+P*P:new O(g,w)}function vn(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Uy(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vn(s)}function $y(s,l){var u,f,g,w,T,P,A,z;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Q=ue([0,0]),se=Pe(s),ge=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());ge<1700&&(Q=$d(s));var qt=s.length,vt=[];for(u=0;u<qt;u++){var yn=ue(s[u]);vt.push(l.project(ue([yn.lat-Q.lat,yn.lng-Q.lng])))}for(u=0,f=0;u<qt-1;u++)f+=vt[u].distanceTo(vt[u+1])/2;if(f===0)z=vt[0];else for(u=0,w=0;u<qt-1;u++)if(T=vt[u],P=vt[u+1],g=T.distanceTo(P),w+=g,w>f){A=(w-f)/g,z=[P.x-A*(P.x-T.x),P.y-A*(P.y-T.y)];break}var Zt=l.unproject(H(z));return ue([Zt.lat+Q.lat,Zt.lng+Q.lng])}var AN={__proto__:null,simplify:Ry,pointToSegmentDistance:jy,closestPointOnSegment:IN,clipSegment:zy,_getEdgeIntersection:lu,_getBitCode:Ir,_sqClosestPointOnSegment:qo,isFlat:vn,_flat:Uy,polylineCenter:$y},Vd={project:function(s){return new O(s.lng,s.lat)},unproject:function(s){return new xe(s.y,s.x)},bounds:new oe([-180,-90],[180,90])},qd={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,u=this.R,f=s.lat*l,g=this.R_MINOR/u,w=Math.sqrt(1-g*g),T=w*Math.sin(f),P=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),w/2);return f=-u*Math.log(Math.max(P,1e-10)),new O(s.lng*l*u,f)},unproject:function(s){for(var l=180/Math.PI,u=this.R,f=this.R_MINOR/u,g=Math.sqrt(1-f*f),w=Math.exp(-s.y/u),T=Math.PI/2-2*Math.atan(w),P=0,A=.1,z;P<15&&Math.abs(A)>1e-7;P++)z=g*Math.sin(T),z=Math.pow((1-z)/(1+z),g/2),A=Math.PI/2-2*Math.atan(w*z)-T,T+=A;return new xe(T*l,s.x*l/u)}},DN={__proto__:null,LonLat:Vd,Mercator:qd,SphericalMercator:fs},ON=r({},zn,{code:"EPSG:3395",projection:qd,transformation:function(){var s=.5/(Math.PI*qd.R);return Me(s,.5,-s,.5)}()}),By=r({},zn,{code:"EPSG:4326",projection:Vd,transformation:Me(1/180,1,-1/180,.5)}),RN=r({},Mt,{projection:Vd,transformation:Me(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var u=l.lng-s.lng,f=l.lat-s.lat;return Math.sqrt(u*u+f*f)},infinite:!0});Mt.Earth=zn,Mt.EPSG3395=ON,Mt.EPSG3857=on,Mt.EPSG900913=_d,Mt.EPSG4326=By,Mt.Simple=RN;var bn=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,u=s.length;l<u;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,u=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),l=g.maxZoom===void 0?l:Math.max(l,g.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vs=bn.extend({initialize:function(s,l){k(this,l),this._layers={};var u,f;if(s)for(u=0,f=s.length;u<f;u++)this.addLayer(s[u])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),u,f;for(u in this._layers)f=this._layers[u],f[s]&&f[s].apply(f,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),jN=function(s,l){return new vs(s,l)},ri=vs.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),vs.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),vs.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Xe;for(var l in this._layers){var u=this._layers[l];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),FN=function(s,l){return new ri(s,l)},ys=ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(s,l){var u=this.options,f=u[l+"Size"];typeof f=="number"&&(f=[f,f]);var g=H(f),w=H(l==="shadow"&&u.shadowAnchor||u.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(u.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return te.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function zN(s){return new ys(s)}var Ho=ys.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ho.imagePath!="string"&&(Ho.imagePath=this._detectIconPath()),(this.options.imagePath||Ho.imagePath)+ys.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(u,f,g){var w=f.exec(u);return w&&w[g]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Te("div","leaflet-default-icon-path",document.body),l=Fo(s,"background-image")||Fo(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Vy=Bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ai(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,u=l._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=Tr(l._icon),T=u.getPixelBounds(),P=u.getPixelOrigin(),A=_e(T.min._subtract(P).add(g),T.max._subtract(P).subtract(g));if(!A.contains(w)){var z=H((Math.max(A.max.x,w.x)-A.max.x)/(T.max.x-A.max.x)-(Math.min(A.min.x,w.x)-A.min.x)/(T.min.x-A.min.x),(Math.max(A.max.y,w.y)-A.max.y)/(T.max.y-A.max.y)-(Math.min(A.min.y,w.y)-A.min.y)/(T.min.y-A.min.y)).multiplyBy(f);u.panBy(z,{animate:!1}),this._draggable._newPos._add(z),this._draggable._startPos._add(z),st(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=re(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=re(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,u=l._shadow,f=Tr(l._icon),g=l._map.layerPointToLatLng(f);u&&st(u,f),l._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),uu=bn.extend({options:{icon:new Ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ue(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ue(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),f=!1;u!==this._icon&&(this._icon&&this._removeIcon(),f=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),me(u,l),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(u,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(me(g,l),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&st(this._icon,s),this._shadow&&st(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Vy)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Vy(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&gn(this._icon,s),this._shadow&&gn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,u=l.iconSize?H(l.iconSize):H(0,0),f=l.iconAnchor?H(l.iconAnchor):H(0,0);s.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:u.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function UN(s,l){return new uu(s,l)}var Di=bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cu=Di.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ue(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ue(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Di.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,u=this._clickTolerance(),f=[s+u,l+u];this._pxBounds=new oe(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $N(s,l){return new cu(s,l)}var Hd=cu.extend({initialize:function(s,l,u){if(typeof l=="number"&&(l=r({},u,{radius:l})),k(this,l),this._latlng=ue(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Xe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Di.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,u=this._map,f=u.options.crs;if(f.distance===zn.distance){var g=Math.PI/180,w=this._mRadius/zn.R/g,T=u.project([l+w,s]),P=u.project([l-w,s]),A=T.add(P).divideBy(2),z=u.unproject(A).lat,Q=Math.acos((Math.cos(w*g)-Math.sin(l*g)*Math.sin(z*g))/(Math.cos(l*g)*Math.cos(z*g)))/g;(isNaN(Q)||Q===0)&&(Q=w/Math.cos(Math.PI/180*l)),this._point=A.subtract(u.getPixelOrigin()),this._radius=isNaN(Q)?0:A.x-u.project([z,s-Q]).x,this._radiusY=A.y-T.y}else{var se=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(se).x}this._updateBounds()}});function BN(s,l,u){return new Hd(s,l,u)}var si=Di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,u=null,f=qo,g,w,T=0,P=this._parts.length;T<P;T++)for(var A=this._parts[T],z=1,Q=A.length;z<Q;z++){g=A[z-1],w=A[z];var se=f(s,g,w,!0);se<l&&(l=se,u=f(s,g,w))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $y(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ue(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Xe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],u=vn(s),f=0,g=s.length;f<g;f++)u?(l[f]=ue(s[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(s[f]);return l},_project:function(){var s=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new O(s,s);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,u){var f=s[0]instanceof xe,g=s.length,w,T;if(f){for(T=[],w=0;w<g;w++)T[w]=this._map.latLngToLayerPoint(s[w]),u.extend(T[w]);l.push(T)}else for(w=0;w<g;w++)this._projectLatlngs(s[w],l,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,f,g,w,T,P,A;for(u=0,g=0,w=this._rings.length;u<w;u++)for(A=this._rings[u],f=0,T=A.length;f<T-1;f++)P=zy(A[f],A[f+1],s,f,!0),P&&(l[g]=l[g]||[],l[g].push(P[0]),(P[1]!==A[f+1]||f===T-2)&&(l[g].push(P[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,u=0,f=s.length;u<f;u++)s[u]=Ry(s[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var u,f,g,w,T,P,A=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,w=this._parts.length;u<w;u++)for(P=this._parts[u],f=0,T=P.length,g=T-1;f<T;g=f++)if(!(!l&&f===0)&&jy(s,P[g],P[f])<=A)return!0;return!1}});function VN(s,l){return new si(s,l)}si._flat=Uy;var _s=si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oy(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=si.prototype._convertLatLngs.call(this,s),u=l.length;return u>=2&&l[0]instanceof xe&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(s){si.prototype._setLatLngs.call(this,s),vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,u=new O(l,l);if(s=new oe(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=Dy(this._rings[f],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,u,f,g,w,T,P,A,z;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,A=this._parts.length;w<A;w++)for(u=this._parts[w],T=0,z=u.length,P=z-1;T<z;P=T++)f=u[T],g=u[P],f.y>s.y!=g.y>s.y&&s.x<(g.x-f.x)*(s.y-f.y)/(g.y-f.y)+f.x&&(l=!l);return l||si.prototype._containsPoint.call(this,s,!0)}});function qN(s,l){return new _s(s,l)}var oi=ri.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,u,f,g;if(l){for(u=0,f=l.length;u<f;u++)g=l[u],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var T=hu(s,w);return T?(T.feature=pu(s),T.defaultOptions=T.options,this.resetStyle(T),w.onEachFeature&&w.onEachFeature(s,T),this.addLayer(T)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function hu(s,l){var u=s.type==="Feature"?s.geometry:s,f=u?u.coordinates:null,g=[],w=l&&l.pointToLayer,T=l&&l.coordsToLatLng||Wd,P,A,z,Q;if(!f&&!u)return null;switch(u.type){case"Point":return P=T(f),qy(w,s,P,l);case"MultiPoint":for(z=0,Q=f.length;z<Q;z++)P=T(f[z]),g.push(qy(w,s,P,l));return new ri(g);case"LineString":case"MultiLineString":return A=du(f,u.type==="LineString"?0:1,T),new si(A,l);case"Polygon":case"MultiPolygon":return A=du(f,u.type==="Polygon"?1:2,T),new _s(A,l);case"GeometryCollection":for(z=0,Q=u.geometries.length;z<Q;z++){var se=hu({geometry:u.geometries[z],type:"Feature",properties:s.properties},l);se&&g.push(se)}return new ri(g);case"FeatureCollection":for(z=0,Q=u.features.length;z<Q;z++){var ge=hu(u.features[z],l);ge&&g.push(ge)}return new ri(g);default:throw new Error("Invalid GeoJSON object.")}}function qy(s,l,u,f){return s?s(l,u):new uu(u,f&&f.markersInheritOptions&&f)}function Wd(s){return new xe(s[1],s[0],s[2])}function du(s,l,u){for(var f=[],g=0,w=s.length,T;g<w;g++)T=l?du(s[g],l-1,u):(u||Wd)(s[g]),f.push(T);return f}function Kd(s,l){return s=ue(s),s.alt!==void 0?[y(s.lng,l),y(s.lat,l),y(s.alt,l)]:[y(s.lng,l),y(s.lat,l)]}function fu(s,l,u,f){for(var g=[],w=0,T=s.length;w<T;w++)g.push(l?fu(s[w],vn(s[w])?0:l-1,u,f):Kd(s[w],f));return!l&&u&&g.length>0&&g.push(g[0].slice()),g}function ws(s,l){return s.feature?r({},s.feature,{geometry:l}):pu(l)}function pu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Qd={toGeoJSON:function(s){return ws(this,{type:"Point",coordinates:Kd(this.getLatLng(),s)})}};uu.include(Qd),Hd.include(Qd),cu.include(Qd),si.include({toGeoJSON:function(s){var l=!vn(this._latlngs),u=fu(this._latlngs,l?1:0,!1,s);return ws(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),_s.include({toGeoJSON:function(s){var l=!vn(this._latlngs),u=l&&!vn(this._latlngs[0]),f=fu(this._latlngs,u?2:l?1:0,!0,s);return l||(f=[f]),ws(this,{type:(u?"Multi":"")+"Polygon",coordinates:f})}}),vs.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(s).geometry.coordinates)}),ws(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var u=l==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(s);if(u)f.push(w.geometry);else{var T=pu(w);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),u?ws(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Hy(s,l){return new oi(s,l)}var HN=Hy,mu=bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,u){this._url=s,this._bounds=Pe(l),k(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ms(this._image),this},bringToBack:function(){return this._map&&gs(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Pe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Te("img");if(me(l,"leaflet-image-layer"),this._zoomAnimated&&me(l,"leaflet-zoom-animated"),this.options.className&&me(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Cr(this._image,u,l)},_reset:function(){var s=this._image,l=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();st(s,l.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){gn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),WN=function(s,l,u){return new mu(s,l,u)},Wy=mu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Te("video");if(me(l,"leaflet-image-layer"),this._zoomAnimated&&me(l,"leaflet-zoom-animated"),this.options.className&&me(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=a(this.fire,this,"load"),s){for(var u=l.getElementsByTagName("source"),f=[],g=0;g<u.length;g++)f.push(u[g].src);this._url=u.length>0?f:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var T=Te("source");T.src=this._url[w],l.appendChild(T)}}});function KN(s,l,u){return new Wy(s,l,u)}var Ky=mu.extend({_initImage:function(){var s=this._image=this._url;me(s,"leaflet-image-layer"),this._zoomAnimated&&me(s,"leaflet-zoom-animated"),this.options.className&&me(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function QN(s,l,u){return new Ky(s,l,u)}var Vn=bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof xe||S(s))?(this._latlng=ue(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&gn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&gn(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(gn(this._container,0),this._removeTimeout=setTimeout(a(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ue(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ms(this._container),this},bringToBack:function(){return this._map&&gs(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof ri){l=null;var u=this._source._layers;for(var f in u)if(u[f]._map){l=u[f];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=H(this.options.offset),u=this._getAnchor();this._zoomAnimated?st(this._container,s.add(u)):l=l.add(s).add(u);var f=this._containerBottom=-l.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,u,f){var g=l;return g instanceof s||(g=new s(f).setContent(l)),u&&g.setLatLng(u),g}}),bn.include({_initOverlay:function(s,l,u,f){var g=u;return g instanceof s?(k(g,f),g._source=this):(g=l&&!f?l:new s(f,this),g.setContent(u)),g}});var gu=Vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Vn.prototype.openOn.call(this,s)},onAdd:function(s){Vn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Di||this._source.on("preclick",Nr))},onRemove:function(s){Vn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Di||this._source.off("preclick",Nr))},getEvents:function(){var s=Vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Te("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Te("div",s+"-content-wrapper",l);if(this._contentNode=Te("div",s+"-content",u),Bo(l),jd(this._contentNode),fe(l,"contextmenu",Nr),this._tipContainer=Te("div",s+"-tip-container",l),this._tip=Te("div",s+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Te("a",s+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',fe(f,"click",function(g){Et(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var f=s.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(l.height=g+"px",me(s,w)):nt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();st(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Fo(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,f=this._containerWidth,g=new O(this._containerLeft,-u-this._containerBottom);g._add(Tr(this._container));var w=s.layerPointToContainerPoint(g),T=H(this.options.autoPanPadding),P=H(this.options.autoPanPaddingTopLeft||T),A=H(this.options.autoPanPaddingBottomRight||T),z=s.getSize(),Q=0,se=0;w.x+f+A.x>z.x&&(Q=w.x+f-z.x+A.x),w.x-Q-P.x<0&&(Q=w.x-P.x),w.y+u+A.y>z.y&&(se=w.y+u-z.y+A.y),w.y-se-P.y<0&&(se=w.y-P.y),(Q||se)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Q,se]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),GN=function(s,l){return new gu(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,u){return this._initOverlay(gu,s,l,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),bn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(gu,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ri||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){br(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var vu=Vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Vn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Vn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Vn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,u,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(s),P=this.options.direction,A=g.offsetWidth,z=g.offsetHeight,Q=H(this.options.offset),se=this._getAnchor();P==="top"?(l=A/2,u=z):P==="bottom"?(l=A/2,u=0):P==="center"?(l=A/2,u=z/2):P==="right"?(l=0,u=z/2):P==="left"?(l=A,u=z/2):T.x<w.x?(P="right",l=0,u=z/2):(P="left",l=A+(Q.x+se.x)*2,u=z/2),s=s.subtract(H(l,u,!0)).add(Q).add(se),nt(g,"leaflet-tooltip-right"),nt(g,"leaflet-tooltip-left"),nt(g,"leaflet-tooltip-top"),nt(g,"leaflet-tooltip-bottom"),me(g,"leaflet-tooltip-"+P),st(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&gn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ZN=function(s,l){return new vu(s,l)};Se.include({openTooltip:function(s,l,u){return this._initOverlay(vu,s,l,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),bn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vu,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ri||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(fe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),fe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,u,f;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),f=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var Qy=ys.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(iu(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var f=H(u.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function YN(s){return new Qy(s)}ys.Default=Ho;var Wo=bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:te.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),We(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ms(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof O?s:new O(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,u=-s(-1/0,1/0),f=0,g=l.length,w;f<g;f++)w=l[f].style.zIndex,l[f]!==this._container&&w&&(u=s(u,+w));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!te.ielt9){gn(this._container,this.options.opacity);var s=+new Date,l=!1,u=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(s-g.loaded)/200);gn(g.el,w),w<1?l=!0:(g.active?u=!0:this._onOpaqueTile(g),g.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=l-Math.abs(s-u),this._onUpdateLevel(u)):(We(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var f=this._levels[s],g=this._map;return f||(f=this._levels[s]={},f.el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),f.zoom=s,this._setZoomTransform(f,g.getCenter(),g.getZoom()),v(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)We(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,u,f){var g=Math.floor(s/2),w=Math.floor(l/2),T=u-1,P=new O(+g,+w);P.z=+T;var A=this._tileCoordsToKey(P),z=this._tiles[A];return z&&z.active?(z.retain=!0,!0):(z&&z.loaded&&(z.retain=!0),T>f?this._retainParent(g,w,T,f):!1)},_retainChildren:function(s,l,u,f){for(var g=2*s;g<2*s+2;g++)for(var w=2*l;w<2*l+2;w++){var T=new O(g,w);T.z=u+1;var P=this._tileCoordsToKey(T),A=this._tiles[P];if(A&&A.active){A.retain=!0;continue}else A&&A.loaded&&(A.retain=!0);u+1<f&&this._retainChildren(g,w,u+1,f)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,u,f){var g=Math.round(l);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,l)},_setZoomTransform:function(s,l,u){var f=this._map.getZoomScale(u,s.zoom),g=s.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,u)).round();te.any3d?Cr(s.el,g,f):st(s.el,g)},_resetGrid:function(){var s=this._map,l=s.options.crs,u=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],f).x/u.x),Math.ceil(s.project([0,l.wrapLng[1]],f).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],f).y/u.x),Math.ceil(s.project([l.wrapLat[1],0],f).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(u,this._tileZoom),g=l.project(s,this._tileZoom).floor(),w=l.getSize().divideBy(f*2);return new oe(g.subtract(w),g.add(w))},_update:function(s){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(f),w=g.getCenter(),T=[],P=this.options.keepBuffer,A=new oe(g.getBottomLeft().subtract([P,-P]),g.getTopRight().add([P,-P]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var z in this._tiles){var Q=this._tiles[z].coords;(Q.z!==this._tileZoom||!A.contains(new O(Q.x,Q.y)))&&(this._tiles[z].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var se=g.min.y;se<=g.max.y;se++)for(var ge=g.min.x;ge<=g.max.x;ge++){var qt=new O(ge,se);if(qt.z=this._tileZoom,!!this._isValidTile(qt)){var vt=this._tiles[this._tileCoordsToKey(qt)];vt?vt.current=!0:T.push(qt)}}if(T.sort(function(Zt,Ss){return Zt.distanceTo(w)-Ss.distanceTo(w)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(ge=0;ge<T.length;ge++)this._addTile(T[ge],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!l.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(s);return Pe(this.options.bounds).overlaps(f)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,u=this.getTileSize(),f=s.scaleBy(u),g=f.add(u),w=l.unproject(f,s.z),T=l.unproject(g,s.z);return[w,T]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),u=new Xe(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),u=new O(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(s){var l=this._tiles[s];l&&(We(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){me(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=v,s.onmousemove=v,te.ielt9&&this.options.opacity<1&&gn(s,this.options.opacity)},_addTile:function(s,l){var u=this._getTilePos(s),f=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&re(a(this._tileReady,this,s,null,g)),st(g,u),this._tiles[f]={el:g,coords:s,current:!0},l.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:s});var f=this._tileCoordsToKey(s);u=this._tiles[f],u&&(u.loaded=+new Date,this._map._fadeAnimated?(gn(u.el,0),B(this._fadeFrame),this._fadeFrame=re(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(me(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),te.ielt9||!this._map._fadeAnimated?re(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new O(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new oe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function XN(s){return new Wo(s)}var xs=Wo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&te.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var u=document.createElement("img");return fe(u,"load",a(this._tileOnLoad,this,l,u)),fe(u,"error",a(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var l={r:te.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=u),l["-y"]=u}return _(this._url,r(l,this.options))},_tileOnLoad:function(s,l){te.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,u){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),s(u,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,f=this.options.zoomOffset;return u&&(s=l-s),s+f},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=v,l.onerror=v,!l.complete)){l.src=M;var u=this._tiles[s].coords;We(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",M),Wo.prototype._removeTile.call(this,s)},_tileReady:function(s,l,u){if(!(!this._map||u&&u.getAttribute("src")===M))return Wo.prototype._tileReady.call(this,s,l,u)}});function Gy(s,l){return new xs(s,l)}var Zy=xs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var u=r({},this.defaultWmsParams);for(var f in l)f in this.options||(u[f]=l[f]);l=k(this,l);var g=l.detectRetina&&te.retina?2:1,w=this.getTileSize();u.width=w.x*g,u.height=w.y*g,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,xs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),u=this._crs,f=_e(u.project(l[0]),u.project(l[1])),g=f.min,w=f.max,T=(this._wmsVersion>=1.3&&this._crs===By?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),P=xs.prototype.getTileUrl.call(this,s);return P+N(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function JN(s,l){return new Zy(s,l)}xs.WMS=Zy,Gy.wms=JN;var ai=bn.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var u=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,l),w=f.multiplyBy(-u).add(g).subtract(this._map._getNewPixelOrigin(s,l));te.any3d?Cr(this._container,w,u):st(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new oe(u,u.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Yy=ai.extend({options:{tolerance:0},getEvents:function(){var s=ai.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");fe(s,"mousemove",this._onMouseMove,this),fe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,We(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var s=this._bounds,l=this._container,u=s.getSize(),f=te.retina?2:1;st(l,s.min),l.width=f*u.x,l.height=f*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",te.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,u=l.next,f=l.prev;u?u.prev=f:this._drawLast=f,f?f.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),u=[],f,g;for(g=0;g<l.length;g++){if(f=Number(l[g]),isNaN(f))return;u.push(f)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||re(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)s=f.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var u,f,g,w,T=s._parts,P=T.length,A=this._ctx;if(P){for(A.beginPath(),u=0;u<P;u++){for(f=0,g=T[u].length;f<g;f++)w=T[u][f],A[f?"lineTo":"moveTo"](w.x,w.y);l&&A.closePath()}this._fillStroke(A,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,u=this._ctx,f=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||f)/f;g!==1&&(u.save(),u.scale(1,g)),u.beginPath(),u.arc(l.x,l.y/g,f,0,Math.PI*2,!1),g!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,l){var u=l.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),u,f,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(f=u);this._fireEvent(f?[f]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(nt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var u,f,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(l)&&(f=u);f!==this._hoveredLayer&&(this._handleMouseOut(s),f&&(me(this._container,"leaflet-interactive"),this._fireEvent([f],s,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,u){this._map._fireDOMEvent(l,u||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var u=l.next,f=l.prev;if(u)u.prev=f;else return;f?f.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var u=l.next,f=l.prev;if(f)f.next=u;else return;u?u.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Xy(s){return te.canvas?new Yy(s):null}var Ko=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),eb={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ai.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Ko("shape");me(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Ko("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;We(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,u=s._fill,f=s.options,g=s._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(l||(l=s._stroke=Ko("stroke")),g.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=S(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(g.removeChild(l),s._stroke=null),f.fill?(u||(u=s._fill=Ko("fill")),g.appendChild(u),u.color=f.fillColor||f.color,u.opacity=f.fillOpacity):u&&(g.removeChild(u),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),u=Math.round(s._radius),f=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+f+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){ms(s._container)},_bringToBack:function(s){gs(s._container)}},yu=te.vml?Ko:Jl,Qo=ai.extend({_initContainer:function(){this._container=yu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var s=this._bounds,l=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),st(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=yu("path");s.options.className&&me(l,s.options.className),s.options.interactive&&me(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){We(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,u=s.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,eu(s._parts,l))},_updateCircle:function(s){var l=s._point,u=Math.max(Math.round(s._radius),1),f=Math.max(Math.round(s._radiusY),1)||u,g="a"+u+","+f+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(l.x-u)+","+l.y+g+u*2+",0 "+g+-u*2+",0 ";this._setPath(s,w)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){ms(s._path)},_bringToBack:function(s){gs(s._path)}});te.vml&&Qo.include(eb);function Jy(s){return te.svg||te.vml?new Qo(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Xy(s)||Jy(s)}});var e_=_s.extend({initialize:function(s,l){_s.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Pe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function tb(s,l){return new e_(s,l)}Qo.create=yu,Qo.pointsToPath=eu,oi.geometryToLayer=hu,oi.coordsToLatLng=Wd,oi.coordsToLatLngs=du,oi.latLngToCoords=Kd,oi.latLngsToCoords=fu,oi.getFeature=ws,oi.asFeature=pu,Se.mergeOptions({boxZoom:!0});var t_=Bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zo(),Id(),this._startPoint=this._map.mouseEventToContainerPoint(s),fe(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new oe(this._point,this._startPoint),u=l.getSize();st(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(We(this._box),nt(this._container,"leaflet-crosshair")),Uo(),Pd(),Fe(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",t_),Se.mergeOptions({doubleClickZoom:!0});var n_=Bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,u=l.getZoom(),f=l.options.zoomDelta,g=s.originalEvent.shiftKey?u-f:u+f;l.options.doubleClickZoom==="center"?l.setZoom(g):l.setZoomAround(s.containerPoint,g)}});Se.addInitHook("addHandler","doubleClickZoom",n_),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var i_=Bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ai(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nt(this._map._container,"leaflet-grab"),nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Pe(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),u=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-l+u)%s+l-u,w=(f+l+u)%s-l-u,T=Math.abs(g+u)<Math.abs(w+u)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(s){var l=this._map,u=l.options,f=!u.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),f)l.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,P=g.multiplyBy(T/w),A=P.distanceTo([0,0]),z=Math.min(u.inertiaMaxSpeed,A),Q=P.multiplyBy(z/A),se=z/(u.inertiaDeceleration*T),ge=Q.multiplyBy(-se/2).round();!ge.x&&!ge.y?l.fire("moveend"):(ge=l._limitOffset(ge,l.options.maxBounds),re(function(){l.panBy(ge,{duration:se,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",i_),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var r_=Bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),fe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,u=s.scrollTop||l.scrollTop,f=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},u=this.keyCodes,f,g;for(f=0,g=u.left.length;f<g;f++)l[u.left[f]]=[-1*s,0];for(f=0,g=u.right.length;f<g;f++)l[u.right[f]]=[s,0];for(f=0,g=u.down.length;f<g;f++)l[u.down[f]]=[0,s];for(f=0,g=u.up.length;f<g;f++)l[u.up[f]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},u=this.keyCodes,f,g;for(f=0,g=u.zoomIn.length;f<g;f++)l[u.zoomIn[f]]=s;for(f=0,g=u.zoomOut.length;f<g;f++)l[u.zoomOut[f]]=-s},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,u=this._map,f;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(f=this._panKeys[l],s.shiftKey&&(f=H(f).multiplyBy(3)),u.options.maxBounds&&(f=u._limitOffset(H(f),u.options.maxBounds)),u.options.worldCopyJump){var g=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(f)));u.panTo(g)}else u.panBy(f)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;br(s)}}});Se.addInitHook("addHandler","keyboard",r_),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var s_=Bn.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Iy(s),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var f=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),f),br(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=u?Math.ceil(g/u)*u:g,T=s._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,T&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+T):s.setZoomAround(this._lastMousePos,l+T))}});Se.addInitHook("addHandler","scrollWheelZoom",s_);var nb=600;Se.mergeOptions({tapHold:te.touchNative&&te.safari&&te.mobile,tapTolerance:15});var o_=Bn.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new O(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",Et),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),nb),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Fe(document,"touchend",Et),Fe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new O(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});Se.addInitHook("addHandler","tapHold",o_),Se.mergeOptions({touchZoom:te.touch,bounceAtZoomLimits:!0});var a_=Bn.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nt(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(s.touches[0]),f=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(f)._divideBy(2))),this._startDist=u.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),Et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(s.touches[0]),f=l.mouseEventToContainerPoint(s.touches[1]),g=u.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(g,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&g<1||this._zoom>l.getMaxZoom()&&g>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=u._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var T=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=re(T,this,!0),Et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",a_),Se.BoxZoom=t_,Se.DoubleClickZoom=n_,Se.Drag=i_,Se.Keyboard=r_,Se.ScrollWheelZoom=s_,Se.TapHold=o_,Se.TouchZoom=a_,n.Bounds=oe,n.Browser=te,n.CRS=Mt,n.Canvas=Yy,n.Circle=Hd,n.CircleMarker=cu,n.Class=ft,n.Control=Nn,n.DivIcon=Qy,n.DivOverlay=Vn,n.DomEvent=wN,n.DomUtil=yN,n.Draggable=Ai,n.Evented=W,n.FeatureGroup=ri,n.GeoJSON=oi,n.GridLayer=Wo,n.Handler=Bn,n.Icon=ys,n.ImageOverlay=mu,n.LatLng=xe,n.LatLngBounds=Xe,n.Layer=bn,n.LayerGroup=vs,n.LineUtil=AN,n.Map=Se,n.Marker=uu,n.Mixin=NN,n.Path=Di,n.Point=O,n.PolyUtil=bN,n.Polygon=_s,n.Polyline=si,n.Popup=gu,n.PosAnimation=Py,n.Projection=DN,n.Rectangle=e_,n.Renderer=ai,n.SVG=Qo,n.SVGOverlay=Ky,n.TileLayer=xs,n.Tooltip=vu,n.Transformation=U,n.Util=Ie,n.VideoOverlay=Wy,n.bind=a,n.bounds=_e,n.canvas=Xy,n.circle=BN,n.circleMarker=$N,n.control=Vo,n.divIcon=YN,n.extend=r,n.featureGroup=FN,n.geoJSON=Hy,n.geoJson=HN,n.gridLayer=XN,n.icon=zN,n.imageOverlay=WN,n.latLng=ue,n.latLngBounds=Pe,n.layerGroup=jN,n.map=xN,n.marker=UN,n.point=H,n.polygon=qN,n.polyline=VN,n.popup=GN,n.rectangle=tb,n.setOptions=k,n.stamp=h,n.svg=Jy,n.svgOverlay=QN,n.tileLayer=Gy,n.tooltip=ZN,n.transformation=Me,n.version=i,n.videoOverlay=KN;var ib=window.L;n.noConflict=function(){return window.L=ib,this},window.L=n})})(Dm,Dm.exports);var Yl=Dm.exports;const yd=Cx(Yl);function ny(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function iy(t,e){return e==null?function(i,r){const o=b.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=b.useRef();o.current||(o.current=t(i,r));const a=b.useRef(i),{instance:c}=o.current;return b.useEffect(function(){a.current!==i&&(e(c,i,a.current),a.current=i)},[c,i,r]),o}}function B3(t,e){b.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function $T(t){return function(n){const i=ey(),r=t(ty(n,i),i);return jT(i.map,n.attribution),UT(r.current,n.eventHandlers),B3(r.current,i),r}}function V3(t,e){const n=iy(t,e),i=$T(n);return F3(i)}function q3(t,e){const n=iy(t),i=$3(n,e);return z3(i)}function H3(t,e){const n=iy(t,e),i=$T(n);return U3(i)}function W3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function BT(){return ey().map}function K3(t){const e=BT();return b.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Om(){return Om=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Om.apply(this,arguments)}function Q3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:c,whenReady:h,zoom:p,...m},v){const[y]=b.useState({className:r,id:o,style:c}),[x,C]=b.useState(null);b.useImperativeHandle(v,()=>(x==null?void 0:x.map)??null,[x]);const k=b.useCallback(E=>{if(E!==null&&x===null){const _=new Yl.Map(E,m);n!=null&&p!=null?_.setView(n,p):t!=null&&_.fitBounds(t,e),h!=null&&_.whenReady(h),C(R3(_))}},[]);b.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const N=x?io.createElement(zT,{value:x},i):a??null;return io.createElement("div",Om({},y,{ref:k}),N)}const G3=b.forwardRef(Q3),Gf=V3(function({position:e,...n},i){const r=new Yl.Marker(e,n);return ny(r,j3(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Zf=q3(function(e,n){const i=new Yl.Popup(e,n.overlayContainer);return ny(i,n)},function(e,n,{position:i},r){b.useEffect(function(){const{instance:a}=e;function c(p){p.popup===a&&(a.update(),r(!0))}function h(p){p.popup===a&&r(!1)}return n.map.on({popupopen:c,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:c,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),Z3=H3(function({url:e,...n},i){const r=new Yl.TileLayer(e,ty(n,i));return ny(r,i)},function(e,n,i){W3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete yd.Icon.Default.prototype._getIconUrl;yd.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const kx=new yd.DivIcon({html:'<div style="background: linear-gradient(135deg, #FF6B9D, #C96DD8); width: 32px; height: 32px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 15px rgba(255,107,157,0.4); border: 2px solid white;"><span style="transform: rotate(45deg); font-size: 14px;"></span></div>',className:"custom-heart-marker",iconSize:[32,32],iconAnchor:[16,32]}),Y3=new yd.DivIcon({html:'<div style="background: linear-gradient(135deg, #3B82F6, #06B6D4); width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 12px rgba(59,130,246,0.4);"></div>',className:"custom-location-marker",iconSize:[24,24],iconAnchor:[12,12]});function X3({center:t}){const e=BT();return b.useEffect(()=>{t&&e.setView(t,14)},[t,e]),null}function J3({onMapClick:t}){return K3({click:e=>t(e.latlng)}),null}function ez(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(null),[o,a]=b.useState(!1),[c,h]=b.useState(!1),[p,m]=b.useState(null),[v,y]=b.useState({title:"",description:"",date:je(new Date,"yyyy-MM-dd")}),[x,C]=b.useState("memories"),[k,N]=b.useState(null);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:E=[]}=De({queryKey:["locations"],queryFn:()=>$.entities.LocationShare.list("-last_updated"),refetchInterval:15e3}),{data:_=[]}=De({queryKey:["memoryPins"],queryFn:()=>$.entities.MemoryPin.list("-created_date")}),{data:S=[]}=De({queryKey:["photosWithLocation"],queryFn:async()=>(await $.entities.Photo.list("-created_date")).filter(Ie=>Ie.latitude&&Ie.longitude)}),I=we({mutationFn:async B=>{const Ie=E.find(ft=>ft.user_name===(e==null?void 0:e.full_name));return Ie?$.entities.LocationShare.update(Ie.id,{latitude:B.latitude,longitude:B.longitude,is_active:!0,last_updated:new Date().toISOString()}):$.entities.LocationShare.create({user_name:(e==null?void 0:e.full_name)||"Anonymous",latitude:B.latitude,longitude:B.longitude,is_active:!0,last_updated:new Date().toISOString()})},onSuccess:()=>{t.invalidateQueries({queryKey:["locations"]}),a(!1)}}),M=we({mutationFn:B=>$.entities.MemoryPin.create(B),onSuccess:()=>{t.invalidateQueries({queryKey:["memoryPins"]}),h(!1),y({title:"",description:"",date:je(new Date,"yyyy-MM-dd")}),m(null)}}),D=we({mutationFn:B=>$.entities.MemoryPin.delete(B),onSuccess:()=>{t.invalidateQueries({queryKey:["memoryPins"]}),N(null)}}),R=()=>{navigator.geolocation&&(a(!0),navigator.geolocation.getCurrentPosition(B=>{const Ie={latitude:B.coords.latitude,longitude:B.coords.longitude};r([Ie.latitude,Ie.longitude]),I.mutate(Ie)},()=>a(!1)))},j=B=>{x==="memories"&&(m(B),h(!0))},J=()=>{!p||!v.title||M.mutate({...v,latitude:p.lat,longitude:p.lng})},X=E.filter(B=>{if(!B.is_active)return!1;const Ie=new Date(B.last_updated);return(new Date-Ie)/1e3/60<5}),re=_[0]?[_[0].latitude,_[0].longitude]:X[0]?[X[0].latitude,X[0].longitude]:[40.7128,-74.006];return d.jsxs("div",{className:"h-screen flex flex-col pb-20",children:[d.jsxs("div",{className:"p-4 space-y-3 bg-gradient-to-b from-white to-transparent",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text pt-2",children:"Our Map"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Y,{variant:x==="memories"?"default":"outline",onClick:()=>C("memories"),className:`flex-1 rounded-xl h-10 ${x==="memories"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"border-gray-200"}`,children:[d.jsx(dt,{className:"w-4 h-4 mr-2"}),"Memories"]}),d.jsxs(Y,{variant:x==="live"?"default":"outline",onClick:()=>C("live"),className:`flex-1 rounded-xl h-10 ${x==="live"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"border-gray-200"}`,children:[d.jsx(mx,{className:"w-4 h-4 mr-2"}),"Live"]})]}),x==="live"&&d.jsx(Y,{onClick:R,disabled:o,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl h-11",children:o?d.jsxs(d.Fragment,{children:[d.jsx(ni,{className:"w-5 h-5 mr-2 animate-spin"})," Updating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(mx,{className:"w-5 h-5 mr-2"})," Share My Location"]})}),x==="memories"&&d.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Tap anywhere on the map to pin a memory "})]}),x==="memories"&&_.length>0&&d.jsx("div",{className:"px-4 pb-3",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:_.map(B=>d.jsxs("button",{onClick:()=>{N(B),r([B.latitude,B.longitude])},className:"glass-card rounded-xl p-3 min-w-[140px] flex-shrink-0 text-left hover:shadow-md smooth-transition",children:[d.jsx("p",{className:"font-semibold text-gray-800 text-sm truncate",children:B.title}),d.jsx("p",{className:"text-gray-400 text-xs mt-1",children:B.date?je(new Date(B.date),"MMM d, yyyy"):""})]},B.id))})}),x==="live"&&X.length>0&&d.jsx("div",{className:"px-4 pb-3",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:X.map(B=>d.jsxs("button",{onClick:()=>r([B.latitude,B.longitude]),className:"glass-card rounded-xl p-3 min-w-[140px] flex-shrink-0 text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),d.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:B.user_name})]}),d.jsx("p",{className:"text-gray-400 text-xs mt-1",children:B.last_updated?new Date(B.last_updated).toLocaleTimeString():""})]},B.id))})}),d.jsxs("div",{className:"flex-1 relative rounded-t-3xl overflow-hidden mx-2 shadow-lg",children:[d.jsxs(G3,{center:re,zoom:13,style:{height:"100%",width:"100%"},className:"z-0 rounded-t-3xl",children:[d.jsx(Z3,{attribution:" OpenStreetMap",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),d.jsx(X3,{center:i}),x==="memories"&&d.jsx(J3,{onMapClick:j}),x==="memories"&&_.map(B=>d.jsx(Gf,{position:[B.latitude,B.longitude],icon:kx,children:d.jsx(Zf,{className:"custom-popup",children:d.jsxs("div",{className:"text-center p-1 min-w-[150px]",children:[B.photo_url&&d.jsx("img",{src:B.photo_url,alt:"",className:"w-full h-24 object-cover rounded-lg mb-2"}),d.jsx("p",{className:"font-bold text-gray-800",children:B.title}),B.description&&d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.description}),B.date&&d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:je(new Date(B.date),"MMM d, yyyy")}),d.jsx("button",{onClick:()=>D.mutate(B.id),className:"mt-2 text-red-500 text-xs hover:underline",children:"Remove"})]})})},B.id)),x==="memories"&&S.map(B=>d.jsx(Gf,{position:[B.latitude,B.longitude],icon:kx,children:d.jsx(Zf,{children:d.jsxs("div",{className:"text-center p-1",children:[d.jsx("img",{src:B.url,alt:"",className:"w-28 h-28 object-cover rounded-lg mb-2"}),d.jsx("p",{className:"text-sm text-gray-700",children:B.caption||"Photo Memory"})]})})},B.id)),x==="live"&&X.map(B=>d.jsx(Gf,{position:[B.latitude,B.longitude],icon:Y3,children:d.jsx(Zf,{children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:B.user_name}),d.jsx("p",{className:"text-xs text-gray-500",children:B.last_updated?new Date(B.last_updated).toLocaleString():""})]})})},B.id))]}),x==="memories"&&d.jsx("button",{onClick:()=>{i&&(m({lat:i[0],lng:i[1]}),h(!0))},className:"absolute bottom-4 right-4 w-14 h-14 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg flex items-center justify-center z-[1000]",children:d.jsx(gr,{className:"w-6 h-6"})})]}),d.jsx(bi,{open:c,onOpenChange:h,children:d.jsxs(Ii,{className:"glass-card max-w-sm",children:[d.jsx(_l,{children:d.jsxs(wl,{className:"gradient-text text-xl flex items-center gap-2",children:[d.jsx(vT,{className:"w-5 h-5"})," Pin a Memory"]})}),d.jsxs("div",{className:"space-y-3 pt-2",children:[d.jsx(it,{placeholder:"What happened here?",value:v.title,onChange:B=>y({...v,title:B.target.value}),className:"rounded-xl h-11"}),d.jsx(vd,{placeholder:"Tell the story...",value:v.description,onChange:B=>y({...v,description:B.target.value}),className:"rounded-xl min-h-[80px]"}),d.jsx(it,{type:"date",value:v.date,onChange:B=>y({...v,date:B.target.value}),className:"rounded-xl h-11"}),d.jsxs(Y,{onClick:J,disabled:!v.title,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",children:[d.jsx(dt,{className:"w-5 h-5 mr-2"})," Save Memory"]})]})]})})]})}function tz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState("");b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:o=[]}=De({queryKey:["notes"],queryFn:()=>$.entities.Note.list("-created_date")}),a=we({mutationFn:m=>$.entities.Note.create(m),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),r("")}}),c=we({mutationFn:({id:m,isFavorite:v})=>$.entities.Note.update(m,{is_favorite:!v}),onSuccess:()=>t.invalidateQueries({queryKey:["notes"]})}),h=we({mutationFn:m=>$.entities.Note.delete(m),onSuccess:()=>t.invalidateQueries({queryKey:["notes"]})}),p=m=>{m.preventDefault(),i.trim()&&a.mutate({content:i,author_name:(e==null?void 0:e.full_name)||"Anonymous"})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("form",{onSubmit:p,className:"glass-card rounded-2xl p-4 flex gap-3",children:[d.jsx(it,{value:i,onChange:m=>r(m.target.value),placeholder:"Write a love note...",className:"flex-1 rounded-xl"}),d.jsx(Y,{type:"submit",disabled:!i.trim()||a.isPending,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-full w-11 h-11 p-0",children:d.jsx(wT,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-3",children:[o.map(m=>d.jsx("div",{className:"glass-card rounded-2xl p-4 hover-lift animate-slide-up",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-gray-800 leading-relaxed mb-2",children:m.content}),d.jsxs("p",{className:"text-gray-400 text-xs",children:[m.author_name,"  ",je(new Date(m.created_date),"MMM d, h:mm a")]})]}),d.jsxs("div",{className:"flex gap-1 ml-3",children:[d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>c.mutate({id:m.id,isFavorite:m.is_favorite}),className:"rounded-full w-8 h-8",children:d.jsx(dt,{className:"w-4 h-4",fill:m.is_favorite?"#FF6B9D":"none",stroke:"#FF6B9D"})}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>h.mutate(m.id),className:"rounded-full text-red-500 hover:bg-red-50 w-8 h-8",children:d.jsx(Gl,{className:"w-4 h-4"})})]})]})},m.id)),o.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(rs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No notes yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Send a love note!"})]})]})]})}function nz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState(null),[c,h]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:p=[]}=De({queryKey:["photos"],queryFn:()=>$.entities.Photo.list("-created_date")}),m=we({mutationFn:async({file:N})=>{const{file_url:E}=await $.integrations.Core.UploadFile({file:N});return $.entities.Photo.create({url:E,uploaded_by:(e==null?void 0:e.full_name)||"Anonymous"})},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),r(!1)}}),v=we({mutationFn:({id:N,caption:E})=>$.entities.Photo.update(N,{caption:E}),onSuccess:()=>t.invalidateQueries({queryKey:["photos"]})}),y=we({mutationFn:({id:N,isFavorite:E})=>$.entities.Photo.update(N,{is_favorite:!E}),onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),o&&a(N=>({...N,is_favorite:!N.is_favorite}))}}),x=we({mutationFn:N=>$.entities.Photo.delete(N),onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),a(null)}}),C=async N=>{h(!0);const E=await $.integrations.Core.InvokeLLM({prompt:"Describe this couple's photo in a romantic, heartfelt way. Keep it short (2-3 sentences).",file_urls:[N.url],response_json_schema:{type:"object",properties:{description:{type:"string"}}}});await $.entities.Photo.update(N.id,{ai_description:E.description}),t.invalidateQueries({queryKey:["photos"]}),a({...N,ai_description:E.description}),h(!1)},k=async N=>{var _;const E=(_=N.target.files)==null?void 0:_[0];E&&(r(!0),m.mutate({file:E}),N.target.value="")};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"glass-card rounded-2xl p-5 flex flex-col items-center justify-center cursor-pointer hover-lift smooth-transition border-2 border-dashed border-pink-200 hover:border-pink-400",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:k,disabled:i,className:"hidden"}),i?d.jsx(ni,{className:"w-10 h-10 text-pink-500 animate-spin mb-2"}):d.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center mb-2",children:d.jsx(Lm,{className:"w-6 h-6 text-white"})}),d.jsx("p",{className:"font-semibold text-gray-700",children:i?"Uploading...":"Upload Photo"}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Add to your memories"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map((N,E)=>d.jsx("div",{className:"animate-slide-up cursor-pointer",style:{transform:`rotate(${E%2===0?-2:2}deg)`,animationDelay:`${E*.05}s`},onClick:()=>a(N),children:d.jsxs("div",{className:"bg-white p-2 pb-12 rounded-sm shadow-lg hover:shadow-xl hover:scale-105 hover:rotate-0 smooth-transition relative",children:[d.jsx("img",{src:N.url,alt:N.caption||"Photo",className:"w-full aspect-square object-cover"}),N.is_favorite&&d.jsx("div",{className:"absolute top-4 right-4 bg-pink-500 rounded-full p-1.5 shadow-md",children:d.jsx(dt,{className:"w-3 h-3 text-white",fill:"white"})}),d.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:d.jsx("input",{type:"text",placeholder:"Add caption...",defaultValue:N.caption||"",onClick:_=>_.stopPropagation(),onBlur:_=>{_.target.value!==N.caption&&v.mutate({id:N.id,caption:_.target.value})},className:"w-full text-gray-600 bg-transparent border-none outline-none placeholder:text-gray-300 text-center",style:{fontFamily:"Caveat, cursive",fontSize:"16px"}})})]})},N.id))}),p.length===0&&!i&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Lm,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No photos yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Upload your first memory!"})]}),d.jsx(bi,{open:!!o,onOpenChange:()=>a(null),children:d.jsx(Ii,{className:"max-w-md p-0 overflow-hidden bg-white rounded-2xl",children:o&&d.jsxs("div",{children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:o.url,alt:"",className:"w-full max-h-[50vh] object-cover"}),d.jsx("button",{onClick:()=>a(null),className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-black/50 flex items-center justify-center text-white hover:bg-black/70 smooth-transition",children:d.jsx(vr,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"p-5 space-y-4",children:[o.caption&&d.jsxs("p",{className:"text-gray-700 text-lg text-center",style:{fontFamily:"Caveat, cursive"},children:['"',o.caption,'"']}),d.jsxs("p",{className:"text-gray-400 text-sm text-center",children:[o.uploaded_by,"  ",je(new Date(o.created_date),"MMM d, yyyy")]}),o.ai_description?d.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-4 text-white",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(ii,{className:"w-4 h-4"}),d.jsx("span",{className:"font-semibold text-sm",children:"AI Memory"})]}),d.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:o.ai_description})]}):d.jsx(Y,{onClick:()=>C(o),disabled:c,className:"w-full rounded-xl h-11 bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600",children:c?d.jsxs(d.Fragment,{children:[d.jsx(ni,{className:"w-4 h-4 mr-2 animate-spin"})," Generating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(ii,{className:"w-4 h-4 mr-2"})," Generate AI Memory"]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[d.jsxs(Y,{onClick:()=>y.mutate({id:o.id,isFavorite:o.is_favorite}),className:`rounded-xl h-12 font-medium ${o.is_favorite?"bg-pink-500 hover:bg-pink-600 text-white":"bg-pink-50 hover:bg-pink-100 text-pink-600 border border-pink-200"}`,children:[d.jsx(dt,{className:"w-5 h-5 mr-2",fill:o.is_favorite?"white":"none"}),o.is_favorite?"Favorited":"Favorite"]}),d.jsxs(Y,{onClick:()=>x.mutate(o.id),className:"rounded-xl h-12 font-medium bg-red-50 hover:bg-red-100 text-red-500 border border-red-200",children:[d.jsx(Gl,{className:"w-5 h-5 mr-2"}),"Delete"]})]})]})]})})})]})}function iz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:o=[]}=De({queryKey:["videos"],queryFn:()=>$.entities.Video.list("-created_date")}),a=we({mutationFn:async p=>{const{file_url:m}=await $.integrations.Core.UploadFile({file:p});return $.entities.Video.create({url:m,uploaded_by:(e==null?void 0:e.full_name)||"Anonymous"})},onSuccess:()=>{t.invalidateQueries({queryKey:["videos"]}),r(!1)}}),c=we({mutationFn:p=>$.entities.Video.delete(p),onSuccess:()=>t.invalidateQueries({queryKey:["videos"]})}),h=async p=>{var v;const m=(v=p.target.files)==null?void 0:v[0];m&&(r(!0),a.mutate(m),p.target.value="")};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"glass-card rounded-2xl p-6 flex flex-col items-center justify-center cursor-pointer hover-lift smooth-transition",children:[d.jsx("input",{type:"file",accept:"video/*",onChange:h,disabled:i,className:"hidden"}),i?d.jsx(ni,{className:"w-12 h-12 text-pink-400 animate-spin mb-3"}):d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center mb-3",children:d.jsx(Lm,{className:"w-8 h-8 text-white"})}),d.jsx("p",{className:"font-semibold text-white",children:i?"Uploading...":"Upload Video"}),d.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Share your moments"})]}),d.jsx("div",{className:"space-y-4",children:o.map(p=>d.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden hover-lift animate-slide-up",children:[d.jsx("video",{src:p.url,controls:!0,className:"w-full aspect-video object-cover"}),d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium",children:p.title||"Video"}),d.jsx("p",{className:"text-white/40 text-sm",children:p.uploaded_by})]}),d.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>c.mutate(p.id),className:"rounded-full text-red-400 hover:bg-red-500/20",children:d.jsx(Gl,{className:"w-4 h-4"})})]})]},p.id))}),o.length===0&&!i&&d.jsxs("div",{className:"text-center py-16",children:[d.jsx(Jv,{className:"w-16 h-16 mx-auto mb-4 text-white/20"}),d.jsx("p",{className:"text-white/40",children:"No videos yet"}),d.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Upload your first video!"})]})]})}function rz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(""),[o,a]=b.useState([]),[c,h]=b.useState(!1),[p,m]=b.useState(null),[v,y]=b.useState(null),[x,C]=b.useState("all"),[k,N]=b.useState(!1),[E,_]=b.useState(""),S=b.useRef(null);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]),b.useEffect(()=>()=>{S.current&&S.current.pause()},[]);const{data:I=[]}=De({queryKey:["music"],queryFn:()=>$.entities.Music.list("-created_date")}),{data:M=[]}=De({queryKey:["playlists"],queryFn:()=>$.entities.Playlist.list("-created_date")}),{data:D}=De({queryKey:["listeningSession"],queryFn:async()=>(await $.entities.ListeningSession.list("-created_date",1)).find(O=>O.is_active)||null,refetchInterval:2e3}),R=we({mutationFn:W=>$.entities.Playlist.create({name:W}),onSuccess:()=>{t.invalidateQueries({queryKey:["playlists"]}),_(""),N(!1)}}),j=we({mutationFn:W=>$.entities.Music.create({...W,added_by:(e==null?void 0:e.full_name)||"Anonymous"}),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),J=we({mutationFn:({id:W,isFavorite:O})=>$.entities.Music.update(W,{is_favorite:!O}),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),X=we({mutationFn:W=>$.entities.Music.delete(W),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),re=we({mutationFn:async W=>{const O=await $.entities.ListeningSession.list();for(const ie of O.filter(H=>H.is_active))await $.entities.ListeningSession.update(ie.id,{is_active:!1});return $.entities.ListeningSession.create({song_id:W.id,song_title:W.title,song_artist:W.artist,preview_url:W.preview_url,cover_art:W.cover_art,is_playing:!0,is_active:!0,started_by:e==null?void 0:e.full_name})},onSuccess:()=>t.invalidateQueries({queryKey:["listeningSession"]})}),B=we({mutationFn:({id:W,data:O})=>$.entities.ListeningSession.update(W,O),onSuccess:()=>t.invalidateQueries({queryKey:["listeningSession"]})}),Ie=async()=>{if(!i.trim())return;h(!0);const O=await(await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(i)}&media=music&limit=10`)).json();a(O.results||[]),h(!1)},ft=W=>{var O;j.mutate({title:W.trackName,artist:W.artistName,album:W.collectionName,cover_art:(O=W.artworkUrl100)==null?void 0:O.replace("100x100","600x600"),preview_url:W.previewUrl,itunes_url:W.trackViewUrl,spotify_search_url:`https://open.spotify.com/search/${encodeURIComponent(W.trackName+" "+W.artistName)}`}),a([]),r("")},Li=(W,O)=>{if(S.current&&S.current.pause(),v===O){y(null);return}const ie=new Audio(W);ie.play(),ie.onended=()=>y(null),S.current=ie,y(O)},Ye=x==="all"?I:x==="favorites"?I.filter(W=>W.is_favorite):I.filter(W=>W.playlist_id===x);return d.jsxs("div",{className:"space-y-4",children:[D&&d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(_T,{className:"w-4 h-4 animate-pulse"}),d.jsx("span",{className:"font-semibold text-sm",children:"Listening Together"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[D.cover_art?d.jsx("img",{src:D.cover_art,alt:"",className:"w-14 h-14 rounded-xl shadow-lg"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-white/20 flex items-center justify-center",children:d.jsx(Br,{className:"w-6 h-6"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold truncate",children:D.song_title}),d.jsx("p",{className:"text-white/70 text-sm truncate",children:D.song_artist})]}),d.jsx(Y,{onClick:()=>B.mutate({id:D.id,data:{is_playing:!D.is_playing}}),className:"rounded-full bg-white/20 hover:bg-white/30 w-11 h-11 p-0",children:D.is_playing?d.jsx(qf,{className:"w-5 h-5"}):d.jsx(Hf,{className:"w-5 h-5"})})]}),d.jsx(Y,{variant:"ghost",onClick:()=>B.mutate({id:D.id,data:{is_active:!1}}),className:"w-full mt-3 text-white/70 hover:text-white hover:bg-white/10 text-sm h-8",children:"End Session"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx(it,{placeholder:"Search for songs...",value:i,onChange:W=>r(W.target.value),onKeyPress:W=>W.key==="Enter"&&Ie(),className:"flex-1 rounded-xl h-11"}),d.jsx(Y,{onClick:Ie,disabled:c,className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl px-5 h-11",children:d.jsx(q5,{className:"w-4 h-4"})})]}),o.length>0&&d.jsx("div",{className:"mt-3 max-h-64 overflow-y-auto space-y-2 border-t pt-3",children:o.map(W=>d.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 flex items-center gap-3",children:[d.jsx("img",{src:W.artworkUrl60,alt:"",className:"w-12 h-12 rounded-lg shadow"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-gray-800 font-medium text-sm truncate",children:W.trackName}),d.jsx("p",{className:"text-gray-500 text-xs truncate",children:W.artistName})]}),d.jsx(Y,{onClick:()=>ft(W),className:"bg-pink-500 hover:bg-pink-600 text-white rounded-full h-9 w-9 p-0",children:d.jsx(gr,{className:"w-4 h-4"})})]},W.trackId))})]}),d.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[d.jsx(Y,{variant:x==="all"?"default":"outline",onClick:()=>C("all"),className:`rounded-full whitespace-nowrap text-sm h-9 ${x==="all"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:"All Songs"}),d.jsx(Y,{variant:x==="favorites"?"default":"outline",onClick:()=>C("favorites"),className:`rounded-full whitespace-nowrap text-sm h-9 ${x==="favorites"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:" Favorites"}),M.map(W=>d.jsx(Y,{variant:x===W.id?"default":"outline",onClick:()=>C(W.id),className:`rounded-full whitespace-nowrap text-sm h-9 ${x===W.id?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:W.name},W.id)),d.jsx(Y,{variant:"outline",onClick:()=>N(!0),className:"rounded-full border-gray-200 text-gray-600 h-9 w-9 p-0",children:d.jsx(gr,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"space-y-2",children:Ye.map(W=>d.jsxs("div",{className:"glass-card rounded-xl p-3 flex items-center gap-3 hover-lift cursor-pointer",onClick:()=>m(W),children:[W.cover_art?d.jsx("img",{src:W.cover_art,alt:"",className:"w-14 h-14 rounded-xl object-cover shadow"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:d.jsx(Br,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-gray-800 font-semibold truncate",children:W.title}),d.jsx("p",{className:"text-gray-500 text-sm truncate",children:W.artist||"Unknown"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[W.is_favorite&&d.jsx(dt,{className:"w-4 h-4 text-pink-500",fill:"#FF6B9D"}),W.preview_url&&d.jsx(Y,{variant:"ghost",size:"icon",onClick:O=>{O.stopPropagation(),Li(W.preview_url,W.id)},className:"rounded-full w-10 h-10",children:v===W.id?d.jsx(qf,{className:"w-5 h-5 text-pink-500"}):d.jsx(Hf,{className:"w-5 h-5 text-gray-400"})})]})]},W.id))}),Ye.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Br,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No songs yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Search to add music!"})]}),d.jsx(bi,{open:!!p,onOpenChange:()=>m(null),children:d.jsx(Ii,{className:"max-w-sm p-0 overflow-hidden bg-white rounded-2xl",children:p&&d.jsxs("div",{children:[d.jsxs("div",{className:"relative bg-gradient-to-br from-pink-500 to-purple-600 p-6 pb-8",children:[d.jsx("button",{onClick:()=>m(null),className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white",children:d.jsx(vr,{className:"w-4 h-4"})}),d.jsx("div",{className:"text-center",children:p.cover_art?d.jsx("img",{src:p.cover_art,alt:"",className:"w-36 h-36 rounded-2xl mx-auto shadow-2xl object-cover"}):d.jsx("div",{className:"w-36 h-36 rounded-2xl mx-auto bg-white/20 flex items-center justify-center",children:d.jsx(Br,{className:"w-16 h-16 text-white"})})})]}),d.jsxs("div",{className:"p-5 -mt-4 relative",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:p.title}),d.jsx("p",{className:"text-gray-500",children:p.artist}),p.album&&d.jsx("p",{className:"text-gray-400 text-sm",children:p.album})]}),p.preview_url&&d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsx(Y,{onClick:()=>Li(p.preview_url,p.id),className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",children:v===p.id?d.jsxs(d.Fragment,{children:[d.jsx(qf,{className:"w-5 h-5 mr-2"})," Pause"]}):d.jsxs(d.Fragment,{children:[d.jsx(Hf,{className:"w-5 h-5 mr-2"})," Play Preview"]})}),d.jsxs(Y,{onClick:()=>re.mutate(p),variant:"outline",className:"w-full border-purple-200 text-purple-600 hover:bg-purple-50 rounded-xl h-11",children:[d.jsx(ST,{className:"w-5 h-5 mr-2"})," Listen Together"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[p.itunes_url&&d.jsx("a",{href:p.itunes_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-900 text-white rounded-xl py-2.5 font-medium text-sm",children:" Apple"}),p.spotify_search_url&&d.jsx("a",{href:p.spotify_search_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-green-500 text-white rounded-xl py-2.5 font-medium text-sm",children:" Spotify"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Y,{onClick:()=>{J.mutate({id:p.id,isFavorite:p.is_favorite}),m(W=>({...W,is_favorite:!W.is_favorite}))},className:`flex-1 rounded-xl h-10 ${p.is_favorite?"bg-pink-500 hover:bg-pink-600 text-white":"bg-pink-50 hover:bg-pink-100 text-pink-600"}`,children:[d.jsx(dt,{className:"w-4 h-4 mr-1",fill:p.is_favorite?"white":"none"}),p.is_favorite?"Favorited":"Favorite"]}),d.jsx(Y,{variant:"outline",onClick:()=>{X.mutate(p.id),m(null)},className:"rounded-xl h-10 border-red-200 text-red-500 hover:bg-red-50 px-3",children:d.jsx(Gl,{className:"w-4 h-4"})})]})]})]})})}),d.jsx(bi,{open:k,onOpenChange:N,children:d.jsx(Ii,{className:"glass-card",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-bold gradient-text",children:"Create Playlist"}),d.jsx(it,{placeholder:"Playlist name...",value:E,onChange:W=>_(W.target.value),className:"rounded-xl h-11"}),d.jsx(Y,{onClick:()=>R.mutate(E),disabled:!E.trim(),className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",children:"Create"})]})})})]})}function sz(){return d.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text pt-4 mb-6",children:"Memories"}),d.jsxs(OT,{defaultValue:"notes",className:"w-full",children:[d.jsxs(RT,{className:"glass-card w-full grid grid-cols-4 p-1 mb-6 rounded-2xl bg-gray-100",children:[d.jsxs(Bs,{value:"notes",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(rs,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Notes"})]}),d.jsxs(Bs,{value:"photos",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(gd,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Photos"})]}),d.jsxs(Bs,{value:"videos",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(Jv,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Videos"})]}),d.jsxs(Bs,{value:"music",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(Br,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Music"})]})]}),d.jsx(Vs,{value:"notes",children:d.jsx(tz,{})}),d.jsx(Vs,{value:"photos",children:d.jsx(nz,{})}),d.jsx(Vs,{value:"videos",children:d.jsx(iz,{})}),d.jsx(Vs,{value:"music",children:d.jsx(rz,{})})]})]})}function oz(){return d.jsx(bM,{children:d.jsx("div",{className:"app",children:d.jsxs(xM,{children:[d.jsx(Lr,{path:"/",element:d.jsx(N3,{})}),d.jsx(Lr,{path:"/profile",element:d.jsx(b3,{})}),d.jsx(Lr,{path:"/bookmarks",element:d.jsx(I3,{})}),d.jsx(Lr,{path:"/schedule",element:d.jsx(L3,{})}),d.jsx(Lr,{path:"/map",element:d.jsx(ez,{})}),d.jsx(Lr,{path:"/media",element:d.jsx(sz,{})})]})})})}const az=new eP;Yf.createRoot(document.getElementById("root")).render(d.jsx(io.StrictMode,{children:d.jsx(mP,{client:az,children:d.jsx(oz,{})})}));
