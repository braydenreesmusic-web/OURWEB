function kb(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rx={exports:{}},xh={},Ox={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),Tb=Symbol.for("react.portal"),Nb=Symbol.for("react.fragment"),bb=Symbol.for("react.strict_mode"),Ib=Symbol.for("react.profiler"),Pb=Symbol.for("react.provider"),Mb=Symbol.for("react.context"),Lb=Symbol.for("react.forward_ref"),Ab=Symbol.for("react.suspense"),Db=Symbol.for("react.memo"),jb=Symbol.for("react.lazy"),__=Symbol.iterator;function Rb(t){return t===null||typeof t!="object"?null:(t=__&&t[__]||t["@@iterator"],typeof t=="function"?t:null)}var Fx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zx=Object.assign,Ux={};function Co(t,e,n){this.props=t,this.context=e,this.refs=Ux,this.updater=n||Fx}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $x(){}$x.prototype=Co.prototype;function $p(t,e,n){this.props=t,this.context=e,this.refs=Ux,this.updater=n||Fx}var Bp=$p.prototype=new $x;Bp.constructor=$p;zx(Bp,Co.prototype);Bp.isPureReactComponent=!0;var w_=Array.isArray,Bx=Object.prototype.hasOwnProperty,Vp={current:null},Vx={key:!0,ref:!0,__self:!0,__source:!0};function qx(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Bx.call(e,i)&&!Vx.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:Tl,type:t,key:o,ref:a,props:r,_owner:Vp.current}}function Ob(t,e){return{$$typeof:Tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tl}function Fb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x_=/\/+/g;function tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fb(""+t.key):e.toString(36)}function tc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Tl:case Tb:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+tf(a,0):i,w_(r)?(n="",t!=null&&(n=t.replace(x_,"$&/")+"/"),tc(r,e,n,"",function(f){return f})):r!=null&&(qp(r)&&(r=Ob(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(x_,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",w_(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+tf(o,c);a+=tc(o,e,n,h,r)}else if(h=Rb(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+tf(o,c++),a+=tc(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Cu(t,e,n){if(t==null)return t;var i=[],r=0;return tc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function zb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},nc={transition:null},Ub={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:nc,ReactCurrentOwner:Vp};function Hx(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Cu,forEach:function(t,e,n){Cu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cu(t,function(){e++}),e},toArray:function(t){return Cu(t,function(e){return e})||[]},only:function(t){if(!qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Co;ve.Fragment=Nb;ve.Profiler=Ib;ve.PureComponent=$p;ve.StrictMode=bb;ve.Suspense=Ab;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ub;ve.act=Hx;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=zx({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Vp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Bx.call(e,h)&&!Vx.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Tl,type:t.type,key:r,ref:o,props:i,_owner:a}};ve.createContext=function(t){return t={$$typeof:Mb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pb,_context:t},t.Consumer=t};ve.createElement=qx;ve.createFactory=function(t){var e=qx.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Lb,render:t}};ve.isValidElement=qp;ve.lazy=function(t){return{$$typeof:jb,_payload:{_status:-1,_result:t},_init:zb}};ve.memo=function(t,e){return{$$typeof:Db,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};ve.unstable_act=Hx;ve.useCallback=function(t,e){return Qt.current.useCallback(t,e)};ve.useContext=function(t){return Qt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Qt.current.useEffect(t,e)};ve.useId=function(){return Qt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Qt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};ve.useRef=function(t){return Qt.current.useRef(t)};ve.useState=function(t){return Qt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Qt.current.useTransition()};ve.version="18.3.1";Ox.exports=ve;var b=Ox.exports;const ro=jx(b),$b=kb({__proto__:null,default:ro},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb=b,Vb=Symbol.for("react.element"),qb=Symbol.for("react.fragment"),Hb=Object.prototype.hasOwnProperty,Wb=Bb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kb={key:!0,ref:!0,__self:!0,__source:!0};function Wx(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Hb.call(e,i)&&!Kb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Vb,type:t,key:o,ref:a,props:r,_owner:Wb.current}}xh.Fragment=qb;xh.jsx=Wx;xh.jsxs=Wx;Rx.exports=xh;var d=Rx.exports,nm={},Kx={exports:{}},mn={},Qx={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,re){var H=R.length;R.push(re);e:for(;0<H;){var oe=H-1>>>1,_e=R[oe];if(0<r(_e,re))R[oe]=re,R[H]=_e,H=oe;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var re=R[0],H=R.pop();if(H!==re){R[0]=H;e:for(var oe=0,_e=R.length,Je=_e>>>1;oe<Je;){var Pe=2*(oe+1)-1,xe=R[Pe],ce=Pe+1,Mt=R[ce];if(0>r(xe,H))ce<_e&&0>r(Mt,xe)?(R[oe]=Mt,R[ce]=H,oe=ce):(R[oe]=xe,R[Pe]=H,oe=Pe);else if(ce<_e&&0>r(Mt,H))R[oe]=Mt,R[ce]=H,oe=ce;else break e}}return re}function r(R,re){var H=R.sortIndex-re.sortIndex;return H!==0?H:R.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],f=[],p=1,v=null,y=3,x=!1,C=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var re=n(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=R)i(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=n(f)}}function I(R){if(k=!1,S(R),!C)if(n(h)!==null)C=!0,Xe(M);else{var re=n(f);re!==null&&W(I,re.startTime-R)}}function M(R,re){C=!1,k&&(k=!1,E(O),O=-1),x=!0;var H=y;try{for(S(re),v=n(h);v!==null&&(!(v.expirationTime>re)||R&&!ne());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,y=v.priorityLevel;var _e=oe(v.expirationTime<=re);re=t.unstable_now(),typeof _e=="function"?v.callback=_e:v===n(h)&&i(h),S(re)}else i(h);v=n(h)}if(v!==null)var Je=!0;else{var Pe=n(f);Pe!==null&&W(I,Pe.startTime-re),Je=!1}return Je}finally{v=null,y=H,x=!1}}var A=!1,j=null,O=-1,J=5,Q=-1;function ne(){return!(t.unstable_now()-Q<J)}function B(){if(j!==null){var R=t.unstable_now();Q=R;var re=!0;try{re=j(!0,R)}finally{re?Ie():(A=!1,j=null)}}else A=!1}var Ie;if(typeof _=="function")Ie=function(){_(B)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,ji=ft.port2;ft.port1.onmessage=B,Ie=function(){ji.postMessage(null)}}else Ie=function(){T(B,0)};function Xe(R){j=R,A||(A=!0,Ie())}function W(R,re){O=T(function(){R(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,Xe(M))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(R){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var H=y;y=re;try{return R()}finally{y=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,re){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=y;y=R;try{return re()}finally{y=H}},t.unstable_scheduleCallback=function(R,re,H){var oe=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?oe+H:oe):H=oe,R){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=H+_e,R={id:p++,callback:re,priorityLevel:R,startTime:H,expirationTime:_e,sortIndex:-1},H>oe?(R.sortIndex=H,e(f,R),n(h)===null&&R===n(f)&&(k?(E(O),O=-1):k=!0,W(I,H-oe))):(R.sortIndex=_e,e(h,R),C||x||(C=!0,Xe(M))),R},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(R){var re=y;return function(){var H=y;y=re;try{return R.apply(this,arguments)}finally{y=H}}}})(Gx);Qx.exports=Gx;var Qb=Qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb=b,dn=Qb;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zx=new Set,Ra={};function cs(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(Ra[t]=e,t=0;t<e.length;t++)Zx.add(e[t])}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,Zb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S_={},E_={};function Yb(t){return im.call(E_,t)?!0:im.call(S_,t)?!1:Zb.test(t)?E_[t]=!0:(S_[t]=!0,!1)}function Xb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jb(t,e,n,i){if(e===null||typeof e>"u"||Xb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Wp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kp(t,e,n,i){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jb(e,n,r,i)&&(n=null),i||r===null?Yb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Li=Gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tu=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),Yx=Symbol.for("react.provider"),Xx=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),Zp=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),Jx=Symbol.for("react.offscreen"),k_=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=k_&&t[k_]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,nf;function da(t){if(nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nf=e&&e[1]||""}return`
`+nf+t}var rf=!1;function sf(t,e){if(!t||rf)return"";rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,c=o.length-1;1<=a&&0<=c&&r[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(r[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||r[a]!==o[c]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?da(t):""}function eI(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=sf(t.type,!1),t;case 11:return t=sf(t.type.render,!1),t;case 1:return t=sf(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ms:return"Fragment";case Ps:return"Portal";case rm:return"Profiler";case Qp:return"StrictMode";case sm:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xx:return(t.displayName||"Context")+".Consumer";case Yx:return(t._context.displayName||"Context")+".Provider";case Gp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zp:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case $i:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function tI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function e1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nI(t){var e=e1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nu(t){t._valueTracker||(t._valueTracker=nI(t))}function t1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=e1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function C_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function n1(t,e){e=e.checked,e!=null&&Kp(t,"checked",e,!1)}function um(t,e){n1(t,e);var n=fr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cm(t,e.type,n):e.hasOwnProperty("defaultValue")&&cm(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cm(t,e,n){(e!=="number"||Ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function Hs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(fa(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function i1(t,e){var n=fr(e.value),i=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function b_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bu,s1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bu=bu||document.createElement("div"),bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iI=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){iI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function o1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function a1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=o1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var rI=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(t,e){if(e){if(rI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function mm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pm=null;function Yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Ws=null,Ks=null;function I_(t){if(t=Il(t)){if(typeof gm!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Th(e),gm(t.stateNode,t.type,e))}}function l1(t){Ws?Ks?Ks.push(t):Ks=[t]:Ws=t}function u1(){if(Ws){var t=Ws,e=Ks;if(Ks=Ws=null,I_(t),e)for(t=0;t<e.length;t++)I_(e[t])}}function c1(t,e){return t(e)}function h1(){}var of=!1;function d1(t,e,n){if(of)return t(e,n);of=!0;try{return c1(t,e,n)}finally{of=!1,(Ws!==null||Ks!==null)&&(h1(),u1())}}function Fa(t,e){var n=t.stateNode;if(n===null)return null;var i=Th(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var vm=!1;if(wi)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){vm=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{vm=!1}function sI(t,e,n,i,r,o,a,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var Ea=!1,kc=null,Cc=!1,ym=null,oI={onError:function(t){Ea=!0,kc=t}};function aI(t,e,n,i,r,o,a,c,h){Ea=!1,kc=null,sI.apply(oI,arguments)}function lI(t,e,n,i,r,o,a,c,h){if(aI.apply(this,arguments),Ea){if(Ea){var f=kc;Ea=!1,kc=null}else throw Error(V(198));Cc||(Cc=!0,ym=f)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function f1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P_(t){if(hs(t)!==t)throw Error(V(188))}function uI(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return P_(r),t;if(o===i)return P_(r),e;o=o.sibling}throw Error(V(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,c=r.child;c;){if(c===n){a=!0,n=r,i=o;break}if(c===i){a=!0,i=r,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,i=r;break}if(c===i){a=!0,i=o,n=r;break}c=c.sibling}if(!a)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function m1(t){return t=uI(t),t!==null?p1(t):null}function p1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=p1(t);if(e!==null)return e;t=t.sibling}return null}var g1=dn.unstable_scheduleCallback,M_=dn.unstable_cancelCallback,cI=dn.unstable_shouldYield,hI=dn.unstable_requestPaint,st=dn.unstable_now,dI=dn.unstable_getCurrentPriorityLevel,Xp=dn.unstable_ImmediatePriority,v1=dn.unstable_UserBlockingPriority,Tc=dn.unstable_NormalPriority,fI=dn.unstable_LowPriority,y1=dn.unstable_IdlePriority,Sh=null,Zn=null;function mI(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Sh,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:vI,pI=Math.log,gI=Math.LN2;function vI(t){return t>>>=0,t===0?32:31-(pI(t)/gI|0)|0}var Iu=64,Pu=4194304;function ma(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~r;c!==0?i=ma(c):(o&=a,o!==0&&(i=ma(o)))}else a=n&~r,a!==0?i=ma(a):o!==0&&(i=ma(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-An(e),r=1<<n,i|=t[n],e&=~r;return i}function yI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _I(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-An(o),c=1<<a,h=r[a];h===-1?(!(c&n)||c&i)&&(r[a]=yI(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function _m(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _1(){var t=Iu;return Iu<<=1,!(Iu&4194240)&&(Iu=64),t}function af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=n}function wI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-An(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Jp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-An(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var je=0;function w1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x1,eg,S1,E1,k1,wm=!1,Mu=[],Ji=null,er=null,tr=null,za=new Map,Ua=new Map,qi=[],xI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L_(t,e){switch(t){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function ea(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Il(e),e!==null&&eg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function SI(t,e,n,i,r){switch(e){case"focusin":return Ji=ea(Ji,t,e,n,i,r),!0;case"dragenter":return er=ea(er,t,e,n,i,r),!0;case"mouseover":return tr=ea(tr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return za.set(o,ea(za.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ua.set(o,ea(Ua.get(o)||null,t,e,n,i,r)),!0}return!1}function C1(t){var e=zr(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=f1(n),e!==null){t.blockedOn=e,k1(t.priority,function(){S1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);pm=i,n.target.dispatchEvent(i),pm=null}else return e=Il(n),e!==null&&eg(e),t.blockedOn=n,!1;e.shift()}return!0}function A_(t,e,n){ic(t)&&n.delete(e)}function EI(){wm=!1,Ji!==null&&ic(Ji)&&(Ji=null),er!==null&&ic(er)&&(er=null),tr!==null&&ic(tr)&&(tr=null),za.forEach(A_),Ua.forEach(A_)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,wm||(wm=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,EI)))}function $a(t){function e(r){return ta(r,t)}if(0<Mu.length){ta(Mu[0],t);for(var n=1;n<Mu.length;n++){var i=Mu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ji!==null&&ta(Ji,t),er!==null&&ta(er,t),tr!==null&&ta(tr,t),za.forEach(e),Ua.forEach(e),n=0;n<qi.length;n++)i=qi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<qi.length&&(n=qi[0],n.blockedOn===null);)C1(n),n.blockedOn===null&&qi.shift()}var Qs=Li.ReactCurrentBatchConfig,bc=!0;function kI(t,e,n,i){var r=je,o=Qs.transition;Qs.transition=null;try{je=1,tg(t,e,n,i)}finally{je=r,Qs.transition=o}}function CI(t,e,n,i){var r=je,o=Qs.transition;Qs.transition=null;try{je=4,tg(t,e,n,i)}finally{je=r,Qs.transition=o}}function tg(t,e,n,i){if(bc){var r=xm(t,e,n,i);if(r===null)vf(t,e,i,Ic,n),L_(t,i);else if(SI(r,t,e,n,i))i.stopPropagation();else if(L_(t,i),e&4&&-1<xI.indexOf(t)){for(;r!==null;){var o=Il(r);if(o!==null&&x1(o),o=xm(t,e,n,i),o===null&&vf(t,e,i,Ic,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else vf(t,e,i,null,n)}}var Ic=null;function xm(t,e,n,i){if(Ic=null,t=Yp(i),t=zr(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=f1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ic=t,null}function T1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dI()){case Xp:return 1;case v1:return 4;case Tc:case fI:return 16;case y1:return 536870912;default:return 16}default:return 16}}var Gi=null,ng=null,rc=null;function N1(){if(rc)return rc;var t,e=ng,n=e.length,i,r="value"in Gi?Gi.value:Gi.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return rc=r.slice(t,1<i?1-i:void 0)}function sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lu(){return!0}function D_(){return!1}function pn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Lu:D_,this.isPropagationStopped=D_,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),e}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ig=pn(To),bl=Ze({},To,{view:0,detail:0}),TI=pn(bl),lf,uf,na,Eh=Ze({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(lf=t.screenX-na.screenX,uf=t.screenY-na.screenY):uf=lf=0,na=t),lf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),j_=pn(Eh),NI=Ze({},Eh,{dataTransfer:0}),bI=pn(NI),II=Ze({},bl,{relatedTarget:0}),cf=pn(II),PI=Ze({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),MI=pn(PI),LI=Ze({},To,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AI=pn(LI),DI=Ze({},To,{data:0}),R_=pn(DI),jI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OI[t])?!!e[t]:!1}function rg(){return FI}var zI=Ze({},bl,{key:function(t){if(t.key){var e=jI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(t){return t.type==="keypress"?sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UI=pn(zI),$I=Ze({},Eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=pn($I),BI=Ze({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),VI=pn(BI),qI=Ze({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),HI=pn(qI),WI=Ze({},Eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KI=pn(WI),QI=[9,13,27,32],sg=wi&&"CompositionEvent"in window,ka=null;wi&&"documentMode"in document&&(ka=document.documentMode);var GI=wi&&"TextEvent"in window&&!ka,b1=wi&&(!sg||ka&&8<ka&&11>=ka),F_=" ",z_=!1;function I1(t,e){switch(t){case"keyup":return QI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function ZI(t,e){switch(t){case"compositionend":return P1(e);case"keypress":return e.which!==32?null:(z_=!0,F_);case"textInput":return t=e.data,t===F_&&z_?null:t;default:return null}}function YI(t,e){if(Ls)return t==="compositionend"||!sg&&I1(t,e)?(t=N1(),rc=ng=Gi=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b1&&e.locale!=="ko"?null:e.data;default:return null}}var XI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XI[t.type]:e==="textarea"}function M1(t,e,n,i){l1(i),e=Pc(e,"onChange"),0<e.length&&(n=new ig("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ca=null,Ba=null;function JI(t){B1(t,0)}function kh(t){var e=js(t);if(t1(e))return t}function e2(t,e){if(t==="change")return e}var L1=!1;if(wi){var hf;if(wi){var df="oninput"in document;if(!df){var $_=document.createElement("div");$_.setAttribute("oninput","return;"),df=typeof $_.oninput=="function"}hf=df}else hf=!1;L1=hf&&(!document.documentMode||9<document.documentMode)}function B_(){Ca&&(Ca.detachEvent("onpropertychange",A1),Ba=Ca=null)}function A1(t){if(t.propertyName==="value"&&kh(Ba)){var e=[];M1(e,Ba,t,Yp(t)),d1(JI,e)}}function t2(t,e,n){t==="focusin"?(B_(),Ca=e,Ba=n,Ca.attachEvent("onpropertychange",A1)):t==="focusout"&&B_()}function n2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kh(Ba)}function i2(t,e){if(t==="click")return kh(e)}function r2(t,e){if(t==="input"||t==="change")return kh(e)}function s2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:s2;function Va(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!im.call(e,r)||!Rn(t[r],e[r]))return!1}return!0}function V_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q_(t,e){var n=V_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=V_(n)}}function D1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j1(){for(var t=window,e=Ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ec(t.document)}return e}function og(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o2(t){var e=j1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D1(n.ownerDocument.documentElement,n)){if(i!==null&&og(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=q_(n,o);var a=q_(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a2=wi&&"documentMode"in document&&11>=document.documentMode,As=null,Sm=null,Ta=null,Em=!1;function H_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Em||As==null||As!==Ec(i)||(i=As,"selectionStart"in i&&og(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ta&&Va(Ta,i)||(Ta=i,i=Pc(Sm,"onSelect"),0<i.length&&(e=new ig("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=As)))}function Au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},ff={},R1={};wi&&(R1=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Ch(t){if(ff[t])return ff[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R1)return ff[t]=e[n];return t}var O1=Ch("animationend"),F1=Ch("animationiteration"),z1=Ch("animationstart"),U1=Ch("transitionend"),$1=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(t,e){$1.set(t,e),cs(e,[t])}for(var mf=0;mf<W_.length;mf++){var pf=W_[mf],l2=pf.toLowerCase(),u2=pf[0].toUpperCase()+pf.slice(1);wr(l2,"on"+u2)}wr(O1,"onAnimationEnd");wr(F1,"onAnimationIteration");wr(z1,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(U1,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function K_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,lI(i,e,void 0,t),t.currentTarget=null}function B1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var c=i[a],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;K_(r,c,f),o=h}else for(a=0;a<i.length;a++){if(c=i[a],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;K_(r,c,f),o=h}}}if(Cc)throw t=ym,Cc=!1,ym=null,t}function Ue(t,e){var n=e[bm];n===void 0&&(n=e[bm]=new Set);var i=t+"__bubble";n.has(i)||(V1(e,t,2,!1),n.add(i))}function gf(t,e,n){var i=0;e&&(i|=4),V1(n,t,i,e)}var Du="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[Du]){t[Du]=!0,Zx.forEach(function(n){n!=="selectionchange"&&(c2.has(n)||gf(n,!1,t),gf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Du]||(e[Du]=!0,gf("selectionchange",!1,e))}}function V1(t,e,n,i){switch(T1(e)){case 1:var r=kI;break;case 4:r=CI;break;default:r=tg}n=r.bind(null,e,n,t),r=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vf(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;c!==null;){if(a=zr(c),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}c=c.parentNode}}i=i.return}d1(function(){var f=o,p=Yp(n),v=[];e:{var y=$1.get(t);if(y!==void 0){var x=ig,C=t;switch(t){case"keypress":if(sc(n)===0)break e;case"keydown":case"keyup":x=UI;break;case"focusin":C="focus",x=cf;break;case"focusout":C="blur",x=cf;break;case"beforeblur":case"afterblur":x=cf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=j_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=bI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=VI;break;case O1:case F1:case z1:x=MI;break;case U1:x=HI;break;case"scroll":x=TI;break;case"wheel":x=KI;break;case"copy":case"cut":case"paste":x=AI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=O_}var k=(e&4)!==0,T=!k&&t==="scroll",E=k?y!==null?y+"Capture":null:y;k=[];for(var _=f,S;_!==null;){S=_;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,E!==null&&(I=Fa(_,E),I!=null&&k.push(Ha(_,I,S)))),T)break;_=_.return}0<k.length&&(y=new x(y,C,null,n,p),v.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",y&&n!==pm&&(C=n.relatedTarget||n.fromElement)&&(zr(C)||C[xi]))break e;if((x||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=f,C=C?zr(C):null,C!==null&&(T=hs(C),C!==T||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=f),x!==C)){if(k=j_,I="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=O_,I="onPointerLeave",E="onPointerEnter",_="pointer"),T=x==null?y:js(x),S=C==null?y:js(C),y=new k(I,_+"leave",x,n,p),y.target=T,y.relatedTarget=S,I=null,zr(p)===f&&(k=new k(E,_+"enter",C,n,p),k.target=S,k.relatedTarget=T,I=k),T=I,x&&C)t:{for(k=x,E=C,_=0,S=k;S;S=Cs(S))_++;for(S=0,I=E;I;I=Cs(I))S++;for(;0<_-S;)k=Cs(k),_--;for(;0<S-_;)E=Cs(E),S--;for(;_--;){if(k===E||E!==null&&k===E.alternate)break t;k=Cs(k),E=Cs(E)}k=null}else k=null;x!==null&&Q_(v,y,x,k,!1),C!==null&&T!==null&&Q_(v,T,C,k,!0)}}e:{if(y=f?js(f):window,x=y.nodeName&&y.nodeName.toLowerCase(),x==="select"||x==="input"&&y.type==="file")var M=e2;else if(U_(y))if(L1)M=r2;else{M=n2;var A=t2}else(x=y.nodeName)&&x.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(M=i2);if(M&&(M=M(t,f))){M1(v,M,n,p);break e}A&&A(t,y,f),t==="focusout"&&(A=y._wrapperState)&&A.controlled&&y.type==="number"&&cm(y,"number",y.value)}switch(A=f?js(f):window,t){case"focusin":(U_(A)||A.contentEditable==="true")&&(As=A,Sm=f,Ta=null);break;case"focusout":Ta=Sm=As=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,H_(v,n,p);break;case"selectionchange":if(a2)break;case"keydown":case"keyup":H_(v,n,p)}var j;if(sg)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ls?I1(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(b1&&n.locale!=="ko"&&(Ls||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ls&&(j=N1()):(Gi=p,ng="value"in Gi?Gi.value:Gi.textContent,Ls=!0)),A=Pc(f,O),0<A.length&&(O=new R_(O,t,null,n,p),v.push({event:O,listeners:A}),j?O.data=j:(j=P1(n),j!==null&&(O.data=j)))),(j=GI?ZI(t,n):YI(t,n))&&(f=Pc(f,"onBeforeInput"),0<f.length&&(p=new R_("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:f}),p.data=j))}B1(v,e)})}function Ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Fa(t,n),o!=null&&i.unshift(Ha(t,o,r)),o=Fa(t,e),o!=null&&i.push(Ha(t,o,r))),t=t.return}return i}function Cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q_(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,r?(h=Fa(n,o),h!=null&&a.unshift(Ha(n,h,c))):r||(h=Fa(n,o),h!=null&&a.push(Ha(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var h2=/\r\n?/g,d2=/\u0000|\uFFFD/g;function G_(t){return(typeof t=="string"?t:""+t).replace(h2,`
`).replace(d2,"")}function ju(t,e,n){if(e=G_(e),G_(t)!==e&&n)throw Error(V(425))}function Mc(){}var km=null,Cm=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,Z_=typeof Promise=="function"?Promise:void 0,m2=typeof queueMicrotask=="function"?queueMicrotask:typeof Z_<"u"?function(t){return Z_.resolve(null).then(t).catch(p2)}:Nm;function p2(t){setTimeout(function(){throw t})}function yf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$a(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$a(e)}function nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Y_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),Wn="__reactFiber$"+No,Wa="__reactProps$"+No,xi="__reactContainer$"+No,bm="__reactEvents$"+No,g2="__reactListeners$"+No,v2="__reactHandles$"+No;function zr(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xi]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Y_(t);t!==null;){if(n=t[Wn])return n;t=Y_(t)}return e}t=n,n=t.parentNode}return null}function Il(t){return t=t[Wn]||t[xi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Th(t){return t[Wa]||null}var Im=[],Rs=-1;function xr(t){return{current:t}}function Ve(t){0>Rs||(t.current=Im[Rs],Im[Rs]=null,Rs--)}function ze(t,e){Rs++,Im[Rs]=t.current,t.current=e}var mr={},$t=xr(mr),tn=xr(!1),Xr=mr;function oo(t,e){var n=t.type.contextTypes;if(!n)return mr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function nn(t){return t=t.childContextTypes,t!=null}function Lc(){Ve(tn),Ve($t)}function X_(t,e,n){if($t.current!==mr)throw Error(V(168));ze($t,e),ze(tn,n)}function q1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(V(108,tI(t)||"Unknown",r));return Ze({},n,i)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mr,Xr=$t.current,ze($t,t),ze(tn,tn.current),!0}function J_(t,e,n){var i=t.stateNode;if(!i)throw Error(V(169));n?(t=q1(t,e,Xr),i.__reactInternalMemoizedMergedChildContext=t,Ve(tn),Ve($t),ze($t,t)):Ve(tn),ze(tn,n)}var hi=null,Nh=!1,_f=!1;function H1(t){hi===null?hi=[t]:hi.push(t)}function y2(t){Nh=!0,H1(t)}function Sr(){if(!_f&&hi!==null){_f=!0;var t=0,e=je;try{var n=hi;for(je=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}hi=null,Nh=!1}catch(r){throw hi!==null&&(hi=hi.slice(t+1)),g1(Xp,Sr),r}finally{je=e,_f=!1}}return null}var Os=[],Fs=0,Dc=null,jc=0,wn=[],xn=0,Jr=null,fi=1,mi="";function jr(t,e){Os[Fs++]=jc,Os[Fs++]=Dc,Dc=t,jc=e}function W1(t,e,n){wn[xn++]=fi,wn[xn++]=mi,wn[xn++]=Jr,Jr=t;var i=fi;t=mi;var r=32-An(i)-1;i&=~(1<<r),n+=1;var o=32-An(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,fi=1<<32-An(e)+r|n<<r|i,mi=o+t}else fi=1<<o|n<<r|i,mi=t}function ag(t){t.return!==null&&(jr(t,1),W1(t,1,0))}function lg(t){for(;t===Dc;)Dc=Os[--Fs],Os[Fs]=null,jc=Os[--Fs],Os[Fs]=null;for(;t===Jr;)Jr=wn[--xn],wn[xn]=null,mi=wn[--xn],wn[xn]=null,fi=wn[--xn],wn[xn]=null}var cn=null,ln=null,He=!1,Ln=null;function K1(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jr!==null?{id:fi,overflow:mi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,ln=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(He){var e=ln;if(e){var n=e;if(!e0(t,e)){if(Pm(t))throw Error(V(418));e=nr(n.nextSibling);var i=cn;e&&e0(t,e)?K1(i,n):(t.flags=t.flags&-4097|2,He=!1,cn=t)}}else{if(Pm(t))throw Error(V(418));t.flags=t.flags&-4097|2,He=!1,cn=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Ru(t){if(t!==cn)return!1;if(!He)return t0(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=ln)){if(Pm(t))throw Q1(),Error(V(418));for(;e;)K1(t,e),e=nr(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?nr(t.stateNode.nextSibling):null;return!0}function Q1(){for(var t=ln;t;)t=nr(t.nextSibling)}function ao(){ln=cn=null,He=!1}function ug(t){Ln===null?Ln=[t]:Ln.push(t)}var _2=Li.ReactCurrentBatchConfig;function ia(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=r.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function Ou(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function G1(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function i(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function r(E,_){return E=or(E,_),E.index=0,E.sibling=null,E}function o(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,_,S,I){return _===null||_.tag!==6?(_=Tf(S,E.mode,I),_.return=E,_):(_=r(_,S),_.return=E,_)}function h(E,_,S,I){var M=S.type;return M===Ms?p(E,_,S.props.children,I,S.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$i&&n0(M)===_.type)?(I=r(_,S.props),I.ref=ia(E,_,S),I.return=E,I):(I=dc(S.type,S.key,S.props,null,E.mode,I),I.ref=ia(E,_,S),I.return=E,I)}function f(E,_,S,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Nf(S,E.mode,I),_.return=E,_):(_=r(_,S.children||[]),_.return=E,_)}function p(E,_,S,I,M){return _===null||_.tag!==7?(_=Gr(S,E.mode,I,M),_.return=E,_):(_=r(_,S),_.return=E,_)}function v(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Tf(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tu:return S=dc(_.type,_.key,_.props,null,E.mode,S),S.ref=ia(E,null,_),S.return=E,S;case Ps:return _=Nf(_,E.mode,S),_.return=E,_;case $i:var I=_._init;return v(E,I(_._payload),S)}if(fa(_)||Xo(_))return _=Gr(_,E.mode,S,null),_.return=E,_;Ou(E,_)}return null}function y(E,_,S,I){var M=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:c(E,_,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tu:return S.key===M?h(E,_,S,I):null;case Ps:return S.key===M?f(E,_,S,I):null;case $i:return M=S._init,y(E,_,M(S._payload),I)}if(fa(S)||Xo(S))return M!==null?null:p(E,_,S,I,null);Ou(E,S)}return null}function x(E,_,S,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(S)||null,c(_,E,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Tu:return E=E.get(I.key===null?S:I.key)||null,h(_,E,I,M);case Ps:return E=E.get(I.key===null?S:I.key)||null,f(_,E,I,M);case $i:var A=I._init;return x(E,_,S,A(I._payload),M)}if(fa(I)||Xo(I))return E=E.get(S)||null,p(_,E,I,M,null);Ou(_,I)}return null}function C(E,_,S,I){for(var M=null,A=null,j=_,O=_=0,J=null;j!==null&&O<S.length;O++){j.index>O?(J=j,j=null):J=j.sibling;var Q=y(E,j,S[O],I);if(Q===null){j===null&&(j=J);break}t&&j&&Q.alternate===null&&e(E,j),_=o(Q,_,O),A===null?M=Q:A.sibling=Q,A=Q,j=J}if(O===S.length)return n(E,j),He&&jr(E,O),M;if(j===null){for(;O<S.length;O++)j=v(E,S[O],I),j!==null&&(_=o(j,_,O),A===null?M=j:A.sibling=j,A=j);return He&&jr(E,O),M}for(j=i(E,j);O<S.length;O++)J=x(j,E,O,S[O],I),J!==null&&(t&&J.alternate!==null&&j.delete(J.key===null?O:J.key),_=o(J,_,O),A===null?M=J:A.sibling=J,A=J);return t&&j.forEach(function(ne){return e(E,ne)}),He&&jr(E,O),M}function k(E,_,S,I){var M=Xo(S);if(typeof M!="function")throw Error(V(150));if(S=M.call(S),S==null)throw Error(V(151));for(var A=M=null,j=_,O=_=0,J=null,Q=S.next();j!==null&&!Q.done;O++,Q=S.next()){j.index>O?(J=j,j=null):J=j.sibling;var ne=y(E,j,Q.value,I);if(ne===null){j===null&&(j=J);break}t&&j&&ne.alternate===null&&e(E,j),_=o(ne,_,O),A===null?M=ne:A.sibling=ne,A=ne,j=J}if(Q.done)return n(E,j),He&&jr(E,O),M;if(j===null){for(;!Q.done;O++,Q=S.next())Q=v(E,Q.value,I),Q!==null&&(_=o(Q,_,O),A===null?M=Q:A.sibling=Q,A=Q);return He&&jr(E,O),M}for(j=i(E,j);!Q.done;O++,Q=S.next())Q=x(j,E,O,Q.value,I),Q!==null&&(t&&Q.alternate!==null&&j.delete(Q.key===null?O:Q.key),_=o(Q,_,O),A===null?M=Q:A.sibling=Q,A=Q);return t&&j.forEach(function(B){return e(E,B)}),He&&jr(E,O),M}function T(E,_,S,I){if(typeof S=="object"&&S!==null&&S.type===Ms&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Tu:e:{for(var M=S.key,A=_;A!==null;){if(A.key===M){if(M=S.type,M===Ms){if(A.tag===7){n(E,A.sibling),_=r(A,S.props.children),_.return=E,E=_;break e}}else if(A.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$i&&n0(M)===A.type){n(E,A.sibling),_=r(A,S.props),_.ref=ia(E,A,S),_.return=E,E=_;break e}n(E,A);break}else e(E,A);A=A.sibling}S.type===Ms?(_=Gr(S.props.children,E.mode,I,S.key),_.return=E,E=_):(I=dc(S.type,S.key,S.props,null,E.mode,I),I.ref=ia(E,_,S),I.return=E,E=I)}return a(E);case Ps:e:{for(A=S.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=r(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Nf(S,E.mode,I),_.return=E,E=_}return a(E);case $i:return A=S._init,T(E,_,A(S._payload),I)}if(fa(S))return C(E,_,S,I);if(Xo(S))return k(E,_,S,I);Ou(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=r(_,S),_.return=E,E=_):(n(E,_),_=Tf(S,E.mode,I),_.return=E,E=_),a(E)):n(E,_)}return T}var lo=G1(!0),Z1=G1(!1),Rc=xr(null),Oc=null,zs=null,cg=null;function hg(){cg=zs=Oc=null}function dg(t){var e=Rc.current;Ve(Rc),t._currentValue=e}function Lm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){Oc=t,cg=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(en=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(cg!==t)if(t={context:t,memoizedValue:e,next:null},zs===null){if(Oc===null)throw Error(V(308));zs=t,Oc.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return e}var Ur=null;function fg(t){Ur===null?Ur=[t]:Ur.push(t)}function Y1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,fg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Si(t,i)}function Si(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bi=!1;function mg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ir(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Si(t,n)}return r=i.interleaved,r===null?(e.next=e,fg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Si(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jp(t,n)}}function i0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fc(t,e,n,i){var r=t.updateQueue;Bi=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==a&&(c===null?p.firstBaseUpdate=f:c.next=f,p.lastBaseUpdate=h))}if(o!==null){var v=r.baseState;a=0,p=f=h=null,c=o;do{var y=c.lane,x=c.eventTime;if((i&y)===y){p!==null&&(p=p.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,k=c;switch(y=e,x=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){v=C.call(x,v,y);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,y=typeof C=="function"?C.call(x,v,y):C,y==null)break e;v=Ze({},v,y);break e;case 2:Bi=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[c]:y.push(c))}else x={eventTime:x,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(f=p=x,h=v):p=p.next=x,a|=y;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;y=c,c=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(!0);if(p===null&&(h=v),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);ts|=a,t.lanes=a,t.memoizedState=v}}function r0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(V(191,r));r.call(i)}}}var Pl={},Yn=xr(Pl),Ka=xr(Pl),Qa=xr(Pl);function $r(t){if(t===Pl)throw Error(V(174));return t}function pg(t,e){switch(ze(Qa,e),ze(Ka,t),ze(Yn,Pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dm(e,t)}Ve(Yn),ze(Yn,e)}function uo(){Ve(Yn),Ve(Ka),Ve(Qa)}function J1(t){$r(Qa.current);var e=$r(Yn.current),n=dm(e,t.type);e!==n&&(ze(Ka,t),ze(Yn,n))}function gg(t){Ka.current===t&&(Ve(Yn),Ve(Ka))}var Ke=xr(0);function zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function vg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var ac=Li.ReactCurrentDispatcher,xf=Li.ReactCurrentBatchConfig,es=0,Qe=null,mt=null,_t=null,Uc=!1,Na=!1,Ga=0,w2=0;function Lt(){throw Error(V(321))}function yg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function _g(t,e,n,i,r,o){if(es=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?k2:C2,t=n(i,r),Na){o=0;do{if(Na=!1,Ga=0,25<=o)throw Error(V(301));o+=1,_t=mt=null,e.updateQueue=null,ac.current=T2,t=n(i,r)}while(Na)}if(ac.current=$c,e=mt!==null&&mt.next!==null,es=0,_t=mt=Qe=null,Uc=!1,e)throw Error(V(300));return t}function wg(){var t=Ga!==0;return Ga=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Qe.memoizedState=_t=t:_t=_t.next=t,_t}function Tn(){if(mt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=_t===null?Qe.memoizedState:_t.next;if(e!==null)_t=e,mt=t;else{if(t===null)throw Error(V(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},_t===null?Qe.memoizedState=_t=t:_t=_t.next=t}return _t}function Za(t,e){return typeof e=="function"?e(t):e}function Sf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=mt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=a=null,h=null,f=o;do{var p=f.lane;if((es&p)===p)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var v={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=v,a=i):h=h.next=v,Qe.lanes|=p,ts|=p}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=c,Rn(i,e.memoizedState)||(en=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Qe.lanes|=o,ts|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ef(t){var e=Tn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Rn(o,e.memoizedState)||(en=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function eS(){}function tS(t,e){var n=Qe,i=Tn(),r=e(),o=!Rn(i.memoizedState,r);if(o&&(i.memoizedState=r,en=!0),i=i.queue,xg(rS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Ya(9,iS.bind(null,n,i,r,e),void 0,null),wt===null)throw Error(V(349));es&30||nS(n,e,r)}return r}function nS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iS(t,e,n,i){e.value=n,e.getSnapshot=i,sS(e)&&oS(t)}function rS(t,e,n){return n(function(){sS(e)&&oS(t)})}function sS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function oS(t){var e=Si(t,1);e!==null&&Dn(e,t,1,-1)}function s0(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:t},e.queue=t,t=t.dispatch=E2.bind(null,Qe,t),[e.memoizedState,t]}function Ya(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function aS(){return Tn().memoizedState}function lc(t,e,n,i){var r=Hn();Qe.flags|=t,r.memoizedState=Ya(1|e,n,void 0,i===void 0?null:i)}function bh(t,e,n,i){var r=Tn();i=i===void 0?null:i;var o=void 0;if(mt!==null){var a=mt.memoizedState;if(o=a.destroy,i!==null&&yg(i,a.deps)){r.memoizedState=Ya(e,n,o,i);return}}Qe.flags|=t,r.memoizedState=Ya(1|e,n,o,i)}function o0(t,e){return lc(8390656,8,t,e)}function xg(t,e){return bh(2048,8,t,e)}function lS(t,e){return bh(4,2,t,e)}function uS(t,e){return bh(4,4,t,e)}function cS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hS(t,e,n){return n=n!=null?n.concat([t]):null,bh(4,4,cS.bind(null,e,t),n)}function Sg(){}function dS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&yg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&yg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function mS(t,e,n){return es&21?(Rn(n,e)||(n=_1(),Qe.lanes|=n,ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=n)}function x2(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var i=xf.transition;xf.transition={};try{t(!1),e()}finally{je=n,xf.transition=i}}function pS(){return Tn().memoizedState}function S2(t,e,n){var i=sr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gS(t))vS(e,n);else if(n=Y1(t,e,n,i),n!==null){var r=Kt();Dn(n,t,i,r),yS(n,e,i)}}function E2(t,e,n){var i=sr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gS(t))vS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(r.hasEagerState=!0,r.eagerState=c,Rn(c,a)){var h=e.interleaved;h===null?(r.next=r,fg(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=Y1(t,e,r,i),n!==null&&(r=Kt(),Dn(n,t,i,r),yS(n,e,i))}}function gS(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function vS(t,e){Na=Uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Jp(t,n)}}var $c={readContext:Cn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},k2={readContext:Cn,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lc(4194308,4,cS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Hn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=S2.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:s0,useDebugValue:Sg,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=s0(!1),e=t[0];return t=x2.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=Hn();if(He){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),wt===null)throw Error(V(349));es&30||nS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,o0(rS.bind(null,i,o,t),[t]),i.flags|=2048,Ya(9,iS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Hn(),e=wt.identifierPrefix;if(He){var n=mi,i=fi;n=(i&~(1<<32-An(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=w2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C2={readContext:Cn,useCallback:dS,useContext:Cn,useEffect:xg,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:uS,useMemo:fS,useReducer:Sf,useRef:aS,useState:function(){return Sf(Za)},useDebugValue:Sg,useDeferredValue:function(t){var e=Tn();return mS(e,mt.memoizedState,t)},useTransition:function(){var t=Sf(Za)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:eS,useSyncExternalStore:tS,useId:pS,unstable_isNewReconciler:!1},T2={readContext:Cn,useCallback:dS,useContext:Cn,useEffect:xg,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:uS,useMemo:fS,useReducer:Ef,useRef:aS,useState:function(){return Ef(Za)},useDebugValue:Sg,useDeferredValue:function(t){var e=Tn();return mt===null?e.memoizedState=t:mS(e,mt.memoizedState,t)},useTransition:function(){var t=Ef(Za)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:eS,useSyncExternalStore:tS,useId:pS,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Am(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ih={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Kt(),r=sr(t),o=_i(i,r);o.payload=e,n!=null&&(o.callback=n),e=ir(t,o,r),e!==null&&(Dn(e,t,r,i),oc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Kt(),r=sr(t),o=_i(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ir(t,o,r),e!==null&&(Dn(e,t,r,i),oc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),i=sr(t),r=_i(n,i);r.tag=2,e!=null&&(r.callback=e),e=ir(t,r,i),e!==null&&(Dn(e,t,i,n),oc(e,t,i))}};function a0(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Va(n,i)||!Va(r,o):!0}function _S(t,e,n){var i=!1,r=mr,o=e.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(r=nn(e)?Xr:$t.current,i=e.contextTypes,o=(i=i!=null)?oo(t,r):mr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function l0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ih.enqueueReplaceState(e,e.state,null)}function Dm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},mg(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Cn(o):(o=nn(e)?Xr:$t.current,r.context=oo(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Am(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ih.enqueueReplaceState(r,r.state,null),Fc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var n="",i=e;do n+=eI(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function kf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N2=typeof WeakMap=="function"?WeakMap:Map;function wS(t,e,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Vc||(Vc=!0,Hm=i),jm(t,e)},n}function xS(t,e,n){n=_i(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){jm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof i!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function u0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new N2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=$2.bind(null,t,e,n),e.then(t,t))}function c0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_i(-1,1),e.tag=2,ir(n,e,1))),n.lanes|=1),t)}var b2=Li.ReactCurrentOwner,en=!1;function Ht(t,e,n,i){e.child=t===null?Z1(e,null,n,i):lo(e,t.child,n,i)}function d0(t,e,n,i,r){n=n.render;var o=e.ref;return Gs(e,r),i=_g(t,e,n,i,o,r),n=wg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ei(t,e,r)):(He&&n&&ag(e),e.flags|=1,Ht(t,e,i,r),e.child)}function f0(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Pg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SS(t,e,o,i,r)):(t=dc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(a,i)&&t.ref===e.ref)return Ei(t,e,r)}return e.flags|=1,t=or(o,i),t.ref=e.ref,t.return=e,e.child=t}function SS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Va(o,i)&&t.ref===e.ref)if(en=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(en=!0);else return e.lanes=t.lanes,Ei(t,e,r)}return Rm(t,e,n,i,r)}function ES(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze($s,an),an|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze($s,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ze($s,an),an|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,ze($s,an),an|=i;return Ht(t,e,r,n),e.child}function kS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,n,i,r){var o=nn(n)?Xr:$t.current;return o=oo(e,o),Gs(e,r),n=_g(t,e,n,i,o,r),i=wg(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ei(t,e,r)):(He&&i&&ag(e),e.flags|=1,Ht(t,e,n,r),e.child)}function m0(t,e,n,i,r){if(nn(n)){var o=!0;Ac(e)}else o=!1;if(Gs(e,r),e.stateNode===null)uc(t,e),_S(e,n,i),Dm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Cn(f):(f=nn(n)?Xr:$t.current,f=oo(e,f));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==i||h!==f)&&l0(e,a,i,f),Bi=!1;var y=e.memoizedState;a.state=y,Fc(e,i,a,r),h=e.memoizedState,c!==i||y!==h||tn.current||Bi?(typeof p=="function"&&(Am(e,n,p,i),h=e.memoizedState),(c=Bi||a0(e,n,c,i,y,h,f))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,X1(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:Pn(e.type,c),a.props=f,v=e.pendingProps,y=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Cn(h):(h=nn(n)?Xr:$t.current,h=oo(e,h));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==v||y!==h)&&l0(e,a,i,h),Bi=!1,y=e.memoizedState,a.state=y,Fc(e,i,a,r);var C=e.memoizedState;c!==v||y!==C||tn.current||Bi?(typeof x=="function"&&(Am(e,n,x,i),C=e.memoizedState),(f=Bi||a0(e,n,f,i,y,C,h)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,C,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,C,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),a.props=i,a.state=C,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return Om(t,e,n,i,o,r)}function Om(t,e,n,i,r,o){kS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&J_(e,n,!1),Ei(t,e,o);i=e.stateNode,b2.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=lo(e,t.child,null,o),e.child=lo(e,null,c,o)):Ht(t,e,c,o),e.memoizedState=i.state,r&&J_(e,n,!0),e.child}function CS(t){var e=t.stateNode;e.pendingContext?X_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X_(t,e.context,!1),pg(t,e.containerInfo)}function p0(t,e,n,i,r){return ao(),ug(r),e.flags|=256,Ht(t,e,n,i),e.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function zm(t){return{baseLanes:t,cachePool:null,transitions:null}}function TS(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ze(Ke,r&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Lh(a,i,0,null),t=Gr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=zm(n),e.memoizedState=Fm,t):Eg(e,a));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return I2(t,e,a,i,c,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=or(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=or(c,o):(o=Gr(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?zm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Fm,i}return o=t.child,t=o.sibling,i=or(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Eg(t,e){return e=Lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fu(t,e,n,i){return i!==null&&ug(i),lo(e,t.child,null,n),t=Eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I2(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=kf(Error(V(422))),Fu(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Lh({mode:"visible",children:i.children},r,0,null),o=Gr(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&lo(e,t.child,null,a),e.child.memoizedState=zm(a),e.memoizedState=Fm,o);if(!(e.mode&1))return Fu(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(V(419)),i=kf(o,i,void 0),Fu(t,e,a,i)}if(c=(a&t.childLanes)!==0,en||c){if(i=wt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Si(t,r),Dn(i,t,r,-1))}return Ig(),i=kf(Error(V(421))),Fu(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=B2.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ln=nr(r.nextSibling),cn=e,He=!0,Ln=null,t!==null&&(wn[xn++]=fi,wn[xn++]=mi,wn[xn++]=Jr,fi=t.id,mi=t.overflow,Jr=e),e=Eg(e,i.children),e.flags|=4096,e)}function g0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Lm(t.return,e,n)}function Cf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function NS(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ht(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,n,e);else if(t.tag===19)g0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&zc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Cf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&zc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Cf(e,!0,n,null,o);break;case"together":Cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ei(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P2(t,e,n){switch(e.tag){case 3:CS(e),ao();break;case 5:J1(e);break;case 1:nn(e.type)&&Ac(e);break;case 4:pg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ze(Rc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?TS(t,e,n):(ze(Ke,Ke.current&1),t=Ei(t,e,n),t!==null?t.sibling:null);ze(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return NS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,ES(t,e,n)}return Ei(t,e,n)}var bS,Um,IS,PS;bS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};IS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,$r(Yn.current);var o=null;switch(n){case"input":r=lm(t,r),i=lm(t,i),o=[];break;case"select":r=Ze({},r,{value:void 0}),i=Ze({},i,{value:void 0}),o=[];break;case"textarea":r=hm(t,r),i=hm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Mc)}fm(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ra.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ra.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ue("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};PS=function(t,e,n,i){n!==i&&(e.flags|=4)};function ra(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function M2(t,e,n){var i=e.pendingProps;switch(lg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return nn(e.type)&&Lc(),At(e),null;case 3:return i=e.stateNode,uo(),Ve(tn),Ve($t),vg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(Qm(Ln),Ln=null))),Um(t,e),At(e),null;case 5:gg(e);var r=$r(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)IS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(V(166));return At(e),null}if(t=$r(Yn.current),Ru(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Wn]=e,i[Wa]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(r=0;r<pa.length;r++)Ue(pa[r],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":C_(i,o),Ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",i);break;case"textarea":N_(i,o),Ue("invalid",i)}fm(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&ju(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&ju(i.textContent,c,t),r=["children",""+c]):Ra.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ue("scroll",i)}switch(n){case"input":Nu(i),T_(i,o,!0);break;case"textarea":Nu(i),b_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Mc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Wn]=e,t[Wa]=i,bS(t,e,!1,!1),e.stateNode=t;e:{switch(a=mm(n,i),n){case"dialog":Ue("cancel",t),Ue("close",t),r=i;break;case"iframe":case"object":case"embed":Ue("load",t),r=i;break;case"video":case"audio":for(r=0;r<pa.length;r++)Ue(pa[r],t);r=i;break;case"source":Ue("error",t),r=i;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),r=i;break;case"details":Ue("toggle",t),r=i;break;case"input":C_(t,i),r=lm(t,i),Ue("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ze({},i,{value:void 0}),Ue("invalid",t);break;case"textarea":N_(t,i),r=hm(t,i),Ue("invalid",t);break;default:r=i}fm(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?a1(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&s1(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Oa(t,h):typeof h=="number"&&Oa(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ra.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ue("scroll",t):h!=null&&Kp(t,o,h,a))}switch(n){case"input":Nu(t),T_(t,i,!1);break;case"textarea":Nu(t),b_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Hs(t,!!i.multiple,o,!1):i.defaultValue!=null&&Hs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)PS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(V(166));if(n=$r(Qa.current),$r(Yn.current),Ru(e)){if(i=e.stateNode,n=e.memoizedProps,i[Wn]=e,(o=i.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:ju(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ju(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Wn]=e,e.stateNode=i}return At(e),null;case 13:if(Ve(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&ln!==null&&e.mode&1&&!(e.flags&128))Q1(),ao(),e.flags|=98560,o=!1;else if(o=Ru(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(V(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(V(317));o[Wn]=e}else ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),o=!1}else Ln!==null&&(Qm(Ln),Ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?pt===0&&(pt=3):Ig())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return uo(),Um(t,e),t===null&&qa(e.stateNode.containerInfo),At(e),null;case 10:return dg(e.type._context),At(e),null;case 17:return nn(e.type)&&Lc(),At(e),null;case 19:if(Ve(Ke),o=e.memoizedState,o===null)return At(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)ra(o,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zc(t),a!==null){for(e.flags|=128,ra(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>ho&&(e.flags|=128,i=!0,ra(o,!1),e.lanes=4194304)}else{if(!i)if(t=zc(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ra(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!He)return At(e),null}else 2*st()-o.renderingStartTime>ho&&n!==1073741824&&(e.flags|=128,i=!0,ra(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Ke.current,ze(Ke,i?n&1|2:n&1),e):(At(e),null);case 22:case 23:return bg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?an&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function L2(t,e){switch(lg(e),e.tag){case 1:return nn(e.type)&&Lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uo(),Ve(tn),Ve($t),vg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gg(e),null;case 13:if(Ve(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Ke),null;case 4:return uo(),null;case 10:return dg(e.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var zu=!1,jt=!1,A2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function $m(t,e,n){try{n()}catch(i){et(t,e,i)}}var v0=!1;function D2(t,e){if(km=bc,t=j1(),og(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,f=0,p=0,v=t,y=null;t:for(;;){for(var x;v!==n||r!==0&&v.nodeType!==3||(c=a+r),v!==o||i!==0&&v.nodeType!==3||(h=a+i),v.nodeType===3&&(a+=v.nodeValue.length),(x=v.firstChild)!==null;)y=v,v=x;for(;;){if(v===t)break t;if(y===n&&++f===r&&(c=a),y===o&&++p===i&&(h=a),(x=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=x}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cm={focusedElem:t,selectionRange:n},bc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,T=C.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:Pn(e.type,k),T);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(I){et(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=v0,v0=!1,C}function ba(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&$m(e,n,o)}r=r.next}while(r!==i)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Bm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MS(t){var e=t.alternate;e!==null&&(t.alternate=null,MS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Wa],delete e[bm],delete e[g2],delete e[v2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LS(t){return t.tag===5||t.tag===3||t.tag===4}function y0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(i!==4&&(t=t.child,t!==null))for(Vm(t,e,n),t=t.sibling;t!==null;)Vm(t,e,n),t=t.sibling}function qm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}var kt=null,Mn=!1;function Fi(t,e,n){for(n=n.child;n!==null;)AS(t,e,n),n=n.sibling}function AS(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Sh,n)}catch{}switch(n.tag){case 5:jt||Us(n,e);case 6:var i=kt,r=Mn;kt=null,Fi(t,e,n),kt=i,Mn=r,kt!==null&&(Mn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Mn?(t=kt,n=n.stateNode,t.nodeType===8?yf(t.parentNode,n):t.nodeType===1&&yf(t,n),$a(t)):yf(kt,n.stateNode));break;case 4:i=kt,r=Mn,kt=n.stateNode.containerInfo,Mn=!0,Fi(t,e,n),kt=i,Mn=r;break;case 0:case 11:case 14:case 15:if(!jt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&$m(n,e,a),r=r.next}while(r!==i)}Fi(t,e,n);break;case 1:if(!jt&&(Us(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){et(n,e,c)}Fi(t,e,n);break;case 21:Fi(t,e,n);break;case 22:n.mode&1?(jt=(i=jt)||n.memoizedState!==null,Fi(t,e,n),jt=i):Fi(t,e,n);break;default:Fi(t,e,n)}}function _0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A2),e.forEach(function(i){var r=V2.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Mn=!1;break e;case 3:kt=c.stateNode.containerInfo,Mn=!0;break e;case 4:kt=c.stateNode.containerInfo,Mn=!0;break e}c=c.return}if(kt===null)throw Error(V(160));AS(o,a,r),kt=null,Mn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){et(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DS(e,t),e=e.sibling}function DS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),qn(t),i&4){try{ba(3,t,t.return),Ph(3,t)}catch(k){et(t,t.return,k)}try{ba(5,t,t.return)}catch(k){et(t,t.return,k)}}break;case 1:In(e,t),qn(t),i&512&&n!==null&&Us(n,n.return);break;case 5:if(In(e,t),qn(t),i&512&&n!==null&&Us(n,n.return),t.flags&32){var r=t.stateNode;try{Oa(r,"")}catch(k){et(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&n1(r,o),mm(c,a);var f=mm(c,o);for(a=0;a<h.length;a+=2){var p=h[a],v=h[a+1];p==="style"?a1(r,v):p==="dangerouslySetInnerHTML"?s1(r,v):p==="children"?Oa(r,v):Kp(r,p,v,f)}switch(c){case"input":um(r,o);break;case"textarea":i1(r,o);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Hs(r,!!o.multiple,x,!1):y!==!!o.multiple&&(o.defaultValue!=null?Hs(r,!!o.multiple,o.defaultValue,!0):Hs(r,!!o.multiple,o.multiple?[]:"",!1))}r[Wa]=o}catch(k){et(t,t.return,k)}}break;case 6:if(In(e,t),qn(t),i&4){if(t.stateNode===null)throw Error(V(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){et(t,t.return,k)}}break;case 3:if(In(e,t),qn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(e.containerInfo)}catch(k){et(t,t.return,k)}break;case 4:In(e,t),qn(t);break;case 13:In(e,t),qn(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Tg=st())),i&4&&_0(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(f=jt)||p,In(e,t),jt=f):In(e,t),qn(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for(Y=t,p=t.child;p!==null;){for(v=Y=p;Y!==null;){switch(y=Y,x=y.child,y.tag){case 0:case 11:case 14:case 15:ba(4,y,y.return);break;case 1:Us(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){et(i,n,k)}}break;case 5:Us(y,y.return);break;case 22:if(y.memoizedState!==null){x0(v);continue}}x!==null?(x.return=y,Y=x):x0(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{r=v.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=v.stateNode,h=v.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=o1("display",a))}catch(k){et(t,t.return,k)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(k){et(t,t.return,k)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:In(e,t),qn(t),i&4&&_0(t);break;case 21:break;default:In(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LS(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Oa(r,""),i.flags&=-33);var o=y0(t);qm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,c=y0(t);Vm(t,c,a);break;default:throw Error(V(161))}}catch(h){et(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function j2(t,e,n){Y=t,jS(t)}function jS(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||zu;if(!a){var c=r.alternate,h=c!==null&&c.memoizedState!==null||jt;c=zu;var f=jt;if(zu=a,(jt=h)&&!f)for(Y=r;Y!==null;)a=Y,h=a.child,a.tag===22&&a.memoizedState!==null?S0(r):h!==null?(h.return=a,Y=h):S0(r);for(;o!==null;)Y=o,jS(o),o=o.sibling;Y=r,zu=c,jt=f}w0(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,Y=o):w0(t)}}function w0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Ph(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!jt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&r0(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&$a(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}jt||e.flags&512&&Bm(e)}catch(y){et(e,e.return,y)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function x0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function S0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(h){et(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){et(e,r,h)}}var o=e.return;try{Bm(e)}catch(h){et(e,o,h)}break;case 5:var a=e.return;try{Bm(e)}catch(h){et(e,a,h)}}}catch(h){et(e,e.return,h)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var R2=Math.ceil,Bc=Li.ReactCurrentDispatcher,kg=Li.ReactCurrentOwner,kn=Li.ReactCurrentBatchConfig,ke=0,wt=null,ct=null,Nt=0,an=0,$s=xr(0),pt=0,Xa=null,ts=0,Mh=0,Cg=0,Ia=null,Xt=null,Tg=0,ho=1/0,ci=null,Vc=!1,Hm=null,rr=null,Uu=!1,Zi=null,qc=0,Pa=0,Wm=null,cc=-1,hc=0;function Kt(){return ke&6?st():cc!==-1?cc:cc=st()}function sr(t){return t.mode&1?ke&2&&Nt!==0?Nt&-Nt:_2.transition!==null?(hc===0&&(hc=_1()),hc):(t=je,t!==0||(t=window.event,t=t===void 0?16:T1(t.type)),t):1}function Dn(t,e,n,i){if(50<Pa)throw Pa=0,Wm=null,Error(V(185));Nl(t,n,i),(!(ke&2)||t!==wt)&&(t===wt&&(!(ke&2)&&(Mh|=n),pt===4&&Hi(t,Nt)),rn(t,i),n===1&&ke===0&&!(e.mode&1)&&(ho=st()+500,Nh&&Sr()))}function rn(t,e){var n=t.callbackNode;_I(t,e);var i=Nc(t,t===wt?Nt:0);if(i===0)n!==null&&M_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&M_(n),e===1)t.tag===0?y2(E0.bind(null,t)):H1(E0.bind(null,t)),m2(function(){!(ke&6)&&Sr()}),n=null;else{switch(w1(i)){case 1:n=Xp;break;case 4:n=v1;break;case 16:n=Tc;break;case 536870912:n=y1;break;default:n=Tc}n=VS(n,RS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RS(t,e){if(cc=-1,hc=0,ke&6)throw Error(V(327));var n=t.callbackNode;if(Zs()&&t.callbackNode!==n)return null;var i=Nc(t,t===wt?Nt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Hc(t,i);else{e=i;var r=ke;ke|=2;var o=FS();(wt!==t||Nt!==e)&&(ci=null,ho=st()+500,Qr(t,e));do try{z2();break}catch(c){OS(t,c)}while(!0);hg(),Bc.current=o,ke=r,ct!==null?e=0:(wt=null,Nt=0,e=pt)}if(e!==0){if(e===2&&(r=_m(t),r!==0&&(i=r,e=Km(t,r))),e===1)throw n=Xa,Qr(t,0),Hi(t,i),rn(t,st()),n;if(e===6)Hi(t,i);else{if(r=t.current.alternate,!(i&30)&&!O2(r)&&(e=Hc(t,i),e===2&&(o=_m(t),o!==0&&(i=o,e=Km(t,o))),e===1))throw n=Xa,Qr(t,0),Hi(t,i),rn(t,st()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(V(345));case 2:Rr(t,Xt,ci);break;case 3:if(Hi(t,i),(i&130023424)===i&&(e=Tg+500-st(),10<e)){if(Nc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Kt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Nm(Rr.bind(null,t,Xt,ci),e);break}Rr(t,Xt,ci);break;case 4:if(Hi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-An(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*R2(i/1960))-i,10<i){t.timeoutHandle=Nm(Rr.bind(null,t,Xt,ci),i);break}Rr(t,Xt,ci);break;case 5:Rr(t,Xt,ci);break;default:throw Error(V(329))}}}return rn(t,st()),t.callbackNode===n?RS.bind(null,t):null}function Km(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=Hc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Qm(e)),t}function Qm(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function O2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Rn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hi(t,e){for(e&=~Cg,e&=~Mh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-An(e),i=1<<n;t[n]=-1,e&=~i}}function E0(t){if(ke&6)throw Error(V(327));Zs();var e=Nc(t,0);if(!(e&1))return rn(t,st()),null;var n=Hc(t,e);if(t.tag!==0&&n===2){var i=_m(t);i!==0&&(e=i,n=Km(t,i))}if(n===1)throw n=Xa,Qr(t,0),Hi(t,e),rn(t,st()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rr(t,Xt,ci),rn(t,st()),null}function Ng(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ho=st()+500,Nh&&Sr())}}function ns(t){Zi!==null&&Zi.tag===0&&!(ke&6)&&Zs();var e=ke;ke|=1;var n=kn.transition,i=je;try{if(kn.transition=null,je=1,t)return t()}finally{je=i,kn.transition=n,ke=e,!(ke&6)&&Sr()}}function bg(){an=$s.current,Ve($s)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f2(n)),ct!==null)for(n=ct.return;n!==null;){var i=n;switch(lg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lc();break;case 3:uo(),Ve(tn),Ve($t),vg();break;case 5:gg(i);break;case 4:uo();break;case 13:Ve(Ke);break;case 19:Ve(Ke);break;case 10:dg(i.type._context);break;case 22:case 23:bg()}n=n.return}if(wt=t,ct=t=or(t.current,null),Nt=an=e,pt=0,Xa=null,Cg=Mh=ts=0,Xt=Ia=null,Ur!==null){for(e=0;e<Ur.length;e++)if(n=Ur[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ur=null}return t}function OS(t,e){do{var n=ct;try{if(hg(),ac.current=$c,Uc){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Uc=!1}if(es=0,_t=mt=Qe=null,Na=!1,Ga=0,kg.current=null,n===null||n.return===null){pt=1,Xa=e,ct=null;break}e:{var o=t,a=n.return,c=n,h=e;if(e=Nt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,p=c,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=c0(a);if(x!==null){x.flags&=-257,h0(x,a,c,o,e),x.mode&1&&u0(o,f,e),e=x,h=f;var C=e.updateQueue;if(C===null){var k=new Set;k.add(h),e.updateQueue=k}else C.add(h);break e}else{if(!(e&1)){u0(o,f,e),Ig();break e}h=Error(V(426))}}else if(He&&c.mode&1){var T=c0(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),h0(T,a,c,o,e),ug(co(h,c));break e}}o=h=co(h,c),pt!==4&&(pt=2),Ia===null?Ia=[o]:Ia.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=wS(o,h,e);i0(o,E);break e;case 1:c=h;var _=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(rr===null||!rr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=xS(o,c,e);i0(o,I);break e}}o=o.return}while(o!==null)}US(n)}catch(M){e=M,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function FS(){var t=Bc.current;return Bc.current=$c,t===null?$c:t}function Ig(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(ts&268435455)&&!(Mh&268435455)||Hi(wt,Nt)}function Hc(t,e){var n=ke;ke|=2;var i=FS();(wt!==t||Nt!==e)&&(ci=null,Qr(t,e));do try{F2();break}catch(r){OS(t,r)}while(!0);if(hg(),ke=n,Bc.current=i,ct!==null)throw Error(V(261));return wt=null,Nt=0,pt}function F2(){for(;ct!==null;)zS(ct)}function z2(){for(;ct!==null&&!cI();)zS(ct)}function zS(t){var e=BS(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?US(t):ct=e,kg.current=null}function US(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=L2(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=M2(n,e,an),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function Rr(t,e,n){var i=je,r=kn.transition;try{kn.transition=null,je=1,U2(t,e,n,i)}finally{kn.transition=r,je=i}return null}function U2(t,e,n,i){do Zs();while(Zi!==null);if(ke&6)throw Error(V(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(wI(t,o),t===wt&&(ct=wt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uu||(Uu=!0,VS(Tc,function(){return Zs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var a=je;je=1;var c=ke;ke|=4,kg.current=null,D2(t,n),DS(n,t),o2(Cm),bc=!!km,Cm=km=null,t.current=n,j2(n),hI(),ke=c,je=a,kn.transition=o}else t.current=n;if(Uu&&(Uu=!1,Zi=t,qc=r),o=t.pendingLanes,o===0&&(rr=null),mI(n.stateNode),rn(t,st()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Vc)throw Vc=!1,t=Hm,Hm=null,t;return qc&1&&t.tag!==0&&Zs(),o=t.pendingLanes,o&1?t===Wm?Pa++:(Pa=0,Wm=t):Pa=0,Sr(),null}function Zs(){if(Zi!==null){var t=w1(qc),e=kn.transition,n=je;try{if(kn.transition=null,je=16>t?16:t,Zi===null)var i=!1;else{if(t=Zi,Zi=null,qc=0,ke&6)throw Error(V(331));var r=ke;for(ke|=4,Y=t.current;Y!==null;){var o=Y,a=o.child;if(Y.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(Y=f;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:ba(8,p,o)}var v=p.child;if(v!==null)v.return=p,Y=v;else for(;Y!==null;){p=Y;var y=p.sibling,x=p.return;if(MS(p),p===f){Y=null;break}if(y!==null){y.return=x,Y=y;break}Y=x}}}var C=o.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var T=k.sibling;k.sibling=null,k=T}while(k!==null)}}Y=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Y=a;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ba(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,Y=E;break e}Y=o.return}}var _=t.current;for(Y=_;Y!==null;){a=Y;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,Y=S;else e:for(a=_;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ph(9,c)}}catch(M){et(c,c.return,M)}if(c===a){Y=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,Y=I;break e}Y=c.return}}if(ke=r,Sr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Sh,t)}catch{}i=!0}return i}finally{je=n,kn.transition=e}}return!1}function k0(t,e,n){e=co(n,e),e=wS(t,e,1),t=ir(t,e,1),e=Kt(),t!==null&&(Nl(t,1,e),rn(t,e))}function et(t,e,n){if(t.tag===3)k0(t,t,n);else for(;e!==null;){if(e.tag===3){k0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rr===null||!rr.has(i))){t=co(n,t),t=xS(e,t,1),e=ir(e,t,1),t=Kt(),e!==null&&(Nl(e,1,t),rn(e,t));break}}e=e.return}}function $2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Nt&n)===n&&(pt===4||pt===3&&(Nt&130023424)===Nt&&500>st()-Tg?Qr(t,0):Cg|=n),rn(t,e)}function $S(t,e){e===0&&(t.mode&1?(e=Pu,Pu<<=1,!(Pu&130023424)&&(Pu=4194304)):e=1);var n=Kt();t=Si(t,e),t!==null&&(Nl(t,e,n),rn(t,n))}function B2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$S(t,n)}function V2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(e),$S(t,n)}var BS;BS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)en=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return en=!1,P2(t,e,n);en=!!(t.flags&131072)}else en=!1,He&&e.flags&1048576&&W1(e,jc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;uc(t,e),t=e.pendingProps;var r=oo(e,$t.current);Gs(e,n),r=_g(null,e,i,t,r,n);var o=wg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(i)?(o=!0,Ac(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mg(e),r.updater=Ih,e.stateNode=r,r._reactInternals=e,Dm(e,i,t,n),e=Om(null,e,i,!0,o,n)):(e.tag=0,He&&o&&ag(e),Ht(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(uc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=H2(i),t=Pn(i,t),r){case 0:e=Rm(null,e,i,t,n);break e;case 1:e=m0(null,e,i,t,n);break e;case 11:e=d0(null,e,i,t,n);break e;case 14:e=f0(null,e,i,Pn(i.type,t),n);break e}throw Error(V(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),Rm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),m0(t,e,i,r,n);case 3:e:{if(CS(e),t===null)throw Error(V(387));i=e.pendingProps,o=e.memoizedState,r=o.element,X1(t,e),Fc(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=co(Error(V(423)),e),e=p0(t,e,i,n,r);break e}else if(i!==r){r=co(Error(V(424)),e),e=p0(t,e,i,n,r);break e}else for(ln=nr(e.stateNode.containerInfo.firstChild),cn=e,He=!0,Ln=null,n=Z1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ao(),i===r){e=Ei(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 5:return J1(e),t===null&&Mm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Tm(i,r)?a=null:o!==null&&Tm(i,o)&&(e.flags|=32),kS(t,e),Ht(t,e,a,n),e.child;case 6:return t===null&&Mm(e),null;case 13:return TS(t,e,n);case 4:return pg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=lo(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),d0(t,e,i,r,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,ze(Rc,i._currentValue),i._currentValue=a,o!==null)if(Rn(o.value,a)){if(o.children===r.children&&!tn.current){e=Ei(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=_i(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?h.next=h:(h.next=p.next,p.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Lm(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(V(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Lm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ht(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Gs(e,n),r=Cn(r),i=i(r),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return i=e.type,r=Pn(i,e.pendingProps),r=Pn(i.type,r),f0(t,e,i,r,n);case 15:return SS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Pn(i,r),uc(t,e),e.tag=1,nn(i)?(t=!0,Ac(e)):t=!1,Gs(e,n),_S(e,i,r),Dm(e,i,r,n),Om(null,e,i,!0,t,n);case 19:return NS(t,e,n);case 22:return ES(t,e,n)}throw Error(V(156,e.tag))};function VS(t,e){return g1(t,e)}function q2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,i){return new q2(t,e,n,i)}function Pg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H2(t){if(typeof t=="function")return Pg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gp)return 11;if(t===Zp)return 14}return 2}function or(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dc(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")Pg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ms:return Gr(n.children,r,o,e);case Qp:a=8,r|=8;break;case rm:return t=En(12,n,e,r|2),t.elementType=rm,t.lanes=o,t;case sm:return t=En(13,n,e,r),t.elementType=sm,t.lanes=o,t;case om:return t=En(19,n,e,r),t.elementType=om,t.lanes=o,t;case Jx:return Lh(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yx:a=10;break e;case Xx:a=9;break e;case Gp:a=11;break e;case Zp:a=14;break e;case $i:a=16,i=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=En(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Gr(t,e,n,i){return t=En(7,t,i,e),t.lanes=n,t}function Lh(t,e,n,i){return t=En(22,t,i,e),t.elementType=Jx,t.lanes=n,t.stateNode={isHidden:!1},t}function Tf(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Nf(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W2(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Mg(t,e,n,i,r,o,a,c,h){return t=new W2(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=En(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mg(o),t}function K2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function qS(t){if(!t)return mr;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(nn(n))return q1(t,n,e)}return e}function HS(t,e,n,i,r,o,a,c,h){return t=Mg(n,i,!0,t,r,o,a,c,h),t.context=qS(null),n=t.current,i=Kt(),r=sr(n),o=_i(i,r),o.callback=e??null,ir(n,o,r),t.current.lanes=r,Nl(t,r,i),rn(t,i),t}function Ah(t,e,n,i){var r=e.current,o=Kt(),a=sr(r);return n=qS(n),e.context===null?e.context=n:e.pendingContext=n,e=_i(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ir(r,e,a),t!==null&&(Dn(t,r,a,o),oc(t,r,a)),a}function Wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lg(t,e){C0(t,e),(t=t.alternate)&&C0(t,e)}function Q2(){return null}var WS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ag(t){this._internalRoot=t}Dh.prototype.render=Ag.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Ah(t,e,null,null)};Dh.prototype.unmount=Ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Ah(null,t,null,null)}),e[xi]=null}};function Dh(t){this._internalRoot=t}Dh.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qi.length&&e!==0&&e<qi[n].priority;n++);qi.splice(n,0,t),n===0&&C1(t)}};function Dg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function G2(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Wc(a);o.call(f)}}var a=HS(e,i,t,0,null,!1,!1,"",T0);return t._reactRootContainer=a,t[xi]=a.current,qa(t.nodeType===8?t.parentNode:t),ns(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var f=Wc(h);c.call(f)}}var h=Mg(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=h,t[xi]=h.current,qa(t.nodeType===8?t.parentNode:t),ns(function(){Ah(e,h,n,i)}),h}function Rh(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var c=r;r=function(){var h=Wc(a);c.call(h)}}Ah(e,a,t,r)}else a=G2(n,e,t,r,i);return Wc(a)}x1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ma(e.pendingLanes);n!==0&&(Jp(e,n|1),rn(e,st()),!(ke&6)&&(ho=st()+500,Sr()))}break;case 13:ns(function(){var i=Si(t,1);if(i!==null){var r=Kt();Dn(i,t,1,r)}}),Lg(t,1)}};eg=function(t){if(t.tag===13){var e=Si(t,134217728);if(e!==null){var n=Kt();Dn(e,t,134217728,n)}Lg(t,134217728)}};S1=function(t){if(t.tag===13){var e=sr(t),n=Si(t,e);if(n!==null){var i=Kt();Dn(n,t,e,i)}Lg(t,e)}};E1=function(){return je};k1=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};gm=function(t,e,n){switch(e){case"input":if(um(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Th(i);if(!r)throw Error(V(90));t1(i),um(i,r)}}}break;case"textarea":i1(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};c1=Ng;h1=ns;var Z2={usingClientEntryPoint:!1,Events:[Il,js,Th,l1,u1,Ng]},sa={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y2={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=m1(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||Q2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{Sh=$u.inject(Y2),Zn=$u}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z2;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dg(e))throw Error(V(200));return K2(t,e,null,n)};mn.createRoot=function(t,e){if(!Dg(t))throw Error(V(299));var n=!1,i="",r=WS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Mg(t,1,!1,null,null,n,!1,i,r),t[xi]=e.current,qa(t.nodeType===8?t.parentNode:t),new Ag(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=m1(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return ns(t)};mn.hydrate=function(t,e,n){if(!jh(e))throw Error(V(200));return Rh(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!Dg(t))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=WS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=HS(e,null,t,1,n??null,r,!1,o,a),t[xi]=e.current,qa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Dh(e)};mn.render=function(t,e,n){if(!jh(e))throw Error(V(200));return Rh(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!jh(t))throw Error(V(40));return t._reactRootContainer?(ns(function(){Rh(null,null,t,!1,function(){t._reactRootContainer=null,t[xi]=null})}),!0):!1};mn.unstable_batchedUpdates=Ng;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!jh(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Rh(t,e,n,!1,i)};mn.version="18.3.1-next-f1338f8080-20240426";function KS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KS)}catch(t){console.error(t)}}KS(),Kx.exports=mn;var QS=Kx.exports,N0=QS;nm.createRoot=N0.createRoot,nm.hydrateRoot=N0.hydrateRoot;class bo{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Ja=typeof window>"u"||"Deno"in window;function _n(){}function X2(t,e){return typeof t=="function"?t(e):t}function Gm(t){return typeof t=="number"&&t>=0&&t!==1/0}function GS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ga(t,e,n){return Ml(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function J2(t,e,n){return Ml(t)?{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function Vi(t,e,n){return Ml(t)?[{...e,queryKey:t},n]:[t||{},e]}function b0(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:o,queryKey:a,stale:c}=t;if(Ml(a)){if(i){if(e.queryHash!==jg(a,e.options))return!1}else if(!Kc(e.queryKey,a))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||typeof r<"u"&&r!==e.state.fetchStatus||o&&!o(e))}function I0(t,e){const{exact:n,fetching:i,predicate:r,mutationKey:o}=t;if(Ml(o)){if(!e.options.mutationKey)return!1;if(n){if(Br(e.options.mutationKey)!==Br(o))return!1}else if(!Kc(e.options.mutationKey,o))return!1}return!(typeof i=="boolean"&&e.state.status==="loading"!==i||r&&!r(e))}function jg(t,e){return((e==null?void 0:e.queryKeyHashFn)||Br)(t)}function Br(t){return JSON.stringify(t,(e,n)=>Zm(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function Kc(t,e){return ZS(t,e)}function ZS(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ZS(t[n],e[n])):!1}function YS(t,e){if(t===e)return t;const n=P0(t)&&P0(e);if(n||Zm(t)&&Zm(e)){const i=n?t.length:Object.keys(t).length,r=n?e:Object.keys(e),o=r.length,a=n?[]:{};let c=0;for(let h=0;h<o;h++){const f=n?h:r[h];a[f]=YS(t[f],e[f]),a[f]===t[f]&&c++}return i===o&&c===i?t:a}return e}function Qc(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function P0(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zm(t){if(!M0(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!M0(n)||!n.hasOwnProperty("isPrototypeOf"))}function M0(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ml(t){return Array.isArray(t)}function XS(t){return new Promise(e=>{setTimeout(e,t)})}function L0(t){XS(0).then(t)}function eP(){if(typeof AbortController=="function")return new AbortController}function Ym(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?YS(t,e):e}class tP extends bo{constructor(){super(),this.setup=e=>{if(!Ja&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Gc=new tP,A0=["online","offline"];class nP extends bo{constructor(){super(),this.setup=e=>{if(!Ja&&window.addEventListener){const n=()=>e();return A0.forEach(i=>{window.addEventListener(i,n,!1)}),()=>{A0.forEach(i=>{window.removeEventListener(i,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setOnline(i):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Zc=new nP;function iP(t){return Math.min(1e3*2**t,3e4)}function Oh(t){return(t??"online")==="online"?Zc.isOnline():!0}class JS{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function fc(t){return t instanceof JS}function eE(t){let e=!1,n=0,i=!1,r,o,a;const c=new Promise((T,E)=>{o=T,a=E}),h=T=>{i||(x(new JS(T)),t.abort==null||t.abort())},f=()=>{e=!0},p=()=>{e=!1},v=()=>!Gc.isFocused()||t.networkMode!=="always"&&!Zc.isOnline(),y=T=>{i||(i=!0,t.onSuccess==null||t.onSuccess(T),r==null||r(),o(T))},x=T=>{i||(i=!0,t.onError==null||t.onError(T),r==null||r(),a(T))},C=()=>new Promise(T=>{r=E=>{const _=i||!v();return _&&T(E),_},t.onPause==null||t.onPause()}).then(()=>{r=void 0,i||t.onContinue==null||t.onContinue()}),k=()=>{if(i)return;let T;try{T=t.fn()}catch(E){T=Promise.reject(E)}Promise.resolve(T).then(y).catch(E=>{var _,S;if(i)return;const I=(_=t.retry)!=null?_:3,M=(S=t.retryDelay)!=null?S:iP,A=typeof M=="function"?M(n,E):M,j=I===!0||typeof I=="number"&&n<I||typeof I=="function"&&I(n,E);if(e||!j){x(E);return}n++,t.onFail==null||t.onFail(n,E),XS(A).then(()=>{if(v())return C()}).then(()=>{e?x(E):k()})})};return Oh(t.networkMode)?k():C().then(k),{promise:c,cancel:h,continue:()=>(r==null?void 0:r())?c:Promise.resolve(),cancelRetry:f,continueRetry:p}}const Rg=console;function rP(){let t=[],e=0,n=p=>{p()},i=p=>{p()};const r=p=>{let v;e++;try{v=p()}finally{e--,e||c()}return v},o=p=>{e?t.push(p):L0(()=>{n(p)})},a=p=>(...v)=>{o(()=>{p(...v)})},c=()=>{const p=t;t=[],p.length&&L0(()=>{i(()=>{p.forEach(v=>{n(v)})})})};return{batch:r,batchCalls:a,schedule:o,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{i=p}}}const tt=rP();class tE{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gm(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Ja?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class sP extends tE{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Rg,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||oP(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const i=Ym(this.state.data,e,this.options);return this.dispatch({data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const i=this.promise;return(n=this.retryer)==null||n.cancel(e),i?i.then(_n).catch(_n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!GS(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var i,r;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(C=>C.options.queryFn);x&&this.setOptions(x.options)}const a=eP(),c={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},h=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})};h(c);const f=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(c)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),p={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:f};if(h(p),(i=this.options.behavior)==null||i.onFetch(p),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((r=p.fetchOptions)==null?void 0:r.meta)){var v;this.dispatch({type:"fetch",meta:(v=p.fetchOptions)==null?void 0:v.meta})}const y=x=>{if(fc(x)&&x.silent||this.dispatch({type:"error",error:x}),!fc(x)){var C,k,T,E;(C=(k=this.cache.config).onError)==null||C.call(k,x,this),(T=(E=this.cache.config).onSettled)==null||T.call(E,this.state.data,x,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=eE({fn:p.fetchFn,abort:a==null?void 0:a.abort.bind(a),onSuccess:x=>{var C,k,T,E;if(typeof x>"u"){y(new Error(this.queryHash+" data is undefined"));return}this.setData(x),(C=(k=this.cache.config).onSuccess)==null||C.call(k,x,this),(T=(E=this.cache.config).onSettled)==null||T.call(E,x,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:y,onFail:(x,C)=>{this.dispatch({type:"failed",failureCount:x,error:C})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=i=>{var r,o;switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(r=e.meta)!=null?r:null,fetchStatus:Oh(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return fc(a)&&a.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),tt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function oP(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class aP extends bo{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,i){var r;const o=n.queryKey,a=(r=n.queryHash)!=null?r:jg(o,n);let c=this.get(a);return c||(c=new sP({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(o)}),this.add(c)),c}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(i=>i!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){tt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[i]=Vi(e,n);return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(r=>b0(i,r))}findAll(e,n){const[i]=Vi(e,n);return Object.keys(i).length>0?this.queries.filter(r=>b0(i,r)):this.queries}notify(e){tt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){tt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){tt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class lP extends tE{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Rg,this.observers=[],this.state=e.state||nE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var j;return this.retryer=eE({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(O,J)=>{this.dispatch({type:"failed",failureCount:O,error:J})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(j=this.options.retry)!=null?j:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var i,r,o,a,c,h,f,p;if(!n){var v,y,x,C;this.dispatch({type:"loading",variables:this.options.variables}),await((v=(y=this.mutationCache.config).onMutate)==null?void 0:v.call(y,this.state.variables,this));const O=await((x=(C=this.options).onMutate)==null?void 0:x.call(C,this.state.variables));O!==this.state.context&&this.dispatch({type:"loading",context:O,variables:this.state.variables})}const j=await e();return await((i=(r=this.mutationCache.config).onSuccess)==null?void 0:i.call(r,j,this.state.variables,this.state.context,this)),await((o=(a=this.options).onSuccess)==null?void 0:o.call(a,j,this.state.variables,this.state.context)),await((c=(h=this.mutationCache.config).onSettled)==null?void 0:c.call(h,j,null,this.state.variables,this.state.context,this)),await((f=(p=this.options).onSettled)==null?void 0:f.call(p,j,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:j}),j}catch(j){try{var k,T,E,_,S,I,M,A;throw await((k=(T=this.mutationCache.config).onError)==null?void 0:k.call(T,j,this.state.variables,this.state.context,this)),await((E=(_=this.options).onError)==null?void 0:E.call(_,j,this.state.variables,this.state.context)),await((S=(I=this.mutationCache.config).onSettled)==null?void 0:S.call(I,void 0,j,this.state.variables,this.state.context,this)),await((M=(A=this.options).onSettled)==null?void 0:M.call(A,void 0,j,this.state.variables,this.state.context)),j}finally{this.dispatch({type:"error",error:j})}}}dispatch(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"loading":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Oh(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...i,...e.state}}};this.state=n(this.state),tt.batch(()=>{this.observers.forEach(i=>{i.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function nE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class uP extends bo{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,i){const r=new lP({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:i,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){tt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>I0(e,n))}findAll(e){return this.mutations.filter(n=>I0(e,n))}notify(e){tt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(i=>i.state.isPaused);return tt.batch(()=>n.reduce((i,r)=>i.then(()=>r.continue().catch(_n)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function cP(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,i,r,o,a;const c=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,h=(i=t.fetchOptions)==null||(r=i.meta)==null?void 0:r.fetchMore,f=h==null?void 0:h.pageParam,p=(h==null?void 0:h.direction)==="forward",v=(h==null?void 0:h.direction)==="backward",y=((o=t.state.data)==null?void 0:o.pages)||[],x=((a=t.state.data)==null?void 0:a.pageParams)||[];let C=x,k=!1;const T=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>{var j;if((j=t.signal)!=null&&j.aborted)k=!0;else{var O;(O=t.signal)==null||O.addEventListener("abort",()=>{k=!0})}return t.signal}})},E=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),_=(A,j,O,J)=>(C=J?[j,...C]:[...C,j],J?[O,...A]:[...A,O]),S=(A,j,O,J)=>{if(k)return Promise.reject("Cancelled");if(typeof O>"u"&&!j&&A.length)return Promise.resolve(A);const Q={queryKey:t.queryKey,pageParam:O,meta:t.options.meta};T(Q);const ne=E(Q);return Promise.resolve(ne).then(Ie=>_(A,O,Ie,J))};let I;if(!y.length)I=S([]);else if(p){const A=typeof f<"u",j=A?f:D0(t.options,y);I=S(y,A,j)}else if(v){const A=typeof f<"u",j=A?f:hP(t.options,y);I=S(y,A,j,!0)}else{C=[];const A=typeof t.options.getNextPageParam>"u";I=(c&&y[0]?c(y[0],0,y):!0)?S([],A,x[0]):Promise.resolve(_([],x[0],y[0]));for(let O=1;O<y.length;O++)I=I.then(J=>{if(c&&y[O]?c(y[O],O,y):!0){const ne=A?x[O]:D0(t.options,J);return S(J,A,ne)}return Promise.resolve(_(J,x[O],y[O]))})}return I.then(A=>({pages:A,pageParams:C}))}}}}function D0(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function hP(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class dP{constructor(e={}){this.queryCache=e.queryCache||new aP,this.mutationCache=e.mutationCache||new uP,this.logger=e.logger||Rg,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Gc.subscribe(()=>{Gc.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Zc.subscribe(()=>{Zc.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[i]=Vi(e,n);return i.fetchStatus="fetching",this.queryCache.findAll(i).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state.data}ensureQueryData(e,n,i){const r=ga(e,n,i),o=this.getQueryData(r.queryKey);return o?Promise.resolve(o):this.fetchQuery(r)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:i})=>{const r=i.data;return[n,r]})}setQueryData(e,n,i){const r=this.queryCache.find(e),o=r==null?void 0:r.state.data,a=X2(n,o);if(typeof a>"u")return;const c=ga(e),h=this.defaultQueryOptions(c);return this.queryCache.build(this,h).setData(a,{...i,manual:!0})}setQueriesData(e,n,i){return tt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,n,i)]))}getQueryState(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state}removeQueries(e,n){const[i]=Vi(e,n),r=this.queryCache;tt.batch(()=>{r.findAll(i).forEach(o=>{r.remove(o)})})}resetQueries(e,n,i){const[r,o]=Vi(e,n,i),a=this.queryCache,c={type:"active",...r};return tt.batch(()=>(a.findAll(r).forEach(h=>{h.reset()}),this.refetchQueries(c,o)))}cancelQueries(e,n,i){const[r,o={}]=Vi(e,n,i);typeof o.revert>"u"&&(o.revert=!0);const a=tt.batch(()=>this.queryCache.findAll(r).map(c=>c.cancel(o)));return Promise.all(a).then(_n).catch(_n)}invalidateQueries(e,n,i){const[r,o]=Vi(e,n,i);return tt.batch(()=>{var a,c;if(this.queryCache.findAll(r).forEach(f=>{f.invalidate()}),r.refetchType==="none")return Promise.resolve();const h={...r,type:(a=(c=r.refetchType)!=null?c:r.type)!=null?a:"active"};return this.refetchQueries(h,o)})}refetchQueries(e,n,i){const[r,o]=Vi(e,n,i),a=tt.batch(()=>this.queryCache.findAll(r).filter(h=>!h.isDisabled()).map(h=>{var f;return h.fetch(void 0,{...o,cancelRefetch:(f=o==null?void 0:o.cancelRefetch)!=null?f:!0,meta:{refetchPage:r.refetchPage}})}));let c=Promise.all(a).then(_n);return o!=null&&o.throwOnError||(c=c.catch(_n)),c}fetchQuery(e,n,i){const r=ga(e,n,i),o=this.defaultQueryOptions(r);typeof o.retry>"u"&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,n,i){return this.fetchQuery(e,n,i).then(_n).catch(_n)}fetchInfiniteQuery(e,n,i){const r=ga(e,n,i);return r.behavior=cP(),this.fetchQuery(r)}prefetchInfiniteQuery(e,n,i){return this.fetchInfiniteQuery(e,n,i).then(_n).catch(_n)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const i=this.queryDefaults.find(r=>Br(e)===Br(r.queryKey));i?i.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(i=>Kc(e,i.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const i=this.mutationDefaults.find(r=>Br(e)===Br(r.mutationKey));i?i.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(i=>Kc(e,i.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=jg(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class fP extends bo{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),j0(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xm(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xm(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const i=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Qc(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();const o=this.hasListeners();o&&R0(this.currentQuery,r,this.options,i)&&this.executeFetch(),this.updateResult(n),o&&(this.currentQuery!==r||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();o&&(this.currentQuery!==r||this.options.enabled!==i.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),i=this.createResult(n,e);return pP(this,i,e)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),e[i])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),i=this.client.getQueryCache().build(this.client,n);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(_n)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),Ja||this.currentResult.isStale||!Gm(this.options.staleTime))return;const n=GS(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Ja||this.options.enabled===!1||!Gm(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Gc.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const i=this.currentQuery,r=this.options,o=this.currentResult,a=this.currentResultState,c=this.currentResultOptions,h=e!==i,f=h?e.state:this.currentQueryInitialState,p=h?this.currentResult:this.previousQueryResult,{state:v}=e;let{dataUpdatedAt:y,error:x,errorUpdatedAt:C,fetchStatus:k,status:T}=v,E=!1,_=!1,S;if(n._optimisticResults){const O=this.hasListeners(),J=!O&&j0(e,n),Q=O&&R0(e,i,n,r);(J||Q)&&(k=Oh(e.options.networkMode)?"fetching":"paused",y||(T="loading")),n._optimisticResults==="isRestoring"&&(k="idle")}if(n.keepPreviousData&&!v.dataUpdatedAt&&p!=null&&p.isSuccess&&T!=="error")S=p.data,y=p.dataUpdatedAt,T=p.status,E=!0;else if(n.select&&typeof v.data<"u")if(o&&v.data===(a==null?void 0:a.data)&&n.select===this.selectFn)S=this.selectResult;else try{this.selectFn=n.select,S=n.select(v.data),S=Ym(o==null?void 0:o.data,S,n),this.selectResult=S,this.selectError=null}catch(O){this.selectError=O}else S=v.data;if(typeof n.placeholderData<"u"&&typeof S>"u"&&T==="loading"){let O;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(c==null?void 0:c.placeholderData))O=o.data;else if(O=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof O<"u")try{O=n.select(O),this.selectError=null}catch(J){this.selectError=J}typeof O<"u"&&(T="success",S=Ym(o==null?void 0:o.data,O,n),_=!0)}this.selectError&&(x=this.selectError,S=this.selectResult,C=Date.now(),T="error");const I=k==="fetching",M=T==="loading",A=T==="error";return{status:T,fetchStatus:k,isLoading:M,isSuccess:T==="success",isError:A,isInitialLoading:M&&I,data:S,dataUpdatedAt:y,error:x,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>f.dataUpdateCount||v.errorUpdateCount>f.errorUpdateCount,isFetching:I,isRefetching:I&&!M,isLoadingError:A&&v.dataUpdatedAt===0,isPaused:k==="paused",isPlaceholderData:_,isPreviousData:E,isRefetchError:A&&v.dataUpdatedAt!==0,isStale:Og(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Qc(i,n))return;this.currentResult=i;const r={cache:!0},o=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,c=typeof a=="function"?a():a;if(c==="all"||!c&&!this.trackedProps.size)return!0;const h=new Set(c??this.trackedProps);return this.options.useErrorBoundary&&h.add("error"),Object.keys(this.currentResult).some(f=>{const p=f;return this.currentResult[p]!==n[p]&&h.has(p)})};(e==null?void 0:e.listeners)!==!1&&o()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!fc(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){tt.batch(()=>{if(e.onSuccess){var n,i,r,o;(n=(i=this.options).onSuccess)==null||n.call(i,this.currentResult.data),(r=(o=this.options).onSettled)==null||r.call(o,this.currentResult.data,null)}else if(e.onError){var a,c,h,f;(a=(c=this.options).onError)==null||a.call(c,this.currentResult.error),(h=(f=this.options).onSettled)==null||h.call(f,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function mP(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function j0(t,e){return mP(t,e)||t.state.dataUpdatedAt>0&&Xm(t,e,e.refetchOnMount)}function Xm(t,e,n){if(e.enabled!==!1){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&Og(t,e)}return!1}function R0(t,e,n,i){return n.enabled!==!1&&(t!==e||i.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Og(t,n)}function Og(t,e){return t.isStaleByTime(e.staleTime)}function pP(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!Qc(t.getCurrentResult(),e)}let gP=class extends bo{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const i=this.options;this.options=this.client.defaultMutationOptions(e),Qc(i,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:nE(),n=e.status==="loading",i={...e,isLoading:n,isPending:n,isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=i}notify(e){tt.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,i,r,o;(n=(i=this.mutateOptions).onSuccess)==null||n.call(i,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(r=(o=this.mutateOptions).onSettled)==null||r.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var a,c,h,f;(a=(c=this.mutateOptions).onError)==null||a.call(c,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(h=(f=this.mutateOptions).onSettled)==null||h.call(f,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}};var iE={exports:{}},rE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=b;function vP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yP=typeof Object.is=="function"?Object.is:vP,_P=fo.useState,wP=fo.useEffect,xP=fo.useLayoutEffect,SP=fo.useDebugValue;function EP(t,e){var n=e(),i=_P({inst:{value:n,getSnapshot:e}}),r=i[0].inst,o=i[1];return xP(function(){r.value=n,r.getSnapshot=e,bf(r)&&o({inst:r})},[t,n,e]),wP(function(){return bf(r)&&o({inst:r}),t(function(){bf(r)&&o({inst:r})})},[t]),SP(n),n}function bf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yP(t,n)}catch{return!0}}function kP(t,e){return e()}var CP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kP:EP;rE.useSyncExternalStore=fo.useSyncExternalStore!==void 0?fo.useSyncExternalStore:CP;iE.exports=rE;var TP=iE.exports;const sE=TP.useSyncExternalStore,O0=b.createContext(void 0),oE=b.createContext(!1);function aE(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=O0),window.ReactQueryClientContext):O0)}const sn=({context:t}={})=>{const e=b.useContext(aE(t,b.useContext(oE)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},NP=({client:t,children:e,context:n,contextSharing:i=!1})=>{b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const r=aE(n,i);return b.createElement(oE.Provider,{value:!n&&i},b.createElement(r.Provider,{value:t},e))},lE=b.createContext(!1),bP=()=>b.useContext(lE);lE.Provider;function IP(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const PP=b.createContext(IP()),MP=()=>b.useContext(PP);function uE(t,e){return typeof t=="function"?t(...e):!!t}const LP=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},AP=t=>{b.useEffect(()=>{t.clearReset()},[t])},DP=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&uE(n,[t.error,i]),jP=t=>{t.suspense&&(typeof t.staleTime!="number"&&(t.staleTime=1e3),typeof t.cacheTime=="number"&&(t.cacheTime=Math.max(t.cacheTime,1e3)))},RP=(t,e)=>t.isLoading&&t.isFetching&&!e,OP=(t,e,n)=>(t==null?void 0:t.suspense)&&RP(e,n),FP=(t,e,n)=>e.fetchOptimistic(t).then(({data:i})=>{t.onSuccess==null||t.onSuccess(i),t.onSettled==null||t.onSettled(i,null)}).catch(i=>{n.clearReset(),t.onError==null||t.onError(i),t.onSettled==null||t.onSettled(void 0,i)});function zP(t,e){const n=sn({context:t.context}),i=bP(),r=MP(),o=n.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",o.onError&&(o.onError=tt.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=tt.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=tt.batchCalls(o.onSettled)),jP(o),LP(o,r),AP(r);const[a]=b.useState(()=>new e(n,o)),c=a.getOptimisticResult(o);if(sE(b.useCallback(h=>{const f=i?()=>{}:a.subscribe(tt.batchCalls(h));return a.updateResult(),f},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),b.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),OP(o,c,i))throw FP(o,a,r);if(DP({result:c,errorResetBoundary:r,useErrorBoundary:o.useErrorBoundary,query:a.getCurrentQuery()}))throw c.error;return o.notifyOnChangeProps?c:a.trackResult(c)}function De(t,e,n){const i=ga(t,e,n);return zP(i,fP)}function we(t,e,n){const i=J2(t,e),r=sn({context:i.context}),[o]=b.useState(()=>new gP(r,i));b.useEffect(()=>{o.setOptions(i)},[o,i]);const a=sE(b.useCallback(h=>o.subscribe(tt.batchCalls(h)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),c=b.useCallback((h,f)=>{o.mutate(h,f).catch(UP)},[o]);if(a.error&&uE(o.options.useErrorBoundary,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}function UP(){}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},el.apply(this,arguments)}var Yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yi||(Yi={}));const F0="popstate";function $P(t){t===void 0&&(t={});function e(i,r){let{pathname:o,search:a,hash:c}=i.location;return Jm("",{pathname:o,search:a,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Yc(r)}return VP(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BP(){return Math.random().toString(36).substr(2,8)}function z0(t,e){return{usr:t.state,key:t.key,idx:e}}function Jm(t,e,n,i){return n===void 0&&(n=null),el({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Io(e):e,{state:n,key:e&&e.key||i||BP()})}function Yc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function VP(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,c=Yi.Pop,h=null,f=p();f==null&&(f=0,a.replaceState(el({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function v(){c=Yi.Pop;let T=p(),E=T==null?null:T-f;f=T,h&&h({action:c,location:k.location,delta:E})}function y(T,E){c=Yi.Push;let _=Jm(k.location,T,E);f=p()+1;let S=z0(_,f),I=k.createHref(_);try{a.pushState(S,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(I)}o&&h&&h({action:c,location:k.location,delta:1})}function x(T,E){c=Yi.Replace;let _=Jm(k.location,T,E);f=p();let S=z0(_,f),I=k.createHref(_);a.replaceState(S,"",I),o&&h&&h({action:c,location:k.location,delta:0})}function C(T){let E=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof T=="string"?T:Yc(T);return _=_.replace(/ $/,"%20"),Ge(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let k={get action(){return c},get location(){return t(r,a)},listen(T){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(F0,v),h=T,()=>{r.removeEventListener(F0,v),h=null}},createHref(T){return e(r,T)},createURL:C,encodeLocation(T){let E=C(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(T){return a.go(T)}};return k}var U0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(U0||(U0={}));function qP(t,e,n){return n===void 0&&(n="/"),HP(t,e,n)}function HP(t,e,n,i){let r=typeof e=="string"?Io(e):e,o=mo(r.pathname||"/",n);if(o==null)return null;let a=cE(t);WP(a);let c=null;for(let h=0;c==null&&h<a.length;++h){let f=iM(o);c=tM(a[h],f)}return c}function cE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(Ge(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=ar([i,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),cE(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:JP(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,a);else for(let h of hE(o.path))r(o,a,h)}),e}function hE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=hE(i.join("/")),c=[];return c.push(...a.map(h=>h===""?o:[o,h].join("/"))),r&&c.push(...a),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function WP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eM(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const KP=/^:[\w-]+$/,QP=3,GP=2,ZP=1,YP=10,XP=-2,$0=t=>t==="*";function JP(t,e){let n=t.split("/"),i=n.length;return n.some($0)&&(i+=XP),e&&(i+=GP),n.filter(r=>!$0(r)).reduce((r,o)=>r+(KP.test(o)?QP:o===""?ZP:YP),i)}function eM(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function tM(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let c=0;c<i.length;++c){let h=i[c],f=c===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",v=ep({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),y=h.route;if(!v)return null;Object.assign(r,v.params),a.push({params:r,pathname:ar([o,v.pathname]),pathnameBase:lM(ar([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=ar([o,v.pathnameBase]))}return a}function ep(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=nM(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((f,p,v)=>{let{paramName:y,isOptional:x}=p;if(y==="*"){let k=c[v]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const C=c[v];return x&&!C?f[y]=void 0:f[y]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function nM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function iM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const rM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sM=t=>rM.test(t);function oM(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Io(t):t,o;if(n)if(sM(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Fg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=B0(n.substring(1),"/"):o=B0(n,e)}else o=e;return{pathname:o,search:uM(i),hash:cM(r)}}function B0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function If(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(t,e){let n=aM(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Ug(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Io(t):(r=el({},t),Ge(!r.pathname||!r.pathname.includes("?"),If("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),If("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),If("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,c;if(a==null)c=n;else{let v=e.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),v-=1;r.pathname=y.join("/")}c=v>=0?e[v]:"/"}let h=oM(r,c),f=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const ar=t=>t.join("/").replace(/\/\/+/g,"/"),lM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dE=["post","put","patch","delete"];new Set(dE);const dM=["get",...dE];new Set(dM);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tl.apply(this,arguments)}const Fh=b.createContext(null),fE=b.createContext(null),Ai=b.createContext(null),zh=b.createContext(null),Er=b.createContext({outlet:null,matches:[],isDataRoute:!1}),mE=b.createContext(null);function fM(t,e){let{relative:n}=e===void 0?{}:e;Po()||Ge(!1);let{basename:i,navigator:r}=b.useContext(Ai),{hash:o,pathname:a,search:c}=Uh(t,{relative:n}),h=a;return i!=="/"&&(h=a==="/"?i:ar([i,a])),r.createHref({pathname:h,search:c,hash:o})}function Po(){return b.useContext(zh)!=null}function kr(){return Po()||Ge(!1),b.useContext(zh).location}function pE(t){b.useContext(Ai).static||b.useLayoutEffect(t)}function $g(){let{isDataRoute:t}=b.useContext(Er);return t?TM():mM()}function mM(){Po()||Ge(!1);let t=b.useContext(Fh),{basename:e,future:n,navigator:i}=b.useContext(Ai),{matches:r}=b.useContext(Er),{pathname:o}=kr(),a=JSON.stringify(zg(r,n.v7_relativeSplatPath)),c=b.useRef(!1);return pE(()=>{c.current=!0}),b.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){i.go(f);return}let v=Ug(f,JSON.parse(a),o,p.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ar([e,v.pathname])),(p.replace?i.replace:i.push)(v,p.state,p)},[e,i,a,o,t])}function Uh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=b.useContext(Ai),{matches:r}=b.useContext(Er),{pathname:o}=kr(),a=JSON.stringify(zg(r,i.v7_relativeSplatPath));return b.useMemo(()=>Ug(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function pM(t,e){return gM(t,e)}function gM(t,e,n,i){Po()||Ge(!1);let{navigator:r}=b.useContext(Ai),{matches:o}=b.useContext(Er),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let f=kr(),p;if(e){var v;let T=typeof e=="string"?Io(e):e;h==="/"||(v=T.pathname)!=null&&v.startsWith(h)||Ge(!1),p=T}else p=f;let y=p.pathname||"/",x=y;if(h!=="/"){let T=h.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=qP(t,{pathname:x}),k=xM(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:ar([h,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:ar([h,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,i);return e&&k?b.createElement(zh.Provider,{value:{location:tl({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Yi.Pop}},k):k}function vM(){let t=CM(),e=hM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,null)}const yM=b.createElement(vM,null);class _M extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Er.Provider,{value:this.props.routeContext},b.createElement(mE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wM(t){let{routeContext:e,match:n,children:i}=t,r=b.useContext(Fh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Er.Provider,{value:e},i)}function xM(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(r=n)==null?void 0:r.errors;if(c!=null){let p=a.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);p>=0||Ge(!1),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<a.length;p++){let v=a[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=p),v.route.id){let{loaderData:y,errors:x}=n,C=v.route.loader&&y[v.route.id]===void 0&&(!x||x[v.route.id]===void 0);if(v.route.lazy||C){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,v,y)=>{let x,C=!1,k=null,T=null;n&&(x=c&&v.route.id?c[v.route.id]:void 0,k=v.route.errorElement||yM,h&&(f<0&&y===0?(NM("route-fallback"),C=!0,T=null):f===y&&(C=!0,T=v.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,y+1)),_=()=>{let S;return x?S=k:C?S=T:v.route.Component?S=b.createElement(v.route.Component,null):v.route.element?S=v.route.element:S=p,b.createElement(wM,{match:v,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:S})};return n&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?b.createElement(_M,{location:n.location,revalidation:n.revalidation,component:k,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var gE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gE||{}),vE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vE||{});function SM(t){let e=b.useContext(Fh);return e||Ge(!1),e}function EM(t){let e=b.useContext(fE);return e||Ge(!1),e}function kM(t){let e=b.useContext(Er);return e||Ge(!1),e}function yE(t){let e=kM(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function CM(){var t;let e=b.useContext(mE),n=EM(),i=yE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function TM(){let{router:t}=SM(gE.UseNavigateStable),e=yE(vE.UseNavigateStable),n=b.useRef(!1);return pE(()=>{n.current=!0}),b.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,tl({fromRouteId:e},o)))},[t,e])}const V0={};function NM(t,e,n){V0[t]||(V0[t]=!0)}function bM(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function IM(t){let{to:e,replace:n,state:i,relative:r}=t;Po()||Ge(!1);let{future:o,static:a}=b.useContext(Ai),{matches:c}=b.useContext(Er),{pathname:h}=kr(),f=$g(),p=Ug(e,zg(c,o.v7_relativeSplatPath),h,r==="path"),v=JSON.stringify(p);return b.useEffect(()=>f(JSON.parse(v),{replace:n,state:i,relative:r}),[f,v,r,n,i]),null}function ui(t){Ge(!1)}function PM(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Yi.Pop,navigator:o,static:a=!1,future:c}=t;Po()&&Ge(!1);let h=e.replace(/^\/*/,"/"),f=b.useMemo(()=>({basename:h,navigator:o,static:a,future:tl({v7_relativeSplatPath:!1},c)}),[h,c,o,a]);typeof i=="string"&&(i=Io(i));let{pathname:p="/",search:v="",hash:y="",state:x=null,key:C="default"}=i,k=b.useMemo(()=>{let T=mo(p,h);return T==null?null:{location:{pathname:T,search:v,hash:y,state:x,key:C},navigationType:r}},[h,p,v,y,x,C,r]);return k==null?null:b.createElement(Ai.Provider,{value:f},b.createElement(zh.Provider,{children:n,value:k}))}function q0(t){let{children:e,location:n}=t;return pM(tp(e),n)}new Promise(()=>{});function tp(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(i,r)=>{if(!b.isValidElement(i))return;let o=[...e,r];if(i.type===b.Fragment){n.push.apply(n,tp(i.props.children,o));return}i.type!==ui&&Ge(!1),!i.props.index||!i.props.children||Ge(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=tp(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xc.apply(this,arguments)}function _E(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function MM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LM(t,e){return t.button===0&&(!e||e==="_self")&&!MM(t)}const AM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DM=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jM="6";try{window.__reactRouterVersion=jM}catch{}const RM=b.createContext({isTransitioning:!1}),OM="startTransition",H0=$b[OM];function FM(t){let{basename:e,children:n,future:i,window:r}=t,o=b.useRef();o.current==null&&(o.current=$P({window:r,v5Compat:!0}));let a=o.current,[c,h]=b.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},p=b.useCallback(v=>{f&&H0?H0(()=>h(v)):h(v)},[h,f]);return b.useLayoutEffect(()=>a.listen(p),[a,p]),b.useEffect(()=>bM(i),[i]),b.createElement(PM,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:i})}const zM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,va=b.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:o,replace:a,state:c,target:h,to:f,preventScrollReset:p,viewTransition:v}=e,y=_E(e,AM),{basename:x}=b.useContext(Ai),C,k=!1;if(typeof f=="string"&&UM.test(f)&&(C=f,zM))try{let S=new URL(window.location.href),I=f.startsWith("//")?new URL(S.protocol+f):new URL(f),M=mo(I.pathname,x);I.origin===S.origin&&M!=null?f=M+I.search+I.hash:k=!0}catch{}let T=fM(f,{relative:r}),E=VM(f,{replace:a,state:c,target:h,preventScrollReset:p,relative:r,viewTransition:v});function _(S){i&&i(S),S.defaultPrevented||E(S)}return b.createElement("a",Xc({},y,{href:C||T,onClick:k||o?i:_,ref:n,target:h}))}),$M=b.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:o="",end:a=!1,style:c,to:h,viewTransition:f,children:p}=e,v=_E(e,DM),y=Uh(h,{relative:v.relative}),x=kr(),C=b.useContext(fE),{navigator:k,basename:T}=b.useContext(Ai),E=C!=null&&qM(y)&&f===!0,_=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,S=x.pathname,I=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(S=S.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&T&&(I=mo(I,T)||I);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=S===_||!a&&S.startsWith(_)&&S.charAt(M)==="/",j=I!=null&&(I===_||!a&&I.startsWith(_)&&I.charAt(_.length)==="/"),O={isActive:A,isPending:j,isTransitioning:E},J=A?i:void 0,Q;typeof o=="function"?Q=o(O):Q=[o,A?"active":null,j?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ne=typeof c=="function"?c(O):c;return b.createElement(va,Xc({},v,{"aria-current":J,className:Q,ref:n,style:ne,to:h,viewTransition:f}),typeof p=="function"?p(O):p)});var np;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(np||(np={}));var W0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(W0||(W0={}));function BM(t){let e=b.useContext(Fh);return e||Ge(!1),e}function VM(t,e){let{target:n,replace:i,state:r,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,h=$g(),f=kr(),p=Uh(t,{relative:a});return b.useCallback(v=>{if(LM(v,n)){v.preventDefault();let y=i!==void 0?i:Yc(f)===Yc(p);h(t,{replace:y,state:r,preventScrollReset:o,relative:a,viewTransition:c})}},[f,h,p,i,r,n,t,o,a,c])}function qM(t,e){e===void 0&&(e={});let n=b.useContext(RM);n==null&&Ge(!1);let{basename:i}=BM(np.useViewTransitionState),r=Uh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=mo(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=mo(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ep(r.pathname,a)!=null||ep(r.pathname,o)!=null}var K0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,c=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let y=(c&15)<<2|f>>6,x=f&63;h||(x=64,a||(y=64)),i.push(n[p],n[v],n[y],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new WM;const y=o<<2|c>>4;if(i.push(y),f!==64){const x=c<<4&240|f>>2;if(i.push(x),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KM=function(t){const e=wE(t);return xE.encodeByteArray(e,!0)},SE=function(t){return KM(t).replace(/\./g,"")},EE=function(t){try{return xE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=()=>QM().__FIREBASE_DEFAULTS__,ZM=()=>{if(typeof process>"u"||typeof K0>"u")return;const t=K0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EE(t[1]);return e&&JSON.parse(e)},Bg=()=>{try{return GM()||ZM()||YM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XM=t=>{var e,n;return(n=(e=Bg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kE=()=>{var t;return(t=Bg())===null||t===void 0?void 0:t.config},CE=t=>{var e;return(e=Bg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function tL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iL(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rL(){try{return typeof indexedDB=="object"}catch{return!1}}function sL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL="FirebaseError";class Di extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=oL,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?aL(o,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new Di(r,c,i)}}function aL(t,e){return t.replace(lL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const lL=/\{\$([^}]+)}/g;function uL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Q0(o)&&Q0(a)){if(!nl(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Q0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cL(t,e){const n=new hL(t,e);return n.subscribe.bind(n)}class hL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Pf),r.error===void 0&&(r.error=Pf),r.complete===void 0&&(r.complete=Pf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new JM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pL(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mL(t){return t===Or?void 0:t}function pL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const vL={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},yL=Ne.INFO,_L={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},wL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_L[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vg{constructor(e){this.name=e,this._logLevel=yL,this._logHandler=wL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const xL=(t,e)=>e.some(n=>t instanceof n);let G0,Z0;function SL(){return G0||(G0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EL(){return Z0||(Z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TE=new WeakMap,ip=new WeakMap,NE=new WeakMap,Mf=new WeakMap,qg=new WeakMap;function kL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(lr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&TE.set(n,t)}).catch(()=>{}),qg.set(e,t),e}function CL(t){if(ip.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});ip.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TL(t){rp=t(rp)}function NL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lf(this),e,...n);return NE.set(i,e.sort?e.sort():[e]),lr(i)}:EL().includes(t)?function(...e){return t.apply(Lf(this),e),lr(TE.get(this))}:function(...e){return lr(t.apply(Lf(this),e))}}function bL(t){return typeof t=="function"?NL(t):(t instanceof IDBTransaction&&CL(t),xL(t,SL())?new Proxy(t,rp):t)}function lr(t){if(t instanceof IDBRequest)return kL(t);if(Mf.has(t))return Mf.get(t);const e=bL(t);return e!==t&&(Mf.set(t,e),qg.set(e,t)),e}const Lf=t=>qg.get(t);function IL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),c=lr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(lr(a.result),h.oldVersion,h.newVersion,lr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const PL=["get","getKey","getAll","getAllKeys","count"],ML=["put","add","delete","clear"],Af=new Map;function Y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Af.get(e))return Af.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=ML.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||PL.includes(n)))return;const o=async function(a,...c){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return Af.set(e,o),o}TL(t=>({...t,get:(e,n,i)=>Y0(e,n)||t.get(e,n,i),has:(e,n)=>!!Y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function AL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",X0="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Vg("@firebase/app"),DL="@firebase/app-compat",jL="@firebase/analytics-compat",RL="@firebase/analytics",OL="@firebase/app-check-compat",FL="@firebase/app-check",zL="@firebase/auth",UL="@firebase/auth-compat",$L="@firebase/database",BL="@firebase/database-compat",VL="@firebase/functions",qL="@firebase/functions-compat",HL="@firebase/installations",WL="@firebase/installations-compat",KL="@firebase/messaging",QL="@firebase/messaging-compat",GL="@firebase/performance",ZL="@firebase/performance-compat",YL="@firebase/remote-config",XL="@firebase/remote-config-compat",JL="@firebase/storage",eA="@firebase/storage-compat",tA="@firebase/firestore",nA="@firebase/firestore-compat",iA="firebase",rA="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",sA={[sp]:"fire-core",[DL]:"fire-core-compat",[RL]:"fire-analytics",[jL]:"fire-analytics-compat",[FL]:"fire-app-check",[OL]:"fire-app-check-compat",[zL]:"fire-auth",[UL]:"fire-auth-compat",[$L]:"fire-rtdb",[BL]:"fire-rtdb-compat",[VL]:"fire-fn",[qL]:"fire-fn-compat",[HL]:"fire-iid",[WL]:"fire-iid-compat",[KL]:"fire-fcm",[QL]:"fire-fcm-compat",[GL]:"fire-perf",[ZL]:"fire-perf-compat",[YL]:"fire-rc",[XL]:"fire-rc-compat",[JL]:"fire-gcs",[eA]:"fire-gcs-compat",[tA]:"fire-fst",[nA]:"fire-fst-compat","fire-js":"fire-js",[iA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new Map,ap=new Map;function oA(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function po(t){const e=t.name;if(ap.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,t);for(const n of il.values())oA(n,t);return!0}function Hg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ur=new Ll("app","Firebase",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=rA;function bE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ur.create("bad-app-name",{appName:String(r)});if(n||(n=kE()),!n)throw ur.create("no-options");const o=il.get(r);if(o){if(nl(n,o.options)&&nl(i,o.config))return o;throw ur.create("duplicate-app",{appName:r})}const a=new gL(r);for(const h of ap.values())a.addComponent(h);const c=new lA(n,i,a);return il.set(r,c),c}function uA(t=op){const e=il.get(t);if(!e&&t===op&&kE())return bE();if(!e)throw ur.create("no-app",{appName:t});return e}function J0(){return Array.from(il.values())}function cr(t,e,n){var i;let r=(i=sA[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(c.join(" "));return}po(new is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebase-heartbeat-database",hA=1,rl="firebase-heartbeat-store";let Df=null;function IE(){return Df||(Df=IL(cA,hA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(rl)}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Df}async function dA(t){try{return await(await IE()).transaction(rl).objectStore(rl).get(PE(t))}catch(e){if(e instanceof Di)rs.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(n.message)}}}async function ew(t,e){try{const i=(await IE()).transaction(rl,"readwrite");await i.objectStore(rl).put(e,PE(t)),await i.done}catch(n){if(n instanceof Di)rs.warn(n.message);else{const i=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rs.warn(i.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=1024,mA=30*24*60*60*1e3;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=mA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tw(),{heartbeatsToSend:n,unsentEntries:i}=gA(this._heartbeatsCache.heartbeats),r=SE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function tw(){return new Date().toISOString().substring(0,10)}function gA(t,e=fA){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),nw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),nw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rL()?sL().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await dA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return ew(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nw(t){return SE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){po(new is("platform-logger",e=>new LL(e),"PRIVATE")),po(new is("heartbeat",e=>new pA(e),"PRIVATE")),cr(sp,X0,t),cr(sp,X0,"esm2017"),cr("fire-js","")}yA("");var _A="firebase",wA="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(_A,wA,"app");function Wg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ME(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xA=ME,LE=new Ll("auth","Firebase",ME());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Vg("@firebase/auth");function SA(t,...e){Jc.logLevel<=Ne.WARN&&Jc.warn(`Auth (${Mo}): ${t}`,...e)}function mc(t,...e){Jc.logLevel<=Ne.ERROR&&Jc.error(`Auth (${Mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw Kg(t,...e)}function Xn(t,...e){return Kg(t,...e)}function AE(t,e,n){const i=Object.assign(Object.assign({},xA()),{[e]:n});return new Ll("auth","Firebase",i).create(e,{appName:t.name})}function EA(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ti(t,"argument-error"),AE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return LE.create(t,...e)}function de(t,e,...n){if(!t)throw Kg(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function ki(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kA(){return iw()==="http:"||iw()==="https:"}function iw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kA()||tL()||"connection"in navigator)?navigator.onLine:!0}function TA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=eL()||nL()}get(){return CA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Dl(3e4,6e4);function jE(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jl(t,e,n,i,r={}){return RE(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const c=Al(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),DE.fetch()(OE(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function RE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},NA),e);try{const r=new PA(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Bu(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bu(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Bu(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Bu(t,"user-disabled",a);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AE(t,p,f);ti(t,p)}}catch(r){if(r instanceof Di)throw r;ti(t,"network-request-failed",{message:String(r)})}}async function IA(t,e,n,i,r={}){const o=await jl(t,e,n,i,r);return"mfaPendingCredential"in o&&ti(t,"multi-factor-auth-required",{_serverResponse:o}),o}function OE(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Qg(t.config,r):`${t.config.apiScheme}://${r}`}class PA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),bA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Xn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return jl(t,"POST","/v1/accounts:delete",e)}async function LA(t,e){return jl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AA(t,e=!1){const n=Pt(t),i=await n.getIdToken(e),r=Gg(i);de(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Ma(jf(r.auth_time)),issuedAtTime:Ma(jf(r.iat)),expirationTime:Ma(jf(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function Gg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const r=EE(n);return r?JSON.parse(r):(mc("Failed to decode base64 JWT payload"),null)}catch(r){return mc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function DA(t){const e=Gg(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Di&&jA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function jA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ma(this.lastLoginAt),this.creationTime=Ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await sl(t,LA(n,{idToken:i}));de(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?zA(o.providerUserInfo):[],c=FA(t.providerData,a),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=h?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new FE(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function OA(t){const e=Pt(t);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FA(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function zA(t){return t.map(e=>{var{providerId:n}=e,i=Wg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e){const n=await RE(t,{},async()=>{const i=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=OE(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",DE.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await UA(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new ol;return i&&(de(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(de(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(de(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new FE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await sl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AA(this,e)}reload(){return OA(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await eh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await sl(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,c,h,f,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,x=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,T=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,E=(f=n.createdAt)!==null&&f!==void 0?f:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:I,isAnonymous:M,providerData:A,stsTokenManager:j}=n;de(S&&j,e,"internal-error");const O=ol.fromJSON(this.name,j);de(typeof S=="string",e,"internal-error"),zi(v,e.name),zi(y,e.name),de(typeof I=="boolean",e,"internal-error"),de(typeof M=="boolean",e,"internal-error"),zi(x,e.name),zi(C,e.name),zi(k,e.name),zi(T,e.name),zi(E,e.name),zi(_,e.name);const J=new Zr({uid:S,auth:e,email:y,emailVerified:I,displayName:v,isAnonymous:M,photoURL:C,phoneNumber:x,tenantId:k,stsTokenManager:O,createdAt:E,lastLoginAt:_});return A&&Array.isArray(A)&&(J.providerData=A.map(Q=>Object.assign({},Q))),T&&(J._redirectEventId=T),J}static async _fromIdTokenResponse(e,n,i=!1){const r=new ol;r.updateFromServerResponse(n);const o=new Zr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await eh(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;function gi(t){ki(t instanceof Function,"Expected a class definition");let e=rw.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zE.type="NONE";const sw=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ys{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=pc(this.userKey,r.apiKey,o),this.fullPersistenceKey=pc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ys(gi(sw),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||gi(sw);const a=pc(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(a);if(p){const v=Zr._fromJSON(e,p);f!==o&&(c=v),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ys(o,e,i):(o=h[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ys(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qE(e))return"Blackberry";if(HE(e))return"Webos";if(Zg(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(VE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function UE(t=Bt()){return/firefox\//i.test(t)}function Zg(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(t=Bt()){return/crios\//i.test(t)}function BE(t=Bt()){return/iemobile/i.test(t)}function VE(t=Bt()){return/android/i.test(t)}function qE(t=Bt()){return/blackberry/i.test(t)}function HE(t=Bt()){return/webos/i.test(t)}function $h(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $A(t=Bt()){var e;return $h(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BA(){return iL()&&document.documentMode===10}function WE(t=Bt()){return $h(t)||VE(t)||HE(t)||qE(t)||/windows phone/i.test(t)||BE(t)}function VA(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e=[]){let n;switch(t){case"Browser":n=ow(Bt());break;case"Worker":n=`${ow(Bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${i}`}async function QE(t,e){return jl(t,"GET","/v2/recaptchaConfig",jE(t,e))}function aw(t){return t!==void 0&&t.enterprise!==void 0}class GE{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function ZE(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Xn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",qA().appendChild(i)})}function HA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const WA="https://www.google.com/recaptcha/enterprise.js?render=",KA="recaptcha-enterprise",QA="NO_RECAPTCHA";class GA{constructor(e){this.type=KA,this.auth=Rl(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{QE(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new GE(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(h=>{c(h)})})}function r(o,a,c){const h=window.grecaptcha;aw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(QA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(c=>{if(!n&&aw(window.grecaptcha))r(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}ZE(WA+c).then(()=>{r(c,o,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,c)=>{try{const h=e(o);a(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lw(this),this.idTokenSubscription=new lw(this),this.beforeStateQueue=new ZA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ys.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Pt(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}async initializeRecaptchaConfig(){const e=await QE(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new GE(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new GA(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gi(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Ys.create(this,[gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return de(a,this,"internal-error"),a.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rl(t){return Pt(t)}class lw{constructor(e){this.auth=e,this.observer=null,this.addObserver=cL(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){const n=Hg(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(nl(o,e??{}))return r;ti(r,"already-initialized")}return n.initialize({options:e})}function JA(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function eD(t,e,n){const i=Rl(t);de(i._canInitEmulator,i,"emulator-config-failed"),de(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=YE(e),{host:a,port:c}=tD(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${a}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),nD()}function YE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tD(t){const e=YE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:uw(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:uw(a)}}}function uw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return IA(t,"POST","/v1/accounts:signInWithIdp",jE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="http://localhost";class ss extends XE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Wg(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new ss(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Xs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:iD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Al(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Ol{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return di.credential(n,i)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Ol{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Ol{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Qi.credential(n,i)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Zr._fromIdTokenResponse(e,i,r),a=cw(i);return new go({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=cw(i);return new go({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function cw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends Di{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,th.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new th(e,n,i,r)}}function JE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?th._fromErrorAndOperation(t,o,e,i):o})}async function rD(t,e,n=!1){const i=await sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return go._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await sl(t,JE(i,r,e,t),n);de(o.idToken,i,"internal-error");const a=Gg(o.idToken);de(a,i,"internal-error");const{sub:c}=a;return de(t.uid===c,i,"user-mismatch"),go._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ti(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e,n=!1){const i="signIn",r=await JE(t,i,e),o=await go._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function aD(t,e,n,i){return Pt(t).onIdTokenChanged(e,n,i)}function lD(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function ek(t,e,n,i){return Pt(t).onAuthStateChanged(e,n,i)}function uD(t){return Pt(t).signOut()}const nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nh,"1"),this.storage.removeItem(nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(){const t=Bt();return Zg(t)||$h(t)}const hD=1e3,dD=10;class nk extends tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=cD()&&VA(),this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);BA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,dD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nk.type="LOCAL";const fD=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ik.type="SESSION";const rk=ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Bh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(a).map(async f=>f(n.origin,o)),h=await mD(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((c,h)=>{const f=Xg("",20);r.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(v){const y=v;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function gD(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function vD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _D(){return sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="firebaseLocalStorageDb",wD=1,ih="firebaseLocalStorage",ak="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vh(t,e){return t.transaction([ih],e?"readwrite":"readonly").objectStore(ih)}function xD(){const t=indexedDB.deleteDatabase(ok);return new Fl(t).toPromise()}function up(){const t=indexedDB.open(ok,wD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ih,{keyPath:ak})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ih)?e(i):(i.close(),await xD(),e(await up()))})})}async function hw(t,e,n){const i=Vh(t,!0).put({[ak]:e,value:n});return new Fl(i).toPromise()}async function SD(t,e){const n=Vh(t,!1).get(e),i=await new Fl(n).toPromise();return i===void 0?null:i.value}function dw(t,e){const n=Vh(t,!0).delete(e);return new Fl(n).toPromise()}const ED=800,kD=3;class lk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(_D()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vD(),!this.activeServiceWorker)return;this.sender=new pD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await hw(e,nh,"1"),await dw(e,nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>hw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>SD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Vh(r,!1).getAll();return new Fl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ED)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lk.type="LOCAL";const CD=lk;new Dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){return e?gi(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends XE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TD(t){return oD(t.auth,new Jg(t),t.bypassAuthState)}function ND(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),sD(n,new Jg(t),t.bypassAuthState)}async function bD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),rD(n,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return bD;case"reauthViaPopup":case"reauthViaRedirect":return ND;default:ti(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Dl(2e3,1e4);async function PD(t,e,n){const i=Rl(t);EA(t,e,Yg);const r=uk(i,n);return new Vr(i,"signInViaPopup",e,r).executeNotNull()}class Vr extends ck{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Vr.currentPopupAction&&Vr.currentPopupAction.cancel(),Vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ID.get())};e()}}Vr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="pendingRedirect",gc=new Map;class LD extends ck{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const i=await AD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AD(t,e){const n=RD(e),i=jD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function DD(t,e){gc.set(t._key(),e)}function jD(t){return gi(t._redirectPersistence)}function RD(t){return pc(MD,t.config.apiKey,t.name)}async function OD(t,e,n=!1){const i=Rl(t),r=uk(i,e),a=await new LD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=10*60*1e3;class zD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!hk(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FD&&this.cachedEventUids.clear(),this.cachedEventUids.has(fw(e))}saveEventToCache(e){this.cachedEventUids.add(fw(e)),this.lastProcessedEventTime=Date.now()}}function fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e={}){return jl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VD=/^https?/;async function qD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $D(t);for(const n of e)try{if(HD(n))return}catch{}ti(t,"unauthorized-domain")}function HD(t){const e=lp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!VD.test(n))return!1;if(BD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Dl(3e4,6e4);function mw(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KD(t){return new Promise((e,n)=>{var i,r,o;function a(){mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mw(),n(Xn(t,"network-request-failed"))},timeout:WD.get()})}if(!((r=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)a();else{const c=HA("iframefcb");return Jn()[c]=()=>{gapi.load?a():n(Xn(t,"network-request-failed"))},ZE(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw vc=null,e})}let vc=null;function QD(t){return vc=vc||KD(t),vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new Dl(5e3,15e3),ZD="__/auth/iframe",YD="emulator/auth/iframe",XD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ej(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qg(e,YD):`https://${t.config.authDomain}/${ZD}`,i={apiKey:e.apiKey,appName:t.name,v:Mo},r=JD.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Al(i).slice(1)}`}async function tj(t){const e=await QD(t),n=Jn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:ej(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XD,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Xn(t,"network-request-failed"),c=Jn().setTimeout(()=>{o(a)},GD.get());function h(){Jn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ij=500,rj=600,sj="_blank",oj="http://localhost";class pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aj(t,e,n,i=ij,r=rj){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},nj),{width:i.toString(),height:r.toString(),top:o,left:a}),f=Bt().toLowerCase();n&&(c=$E(f)?sj:n),UE(f)&&(e=e||oj,h.scrollbars="yes");const p=Object.entries(h).reduce((y,[x,C])=>`${y}${x}=${C},`,"");if($A(f)&&c!=="_self")return lj(e||"",c),new pw(null);const v=window.open(e||"",c,p);de(v,t,"popup-blocked");try{v.focus()}catch{}return new pw(v)}function lj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="__/auth/handler",cj="emulator/auth/handler",hj=encodeURIComponent("fac");async function gw(t,e,n,i,r,o){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mo,eventId:r};if(e instanceof Yg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",uL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))a[p]=v}if(e instanceof Ol){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const h=await t._getAppCheckToken(),f=h?`#${hj}=${encodeURIComponent(h)}`:"";return`${dj(t)}?${Al(c).slice(1)}${f}`}function dj({config:t}){return t.emulator?Qg(t,cj):`https://${t.authDomain}/${uj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="webStorageSupport";class fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rk,this._completeRedirectFn=OD,this._overrideRedirectResult=DD}async _openPopup(e,n,i,r){var o;ki((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await gw(e,n,i,lp(),r);return aj(e,a,Xg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await gw(e,n,i,lp(),r);return gD(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ki(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await tj(e),i=new zD(e);return n.register("authEvent",r=>(de(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rf,{type:Rf},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Rf];a!==void 0&&n(!!a),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WE()||Zg()||$h()}}const mj=fj;var vw="@firebase/auth",yw="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function vj(t){po(new is("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;de(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KE(t)},f=new YA(i,r,o,h);return JA(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),po(new is("auth-internal",e=>{const n=Rl(e.getProvider("auth").getImmediate());return(i=>new pj(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(vw,yw,gj(t)),cr(vw,yw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=5*60,_j=CE("authIdTokenMaxAge")||yj;let _w=null;const wj=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>_j)return;const r=n==null?void 0:n.token;_w!==r&&(_w=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function xj(t=uA()){const e=Hg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XA(t,{popupRedirectResolver:mj,persistence:[CD,fD,rk]}),i=CE("authTokenSyncURL");if(i){const o=wj(i);lD(n,o,()=>o(n.currentUser)),aD(n,a=>o(a))}const r=XM("auth");return r&&eD(n,`http://${r}`),n}vj("Browser");var Sj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K,ev=ev||{},le=Sj||self;function qh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Hh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Ej(t,e,n){return t.call.apply(t.bind,arguments)}function kj(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ft(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ft=Ej:Ft=kj,Ft.apply(null,arguments)}function Vu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function St(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[r].apply(i,a)}}function Cr(){this.s=this.s,this.o=this.o}var Cj=0;Cr.prototype.s=!1;Cr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Cj!=0)};Cr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function tv(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function ww(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(qh(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let a=0;a<o;a++)t[r+a]=i[a]}else t.push(i)}}function zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var Tj=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function al(t){return/^[\s\xa0]*$/.test(t)}function Wh(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function Kn(t){return Wh().indexOf(t)!=-1}function nv(t){return nv[" "](t),t}nv[" "]=function(){};function Nj(t,e){var n=wR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var bj=Kn("Opera"),vo=Kn("Trident")||Kn("MSIE"),fk=Kn("Edge"),cp=fk||vo,mk=Kn("Gecko")&&!(Wh().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),Ij=Wh().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge");function pk(){var t=le.document;return t?t.documentMode:void 0}var hp;e:{var Of="",Ff=function(){var t=Wh();if(mk)return/rv:([^\);]+)(\)|;)/.exec(t);if(fk)return/Edge\/([\d\.]+)/.exec(t);if(vo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Ij)return/WebKit\/(\S+)/.exec(t);if(bj)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ff&&(Of=Ff?Ff[1]:""),vo){var zf=pk();if(zf!=null&&zf>parseFloat(Of)){hp=String(zf);break e}}hp=Of}var dp;if(le.document&&vo){var xw=pk();dp=xw||parseInt(hp,10)||void 0}else dp=void 0;var Pj=dp;function ll(t,e){if(zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(mk){e:{try{nv(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Mj[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ll.$.h.call(this)}}St(ll,zt);var Mj={2:"touch",3:"pen",4:"mouse"};ll.prototype.h=function(){ll.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Kh="closure_listenable_"+(1e6*Math.random()|0),Lj=0;function Aj(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Lj,this.fa=this.ia=!1}function Qh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function iv(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function Dj(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function gk(t){const e={};for(const n in t)e[n]=t[n];return e}const Sw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vk(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<Sw.length;o++)n=Sw[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Gh(t){this.src=t,this.g={},this.h=0}Gh.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var a=mp(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new Aj(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function fp(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=dk(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Qh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function mp(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var rv="closure_lm_"+(1e6*Math.random()|0),Uf={};function yk(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)yk(t,e[o],n,i,r);return null}return n=xk(n),t&&t[Kh]?t.O(e,n,Hh(i)?!!i.capture:!1,r):jj(t,e,n,!1,i,r)}function jj(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=Hh(r)?!!r.capture:!!r,c=ov(t);if(c||(t[rv]=c=new Gh(t)),n=c.add(e,n,i,a,o),n.proxy)return n;if(i=Rj(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Tj||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(wk(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Rj(){function t(n){return e.call(t.src,t.listener,n)}const e=Oj;return t}function _k(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)_k(t,e[o],n,i,r);else i=Hh(i)?!!i.capture:!!i,n=xk(n),t&&t[Kh]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=mp(o,n,i,r),-1<n&&(Qh(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=ov(t))&&(e=t.g[e.toString()],t=-1,e&&(t=mp(e,n,i,r)),(n=-1<t?e[t]:null)&&sv(n))}function sv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Kh])fp(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(wk(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ov(e))?(fp(n,t),n.h==0&&(n.src=null,e[rv]=null)):Qh(t)}}}function wk(t){return t in Uf?Uf[t]:Uf[t]="on"+t}function Oj(t,e){if(t.fa)t=!0;else{e=new ll(e,this);var n=t.listener,i=t.la||t.src;t.ia&&sv(t),t=n.call(i,e)}return t}function ov(t){return t=t[rv],t instanceof Gh?t:null}var $f="__closure_events_fn_"+(1e9*Math.random()>>>0);function xk(t){return typeof t=="function"?t:(t[$f]||(t[$f]=function(e){return t.handleEvent(e)}),t[$f])}function xt(){Cr.call(this),this.i=new Gh(this),this.S=this,this.J=null}St(xt,Cr);xt.prototype[Kh]=!0;xt.prototype.removeEventListener=function(t,e,n,i){_k(this,t,e,n,i)};function bt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new zt(e,t);else if(e instanceof zt)e.target=e.target||t;else{var r=e;e=new zt(i,t),vk(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];r=qu(a,i,!0,e)&&r}if(a=e.g=t,r=qu(a,i,!0,e)&&r,r=qu(a,i,!1,e)&&r,n)for(o=0;o<n.length;o++)a=e.g=n[o],r=qu(a,i,!1,e)&&r}xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Qh(n[i]);delete t.g[e],t.h--}}this.J=null};xt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};xt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function qu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.fa&&a.capture==n){var c=a.listener,h=a.la||a.src;a.ia&&fp(t.i,a),r=c.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var av=le.JSON.stringify;class Fj{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function zj(){var t=lv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Uj{constructor(){this.h=this.g=null}add(e,n){const i=Sk.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var Sk=new Fj(()=>new $j,t=>t.reset());class $j{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Bj(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Vj(t){le.setTimeout(()=>{throw t},0)}let ul,cl=!1,lv=new Uj,Ek=()=>{const t=le.Promise.resolve(void 0);ul=()=>{t.then(qj)}};var qj=()=>{for(var t;t=zj();){try{t.h.call(t.g)}catch(n){Vj(n)}var e=Sk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}cl=!1};function Zh(t,e){xt.call(this),this.h=t||1,this.g=e||le,this.j=Ft(this.qb,this),this.l=Date.now()}St(Zh,xt);K=Zh.prototype;K.ga=!1;K.T=null;K.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bt(this,"tick"),this.ga&&(uv(this),this.start()))}};K.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function uv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}K.N=function(){Zh.$.N.call(this),uv(this),delete this.g};function cv(t,e,n){if(typeof t=="function")n&&(t=Ft(t,n));else if(t&&typeof t.handleEvent=="function")t=Ft(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function kk(t){t.g=cv(()=>{t.g=null,t.i&&(t.i=!1,kk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Hj extends Cr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kk(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hl(t){Cr.call(this),this.h=t,this.g={}}St(hl,Cr);var Ew=[];function Ck(t,e,n,i){Array.isArray(n)||(n&&(Ew[0]=n.toString()),n=Ew);for(var r=0;r<n.length;r++){var o=yk(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Tk(t){iv(t.g,function(e,n){this.g.hasOwnProperty(n)&&sv(e)},t),t.g={}}hl.prototype.N=function(){hl.$.N.call(this),Tk(this)};hl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yh(){this.g=!0}Yh.prototype.Ea=function(){this.g=!1};function Wj(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var a="",c=o.split("&"),h=0;h<c.length;h++){var f=c[h].split("=");if(1<f.length){var p=f[0];f=f[1];var v=p.split("_");a=2<=v.length&&v[1]=="type"?a+(p+"="+f+"&"):a+(p+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function Kj(t,e,n,i,r,o,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+a})}function Bs(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Gj(t,n)+(i?" "+i:"")})}function Qj(t,e){t.info(function(){return"TIMEOUT: "+e})}Yh.prototype.info=function(){};function Gj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return av(n)}catch{return e}}var ds={},kw=null;function Xh(){return kw=kw||new xt}ds.Ta="serverreachability";function Nk(t){zt.call(this,ds.Ta,t)}St(Nk,zt);function dl(t){const e=Xh();bt(e,new Nk(e))}ds.STAT_EVENT="statevent";function bk(t,e){zt.call(this,ds.STAT_EVENT,t),this.stat=e}St(bk,zt);function Wt(t){const e=Xh();bt(e,new bk(e,t))}ds.Ua="timingevent";function Ik(t,e){zt.call(this,ds.Ua,t),this.size=e}St(Ik,zt);function zl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Jh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Pk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hv(){}hv.prototype.h=null;function Cw(t){return t.h||(t.h=t.i())}function Mk(){}var Ul={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dv(){zt.call(this,"d")}St(dv,zt);function fv(){zt.call(this,"c")}St(fv,zt);var pp;function ed(){}St(ed,hv);ed.prototype.g=function(){return new XMLHttpRequest};ed.prototype.i=function(){return{}};pp=new ed;function $l(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new hl(this),this.P=Zj,t=cp?125:void 0,this.V=new Zh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Lk}function Lk(){this.i=null,this.g="",this.h=!1}var Zj=45e3,gp={},rh={};K=$l.prototype;K.setTimeout=function(t){this.P=t};function vp(t,e,n){t.L=1,t.v=nd(Ci(e)),t.s=n,t.S=!0,Ak(t,null)}function Ak(t,e){t.G=Date.now(),Bl(t),t.A=Ci(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),$k(n.i,"t",i),t.C=0,n=t.l.J,t.h=new Lk,t.g=lC(t.l,n?e:null,!t.s),0<t.O&&(t.M=new Hj(Ft(t.Pa,t,t.g),t.O)),Ck(t.U,t.g,"readystatechange",t.nb),e=t.I?gk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),dl(),Wj(t.j,t.u,t.A,t.m,t.W,t.s)}K.nb=function(t){t=t.target;const e=this.M;e&&Qn(t)==3?e.l():this.Pa(t)};K.Pa=function(t){try{if(t==this.g)e:{const p=Qn(this.g);var e=this.g.Ia();const v=this.g.da();if(!(3>p)&&(p!=3||cp||this.g&&(this.h.h||this.g.ja()||Iw(this.g)))){this.J||p!=4||e==7||(e==8||0>=v?dl(3):dl(2)),td(this);var n=this.g.da();this.ca=n;t:if(Dk(this)){var i=Iw(this.g);t="";var r=i.length,o=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),La(this);var a="";break t}this.h.i=new le.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,Kj(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!al(c)){var f=c;break t}}f=null}if(n=f)Bs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yp(this,n);else{this.i=!1,this.o=3,Wt(12),qr(this),La(this);break e}}this.S?(jk(this,p,a),cp&&this.i&&p==3&&(Ck(this.U,this.V,"tick",this.mb),this.V.start())):(Bs(this.j,this.m,a,null),yp(this,a)),p==4&&qr(this),this.i&&!this.J&&(p==4?rC(this.l,this):(this.i=!1,Bl(this)))}else vR(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Wt(12)):(this.o=0,Wt(13)),qr(this),La(this)}}}catch{}finally{}};function Dk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function jk(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=Yj(t,n),r==rh){e==4&&(t.o=4,Wt(14),i=!1),Bs(t.j,t.m,null,"[Incomplete Response]");break}else if(r==gp){t.o=4,Wt(15),Bs(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Bs(t.j,t.m,r,null),yp(t,r);Dk(t)&&r!=rh&&r!=gp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Wt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),_v(e),e.M=!0,Wt(11))):(Bs(t.j,t.m,n,"[Invalid Chunked Response]"),qr(t),La(t))}K.mb=function(){if(this.g){var t=Qn(this.g),e=this.g.ja();this.C<e.length&&(td(this),jk(this,t,e),this.i&&t!=4&&Bl(this))}};function Yj(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?rh:(n=Number(e.substring(n,i)),isNaN(n)?gp:(i+=1,i+n>e.length?rh:(e=e.slice(i,i+n),t.C=i+n,e)))}K.cancel=function(){this.J=!0,qr(this)};function Bl(t){t.Y=Date.now()+t.P,Rk(t,t.P)}function Rk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=zl(Ft(t.lb,t),e)}function td(t){t.B&&(le.clearTimeout(t.B),t.B=null)}K.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Qj(this.j,this.A),this.L!=2&&(dl(),Wt(17)),qr(this),this.o=2,La(this)):Rk(this,this.Y-t)};function La(t){t.l.H==0||t.J||rC(t.l,t)}function qr(t){td(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,uv(t.V),Tk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_p(n.i,t))){if(!t.K&&_p(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ah(n),sd(n);else break e;yv(n),Wt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=zl(Ft(n.ib,n),6e3));if(1>=qk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hr(n,11)}else if((t.K||n.g==t)&&ah(n),!al(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let f=r[e];if(n.V=f[0],f=f[1],n.H==2)if(f[0]=="c"){n.K=f[1],n.pa=f[2];const p=f[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));const v=f[4];v!=null&&(n.Ga=v,n.l.info("SVER="+n.Ga));const y=f[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const x=t.g;if(x){const C=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var o=i.i;o.g||C.indexOf("spdy")==-1&&C.indexOf("quic")==-1&&C.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(mv(o,o.h),o.h=null))}if(i.F){const k=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(i.Da=k,$e(i.I,i.F,k))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=aC(i,i.J?i.pa:null,i.Y),a.K){Hk(i.i,a);var c=a,h=i.L;h&&c.setTimeout(h),c.B&&(td(c),Bl(c)),i.g=a}else nC(i);0<n.j.length&&od(n)}else f[0]!="stop"&&f[0]!="close"||Hr(n,7);else n.H==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Hr(n,7):vv(n):f[0]!="noop"&&n.h&&n.h.Aa(f),n.A=0)}}dl(4)}catch{}}function Xj(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(qh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function Jj(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(qh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ok(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(qh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Jj(t),i=Xj(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var Fk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Yr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yr){this.h=t.h,sh(this,t.j),this.s=t.s,this.g=t.g,oh(this,t.m),this.l=t.l;var e=t.i,n=new fl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Tw(this,n),this.o=t.o}else t&&(e=String(t).match(Fk))?(this.h=!1,sh(this,e[1]||"",!0),this.s=ya(e[2]||""),this.g=ya(e[3]||"",!0),oh(this,e[4]),this.l=ya(e[5]||"",!0),Tw(this,e[6]||"",!0),this.o=ya(e[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}Yr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_a(e,Nw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(_a(e,Nw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(_a(n,n.charAt(0)=="/"?iR:nR,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",_a(n,sR)),t.join("")};function Ci(t){return new Yr(t)}function sh(t,e,n){t.j=n?ya(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function oh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Tw(t,e,n){e instanceof fl?(t.i=e,oR(t.i,t.h)):(n||(e=_a(e,rR)),t.i=new fl(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function nd(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ya(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _a(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,tR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Nw=/[#\/\?@]/g,nR=/[#\?:]/g,iR=/[#\?]/g,rR=/[#\?@]/g,sR=/#/g;function fl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Tr(t){t.g||(t.g=new Map,t.h=0,t.i&&eR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}K=fl.prototype;K.add=function(t,e){Tr(this),this.i=null,t=Lo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zk(t,e){Tr(t),e=Lo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Uk(t,e){return Tr(t),e=Lo(t,e),t.g.has(e)}K.forEach=function(t,e){Tr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};K.ta=function(){Tr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};K.Z=function(t){Tr(this);let e=[];if(typeof t=="string")Uk(this,t)&&(e=e.concat(this.g.get(Lo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};K.set=function(t,e){return Tr(this),this.i=null,t=Lo(this,t),Uk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};K.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function $k(t,e,n){zk(t,e),0<n.length&&(t.i=null,t.g.set(Lo(t,e),tv(n)),t.h+=n.length)}K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=o;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function Lo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function oR(t,e){e&&!t.j&&(Tr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(zk(this,i),$k(this,r,n))},t)),t.j=e}var aR=class{constructor(t,e){this.g=t,this.map=e}};function Bk(t){this.l=t||lR,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lR=10;function Vk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function qk(t){return t.h?1:t.g?t.g.size:0}function _p(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function mv(t,e){t.g?t.g.add(e):t.h=e}function Hk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Bk.prototype.cancel=function(){if(this.i=Wk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Wk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return tv(t.i)}var uR=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function cR(){this.g=new uR}function hR(t,e,n){const i=n||"";try{Ok(t,function(r,o){let a=r;Hh(r)&&(a=av(r)),e.push(i+o+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function dR(t,e){const n=new Yh;if(le.Image){const i=new Image;i.onload=Vu(Hu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Vu(Hu,n,i,"TestLoadImage: error",!1,e),i.onabort=Vu(Hu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Vu(Hu,n,i,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Hu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Vl(t){this.l=t.fc||null,this.j=t.ob||!1}St(Vl,hv);Vl.prototype.g=function(){return new id(this.l,this.j)};Vl.prototype.i=function(t){return function(){return t}}({});function id(t,e){xt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=pv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St(id,xt);var pv=0;K=id.prototype;K.open=function(t,e){if(this.readyState!=pv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ml(this)};K.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ql(this)),this.readyState=pv};K.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Kk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}K.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ql(this):ml(this),this.readyState==3&&Kk(this)}};K.Za=function(t){this.g&&(this.response=this.responseText=t,ql(this))};K.Ya=function(t){this.g&&(this.response=t,ql(this))};K.ka=function(){this.g&&ql(this)};function ql(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ml(t)}K.setRequestHeader=function(t,e){this.v.append(t,e)};K.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};K.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ml(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var fR=le.JSON.parse;function nt(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qk,this.L=this.M=!1}St(nt,xt);var Qk="",mR=/^https?$/i,pR=["POST","PUT"];K=nt.prototype;K.Oa=function(t){this.M=t};K.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pp.g(),this.C=this.u?Cw(this.u):Cw(pp),this.g.onreadystatechange=Ft(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){bw(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=le.FormData&&t instanceof le.FormData,!(0<=dk(pR,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yk(this),0<this.B&&((this.L=gR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ft(this.ua,this)):this.A=cv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){bw(this,o)}};function gR(t){return vo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}K.ua=function(){typeof ev<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))};function bw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gk(t),rd(t)}function Gk(t){t.F||(t.F=!0,bt(t,"complete"),bt(t,"error"))}K.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bt(this,"complete"),bt(this,"abort"),rd(this))};K.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rd(this,!0)),nt.$.N.call(this)};K.La=function(){this.s||(this.G||this.v||this.l?Zk(this):this.kb())};K.kb=function(){Zk(this)};function Zk(t){if(t.h&&typeof ev<"u"&&(!t.C[1]||Qn(t)!=4||t.da()!=2)){if(t.v&&Qn(t)==4)cv(t.La,0,t);else if(bt(t,"readystatechange"),Qn(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var r=String(t.I).match(Fk)[1]||null;!r&&le.self&&le.self.location&&(r=le.self.location.protocol.slice(0,-1)),i=!mR.test(r?r.toLowerCase():"")}n=i}if(n)bt(t,"complete"),bt(t,"success");else{t.m=6;try{var o=2<Qn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Gk(t)}}finally{rd(t)}}}}function rd(t,e){if(t.g){Yk(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||bt(t,"ready");try{n.onreadystatechange=i}catch{}}}function Yk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}K.isActive=function(){return!!this.g};function Qn(t){return t.g?t.g.readyState:0}K.da=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}};K.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};K.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),fR(e)}};function Iw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Qk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function vR(t){const e={};t=(t.g&&2<=Qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(al(t[i]))continue;var n=Bj(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[r]||[];e[r]=o,o.push(n)}Dj(e,function(i){return i.join(", ")})}K.Ia=function(){return this.m};K.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Xk(t){let e="";return iv(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function gv(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Xk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$e(t,e,n))}function oa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jk(t){this.Ga=0,this.j=[],this.l=new Yh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oa("baseRetryDelayMs",5e3,t),this.hb=oa("retryDelaySeedMs",1e4,t),this.eb=oa("forwardChannelMaxRetries",2,t),this.xa=oa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Bk(t&&t.concurrentRequestLimit),this.Ja=new cR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}K=Jk.prototype;K.ra=8;K.H=1;function vv(t){if(eC(t),t.H==3){var e=t.W++,n=Ci(t.I);if($e(n,"SID",t.K),$e(n,"RID",e),$e(n,"TYPE","terminate"),Hl(t,n),e=new $l(t,t.l,e),e.L=2,e.v=nd(Ci(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=lC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Bl(e)}oC(t)}function sd(t){t.g&&(_v(t),t.g.cancel(),t.g=null)}function eC(t){sd(t),t.u&&(le.clearTimeout(t.u),t.u=null),ah(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function od(t){if(!Vk(t.i)&&!t.m){t.m=!0;var e=t.Na;ul||Ek(),cl||(ul(),cl=!0),lv.add(e,t),t.C=0}}function yR(t,e){return qk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=zl(Ft(t.Na,t,e),sC(t,t.C)),t.C++,!0)}K.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new $l(this,this.l,t);let o=this.s;if(this.U&&(o?(o=gk(o),vk(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tC(this,r,e),n=Ci(this.I),$e(n,"RID",t),$e(n,"CVER",22),this.F&&$e(n,"X-HTTP-Session-Id",this.F),Hl(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(Xk(o)))+"&"+e:this.o&&gv(n,this.o,o)),mv(this.i,r),this.bb&&$e(n,"TYPE","init"),this.P?($e(n,"$req",e),$e(n,"SID","null"),r.aa=!0,vp(r,n,null)):vp(r,n,e),this.H=2}}else this.H==3&&(t?Pw(this,t):this.j.length==0||Vk(this.i)||Pw(this))};function Pw(t,e){var n;e?n=e.m:n=t.W++;const i=Ci(t.I);$e(i,"SID",t.K),$e(i,"RID",n),$e(i,"AID",t.V),Hl(t,i),t.o&&t.s&&gv(i,t.o,t.s),n=new $l(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tC(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),mv(t.i,n),vp(n,i,e)}function Hl(t,e){t.na&&iv(t.na,function(n,i){$e(e,i,n)}),t.h&&Ok({},function(n,i){$e(e,i,n)})}function tC(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Ft(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){const a=["count="+n];o==-1?0<n?(o=r[0].g,a.push("ofs="+o)):o=0:a.push("ofs="+o);let c=!0;for(let h=0;h<n;h++){let f=r[h].g;const p=r[h].map;if(f-=o,0>f)o=Math.max(0,r[h].g-100),c=!1;else try{hR(p,a,"req"+f+"_")}catch{i&&i(p)}}if(c){i=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function nC(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ul||Ek(),cl||(ul(),cl=!0),lv.add(e,t),t.A=0}}function yv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=zl(Ft(t.Ma,t),sC(t,t.A)),t.A++,!0)}K.Ma=function(){if(this.u=null,iC(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=zl(Ft(this.jb,this),t)}};K.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wt(10),sd(this),iC(this))};function _v(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function iC(t){t.g=new $l(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ci(t.wa);$e(e,"RID","rpc"),$e(e,"SID",t.K),$e(e,"AID",t.V),$e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$e(e,"TO",t.qa),$e(e,"TYPE","xmlhttp"),Hl(t,e),t.o&&t.s&&gv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=nd(Ci(e)),n.s=null,n.S=!0,Ak(n,t)}K.ib=function(){this.v!=null&&(this.v=null,sd(this),yv(this),Wt(19))};function ah(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function rC(t,e){var n=null;if(t.g==e){ah(t),_v(t),t.g=null;var i=2}else if(_p(t.i,e))n=e.F,Hk(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Xh(),bt(i,new Ik(i,n)),od(t)}else nC(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&yR(t,e)||i==2&&yv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Hr(t,5);break;case 4:Hr(t,10);break;case 3:Hr(t,6);break;default:Hr(t,2)}}}function sC(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Ft(t.pb,t);n||(n=new Yr("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||sh(n,"https"),nd(n)),dR(n.toString(),i)}else Wt(2);t.H=0,t.h&&t.h.za(e),oC(t),eC(t)}K.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Wt(2)):(this.l.info("Failed to ping google.com"),Wt(1))};function oC(t){if(t.H=0,t.ma=[],t.h){const e=Wk(t.i);(e.length!=0||t.j.length!=0)&&(ww(t.ma,e),ww(t.ma,t.j),t.i.i.length=0,tv(t.j),t.j.length=0),t.h.ya()}}function aC(t,e,n){var i=n instanceof Yr?Ci(n):new Yr(n);if(i.g!="")e&&(i.g=e+"."+i.g),oh(i,i.m);else{var r=le.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Yr(null);i&&sh(o,i),e&&(o.g=e),r&&oh(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&$e(i,n,e),$e(i,"VER",t.ra),Hl(t,i),i}function lC(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new nt(new Vl({ob:!0})):new nt(t.va),e.Oa(t.J),e}K.isActive=function(){return!!this.h&&this.h.isActive(this)};function uC(){}K=uC.prototype;K.Ba=function(){};K.Aa=function(){};K.za=function(){};K.ya=function(){};K.isActive=function(){return!0};K.Va=function(){};function lh(){if(vo&&!(10<=Number(Pj)))throw Error("Environmental error: no available transport.")}lh.prototype.g=function(t,e){return new fn(t,e)};function fn(t,e){xt.call(this),this.g=new Jk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!al(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!al(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ao(this)}St(fn,xt);fn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aC(t,null,t.Y),od(t)};fn.prototype.close=function(){vv(this.g)};fn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=av(t),t=n);e.j.push(new aR(e.fb++,t)),e.H==3&&od(e)};fn.prototype.N=function(){this.g.h=null,delete this.j,vv(this.g),delete this.g,fn.$.N.call(this)};function cC(t){dv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}St(cC,dv);function hC(){fv.call(this),this.status=1}St(hC,fv);function Ao(t){this.g=t}St(Ao,uC);Ao.prototype.Ba=function(){bt(this.g,"a")};Ao.prototype.Aa=function(t){bt(this.g,new cC(t))};Ao.prototype.za=function(t){bt(this.g,new hC)};Ao.prototype.ya=function(){bt(this.g,"b")};function _R(){this.blockSize=-1}function On(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}St(On,_R);On.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Bf(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],a=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(a<<12&4294967295|a>>>20),a=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(a<<17&4294967295|a>>>15),a=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(a<<14&4294967295|a>>>18),a=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(a<<11&4294967295|a>>>21),a=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(a<<16&4294967295|a>>>16),a=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(a<<10&4294967295|a>>>22),a=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(a<<15&4294967295|a>>>17),a=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}On.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)Bf(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){Bf(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){Bf(this,i),r=0;break}}this.h=r,this.i+=e};On.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var wR={};function wv(t){return-128<=t&&128>t?Nj(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function Gn(t){if(isNaN(t)||!isFinite(t))return Js;if(0>t)return Tt(Gn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=wp;return new Re(e,0)}function dC(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Tt(dC(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Gn(Math.pow(e,8)),i=Js,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+o),e);8>o?(o=Gn(Math.pow(e,o)),i=i.R(o).add(Gn(a))):(i=i.R(n),i=i.add(Gn(a)))}return i}var wp=4294967296,Js=wv(0),xp=wv(1),Mw=wv(16777216);K=Re.prototype;K.ea=function(){if(Sn(this))return-Tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:wp+i)*e,e*=wp}return t};K.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vi(this))return"0";if(Sn(this))return"-"+Tt(this).toString(t);for(var e=Gn(Math.pow(t,6)),n=this,i="";;){var r=ch(n,e).g;n=uh(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,vi(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};K.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Sn(t){return t.h==-1}K.X=function(t){return t=uh(this,t),Sn(t)?-1:vi(t)?0:1};function Tt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Re(n,~t.h).add(xp)}K.abs=function(){return Sn(this)?Tt(this):this};K.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),a=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,o&=65535,a&=65535,n[r]=a<<16|o}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function uh(t,e){return t.add(Tt(e))}K.R=function(t){if(vi(this)||vi(t))return Js;if(Sn(this))return Sn(t)?Tt(this).R(Tt(t)):Tt(Tt(this).R(t));if(Sn(t))return Tt(this.R(Tt(t)));if(0>this.X(Mw)&&0>t.X(Mw))return Gn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,a=this.D(i)&65535,c=t.D(r)>>>16,h=t.D(r)&65535;n[2*i+2*r]+=a*h,Wu(n,2*i+2*r),n[2*i+2*r+1]+=o*h,Wu(n,2*i+2*r+1),n[2*i+2*r+1]+=a*c,Wu(n,2*i+2*r+1),n[2*i+2*r+2]+=o*c,Wu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Re(n,0)};function Wu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function aa(t,e){this.g=t,this.h=e}function ch(t,e){if(vi(e))throw Error("division by zero");if(vi(t))return new aa(Js,Js);if(Sn(t))return e=ch(Tt(t),e),new aa(Tt(e.g),Tt(e.h));if(Sn(e))return e=ch(t,Tt(e)),new aa(Tt(e.g),e.h);if(30<t.g.length){if(Sn(t)||Sn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xp,i=e;0>=i.X(t);)n=Lw(n),i=Lw(i);var r=Ts(n,1),o=Ts(i,1);for(i=Ts(i,2),n=Ts(n,2);!vi(i);){var a=o.add(i);0>=a.X(t)&&(r=r.add(n),o=a),i=Ts(i,1),n=Ts(n,1)}return e=uh(t,r.R(e)),new aa(r,e)}for(r=Js;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=Gn(n),a=o.R(e);Sn(a)||0<a.X(t);)n-=i,o=Gn(n),a=o.R(e);vi(o)&&(o=xp),r=r.add(o),t=uh(t,a)}return new aa(r,t)}K.gb=function(t){return ch(this,t).h};K.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Re(n,this.h&t.h)};K.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Re(n,this.h|t.h)};K.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Re(n,this.h^t.h)};function Lw(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Re(n,t.h)}function Ts(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Re(r,t.h)}lh.prototype.createWebChannel=lh.prototype.g;fn.prototype.send=fn.prototype.u;fn.prototype.open=fn.prototype.m;fn.prototype.close=fn.prototype.close;Jh.NO_ERROR=0;Jh.TIMEOUT=8;Jh.HTTP_ERROR=6;Pk.COMPLETE="complete";Mk.EventType=Ul;Ul.OPEN="a";Ul.CLOSE="b";Ul.ERROR="c";Ul.MESSAGE="d";xt.prototype.listen=xt.prototype.O;nt.prototype.listenOnce=nt.prototype.P;nt.prototype.getLastError=nt.prototype.Sa;nt.prototype.getLastErrorCode=nt.prototype.Ia;nt.prototype.getStatus=nt.prototype.da;nt.prototype.getResponseJson=nt.prototype.Wa;nt.prototype.getResponseText=nt.prototype.ja;nt.prototype.send=nt.prototype.ha;nt.prototype.setWithCredentials=nt.prototype.Oa;On.prototype.digest=On.prototype.l;On.prototype.reset=On.prototype.reset;On.prototype.update=On.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=Gn;Re.fromString=dC;var xR=function(){return new lh},SR=function(){return Xh()},Vf=Jh,ER=Pk,kR=ds,Aw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},CR=Vl,Ku=Mk,TR=nt,NR=On,eo=Re;const Dw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Vg("@firebase/firestore");function jw(){return os.logLevel}function ee(t,...e){if(os.logLevel<=Ne.DEBUG){const n=e.map(xv);os.debug(`Firestore (${Do}): ${t}`,...n)}}function Ti(t,...e){if(os.logLevel<=Ne.ERROR){const n=e.map(xv);os.error(`Firestore (${Do}): ${t}`,...n)}}function pl(t,...e){if(os.logLevel<=Ne.WARN){const n=e.map(xv);os.warn(`Firestore (${Do}): ${t}`,...n)}}function xv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw Ti(e),new Error(e)}function qe(t,e){t||ae()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class PR{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},c=h=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new bR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Yt(e)}}class MR{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class LR{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new MR(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DR{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.T;return this.T=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?r(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.T=n.token,new AR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=jR(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Le(t,e){return t<e?-1:t>e?1:0}function yo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new gt(0,0))}static max(){return new he(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends gl{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const RR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends gl{construct(e,n,i){return new Ot(e,n,i)}static isValidIdentifier(e){return RR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Be.fromString(e))}static fromName(e){return new ie(Be.fromString(e).popFirst(5))}static empty(){return new ie(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Be(e.slice()))}}function OR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=he.fromTimestamp(i===1e9?new gt(n+1,0):new gt(n,i));return new pr(r,ie.empty(),e)}function FR(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new pr(he.min(),ie.empty(),-1)}static max(){return new pr(he.max(),ie.empty(),-1)}}function zR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==UR)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,i)=>{n(e)})}static reject(e){return new q((n,i)=>{i(e)})}static waitFor(e){return new q((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=q.resolve(!1);for(const i of e)n=n.next(r=>r?q.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new q((i,r)=>{const o=e.length,a=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(p=>{a[f]=p,++c,c===o&&i(a)},p=>r(p))}})}static doWhile(e,n){return new q((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Sv.ct=-1;function ad(t){return t==null}function hh(t){return t===0&&1/t==-1/0}function BR(t){return typeof t=="number"&&Number.isInteger(t)&&!hh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=r??Ct.EMPTY,this.right=o??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ct(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ct.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Ct(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ow(this.data.getIterator())}getIteratorFrom(e){return new Ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class Ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new un([])}unionWith(e){let n=new Ut(Ot.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new pC("Invalid base64 string: "+r):r}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(qe(!!t),typeof t=="string"){let e=0;const n=VR.exec(t);if(qe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function as(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kv(t){const e=t.mapValue.fields.__previous_value__;return Ev(e)?kv(e):e}function vl(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,i,r,o,a,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu={mapValue:{}};function ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ev(t)?4:HR(t)?9007199254740991:10:ae()}function ni(t,e){if(t===e)return!0;const n=ls(t);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vl(t).isEqual(vl(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=gr(i.timestampValue),a=gr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return as(i.bytesValue).isEqual(as(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return ut(i.geoPointValue.latitude)===ut(r.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ut(i.integerValue)===ut(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ut(i.doubleValue),a=ut(r.doubleValue);return o===a?hh(o)===hh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Rw(o)!==Rw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ni(o[c],a[c])))return!1;return!0}(t,e);default:return ae()}}function _l(t,e){return(t.values||[]).find(n=>ni(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=ls(t),i=ls(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=ut(r.integerValue||r.doubleValue),c=ut(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Fw(t.timestampValue,e.timestampValue);case 4:return Fw(vl(t),vl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(r,o){const a=as(r),c=as(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const f=Le(a[h],c[h]);if(f!==0)return f}return Le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Le(ut(r.latitude),ut(o.latitude));return a!==0?a:Le(ut(r.longitude),ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let h=0;h<a.length&&h<c.length;++h){const f=_o(a[h],c[h]);if(f)return f}return Le(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Gu.mapValue&&o===Gu.mapValue)return 0;if(r===Gu.mapValue)return 1;if(o===Gu.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const v=Le(c[p],f[p]);if(v!==0)return v;const y=_o(a[c[p]],h[f[p]]);if(y!==0)return y}return Le(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=gr(t),i=gr(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function wo(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=gr(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?as(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ie.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",o=!0;for(const a of i.values||[])o?o=!1:r+=",",r+=Sp(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Sp(i.fields[c])}`;return o+"}"}(t.mapValue):ae();var e,n}function zw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ep(t){return!!t&&"integerValue"in t}function Cv(t){return!!t&&"arrayValue"in t}function Uw(t){return!!t&&"nullValue"in t}function $w(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yc(t){return!!t&&"mapValue"in t}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Aa(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=Ot.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=Aa(a):r.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){fs(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Jt(Aa(this.value))}}function gC(t){const e=[];return fs(t.fields,(n,i)=>{const r=new Ot([n]);if(yc(i)){const o=gC(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Rt(e,0,he.min(),he.min(),he.min(),Jt.empty(),0)}static newFoundDocument(e,n,i,r){return new Rt(e,1,n,he.min(),i,r,0)}static newNoDocument(e,n){return new Rt(e,2,n,he.min(),he.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,he.min(),he.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.position=e,this.inclusive=n}}function Bw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ie.comparator(ie.fromName(a.referenceValue),n.key):i=_o(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ni(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n="asc"){this.field=e,this.dir=n}}function WR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{}class ht extends vC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new QR(e,n,i):n==="array-contains"?new YR(e,i):n==="in"?new XR(e,i):n==="not-in"?new JR(e,i):n==="array-contains-any"?new eO(e,i):new ht(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new GR(e,i):new ZR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends vC{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Fn(e,n)}matches(e){return yC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function yC(t){return t.op==="and"}function _C(t){return KR(t)&&yC(t)}function KR(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function kp(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(_C(t))return t.filters.map(e=>kp(e)).join(",");{const e=t.filters.map(n=>kp(n)).join(",");return`${t.op}(${e})`}}function wC(t,e){return t instanceof ht?function(n,i){return i instanceof ht&&n.op===i.op&&n.field.isEqual(i.field)&&ni(n.value,i.value)}(t,e):t instanceof Fn?function(n,i){return i instanceof Fn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,o,a)=>r&&wC(o,i.filters[a]),!0):!1}(t,e):void ae()}function xC(t){return t instanceof ht?function(e){return`${e.field.canonicalString()} ${e.op} ${wo(e.value)}`}(t):t instanceof Fn?function(e){return e.op.toString()+" {"+e.getFilters().map(xC).join(" ,")+"}"}(t):"Filter"}class QR extends ht{constructor(e,n,i){super(e,n,i),this.key=ie.fromName(i.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class GR extends ht{constructor(e,n){super(e,"in",n),this.keys=SC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZR extends ht{constructor(e,n){super(e,"not-in",n),this.keys=SC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ie.fromName(i.referenceValue))}class YR extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cv(n)&&_l(n.arrayValue,this.value)}}class XR extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_l(this.value.arrayValue,n)}}class JR extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_l(this.value.arrayValue,n)}}class eO extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>_l(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.dt=null}}function qw(t,e=null,n=[],i=[],r=null,o=null,a=null){return new tO(t,e,n,i,r,o,a)}function Tv(t){const e=me(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>kp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ad(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>wo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>wo(i)).join(",")),e.dt=n}return e.dt}function Nv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vw(t.startAt,e.startAt)&&Vw(t.endAt,e.endAt)}function Cp(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=h,this.wt=null,this._t=null,this.startAt,this.endAt}}function nO(t,e,n,i,r,o,a,c){return new jo(t,e,n,i,r,o,a,c)}function EC(t){return new jo(t)}function Hw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ld(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function kC(t){return t.collectionGroup!==null}function no(t){const e=me(t);if(e.wt===null){e.wt=[];const n=ld(e),i=bv(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new to(n)),e.wt.push(new to(Ot.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new to(Ot.keyField(),o))}}}return e.wt}function Ni(t){const e=me(t);if(!e._t)if(e.limitType==="F")e._t=qw(e.path,e.collectionGroup,no(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of no(e)){const a=o.dir==="desc"?"asc":"desc";n.push(new to(o.field,a))}const i=e.endAt?new dh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new dh(e.startAt.position,e.startAt.inclusive):null;e._t=qw(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function Tp(t,e){e.getFirstInequalityField(),ld(t);const n=t.filters.concat([e]);return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fh(t,e,n){return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ud(t,e){return Nv(Ni(t),Ni(e))&&t.limitType===e.limitType}function CC(t){return`${Tv(Ni(t))}|lt:${t.limitType}`}function Np(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>xC(i)).join(", ")}]`),ad(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>wo(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>wo(i)).join(",")),`Target(${n})`}(Ni(t))}; limitType=${t.limitType})`}function cd(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ie.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of no(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,o,a){const c=Bw(r,o,a);return r.inclusive?c<=0:c<0}(n.startAt,no(n),i)||n.endAt&&!function(r,o,a){const c=Bw(r,o,a);return r.inclusive?c>=0:c>0}(n.endAt,no(n),i))}(t,e)}function iO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TC(t){return(e,n)=>{let i=!1;for(const r of no(t)){const o=rO(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function rO(t,e,n){const i=t.field.isKeyField()?ie.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),h=a.data.field(r);return c!==null&&h!==null?_o(c,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return mC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Ye(ie.comparator);function bi(){return sO}const NC=new Ye(ie.comparator);function wa(...t){let e=NC;for(const n of t)e=e.insert(n.key,n);return e}function bC(t){let e=NC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Wr(){return Da()}function IC(){return Da()}function Da(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const oO=new Ye(ie.comparator),aO=new Ut(ie.comparator);function ye(...t){let e=aO;for(const n of t)e=e.add(n);return e}const lO=new Ut(Le);function uO(){return lO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function MC(t){return{integerValue:""+t}}function cO(t,e){return BR(e)?MC(e):PC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function hO(t,e,n){return t instanceof wl?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Ev(r)&&(r=kv(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof xl?AC(t,e):t instanceof Sl?DC(t,e):function(i,r){const o=LC(i,r),a=Ww(o)+Ww(i.gt);return Ep(o)&&Ep(i.gt)?MC(a):PC(i.serializer,a)}(t,e)}function dO(t,e,n){return t instanceof xl?AC(t,e):t instanceof Sl?DC(t,e):n}function LC(t,e){return t instanceof mh?Ep(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class wl extends hd{}class xl extends hd{constructor(e){super(),this.elements=e}}function AC(t,e){const n=jC(e);for(const i of t.elements)n.some(r=>ni(r,i))||n.push(i);return{arrayValue:{values:n}}}class Sl extends hd{constructor(e){super(),this.elements=e}}function DC(t,e){let n=jC(e);for(const i of t.elements)n=n.filter(r=>!ni(r,i));return{arrayValue:{values:n}}}class mh extends hd{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Ww(t){return ut(t.integerValue||t.doubleValue)}function jC(t){return Cv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.field=e,this.transform=n}}function mO(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof xl&&i instanceof xl||n instanceof Sl&&i instanceof Sl?yo(n.elements,i.elements,ni):n instanceof mh&&i instanceof mh?ni(n.gt,i.gt):n instanceof wl&&i instanceof wl}(t.transform,e.transform)}class pO{constructor(e,n){this.version=e,this.transformResults=n}}class jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dd{}function RC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Iv(t.key,jn.none()):new Ql(t.key,t.data,jn.none());{const n=t.data,i=Jt.empty();let r=new Ut(Ot.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Nr(t.key,i,new un(r.toArray()),jn.none())}}function gO(t,e,n){t instanceof Ql?function(i,r,o){const a=i.value.clone(),c=Qw(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(i,r,o){if(!_c(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Qw(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(OC(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,i){return t instanceof Ql?function(r,o,a,c){if(!_c(r.precondition,o))return a;const h=r.value.clone(),f=Gw(r.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof Nr?function(r,o,a,c){if(!_c(r.precondition,o))return a;const h=Gw(r.fieldTransforms,c,o),f=o.data;return f.setAll(OC(r)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(r,o,a){return _c(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function vO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=LC(i.transform,r||null);o!=null&&(n===null&&(n=Jt.empty()),n.set(i.field,o))}return n||null}function Kw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&yo(n,i,(r,o)=>mO(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends dd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nr extends dd{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Qw(t,e,n){const i=new Map;qe(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,dO(a,c,n[r]))}return i}function Gw(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,hO(o,a,e))}return i}class Iv extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yO extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&gO(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ja(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ja(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=IC();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;const h=RC(a,c);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(he.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(n,i)=>Kw(n,i))&&yo(this.baseMutations,e.baseMutations,(n,i)=>Kw(n,i))}}class Pv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){qe(e.mutations.length===i.length);let r=oO;const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Pv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ee;function SO(t){switch(t){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function FC(t){if(t===void 0)return Ti("GRPC error has no .code"),F.UNKNOWN;switch(t){case lt.OK:return F.OK;case lt.CANCELLED:return F.CANCELLED;case lt.UNKNOWN:return F.UNKNOWN;case lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case lt.INTERNAL:return F.INTERNAL;case lt.UNAVAILABLE:return F.UNAVAILABLE;case lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case lt.NOT_FOUND:return F.NOT_FOUND;case lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case lt.ABORTED:return F.ABORTED;case lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case lt.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Ee=lt||(lt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Zu}static getOrCreateInstance(){return Zu===null&&(Zu=new Mv),Zu}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Zu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new eo([4294967295,4294967295],0);function Zw(t){const e=EO().encode(t),n=new NR;return n.update(e),new Uint8Array(n.digest())}function Yw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new eo([n,i],0),new eo([r,o],0)]}class Lv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new xa(`Invalid padding: ${n}`);if(i<0)throw new xa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new xa(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=eo.fromNumber(this.It)}Et(e,n,i){let r=e.add(n.multiply(eo.fromNumber(i)));return r.compare(kO)===1&&(r=new eo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Zw(e),[i,r]=Yw(n);for(let o=0;o<this.hashCount;o++){const a=this.Et(i,r,o);if(!this.At(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Lv(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.It===0)return;const n=Zw(e),[i,r]=Yw(n);for(let o=0;o<this.hashCount;o++){const a=this.Et(i,r,o);this.Rt(a)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new fd(he.min(),r,new Ye(Le),bi(),ye())}}class Gl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Gl(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,i,r){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=r}}class zC{constructor(e,n){this.targetId=e,this.Vt=n}}class UC{constructor(e,n,i=Vt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Xw{constructor(){this.St=0,this.Dt=ex(),this.Ct=Vt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ye(),n=ye(),i=ye();return this.Dt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new Gl(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=ex()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class CO{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=bi(),this.zt=Jw(),this.Wt=new Ye(Le)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,r)=>{this.te(r)&&n(r)})}ne(e){var n;const i=e.targetId,r=e.Vt.count,o=this.se(i);if(o){const a=o.target;if(Cp(a))if(r===0){const c=new ie(a.path);this.Yt(i,c,Rt.newNoDocument(c,he.min()))}else qe(r===1);else{const c=this.ie(i);if(c!==r){const h=this.re(e,c);if(h!==0){this.ee(i);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,f)}(n=Mv.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(f,p,v){var y,x,C,k,T,E;const _={localCacheCount:p,existenceFilterCount:v.count},S=v.unchangedNames;return S&&(_.bloomFilter={applied:f===0,hashCount:(y=S==null?void 0:S.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(k=(C=(x=S==null?void 0:S.bits)===null||x===void 0?void 0:x.bitmap)===null||C===void 0?void 0:C.length)!==null&&k!==void 0?k:0,padding:(E=(T=S==null?void 0:S.bits)===null||T===void 0?void 0:T.padding)!==null&&E!==void 0?E:0}),_}(h,c,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=i;let h,f;try{h=as(o).toUint8Array()}catch(p){if(p instanceof pC)return pl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw p}try{f=new Lv(h,a,c)}catch(p){return pl(p instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",p),1}return f.It===0?1:r!==n-this.oe(e.targetId,f)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const a=this.Gt.ue(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;n.vt(c)||(this.Yt(e,o,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((o,a)=>{const c=this.se(a);if(c){if(o.current&&Cp(c.target)){const h=new ie(c.target.path);this.jt.get(h)!==null||this.ae(a,h)||this.Yt(a,h,Rt.newNoDocument(h,e))}o.Mt&&(n.set(a,o.Ot()),o.Ft())}});let i=ye();this.zt.forEach((o,a)=>{let c=!0;a.forEachWhile(h=>{const f=this.se(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.jt.forEach((o,a)=>a.setReadTime(e));const r=new fd(e,n,this.Wt,this.jt,i);return this.jt=bi(),this.zt=Jw(),this.Wt=new Ye(Le),r}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Xw,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ut(Le),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Xw),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Jw(){return new Ye(ie.comparator)}function ex(){return new Ye(ie.comparator)}const TO={asc:"ASCENDING",desc:"DESCENDING"},NO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bO={and:"AND",or:"OR"};class IO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||ad(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $C(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PO(t,e){return ph(t,e.toTimestamp())}function ei(t){return qe(!!t),he.fromTimestamp(function(e){const n=gr(e);return new gt(n.seconds,n.nanos)}(t))}function Av(t,e){return function(n){return new Be(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function BC(t){const e=Be.fromString(t);return qe(WC(e)),e}function Ip(t,e){return Av(t.databaseId,e.path)}function qf(t,e){const n=BC(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(VC(n))}function Pp(t,e){return Av(t.databaseId,e)}function MO(t){const e=BC(t);return e.length===4?Be.emptyPath():VC(e)}function Mp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VC(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tx(t,e,n){return{name:Ip(t,e),fields:n.value.mapValue.fields}}function LO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(qe(f===void 0||typeof f=="string"),Vt.fromBase64String(f||"")):(qe(f===void 0||f instanceof Uint8Array),Vt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const f=h.code===void 0?F.UNKNOWN:FC(h.code);return new Z(f,h.message||"")}(a);n=new UC(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qf(t,i.document.name),o=ei(i.document.updateTime),a=i.document.createTime?ei(i.document.createTime):he.min(),c=new Jt({mapValue:{fields:i.document.fields}}),h=Rt.newFoundDocument(r,o,a,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new wc(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qf(t,i.document),o=i.readTime?ei(i.readTime):he.min(),a=Rt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new wc([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qf(t,i.document),o=i.removedTargetIds||[];n=new wc([],o,r,null)}else{if(!("filter"in e))return ae();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new xO(r,o),c=i.targetId;n=new zC(c,a)}}return n}function AO(t,e){let n;if(e instanceof Ql)n={update:tx(t,e.key,e.value)};else if(e instanceof Iv)n={delete:Ip(t,e.key)};else if(e instanceof Nr)n={update:tx(t,e.key,e.data),updateMask:BO(e.fieldMask)};else{if(!(e instanceof yO))return ae();n={verify:Ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof wl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mh)return{fieldPath:o.field.canonicalString(),increment:a.gt};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:PO(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ae()}(t,e.precondition)),n}function DO(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?ei(i.updateTime):ei(r);return o.isEqual(he.min())&&(o=ei(r)),new pO(o,i.transformResults||[])}(n,e))):[]}function jO(t,e){return{documents:[Pp(t,e.path)]}}function RO(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Pp(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pp(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(h.length!==0)return HC(Fn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(f=>function(p){return{field:bs(p.field),direction:zO(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bp(t,e.limit);var c;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function OO(t){let e=MO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){qe(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(p){const v=qC(p);return v instanceof Fn&&_C(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(p=>function(v){return new to(Is(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p)));let c=null;n.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,ad(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(p){const v=!!p.before,y=p.values||[];return new dh(y,v)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const v=!p.before,y=p.values||[];return new dh(y,v)}(n.endAt)),nO(e,r,a,o,c,"F",h,f)}function FO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qC(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Is(e.unaryFilter.field);return ht.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Is(e.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Is(e.unaryFilter.field);return ht.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Is(e.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(e){return ht.create(Is(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Fn.create(e.compositeFilter.filters.map(n=>qC(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ae()}}(e.compositeFilter.op))}(t):ae()}function zO(t){return TO[t]}function UO(t){return NO[t]}function $O(t){return bO[t]}function bs(t){return{fieldPath:t.canonicalString()}}function Is(t){return Ot.fromServerFormat(t.fieldPath)}function HC(t){return t instanceof ht?function(e){if(e.op==="=="){if($w(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NAN"}};if(Uw(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if($w(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NOT_NAN"}};if(Uw(e.value))return{unaryFilter:{field:bs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(e.field),op:UO(e.op),value:e.value}}}(t):t instanceof Fn?function(e){const n=e.getFilters().map(i=>HC(i));return n.length===1?n[0]:{compositeFilter:{op:$O(e.op),filters:n}}}(t):ae()}function BO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,i,r,o=he.min(),a=he.min(),c=Vt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.fe=e}}function qO(t){const e=OO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(){this.rn=new WO}addToCollectionParentIndex(e,n){return this.rn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(pr.min())}updateCollectionGroup(e,n,i){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class WO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ut(Be.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ut(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xo(0)}static Mn(){return new xo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ja(i.mutation,r,un.empty(),gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=wa();return o.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=bi();const a=Da(),c=Da();return n.forEach((h,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof Nr)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),ja(p.mutation,f,p.mutation.getFieldMask(),gt.now())):a.set(f.key,un.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var v;return c.set(f,new QO(p,(v=a.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const i=Da();let r=new Ye((a,c)=>a-c),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let p=i.get(h)||un.empty();p=c.applyToLocalView(f,p),i.set(h,p);const v=(r.get(c.batchId)||ye()).add(h);r=r.insert(c.batchId,v)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,p=h.value,v=IC();p.forEach(y=>{if(!o.has(y)){const x=RC(n.get(y),i.get(y));x!==null&&v.set(y,x),o=o.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return q.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):q.resolve(Wr());let c=-1,h=o;return a.next(f=>q.forEach(f,(p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?q.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{h=h.insert(p,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ye())).next(p=>({batchId:c,changes:bC(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(i=>{let r=wa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let o=wa();return this.indexManager.getCollectionParents(e,r).next(a=>q.forEach(a,c=>{const h=function(f,p){return new jo(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i).next(f=>{f.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(o=>{r.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Rt.newInvalidDocument(f)))});let a=wa();return o.forEach((c,h)=>{const f=r.get(c);f!==void 0&&ja(f.mutation,h,un.empty(),gt.now()),cd(n,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return q.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:ei(i.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:qO(i.bundledQuery),readTime:ei(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(){this.overlays=new Ye(ie.comparator),this.ls=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Wr();return q.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.we(e,n,o)}),q.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.ls.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(i)),q.resolve()}getOverlaysForCollection(e,n,i){const r=Wr(),o=n.length+1,a=new ie(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return q.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ye((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Wr(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=Wr(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=r)););return q.resolve(c)}we(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new wO(n,i));let o=this.ls.get(n);o===void 0&&(o=ye(),this.ls.set(n,o)),this.ls.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.fs=new Ut(yt.ds),this.ws=new Ut(yt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new yt(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new yt(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new ie(new Be([])),i=new yt(n,e),r=new yt(n,e+1),o=[];return this.ws.forEachInRange([i,r],a=>{this.ys(a),o.push(a.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new ie(new Be([])),i=new yt(n,e),r=new yt(n,e+1);let o=ye();return this.ws.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new yt(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return ie.comparator(e.key,n.key)||Le(e.As,n.As)}static _s(e,n){return Le(e.As,n.As)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ut(yt.ds)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _O(o,n,i,r);this.mutationQueue.push(a);for(const c of r)this.Rs=this.Rs.add(new yt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.bs(i),o=r<0?0:r;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new yt(n,0),r=new yt(n,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([i,r],a=>{const c=this.Ps(a.As);o.push(c)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ut(Le);return n.forEach(r=>{const o=new yt(r,0),a=new yt(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,a],c=>{i=i.add(c.As)})}),q.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ie.isDocumentKey(o)||(o=o.child(""));const a=new yt(new ie(o),0);let c=new Ut(Le);return this.Rs.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.As)),!0)},a),q.resolve(this.Vs(c))}Vs(e){const n=[];return e.forEach(i=>{const r=this.Ps(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){qe(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return q.forEach(n.mutations,r=>{const o=new yt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new yt(n,0),r=this.Rs.firstAfterOrEqual(i);return q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.Ds=e,this.docs=new Ye(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return q.resolve(i?i.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let i=bi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Rt.newInvalidDocument(r))}),q.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=bi();const a=n.path,c=new ie(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||zR(FR(p),i)<=0||(r.has(p.key)||cd(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ae()}Cs(e,n){return q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new e4(this)}getSize(e){return q.resolve(this.size)}}class e4 extends KO{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),q.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.persistence=e,this.xs=new Ro(n=>Tv(n),Nv),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Dv,this.targetCount=0,this.Ms=xo.kn()}forEachTarget(e,n){return this.xs.forEach((i,r)=>n(r)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),q.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new xo(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Fn(n),q.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.xs.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.xs.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),q.waitFor(o).next(()=>r)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return q.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),q.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return q.resolve(i)}containsKey(e,n){return q.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.$s={},this.overlays={},this.Os=new Sv(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new t4(this),this.indexManager=new HO,this.remoteDocumentCache=function(i){return new JO(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new VO(n),this.qs=new ZO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new XO(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){ee("MemoryPersistence","Starting transaction:",e);const r=new i4(this.Os.next());return this.referenceDelegate.Us(),i(r).next(o=>this.referenceDelegate.Ks(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gs(e,n){return q.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class i4 extends $R{constructor(e){super(),this.currentSequenceNumber=e}}class jv{constructor(e){this.persistence=e,this.Qs=new Dv,this.js=null}static zs(e){return new jv(e)}get Ws(){if(this.js)return this.js;throw ae()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),q.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),q.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Ws.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Ws,i=>{const r=ie.fromPath(i);return this.Hs(e,r).next(o=>{o||n.removeEntry(r,he.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return q.or([()=>q.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=r}static Li(e,n){let i=ye(),r=ye();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Rv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ki(e,n).next(o=>o||this.Gi(e,n,r,i)).next(o=>o||this.Qi(e,n))}Ki(e,n){if(Hw(n))return q.resolve(null);let i=Ni(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=fh(n,null,"F"),i=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ye(...o);return this.Ui.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.ji(n,c);return this.zi(n,f,a,h.readTime)?this.Ki(e,fh(n,null,"F")):this.Wi(e,f,n,h)}))})))}Gi(e,n,i,r){return Hw(n)||r.isEqual(he.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(o=>{const a=this.ji(n,o);return this.zi(n,a,i,r)?this.Qi(e,n):(jw()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Np(n)),this.Wi(e,a,n,OR(r,-1)))})}ji(e,n){let i=new Ut(TC(e));return n.forEach((r,o)=>{cd(e,o)&&(i=i.add(o))}),i}zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Qi(e,n){return jw()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Np(n)),this.Ui.getDocumentsMatchingQuery(e,n,pr.min())}Wi(e,n,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,i,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new Ye(Le),this.Yi=new Ro(o=>Tv(o),Nv),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function o4(t,e,n,i){return new s4(t,e,n,i)}async function KC(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],c=[];let h=ye();for(const f of r){a.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(i,h).next(f=>({er:f,removedBatchIds:a,addedBatchIds:c}))})})}function a4(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Zi.newChangeBuffer({trackRemovals:!0});return function(a,c,h,f){const p=h.batch,v=p.keys();let y=q.resolve();return v.forEach(x=>{y=y.next(()=>f.getEntry(c,x)).next(C=>{const k=h.docVersions.get(x);qe(k!==null),C.version.compareTo(k)<0&&(p.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ye();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function QC(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function l4(t,e){const n=me(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const c=[];e.targetChanges.forEach((p,v)=>{const y=r.get(v);if(!y)return;c.push(n.Bs.removeMatchingKeys(o,p.removedDocuments,v).next(()=>n.Bs.addMatchingKeys(o,p.addedDocuments,v)));let x=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(Vt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,i)),r=r.insert(v,x),function(C,k,T){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,x,p)&&c.push(n.Bs.updateTargetData(o,x))});let h=bi(),f=ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(u4(o,a,e.documentUpdates).next(p=>{h=p.nr,f=p.sr})),!i.isEqual(he.min())){const p=n.Bs.getLastRemoteSnapshotVersion(o).next(v=>n.Bs.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(p)}return q.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ji=r,o))}function u4(t,e,n){let i=ye(),r=ye();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=bi();return n.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(he.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{nr:a,sr:r}})}function c4(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function h4(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Bs.getTargetData(i,e).next(o=>o?(r=o,q.resolve(r)):n.Bs.allocateTargetId(i).next(a=>(r=new Xi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ji.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function Lp(t,e,n){const i=me(t),r=i.Ji.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Kl(a))throw a;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function nx(t,e,n){const i=me(t);let r=he.min(),o=ye();return i.persistence.runTransaction("Execute query","readonly",a=>function(c,h,f){const p=me(c),v=p.Yi.get(f);return v!==void 0?q.resolve(p.Ji.get(v)):p.Bs.getTargetData(h,f)}(i,a,Ni(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(a,c.targetId).next(h=>{o=h})}).next(()=>i.Hi.getDocumentsMatchingQuery(a,e,n?r:he.min(),n?o:ye())).next(c=>(d4(i,iO(e),c),{documents:c,ir:o})))}function d4(t,e,n){let i=t.Xi.get(e)||he.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Xi.set(e,i)}class ix{constructor(){this.activeTargetIds=uO()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f4{constructor(){this.Hr=new ix,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ix,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function Hf(){return Yu===null?Yu=268435456+Math.round(2147483648*Math.random()):Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class v4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,r,o){const a=Hf(),c=this.To(e,n);ee("RestConnection",`Sending RPC '${e}' ${a}:`,c,i);const h={};return this.Eo(h,r,o),this.Ao(e,c,h,i).then(f=>(ee("RestConnection",`Received RPC '${e}' ${a}: `,f),f),f=>{throw pl("RestConnection",`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}vo(e,n,i,r,o,a){return this.Io(e,n,i,r,o)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Do,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}To(e,n){const i=p4[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,r){const o=Hf();return new Promise((a,c)=>{const h=new TR;h.setWithCredentials(!0),h.listenOnce(ER.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Vf.NO_ERROR:const p=h.getResponseJson();ee(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Vf.TIMEOUT:ee(Dt,`RPC '${e}' ${o} timed out`),c(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vf.HTTP_ERROR:const v=h.getStatus();if(ee(Dt,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const C=function(k){const T=k.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(x.status);c(new Z(C,x.message))}else c(new Z(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ee(Dt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);ee(Dt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,i,15)})}Ro(e,n,i){const r=Hf(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xR(),c=SR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new CR({})),this.Eo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const p=o.join("");ee(Dt,`Creating RPC '${e}' stream ${r}: ${p}`,h);const v=a.createWebChannel(p,h);let y=!1,x=!1;const C=new g4({ro:T=>{x?ee(Dt,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(y||(ee(Dt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),y=!0),ee(Dt,`RPC '${e}' stream ${r} sending:`,T),v.send(T))},oo:()=>v.close()}),k=(T,E,_)=>{T.listen(E,S=>{try{_(S)}catch(I){setTimeout(()=>{throw I},0)}})};return k(v,Ku.EventType.OPEN,()=>{x||ee(Dt,`RPC '${e}' stream ${r} transport opened.`)}),k(v,Ku.EventType.CLOSE,()=>{x||(x=!0,ee(Dt,`RPC '${e}' stream ${r} transport closed`),C.wo())}),k(v,Ku.EventType.ERROR,T=>{x||(x=!0,pl(Dt,`RPC '${e}' stream ${r} transport errored:`,T),C.wo(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),k(v,Ku.EventType.MESSAGE,T=>{var E;if(!x){const _=T.data[0];qe(!!_);const S=_,I=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(I){ee(Dt,`RPC '${e}' stream ${r} received error:`,I);const M=I.status;let A=function(O){const J=lt[O];if(J!==void 0)return FC(J)}(M),j=I.message;A===void 0&&(A=F.INTERNAL,j="Unknown error status: "+M+" with message "+I.message),x=!0,C.wo(new Z(A,j)),v.close()}else ee(Dt,`RPC '${e}' stream ${r} received:`,_),C._o(_)}}),k(c,kR.STAT_EVENT,T=>{T.stat===Aw.PROXY?ee(Dt,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Aw.NOPROXY&&ee(Dt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function Wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t){return new IO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=r,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,i,r,o,a,c,h){this.ii=e,this.$o=i,this.Oo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new GC(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===n&&this.Zo(i,r)},i=>{e(()=>{const r=new Z(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y4 extends ZC{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=LO(this.serializer,e),i=function(r){if(!("targetChange"in r))return he.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?ei(o.readTime):he.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=Mp(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=Cp(c)?{documents:jO(r,c)}:{query:RO(r,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$C(r,o.resumeToken);const h=bp(r,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=ph(r,o.snapshotVersion.toTimestamp());const h=bp(r,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const i=FO(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=Mp(this.serializer),n.removeTarget=e,this.Wo(n)}}class _4 extends ZC{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=DO(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.cu(i,n)}return qe(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>AO(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Io(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Z(F.UNKNOWN,r.toString())})}vo(e,n,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,n,i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(F.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class x4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ti(n),this.mu=!1):ee("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(a=>{i.enqueueAndForget(async()=>{ms(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=me(c);h.vu.add(4),await Zl(h),h.bu.set("Unknown"),h.vu.delete(4),await pd(h)}(this))})}),this.bu=new x4(i,r)}}async function pd(t){if(ms(t))for(const e of t.Ru)await e(!0)}async function Zl(t){for(const e of t.Ru)await e(!1)}function YC(t,e){const n=me(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),zv(n)?Fv(n):Oo(n).Ko()&&Ov(n,e))}function XC(t,e){const n=me(t),i=Oo(n);n.Au.delete(e),i.Ko()&&JC(n,e),n.Au.size===0&&(i.Ko()?i.jo():ms(n)&&n.bu.set("Unknown"))}function Ov(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(t).su(e)}function JC(t,e){t.Vu.qt(e),Oo(t).iu(e)}function Fv(t){t.Vu=new CO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Oo(t).start(),t.bu.gu()}function zv(t){return ms(t)&&!Oo(t).Uo()&&t.Au.size>0}function ms(t){return me(t).vu.size===0}function eT(t){t.Vu=void 0}async function E4(t){t.Au.forEach((e,n)=>{Ov(t,e)})}async function k4(t,e){eT(t),zv(t)?(t.bu.Iu(e),Fv(t)):t.bu.set("Unknown")}async function C4(t,e,n){if(t.bu.set("Online"),e instanceof UC&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.Au.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}(t,e)}catch(i){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gh(t,i)}else if(e instanceof wc?t.Vu.Ht(e):e instanceof zC?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(he.min()))try{const i=await QC(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Vu.ce(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.Au.get(h);f&&r.Au.set(h,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const f=r.Au.get(c);if(!f)return;r.Au.set(c,f.withResumeToken(Vt.EMPTY_BYTE_STRING,f.snapshotVersion)),JC(r,c);const p=new Xi(f.target,c,h,f.sequenceNumber);Ov(r,p)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){ee("RemoteStore","Failed to raise snapshot:",i),await gh(t,i)}}async function gh(t,e,n){if(!Kl(e))throw e;t.vu.add(1),await Zl(t),t.bu.set("Offline"),n||(n=()=>QC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await pd(t)})}function tT(t,e){return e().catch(n=>gh(t,n,e))}async function gd(t){const e=me(t),n=vr(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;T4(e);)try{const r=await c4(e.localStore,i);if(r===null){e.Eu.length===0&&n.jo();break}i=r.batchId,N4(e,r)}catch(r){await gh(e,r)}nT(e)&&iT(e)}function T4(t){return ms(t)&&t.Eu.length<10}function N4(t,e){t.Eu.push(e);const n=vr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function nT(t){return ms(t)&&!vr(t).Uo()&&t.Eu.length>0}function iT(t){vr(t).start()}async function b4(t){vr(t).hu()}async function I4(t){const e=vr(t);for(const n of t.Eu)e.uu(n.mutations)}async function P4(t,e,n){const i=t.Eu.shift(),r=Pv.from(i,e,n);await tT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await gd(t)}async function M4(t,e){e&&vr(t).ou&&await async function(n,i){if(r=i.code,SO(r)&&r!==F.ABORTED){const o=n.Eu.shift();vr(n).Qo(),await tT(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await gd(n)}var r}(t,e),nT(t)&&iT(t)}async function sx(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const i=ms(n);n.vu.add(3),await Zl(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await pd(n)}async function L4(t,e){const n=me(t);e?(n.vu.delete(2),await pd(n)):e||(n.vu.add(2),await Zl(n),n.bu.set("Unknown"))}function Oo(t){return t.Su||(t.Su=function(e,n,i){const r=me(e);return r.fu(),new y4(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:E4.bind(null,t),ao:k4.bind(null,t),nu:C4.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),zv(t)?Fv(t):t.bu.set("Unknown")):(await t.Su.stop(),eT(t))})),t.Su}function vr(t){return t.Du||(t.Du=function(e,n,i){const r=me(e);return r.fu(),new _4(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:b4.bind(null,t),ao:M4.bind(null,t),au:I4.bind(null,t),cu:P4.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await gd(t)):(await t.Du.stop(),t.Eu.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,c=new Uv(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(t,e){if(Ti("AsyncQueue",`${e}: ${t}`),Kl(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ie.comparator(n.key,i.key):(n,i)=>ie.comparator(n.key,i.key),this.keyedMap=wa(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Cu=new Ye(ie.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):ae():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class So{constructor(e,n,i,r,o,a,c,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new So(e,n,io.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.Nu=void 0,this.listeners=[]}}class D4{constructor(){this.queries=new Ro(e=>CC(e),ud),this.onlineState="Unknown",this.ku=new Set}}async function j4(t,e){const n=me(t),i=e.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new A4),r)try{o.Nu=await n.onListen(i)}catch(a){const c=$v(a,`Initialization of query '${Np(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.listeners.push(e),e.Mu(n.onlineState),o.Nu&&e.$u(o.Nu)&&Bv(n)}async function R4(t,e){const n=me(t),i=e.query;let r=!1;const o=n.queries.get(i);if(o){const a=o.listeners.indexOf(e);a>=0&&(o.listeners.splice(a,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function O4(t,e){const n=me(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const c of a.listeners)c.$u(r)&&(i=!0);a.Nu=r}}i&&Bv(n)}function F4(t,e,n){const i=me(t),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(n);i.queries.delete(e)}function Bv(t){t.ku.forEach(e=>{e.next()})}class z4{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new So(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.key=e}}class sT{constructor(e){this.key=e}}class U4{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ye(),this.mutatedKeys=ye(),this.tc=TC(e),this.ec=new io(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new ox,r=n?n.ec:this.ec;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,v)=>{const y=r.get(p),x=cd(this.query,v)?v:null,C=!!y&&this.mutatedKeys.has(y.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let T=!1;y&&x?y.data.isEqual(x.data)?C!==k&&(i.track({type:3,doc:x}),T=!0):this.rc(y,x)||(i.track({type:2,doc:x}),T=!0,(h&&this.tc(x,h)>0||f&&this.tc(x,f)<0)&&(c=!0)):!y&&x?(i.track({type:0,doc:x}),T=!0):y&&!x&&(i.track({type:1,doc:y}),T=!0,(h||f)&&(c=!0)),T&&(x?(a=a.add(x),o=k?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{ec:a,ic:i,zi:c,mutatedKeys:o}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((f,p)=>function(v,y){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return x(v)-x(y)}(f.type,p.type)||this.tc(f.doc,p.doc)),this.oc(i);const a=n?this.uc():[],c=this.Zu.size===0&&this.current?1:0,h=c!==this.Xu;return this.Xu=c,o.length!==0||h?{snapshot:new So(this.query,e.ec,r,o,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ox,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ye(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new sT(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new rT(i))}),n}hc(e){this.Yu=e.ir,this.Zu=ye();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return So.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class $4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class B4{constructor(e){this.key=e,this.fc=!1}}class V4{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new Ro(c=>CC(c),ud),this._c=new Map,this.mc=new Set,this.gc=new Ye(ie.comparator),this.yc=new Map,this.Ic=new Dv,this.Tc={},this.Ec=new Map,this.Ac=xo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function q4(t,e){const n=e5(t);let i,r;const o=n.wc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.lc();else{const a=await h4(n.localStore,Ni(e)),c=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await H4(n,e,i,c==="current",a.resumeToken),n.isPrimaryClient&&YC(n.remoteStore,a)}return r}async function H4(t,e,n,i,r){t.Rc=(v,y,x)=>async function(C,k,T,E){let _=k.view.sc(T);_.zi&&(_=await nx(C.localStore,k.query,!1).then(({documents:M})=>k.view.sc(M,_)));const S=E&&E.targetChanges.get(k.targetId),I=k.view.applyChanges(_,C.isPrimaryClient,S);return lx(C,k.targetId,I.cc),I.snapshot}(t,v,y,x);const o=await nx(t.localStore,e,!0),a=new U4(e,o.ir),c=a.sc(o.documents),h=Gl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,h);lx(t,n,f.cc);const p=new $4(e,n,a);return t.wc.set(e,p),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),f.snapshot}async function W4(t,e){const n=me(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(o=>!ud(o,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Lp(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),XC(n.remoteStore,i.targetId),Ap(n,i.targetId)}).catch(Wl)):(Ap(n,i.targetId),await Lp(n.localStore,i.targetId,!0))}async function K4(t,e,n){const i=t5(t);try{const r=await function(o,a){const c=me(o),h=gt.now(),f=a.reduce((y,x)=>y.add(x.key),ye());let p,v;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=bi(),C=ye();return c.Zi.getEntries(y,f).next(k=>{x=k,x.forEach((T,E)=>{E.isValidDocument()||(C=C.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,x)).next(k=>{p=k;const T=[];for(const E of a){const _=vO(E,p.get(E.key).overlayedDocument);_!=null&&T.push(new Nr(E.key,_,gC(_.value.mapValue),jn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,T,a)}).next(k=>{v=k;const T=k.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(y,k.batchId,T)})}).then(()=>({batchId:v.batchId,changes:bC(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let h=o.Tc[o.currentUser.toKey()];h||(h=new Ye(Le)),h=h.insert(a,c),o.Tc[o.currentUser.toKey()]=h}(i,r.batchId,n),await Yl(i,r.changes),await gd(i.remoteStore)}catch(r){const o=$v(r,"Failed to persist write");n.reject(o)}}async function oT(t,e){const n=me(t);try{const i=await l4(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.yc.get(o);a&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.fc=!0:r.modifiedDocuments.size>0?qe(a.fc):r.removedDocuments.size>0&&(qe(a.fc),a.fc=!1))}),await Yl(n,i,e)}catch(i){await Wl(i)}}function ax(t,e,n){const i=me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.wc.forEach((o,a)=>{const c=a.view.Mu(e);c.snapshot&&r.push(c.snapshot)}),function(o,a){const c=me(o);c.onlineState=a;let h=!1;c.queries.forEach((f,p)=>{for(const v of p.listeners)v.Mu(a)&&(h=!0)}),h&&Bv(c)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Q4(t,e,n){const i=me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),o=r&&r.key;if(o){let a=new Ye(ie.comparator);a=a.insert(o,Rt.newNoDocument(o,he.min()));const c=ye().add(o),h=new fd(he.min(),new Map,new Ye(Le),a,c);await oT(i,h),i.gc=i.gc.remove(o),i.yc.delete(e),Vv(i)}else await Lp(i.localStore,e,!1).then(()=>Ap(i,e,n)).catch(Wl)}async function G4(t,e){const n=me(t),i=e.batch.batchId;try{const r=await a4(n.localStore,e);lT(n,i,null),aT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yl(n,r)}catch(r){await Wl(r)}}async function Z4(t,e,n){const i=me(t);try{const r=await function(o,a){const c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,a).next(p=>(qe(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(i.localStore,e);lT(i,e,n),aT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yl(i,r)}catch(r){await Wl(r)}}function aT(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function lT(t,e,n){const i=me(t);let r=i.Tc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||uT(t,i)})}function uT(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(XC(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Vv(t))}function lx(t,e,n){for(const i of n)i instanceof rT?(t.Ic.addReference(i.key,e),Y4(t,i)):i instanceof sT?(ee("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||uT(t,i.key)):ae()}function Y4(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(ee("SyncEngine","New document in limbo: "+n),t.mc.add(i),Vv(t))}function Vv(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new ie(Be.fromString(e)),i=t.Ac.next();t.yc.set(i,new B4(n)),t.gc=t.gc.insert(n,i),YC(t.remoteStore,new Xi(Ni(EC(n.path)),i,"TargetPurposeLimboResolution",Sv.ct))}}async function Yl(t,e,n){const i=me(t),r=[],o=[],a=[];i.wc.isEmpty()||(i.wc.forEach((c,h)=>{a.push(i.Rc(h,e,n).then(f=>{if((f||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,f!=null&&f.fromCache?"not-current":"current"),f){r.push(f);const p=Rv.Li(h.targetId,f);o.push(p)}}))}),await Promise.all(a),i.dc.nu(r),await async function(c,h){const f=me(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(h,v=>q.forEach(v.Fi,y=>f.persistence.referenceDelegate.addReference(p,v.targetId,y)).next(()=>q.forEach(v.Bi,y=>f.persistence.referenceDelegate.removeReference(p,v.targetId,y)))))}catch(p){if(!Kl(p))throw p;ee("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const v=p.targetId;if(!p.fromCache){const y=f.Ji.get(v),x=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(x);f.Ji=f.Ji.insert(v,C)}}}(i.localStore,o))}async function X4(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const i=await KC(n.localStore,e);n.currentUser=e,function(r,o){r.Ec.forEach(a=>{a.forEach(c=>{c.reject(new Z(F.CANCELLED,o))})}),r.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yl(n,i.er)}}function J4(t,e){const n=me(t),i=n.yc.get(e);if(i&&i.fc)return ye().add(i.key);{let r=ye();const o=n._c.get(e);if(!o)return r;for(const a of o){const c=n.wc.get(a);r=r.unionWith(c.view.nc)}return r}}function e5(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q4.bind(null,e),e.dc.nu=O4.bind(null,e.eventManager),e.dc.Pc=F4.bind(null,e.eventManager),e}function t5(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z4.bind(null,e),e}class ux{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return o4(this.persistence,new r4,e.initialUser,this.serializer)}createPersistence(e){return new n4(jv.zs,this.serializer)}createSharedClientState(e){return new f4}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class n5{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ax(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X4.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new D4}createDatastore(e){const n=md(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new v4(r));var r;return function(o,a,c,h){return new w4(o,a,c,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,o=c=>ax(this.syncEngine,c,0),a=rx.D()?new rx:new m4,new S4(n,i,r,o,a);var n,i,r,o,a}createSyncEngine(e,n){return function(i,r,o,a,c,h,f){const p=new V4(i,r,o,a,c,h);return f&&(p.vc=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=me(e);ee("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Zl(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Yt.UNAUTHENTICATED,this.clientId=fC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=$v(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kf(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await KC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await o5(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>sx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>sx(e.remoteStore,o)),t._onlineComponents=e}function s5(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function o5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!s5(n))throw n;pl("Error using user provided cache. Falling back to memory cache: "+n),await Kf(t,new ux)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Kf(t,new ux);return t._offlineComponents}async function cT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await cx(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await cx(t,new n5))),t._onlineComponents}function a5(t){return cT(t).then(e=>e.syncEngine)}async function l5(t){const e=await cT(t),n=e.eventManager;return n.onListen=q4.bind(null,e.syncEngine),n.onUnlisten=W4.bind(null,e.syncEngine),n}function u5(t,e,n={}){const i=new hr;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const f=new i5({next:v=>{o.enqueueAndForget(()=>R4(r,p)),v.fromCache&&c.source==="server"?h.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new z4(a,f,{includeMetadataChanges:!0,Ku:!0});return j4(r,p)}(await l5(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c5(t,e,n,i){if(e===!0&&i===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dx(t){if(!ie.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fx(t){if(ie.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vd(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function h5(t,e){if(e<=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class qv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mx(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IR;switch(n.type){case"firstParty":return new LR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=hx.get(e);n&&(ee("ComponentProvider","Removing Datastore"),hx.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class br{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new br(this.firestore,e,this._query)}}class dr extends br{constructor(e,n,i){super(e,n,EC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new ie(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function Qf(t,e,...n){if(t=Pt(t),dT("collection","path",e),t instanceof qv){const i=Be.fromString(e,...n);return fx(i),new dr(t,null,i)}{if(!(t instanceof hn||t instanceof dr))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return fx(i),new dr(t.firestore,null,i)}}function Dp(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=fC.A()),dT("doc","path",e),t instanceof qv){const i=Be.fromString(e,...n);return dx(i),new hn(t,null,new ie(i))}{if(!(t instanceof hn||t instanceof dr))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return dx(i),new hn(t.firestore,t instanceof dr?t.converter:null,new ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new GC(this,"async_queue_retry"),this.Xc=()=>{const n=Wf();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Wf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new hr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Kl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ti("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=Uv.createAndSchedule(this,e,n,i,o=>this.na(o));return this.zc.push(r),r}Zc(){this.Wc&&ae()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Xl extends qv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new d5,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mT(this),this._firestoreClient.terminate()}}function f5(t,e,n){n||(n="(default)");const i=Hg(t,"firestore");if(i.isInitialized(n)){const r=i.getImmediate({identifier:n}),o=i.getOptions(n);if(nl(o,e))return r;throw new Z(F.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Z(F.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function fT(t){return t._firestoreClient||mT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mT(t){var e,n,i;const r=t._freezeSettings(),o=function(a,c,h,f){return new qR(a,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,hT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new r5(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(Vt.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ko(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=/^__.*__$/;class p5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class pT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Wv{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vh(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(gT(this.ca)&&m5.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class g5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||md(e)}ya(e,n,i,r=!1){return new Wv({ca:e,methodName:n,ga:i,path:Ot.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kv(t){const e=t._freezeSettings(),n=md(t._databaseId);return new g5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function v5(t,e,n,i,r,o={}){const a=t.ya(o.merge||o.mergeFields?2:0,e,n,r);Gv("Data must be an object, but it was:",a,i);const c=vT(i,a);let h,f;if(o.merge)h=new un(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const y=jp(e,v,n);if(!a.contains(y))throw new Z(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);_T(p,y)||p.push(y)}h=new un(p),f=a.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=a.fieldTransforms;return new p5(new Jt(c),h,f)}class wd extends _d{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class Qv extends _d{_toFieldTransform(e){return new fO(e.path,new wl)}isEqual(e){return e instanceof Qv}}function y5(t,e,n,i){const r=t.ya(1,e,n);Gv("Data must be an object, but it was:",r,i);const o=[],a=Jt.empty();fs(i,(h,f)=>{const p=Zv(e,h,n);f=Pt(f);const v=r.da(p);if(f instanceof wd)o.push(p);else{const y=Jl(f,v);y!=null&&(o.push(p),a.set(p,y))}});const c=new un(o);return new pT(a,c,r.fieldTransforms)}function _5(t,e,n,i,r,o){const a=t.ya(1,e,n),c=[jp(e,i,n)],h=[r];if(o.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(jp(e,o[y])),h.push(o[y+1]);const f=[],p=Jt.empty();for(let y=c.length-1;y>=0;--y)if(!_T(f,c[y])){const x=c[y];let C=h[y];C=Pt(C);const k=a.da(x);if(C instanceof wd)f.push(x);else{const T=Jl(C,k);T!=null&&(f.push(x),p.set(x,T))}}const v=new un(f);return new pT(p,v,a.fieldTransforms)}function w5(t,e,n,i=!1){return Jl(n,t.ya(i?4:3,e))}function Jl(t,e){if(yT(t=Pt(t)))return Gv("Unsupported field value:",e,t),vT(t,e);if(t instanceof _d)return function(n,i){if(!gT(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let o=0;for(const a of n){let c=Jl(a,i.wa(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Pt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cO(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=gt.fromDate(n);return{timestampValue:ph(i.serializer,r)}}if(n instanceof gt){const r=new gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ph(i.serializer,r)}}if(n instanceof Hv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ko)return{bytesValue:$C(i.serializer,n._byteString)};if(n instanceof hn){const r=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(r))throw i._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Av(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${vd(n)}`)}(t,e)}function vT(t,e){const n={};return mC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(i,r)=>{const o=Jl(r,e.ha(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function yT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Hv||t instanceof ko||t instanceof hn||t instanceof _d)}function Gv(t,e,n){if(!yT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=vd(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function jp(t,e,n){if((e=Pt(e))instanceof yd)return e._internalPath;if(typeof e=="string")return Zv(t,e);throw vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const x5=new RegExp("[~\\*/\\[\\]]");function Zv(t,e,n){if(e.search(x5)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vh(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new Z(F.INVALID_ARGUMENT,c+t+h)}function _T(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class S5 extends wT{data(){return super.data()}}function Yv(t,e){return typeof e=="string"?Zv(t,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xv{}class Jv extends Xv{}function k5(t,e,...n){let i=[];e instanceof Xv&&i.push(e),i=i.concat(n),function(r){const o=r.filter(c=>c instanceof ty).length,a=r.filter(c=>c instanceof ey).length;if(o>1||o>0&&a>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class ey extends Jv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ey(e,n,i)}_apply(e){const n=this._parse(e);return xT(e._query,n),new br(e.firestore,e.converter,Tp(e._query,n))}_parse(e){const n=Kv(e.firestore);return function(r,o,a,c,h,f,p){let v;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){gx(p,f);const y=[];for(const x of p)y.push(px(c,r,x));v={arrayValue:{values:y}}}else v=px(c,r,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||gx(p,f),v=w5(a,o,p,f==="in"||f==="not-in");return ht.create(h,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ty extends Xv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ty(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)xT(o,c),o=Tp(o,c)}(e._query,n),new br(e.firestore,e.converter,Tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ny extends Jv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ny(e,n)}_apply(e){const n=function(i,r,o){if(i.startAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new to(r,o);return function(c,h){if(bv(c)===null){const f=ld(c);f!==null&&ST(c,f,h.field)}}(i,a),a}(e._query,this._field,this._direction);return new br(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new jo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function C5(t,e="asc"){const n=e,i=Yv("orderBy",t);return ny._create(i,n)}class iy extends Jv{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new iy(e,n,i)}_apply(e){return new br(e.firestore,e.converter,fh(e._query,this._limit,this._limitType))}}function T5(t){return h5("limit",t),iy._create("limit",t,"F")}function px(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(e)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Be.fromString(n));if(!ie.isDocumentKey(i))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zw(t,new ie(i))}if(n instanceof hn)return zw(t,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vd(n)}.`)}function gx(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xT(t,e){if(e.isInequality()){const i=ld(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=bv(t);o!==null&&ST(t,r,o)}const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ST(t,e,n){if(!n.isEqual(e))throw new Z(F.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class N5{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return fs(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Hv(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=kv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const n=gr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);qe(WC(i));const r=new yl(i.get(1),i.get(3)),o=new ie(i.popFirst(5));return r.isEqual(n)||Ti(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I5 extends wT{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class xc extends I5{data(e={}){return super.data(e)}}class P5{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Xu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new xc(this._firestore,this._userDataWriter,i.key,i,new Xu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new xc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new xc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:M5(a.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function M5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class L5 extends N5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function A5(t){t=Eo(t,br);const e=Eo(t.firestore,Xl),n=fT(e),i=new L5(e);return E5(t._query),u5(n,t._query).then(r=>new P5(e,i,t,r))}function D5(t,e,n,...i){t=Eo(t,hn);const r=Eo(t.firestore,Xl),o=Kv(r);let a;return a=typeof(e=Pt(e))=="string"||e instanceof yd?_5(o,"updateDoc",t._key,e,n,i):y5(o,"updateDoc",t._key,e),ry(r,[a.toMutation(t._key,jn.exists(!0))])}function j5(t){return ry(Eo(t.firestore,Xl),[new Iv(t._key,jn.none())])}function R5(t,e){const n=Eo(t.firestore,Xl),i=Dp(t),r=b5(t.converter,e);return ry(n,[v5(Kv(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,jn.exists(!1))]).then(()=>i)}function ry(t,e){return function(n,i){const r=new hr;return n.asyncQueue.enqueueAndForget(async()=>K4(await a5(n),i,r)),r.promise}(fT(t),e)}function vx(){return new Qv("serverTimestamp")}(function(t,e=!0){(function(n){Do=n})(Mo),po(new is("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),a=new Xl(new PR(n.getProvider("auth-internal")),new DR(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(c.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),cr(Dw,"3.13.0",t),cr(Dw,"3.13.0","esm2017")})();const yi={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},O5=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],yx=O5.filter(t=>!yi[t]);yx.length&&console.warn("[firebase] Missing env vars:",yx.join(", "));yi.projectId&&yi.storageBucket&&!yi.storageBucket.endsWith("appspot.com")&&console.warn("[firebase] storageBucket should usually be ",`${yi.projectId}.appspot.com`);let Rp;J0().length?Rp=J0()[0]:Rp=bE(yi);const sy=typeof window<"u"&&typeof document<"u",El=sy?xj():void 0,la=sy?f5(Rp,{experimentalAutoDetectLongPolling:!0,useFetchStreams:!1}):void 0;if(sy){const t=window.location.origin,e=yi.authDomain;console.info("[firebase] Init",{origin:t,projectId:yi.projectId,authDomain:e,hasApiKey:!!yi.apiKey}),e&&!e.includes("localhost")&&console.debug("[firebase] Running on origin",t,"with authDomain",e,"Ensure this origin is in Firebase Authentication > Settings > Authorized domains.")}function F5(){return new Promise(t=>{if(!El){t(null);return}const e=ek(El,n=>{e(),t(n?{uid:n.uid,email:n.email,full_name:n.displayName||n.email}:null)})})}var _x={};function ET(t){async function e(o=void 0,a=void 0){try{let c=Qf(la,t);const h=[];if(o){const v=o.startsWith("-"),y=v?o.slice(1):o;h.push(C5(y,v?"desc":"asc"))}a&&h.push(T5(a)),h.length&&(c=k5(Qf(la,t),...h));const f=await A5(c),p=[];return f.forEach(v=>p.push({id:v.id,...v.data()})),p}catch(c){return console.error(`Error listing ${t}:`,c),[]}}async function n(o={}){try{const a={...o,created_date:vx()};return{id:(await R5(Qf(la,t),a)).id,...a}}catch(a){throw console.error(`Error creating ${t}:`,a),a}}async function i(o,a={}){try{const c=Dp(la,t,o);return await D5(c,{...a,updated_date:vx()}),{id:o,...a}}catch(c){throw console.error(`Error updating ${t}/${o}:`,c),c}}async function r(o){try{const a=Dp(la,t,o);return await j5(a),{id:o}}catch(a){throw console.error(`Error deleting ${t}/${o}:`,a),a}}return{list:e,create:n,update:i,delete:r}}const z5=["Bookmark","DailyCheckIn","DateIdea","Event","Insight","ListeningSession","LocationShare","MemoryPin","Music","Note","Photo","Playlist","RelationshipData","SharedTask","User","Video","UserPresence"],kT={};z5.forEach(t=>{kT[t]=ET(t)});const U5=new Proxy(kT,{get(t,e){if(e in t)return t[e];const n=String(e),i=ET(n);return t[n]=i,i}});async function $5(){try{return await F5()}catch(t){return console.error("auth.me error:",t),null}}async function B5(){try{await uD(El)}catch(t){console.error("logout error:",t)}}async function V5({file:t,base64:e}={}){try{if(typeof window<"u"){const r=new FormData;if(t)r.append("file",t);else if(e)r.append("file",e);else throw new Error("No file provided");const o=await fetch("/api/upload",{method:"POST",body:r});if(!o.ok)throw new Error("Server upload failed");return await o.json()}}catch(r){console.warn("Server upload failed, falling back to client Cloudinary:",(r==null?void 0:r.message)||r)}const n=_x.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,i=_x.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;if(!n||!i)throw new Error("Cloudinary not configured");return await uploadToCloudinary({file:t,base64:e})}async function q5(t={}){try{const e=await fetch("/api/llm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("LLM invocation failed");return await e.json()}catch(e){throw console.error("InvokeLLM error:",e),e}}const $={auth:{me:$5,logout:B5},entities:U5,integrations:{Core:{UploadFile:V5,InvokeLLM:q5}}};var H5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const W5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ue=(t,e)=>{const n=b.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...h},f)=>b.createElement("svg",{ref:f,...H5,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:`lucide lucide-${W5(t)}`,...h},[...e.map(([p,v])=>b.createElement(p,v)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n},CT=ue("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),wx=ue("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Ir=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xx=ue("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),TT=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),NT=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),K5=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),bT=ue("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Q5=ue("Film",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2.18",ry:"2.18",key:"vury4c"}],["line",{x1:"7",x2:"7",y1:"2",y2:"22",key:"t1e4qh"}],["line",{x1:"17",x2:"17",y1:"2",y2:"22",key:"1tliql"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"2",x2:"7",y1:"7",y2:"7",key:"1wdzzh"}],["line",{x1:"2",x2:"7",y1:"17",y2:"17",key:"2fufxq"}],["line",{x1:"17",x2:"22",y1:"17",y2:"17",key:"1xg577"}],["line",{x1:"17",x2:"22",y1:"7",y2:"7",key:"acrv2l"}]]),dt=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),xd=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Sx=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),G5=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ii=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Z5=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),oy=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),us=ue("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),IT=ue("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Y5=ue("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]),Kr=ue("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Ex=ue("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Gf=ue("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),X5=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),J5=ue("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Zf=ue("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),yr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),PT=ue("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),eF=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),kx=ue("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),tF=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),nF=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),MT=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),iF=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cx=ue("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),ri=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),eu=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),LT=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Op=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),AT=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),DT=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),rF=ue("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),ay=ue("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),_r=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sF=ue("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),oF=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function aF({startDate:t}){const[e,n]=b.useState(0),[i,r]=b.useState(0),[o,a]=b.useState(0);return b.useEffect(()=>{if(!t)return;const c=()=>{const f=new Date(t),p=new Date,v=Math.abs(p-f),y=Math.ceil(v/(1e3*60*60*24)),x=(p.getFullYear()-f.getFullYear())*12+(p.getMonth()-f.getMonth());n(y),r(x),a(Math.floor(x/12))};c();const h=setInterval(c,6e4);return()=>clearInterval(h)},[t]),d.jsxs("div",{className:"glass-card rounded-2xl p-5 relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-pink-400/20 to-purple-400/20 rounded-full blur-3xl"}),d.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-purple-400/20 to-pink-400/20 rounded-full blur-3xl"}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center",children:d.jsx(dt,{className:"w-5 h-5 text-white animate-heartbeat"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold",children:"Together"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"& counting..."})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:o}),d.jsx("div",{className:"text-xs text-gray-500",children:"Years"})]}),d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:i%12}),d.jsx("div",{className:"text-xs text-gray-500",children:"Months"})]}),d.jsxs("div",{className:"bg-white/50 rounded-xl p-3",children:[d.jsx("div",{className:"text-2xl font-bold gradient-text",children:e}),d.jsx("div",{className:"text-xs text-gray-500",children:"Days"})]})]}),t&&d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4 text-xs text-gray-400",children:[d.jsx(Ir,{className:"w-3 h-3"}),d.jsxs("span",{children:["Since ",new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})]})]})}function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function Ii(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function be(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ce(t){be(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||yh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function jT(t,e){be(2,arguments);var n=Ce(t),i=Ii(e);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+i+1,0);var a=o.getDate();return r>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}function lF(t,e){be(2,arguments);var n=Ce(t).getTime(),i=Ii(e);return new Date(n+i)}var uF={};function tu(){return uF}function Fp(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Tx(t){be(1,arguments);var e=Ce(t);return e.setHours(0,0,0,0),e}function Sc(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function Yf(t,e){be(2,arguments);var n=Tx(t),i=Tx(e);return n.getTime()===i.getTime()}function cF(t){return be(1,arguments),t instanceof Date||yh(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function hF(t){if(be(1,arguments),!cF(t)&&typeof t!="number")return!1;var e=Ce(t);return!isNaN(Number(e))}function dF(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return r*12+o}function fF(t,e){return be(2,arguments),Ce(t).getTime()-Ce(e).getTime()}var mF={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},pF="trunc";function gF(t){return mF[pF]}function vF(t){be(1,arguments);var e=Ce(t);return e.setHours(23,59,59,999),e}function RT(t){be(1,arguments);var e=Ce(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function yF(t){be(1,arguments);var e=Ce(t);return vF(e).getTime()===RT(e).getTime()}function _F(t,e){be(2,arguments);var n=Ce(t),i=Ce(e),r=Sc(n,i),o=Math.abs(dF(n,i)),a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);var c=Sc(n,i)===-r;yF(Ce(t))&&o===1&&Sc(t,i)===1&&(c=!1),a=r*(o-Number(c))}return a===0?0:a}function wF(t,e,n){be(2,arguments);var i=fF(t,e)/1e3;return gF()(i)}function xF(t,e){var n;be(1,arguments);var i=t||{},r=Ce(i.start),o=Ce(i.end),a=o.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var c=[],h=r;h.setHours(0,0,0,0);var f=Number((n=void 0)!==null&&n!==void 0?n:1);if(f<1||isNaN(f))throw new RangeError("`options.step` must be a number greater than 1");for(;h.getTime()<=a;)c.push(Ce(h)),h.setDate(h.getDate()+f),h.setHours(0,0,0,0);return c}function SF(t){be(1,arguments);var e=Ce(t);return e.setDate(1),e.setHours(0,0,0,0),e}function EF(t,e){be(2,arguments);var n=Ii(e);return lF(t,-n)}var kF=864e5;function CF(t){be(1,arguments);var e=Ce(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),r=n-i;return Math.floor(r/kF)+1}function _h(t){be(1,arguments);var e=1,n=Ce(t),i=n.getUTCDay(),r=(i<e?7:0)+i-e;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function OT(t){be(1,arguments);var e=Ce(t),n=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var r=_h(i),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=_h(o);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function TF(t){be(1,arguments);var e=OT(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var i=_h(n);return i}var NF=6048e5;function bF(t){be(1,arguments);var e=Ce(t),n=_h(e).getTime()-TF(e).getTime();return Math.round(n/NF)+1}function wh(t,e){var n,i,r,o,a,c,h,f;be(1,arguments);var p=tu(),v=Ii((n=(i=(r=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:p.weekStartsOn)!==null&&i!==void 0?i:(h=p.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.weekStartsOn)!==null&&n!==void 0?n:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=Ce(t),x=y.getUTCDay(),C=(x<v?7:0)+x-v;return y.setUTCDate(y.getUTCDate()-C),y.setUTCHours(0,0,0,0),y}function FT(t,e){var n,i,r,o,a,c,h,f;be(1,arguments);var p=Ce(t),v=p.getUTCFullYear(),y=tu(),x=Ii((n=(i=(r=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:y.firstWeekContainsDate)!==null&&i!==void 0?i:(h=y.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=new Date(0);C.setUTCFullYear(v+1,0,x),C.setUTCHours(0,0,0,0);var k=wh(C,e),T=new Date(0);T.setUTCFullYear(v,0,x),T.setUTCHours(0,0,0,0);var E=wh(T,e);return p.getTime()>=k.getTime()?v+1:p.getTime()>=E.getTime()?v:v-1}function IF(t,e){var n,i,r,o,a,c,h,f;be(1,arguments);var p=tu(),v=Ii((n=(i=(r=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:p.firstWeekContainsDate)!==null&&i!==void 0?i:(h=p.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&n!==void 0?n:1),y=FT(t,e),x=new Date(0);x.setUTCFullYear(y,0,v),x.setUTCHours(0,0,0,0);var C=wh(x,e);return C}var PF=6048e5;function MF(t,e){be(1,arguments);var n=Ce(t),i=wh(n,e).getTime()-IF(n,e).getTime();return Math.round(i/PF)+1}function Ae(t,e){for(var n=t<0?"-":"",i=Math.abs(t).toString();i.length<e;)i="0"+i;return n+i}var Ui={y:function(e,n){var i=e.getUTCFullYear(),r=i>0?i:1-i;return Ae(n==="yy"?r%100:r,n.length)},M:function(e,n){var i=e.getUTCMonth();return n==="M"?String(i+1):Ae(i+1,2)},d:function(e,n){return Ae(e.getUTCDate(),n.length)},a:function(e,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(e,n){return Ae(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ae(e.getUTCHours(),n.length)},m:function(e,n){return Ae(e.getUTCMinutes(),n.length)},s:function(e,n){return Ae(e.getUTCSeconds(),n.length)},S:function(e,n){var i=n.length,r=e.getUTCMilliseconds(),o=Math.floor(r*Math.pow(10,i-3));return Ae(o,n.length)}},Ns={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},LF={G:function(e,n,i){var r=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(e,n,i){if(n==="yo"){var r=e.getUTCFullYear(),o=r>0?r:1-r;return i.ordinalNumber(o,{unit:"year"})}return Ui.y(e,n)},Y:function(e,n,i,r){var o=FT(e,r),a=o>0?o:1-o;if(n==="YY"){var c=a%100;return Ae(c,2)}return n==="Yo"?i.ordinalNumber(a,{unit:"year"}):Ae(a,n.length)},R:function(e,n){var i=OT(e);return Ae(i,n.length)},u:function(e,n){var i=e.getUTCFullYear();return Ae(i,n.length)},Q:function(e,n,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Ae(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Ae(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,i){var r=e.getUTCMonth();switch(n){case"M":case"MM":return Ui.M(e,n);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,i){var r=e.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Ae(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,i,r){var o=MF(e,r);return n==="wo"?i.ordinalNumber(o,{unit:"week"}):Ae(o,n.length)},I:function(e,n,i){var r=bF(e);return n==="Io"?i.ordinalNumber(r,{unit:"week"}):Ae(r,n.length)},d:function(e,n,i){return n==="do"?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ui.d(e,n)},D:function(e,n,i){var r=CF(e);return n==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):Ae(r,n.length)},E:function(e,n,i){var r=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Ae(a,2);case"eo":return i.ordinalNumber(a,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});case"eeee":default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,i,r){var o=e.getUTCDay(),a=(o-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Ae(a,n.length);case"co":return i.ordinalNumber(a,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});case"cccc":default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,i){var r=e.getUTCDay(),o=r===0?7:r;switch(n){case"i":return String(o);case"ii":return Ae(o,n.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,i){var r=e.getUTCHours(),o=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,i){var r=e.getUTCHours(),o;switch(r===12?o=Ns.noon:r===0?o=Ns.midnight:o=r/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,i){var r=e.getUTCHours(),o;switch(r>=17?o=Ns.evening:r>=12?o=Ns.afternoon:r>=4?o=Ns.morning:o=Ns.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,i){if(n==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return Ui.h(e,n)},H:function(e,n,i){return n==="Ho"?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ui.H(e,n)},K:function(e,n,i){var r=e.getUTCHours()%12;return n==="Ko"?i.ordinalNumber(r,{unit:"hour"}):Ae(r,n.length)},k:function(e,n,i){var r=e.getUTCHours();return r===0&&(r=24),n==="ko"?i.ordinalNumber(r,{unit:"hour"}):Ae(r,n.length)},m:function(e,n,i){return n==="mo"?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ui.m(e,n)},s:function(e,n,i){return n==="so"?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ui.s(e,n)},S:function(e,n){return Ui.S(e,n)},X:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return bx(a);case"XXXX":case"XX":return Fr(a);case"XXXXX":case"XXX":default:return Fr(a,":")}},x:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"x":return bx(a);case"xxxx":case"xx":return Fr(a);case"xxxxx":case"xxx":default:return Fr(a,":")}},O:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Nx(a,":");case"OOOO":default:return"GMT"+Fr(a,":")}},z:function(e,n,i,r){var o=r._originalDate||e,a=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Nx(a,":");case"zzzz":default:return"GMT"+Fr(a,":")}},t:function(e,n,i,r){var o=r._originalDate||e,a=Math.floor(o.getTime()/1e3);return Ae(a,n.length)},T:function(e,n,i,r){var o=r._originalDate||e,a=o.getTime();return Ae(a,n.length)}};function Nx(t,e){var n=t>0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),o=i%60;if(o===0)return n+String(r);var a=e;return n+String(r)+a+Ae(o,2)}function bx(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ae(Math.abs(t)/60,2)}return Fr(t,e)}function Fr(t,e){var n=e||"",i=t>0?"-":"+",r=Math.abs(t),o=Ae(Math.floor(r/60),2),a=Ae(r%60,2);return i+o+n+a}var Ix=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},zT=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},AF=function(e,n){var i=e.match(/(P+)(p+)?/)||[],r=i[1],o=i[2];if(!o)return Ix(e,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Ix(r,n)).replace("{{time}}",zT(o,n))},DF={p:zT,P:AF},jF=["D","DD"],RF=["YY","YYYY"];function OF(t){return jF.indexOf(t)!==-1}function FF(t){return RF.indexOf(t)!==-1}function Px(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UF=function(e,n,i){var r,o=zF[e];return typeof o=="string"?r=o:n===1?r=o.one:r=o.other.replace("{{count}}",n.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function Xf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,i=t.formats[n]||t.formats[t.defaultWidth];return i}}var $F={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qF={date:Xf({formats:$F,defaultWidth:"full"}),time:Xf({formats:BF,defaultWidth:"full"}),dateTime:Xf({formats:VF,defaultWidth:"full"})},HF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WF=function(e,n,i,r){return HF[e]};function ua(t){return function(e,n){var i=n!=null&&n.context?String(n.context):"standalone",r;if(i==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{var c=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[h]||t.values[c]}var f=t.argumentCallback?t.argumentCallback(e):e;return r[f]}}var KF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},JF=function(e,n){var i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},e3={ordinalNumber:JF,era:ua({values:KF,defaultWidth:"wide"}),quarter:ua({values:QF,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ua({values:GF,defaultWidth:"wide"}),day:ua({values:ZF,defaultWidth:"wide"}),dayPeriod:ua({values:YF,defaultWidth:"wide",formattingValues:XF,defaultFormattingWidth:"wide"})};function ca(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(r);if(!o)return null;var a=o[0],c=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(c)?n3(c,function(v){return v.test(a)}):t3(c,function(v){return v.test(a)}),f;f=t.valueCallback?t.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;var p=e.slice(a.length);return{value:f,rest:p}}}function t3(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function n3(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function i3(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(t.matchPattern);if(!i)return null;var r=i[0],o=e.match(t.parsePattern);if(!o)return null;var a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;var c=e.slice(r.length);return{value:a,rest:c}}}var r3=/^(\d+)(th|st|nd|rd)?/i,s3=/\d+/i,o3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},a3={any:[/^b/i,/^(a|c)/i]},l3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},u3={any:[/1/i,/2/i,/3/i,/4/i]},c3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},f3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},p3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},g3={ordinalNumber:i3({matchPattern:r3,parsePattern:s3,valueCallback:function(e){return parseInt(e,10)}}),era:ca({matchPatterns:o3,defaultMatchWidth:"wide",parsePatterns:a3,defaultParseWidth:"any"}),quarter:ca({matchPatterns:l3,defaultMatchWidth:"wide",parsePatterns:u3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ca({matchPatterns:c3,defaultMatchWidth:"wide",parsePatterns:h3,defaultParseWidth:"any"}),day:ca({matchPatterns:d3,defaultMatchWidth:"wide",parsePatterns:f3,defaultParseWidth:"any"}),dayPeriod:ca({matchPatterns:m3,defaultMatchWidth:"any",parsePatterns:p3,defaultParseWidth:"any"})},UT={code:"en-US",formatDistance:UF,formatLong:qF,formatRelative:WF,localize:e3,match:g3,options:{weekStartsOn:0,firstWeekContainsDate:1}},v3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,y3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_3=/^'([^]*?)'?$/,w3=/''/g,x3=/[a-zA-Z]/;function Oe(t,e,n){var i,r,o,a,c,h,f,p,v,y,x,C,k,T;be(2,arguments);var E=String(e),_=tu(),S=(i=(r=void 0)!==null&&r!==void 0?r:_.locale)!==null&&i!==void 0?i:UT,I=Ii((o=(a=(c=(h=void 0)!==null&&h!==void 0?h:void 0)!==null&&c!==void 0?c:_.firstWeekContainsDate)!==null&&a!==void 0?a:(f=_.locale)===null||f===void 0||(p=f.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Ii((v=(y=(x=(C=void 0)!==null&&C!==void 0?C:void 0)!==null&&x!==void 0?x:_.weekStartsOn)!==null&&y!==void 0?y:(k=_.locale)===null||k===void 0||(T=k.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&v!==void 0?v:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var A=Ce(t);if(!hF(A))throw new RangeError("Invalid time value");var j=Fp(A),O=EF(A,j),J={firstWeekContainsDate:I,weekStartsOn:M,locale:S,_originalDate:A},Q=E.match(y3).map(function(ne){var B=ne[0];if(B==="p"||B==="P"){var Ie=DF[B];return Ie(ne,S.formatLong)}return ne}).join("").match(v3).map(function(ne){if(ne==="''")return"'";var B=ne[0];if(B==="'")return S3(ne);var Ie=LF[B];if(Ie)return FF(ne)&&Px(ne,e,String(t)),OF(ne)&&Px(ne,e,String(t)),Ie(O,ne,S.localize,J);if(B.match(x3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return ne}).join("");return Q}function S3(t){var e=t.match(_3);return e?e[1].replace(w3,"'"):t}function $T(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function E3(t){return $T({},t)}var Mx=1440,k3=2520,Jf=43200,C3=86400;function T3(t,e,n){var i,r;be(2,arguments);var o=tu(),a=(i=(r=n==null?void 0:n.locale)!==null&&r!==void 0?r:o.locale)!==null&&i!==void 0?i:UT;if(!a.formatDistance)throw new RangeError("locale must contain formatDistance property");var c=Sc(t,e);if(isNaN(c))throw new RangeError("Invalid time value");var h=$T(E3(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:c}),f,p;c>0?(f=Ce(e),p=Ce(t)):(f=Ce(t),p=Ce(e));var v=wF(p,f),y=(Fp(p)-Fp(f))/1e3,x=Math.round((v-y)/60),C;if(x<2)return n!=null&&n.includeSeconds?v<5?a.formatDistance("lessThanXSeconds",5,h):v<10?a.formatDistance("lessThanXSeconds",10,h):v<20?a.formatDistance("lessThanXSeconds",20,h):v<40?a.formatDistance("halfAMinute",0,h):v<60?a.formatDistance("lessThanXMinutes",1,h):a.formatDistance("xMinutes",1,h):x===0?a.formatDistance("lessThanXMinutes",1,h):a.formatDistance("xMinutes",x,h);if(x<45)return a.formatDistance("xMinutes",x,h);if(x<90)return a.formatDistance("aboutXHours",1,h);if(x<Mx){var k=Math.round(x/60);return a.formatDistance("aboutXHours",k,h)}else{if(x<k3)return a.formatDistance("xDays",1,h);if(x<Jf){var T=Math.round(x/Mx);return a.formatDistance("xDays",T,h)}else if(x<C3)return C=Math.round(x/Jf),a.formatDistance("aboutXMonths",C,h)}if(C=_F(p,f),C<12){var E=Math.round(x/Jf);return a.formatDistance("xMonths",E,h)}else{var _=C%12,S=Math.floor(C/12);return _<3?a.formatDistance("aboutXYears",S,h):_<9?a.formatDistance("overXYears",S,h):a.formatDistance("almostXYears",S+1,h)}}function N3(t,e){return be(1,arguments),T3(t,Date.now(),e)}function b3(t){return be(1,arguments),Ce(t).getTime()<Date.now()}function I3(t,e){be(2,arguments);var n=Ii(e);return jT(t,-n)}function P3({name:t,status:e,customStatus:n,avatar:i,lastSeen:r}){var h;const o={online:"bg-green-500",away:"bg-yellow-500",offline:"bg-gray-400"},a={online:"Online now",away:"Away",offline:r?`Last seen ${N3(new Date(r),{addSuffix:!0})}`:"Offline"},c=((h=t==null?void 0:t.charAt(0))==null?void 0:h.toUpperCase())||"?";return d.jsxs("div",{className:"glass-card rounded-2xl p-4 flex items-center gap-4 smooth-transition hover-lift",children:[d.jsxs("div",{className:"relative",children:[i?d.jsx("img",{src:i,alt:t,className:"w-12 h-12 rounded-full object-cover"}):d.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center",children:d.jsx("span",{className:"text-white font-semibold text-lg",children:c})}),d.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${o[e]}`})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:t}),d.jsx("p",{className:"text-sm text-gray-500",children:n||a[e]})]})]})}const M3="inline-flex items-center justify-center gap-2 rounded-xl font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 disabled:opacity-50 disabled:pointer-events-none",Lx={default:"h-11 px-4 text-sm",sm:"h-9 px-3 text-sm",lg:"h-12 px-5 text-base",icon:"h-9 w-9"},Ax={default:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white hover:from-emerald-600 hover:to-teal-600",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",ghost:"bg-transparent text-gray-700 hover:bg-gray-100"};function X({children:t,className:e="",variant:n="default",size:i="default",loading:r=!1,disabled:o,...a}){const c=[M3,Lx[i]||Lx.default,Ax[n]||Ax.default,e].join(" ").trim();return d.jsx("button",{className:`${c} active:scale-[0.99]`,disabled:o||r,"aria-busy":r,...a,children:r?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),d.jsx("span",{children:"Loading..."})]}):t})}const L3="flex h-11 w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-400 focus:border-pink-300 disabled:cursor-not-allowed disabled:opacity-50";function rt({className:t="",...e}){return d.jsx("input",{className:[L3,t].join(" ").trim(),...e})}function Pi({open:t,onOpenChange:e,children:n}){return b.useEffect(()=>{if(t){const i=document.body.style.overflow;document.body.style.overflow="hidden";const r=o=>{o.key==="Escape"&&(e==null||e(!1))};return window.addEventListener("keydown",r),()=>{document.body.style.overflow=i,window.removeEventListener("keydown",r)}}},[t,e]),t?d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:()=>e==null?void 0:e(!1)}),n]}):null}function Mi({children:t,className:e=""}){return d.jsx("div",{role:"dialog","aria-modal":"true",className:["relative z-50 max-w-sm w-[92%] sm:w-full rounded-2xl bg-white/85 backdrop-blur border border-white/50 shadow-xl p-4 animate-in fade-in zoom-in-95 duration-150",e].join(" ").trim(),children:t})}function kl({children:t}){return d.jsx("div",{className:"mb-2",children:t})}function Cl({children:t,className:e=""}){return d.jsx("h3",{className:["text-lg font-semibold tracking-tight",e].join(" ").trim(),children:t})}function A3({current:t,goal:e,onUpdate:n}){const[i,r]=b.useState(!1),[o,a]=b.useState(""),c=typeof t=="number"&&isFinite(t)?t:0,h=typeof e=="number"&&isFinite(e)&&e>0?e:0,f=h>0?Math.min(c/h*100,100):0,p=Math.max(h-c,0),v=()=>{const x=t+parseFloat(o||0);n(x),a(""),r(!1)},y=[50,100,250,500];return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"glass-card rounded-2xl p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:d.jsx(J5,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-gray-800 font-bold",children:"Savings Goal"}),d.jsxs("p",{className:"text-gray-400 text-sm",children:["$",Number(p).toLocaleString()," to go"]})]})]}),d.jsx(X,{onClick:()=>r(!0),size:"icon",className:"rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 w-9 h-9",children:d.jsx(yr,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{className:"text-gray-500",children:"Progress"}),d.jsxs("span",{className:"text-gray-700 font-medium",children:[f.toFixed(0),"%"]})]}),d.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full smooth-transition",style:{width:`${f}%`}})}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"text-emerald-600 font-bold",children:["$",Number(c).toLocaleString()]}),d.jsxs("span",{className:"text-gray-400",children:["$",Number(h).toLocaleString()]})]})]})]}),d.jsx(Pi,{open:i,onOpenChange:r,children:d.jsxs(Mi,{className:"glass-card",children:[d.jsx(kl,{children:d.jsx(Cl,{className:"gradient-text",children:"Add to Savings"})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsx(rt,{type:"number",placeholder:"Enter amount...",value:o,onChange:x=>a(x.target.value),className:"rounded-xl h-12"}),d.jsx("div",{className:"flex gap-2 flex-wrap",children:y.map(x=>d.jsxs(X,{variant:"outline",onClick:()=>a(x.toString()),className:"rounded-full",children:["+$",x]},x))}),d.jsxs(X,{onClick:v,disabled:!o||parseFloat(o)<=0,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white rounded-xl h-12",children:["Add $",o||"0"]})]})]})})]})}const D3=[{value:"happy",emoji:"",label:"Happy"},{value:"excited",emoji:"",label:"Excited"},{value:"calm",emoji:"",label:"Calm"},{value:"stressed",emoji:"",label:"Stressed"},{value:"tired",emoji:"",label:"Tired"},{value:"loved",emoji:"",label:"Loved"},{value:"lonely",emoji:"",label:"Lonely"},{value:"energized",emoji:"",label:"Energized"}],j3=[{value:"words_of_affirmation",emoji:"",label:"Words of Affirmation"},{value:"quality_time",emoji:"",label:"Quality Time"},{value:"physical_touch",emoji:"",label:"Physical Touch"},{value:"acts_of_service",emoji:"",label:"Acts of Service"},{value:"receiving_gifts",emoji:"",label:"Receiving Gifts"}];function R3({user:t,onClose:e}){const n=sn(),i=Oe(new Date,"yyyy-MM-dd"),[r,o]=b.useState({emotion:"",energy_level:5,love_language:""}),{data:a}=De({queryKey:["checkIn",t==null?void 0:t.full_name,i],queryFn:async()=>{const v=(await $.entities.DailyCheckIn.list("-created_date",10)).find(y=>y.user_name===(t==null?void 0:t.full_name)&&y.date===i);return v&&o({emotion:v.emotion,energy_level:v.energy_level,love_language:v.love_language}),v},enabled:!!t}),c=we({mutationFn:p=>$.entities.DailyCheckIn.create({...p,user_name:t==null?void 0:t.full_name,date:i}),onSuccess:()=>{n.invalidateQueries({queryKey:["checkIn"]}),n.invalidateQueries({queryKey:["partnerCheckIn"]}),e()}}),h=we({mutationFn:p=>$.entities.DailyCheckIn.update(a.id,p),onSuccess:()=>{n.invalidateQueries({queryKey:["checkIn"]}),n.invalidateQueries({queryKey:["partnerCheckIn"]}),e()}}),f=()=>{!r.emotion||!r.love_language||(a?h.mutate(r):c.mutate(r))};return d.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto animate-slide-up shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Daily Check-In"}),d.jsx(X,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-400 hover:text-gray-600",children:d.jsx(_r,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(dt,{className:"w-4 h-4 text-pink-500"}),"How are you feeling?"]}),d.jsx("div",{className:"grid grid-cols-4 gap-2",children:D3.map(p=>d.jsxs("button",{onClick:()=>o({...r,emotion:p.value}),className:`p-3 rounded-xl text-center smooth-transition ${r.emotion===p.value?"bg-gradient-to-br from-pink-500 to-purple-500 text-white shadow-lg scale-105":"bg-gray-50 hover:bg-gray-100 text-gray-700"}`,children:[d.jsx("div",{className:"text-2xl mb-1",children:p.emoji}),d.jsx("div",{className:"text-xs",children:p.label})]},p.value))})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(oF,{className:"w-4 h-4 text-yellow-500"}),"Energy Level: ",r.energy_level,"/10"]}),d.jsx("input",{type:"range",min:"1",max:"10",value:r.energy_level,onChange:p=>o({...r,energy_level:parseInt(p.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500"}),d.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[d.jsx("span",{children:"Low"}),d.jsx("span",{children:"High"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-3 block flex items-center gap-2",children:[d.jsx(us,{className:"w-4 h-4 text-purple-500"}),"What do you need today?"]}),d.jsx("div",{className:"space-y-2",children:j3.map(p=>d.jsxs("button",{onClick:()=>o({...r,love_language:p.value}),className:`w-full p-3 rounded-xl text-left smooth-transition flex items-center gap-3 ${r.love_language===p.value?"bg-gradient-to-br from-pink-500 to-purple-500 text-white shadow-lg":"bg-gray-50 hover:bg-gray-100 text-gray-700"}`,children:[d.jsx("span",{className:"text-xl",children:p.emoji}),d.jsx("span",{className:"font-medium",children:p.label})]},p.value))})]}),d.jsx(X,{onClick:f,disabled:!r.emotion||!r.love_language,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl h-12 text-base",children:a?"Update Check-In":"Complete Check-In"})]})]})})}function O3({memories:t,onClose:e}){const[n,i]=b.useState(null),[r,o]=b.useState("all"),a=t.filter(v=>r==="all"?!0:r==="favorites"?v.is_favorite:r==="photos"?v.url:r==="notes"?v.content&&!v.url:!0).sort((v,y)=>new Date(y.created_date)-new Date(v.created_date)),c=n!==null?a[n]:null,h=v=>v.url?xd:v.content?us:v.date?Ir:dt,f=v=>v.url?v.url:null,p=v=>v.content||v.title||v.caption||"Memory";return d.jsxs("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:[d.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(100)].map((v,y)=>d.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,opacity:Math.random()*.7+.3}},y))}),d.jsxs("div",{className:"relative z-10 flex items-center justify-between p-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ri,{className:"w-6 h-6 text-pink-400"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-white",children:"Memory Galaxy"}),d.jsxs("p",{className:"text-white/60 text-sm",children:[a.length," memories"]})]})]}),d.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 smooth-transition",children:d.jsx(_r,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"relative z-10 px-4 mb-4",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{value:"all",label:"All"},{value:"favorites",label:" Favorites"},{value:"photos",label:" Photos"},{value:"notes",label:" Notes"}].map(v=>d.jsx("button",{onClick:()=>o(v.value),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap smooth-transition ${r===v.value?"bg-white text-purple-900":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:v.label},v.value))})}),d.jsxs("div",{className:"relative z-10 px-4 pb-24 h-[calc(100vh-180px)] overflow-y-auto",children:[d.jsx("div",{className:"grid grid-cols-3 gap-3",children:a.map((v,y)=>{const x=h(v),C=f(v);return d.jsxs("button",{onClick:()=>i(y),className:`aspect-square rounded-2xl overflow-hidden relative group smooth-transition hover:scale-105 ${v.is_favorite?"ring-2 ring-pink-400 ring-offset-2 ring-offset-transparent":""}`,children:[C?d.jsx("img",{src:C,alt:"",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500/30 to-purple-500/30 backdrop-blur flex items-center justify-center",children:d.jsx(x,{className:"w-8 h-8 text-white/70"})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 smooth-transition"}),v.is_favorite&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx(dt,{className:"w-4 h-4 text-pink-400",fill:"#F472B6"})}),d.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 smooth-transition",children:d.jsx("p",{className:"text-white text-xs truncate",children:Oe(new Date(v.created_date),"MMM d, yyyy")})})]},v.id||y)})}),a.length===0&&d.jsxs("div",{className:"text-center py-20",children:[d.jsx(ri,{className:"w-16 h-16 mx-auto mb-4 text-white/30"}),d.jsx("p",{className:"text-white/50",children:"No memories in this category"})]})]}),c&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",children:d.jsxs("div",{className:"relative max-w-lg w-full max-h-[90vh] overflow-hidden",children:[n>0&&d.jsx("button",{onClick:()=>i(n-1),className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 backdrop-blur flex items-center justify-center text-white hover:bg-white/20",children:d.jsx(TT,{className:"w-6 h-6"})}),n<a.length-1&&d.jsx("button",{onClick:()=>i(n+1),className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 rounded-full bg-white/10 backdrop-blur flex items-center justify-center text-white hover:bg-white/20",children:d.jsx(NT,{className:"w-6 h-6"})}),d.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden",children:[c.url?d.jsx("img",{src:c.url,alt:"",className:"w-full max-h-[50vh] object-cover"}):d.jsx("div",{className:"h-40 bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:ro.createElement(h(c),{className:"w-16 h-16 text-white/50"})}),d.jsxs("div",{className:"p-5",children:[d.jsx("p",{className:"text-gray-800 text-lg leading-relaxed mb-3",children:p(c)}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[d.jsx("span",{children:Oe(new Date(c.created_date),"MMMM d, yyyy")}),c.is_favorite&&d.jsxs("span",{className:"flex items-center gap-1 text-pink-500",children:[d.jsx(dt,{className:"w-4 h-4",fill:"#FF6B9D"})," Favorite"]})]}),d.jsx(X,{onClick:()=>i(null),className:"w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl h-11",children:"Close"})]})]})]})})]})}function F3({relationshipData:t,onClose:e}){const n=sn(),[i,r]=b.useState(!1),{data:o=[]}=De({queryKey:["insights"],queryFn:()=>$.entities.RelationshipInsight.list("-created_date",10)}),{data:a=[]}=De({queryKey:["allCheckIns"],queryFn:()=>$.entities.DailyCheckIn.list("-created_date",14)}),{data:c=[]}=De({queryKey:["recentNotes"],queryFn:()=>$.entities.Note.list("-created_date",10)}),{data:h=[]}=De({queryKey:["recentEvents"],queryFn:()=>$.entities.Event.list("date",5)}),f=we({mutationFn:k=>$.entities.RelationshipInsight.create(k),onSuccess:()=>n.invalidateQueries({queryKey:["insights"]})}),p=we({mutationFn:k=>$.entities.RelationshipInsight.update(k,{is_read:!0}),onSuccess:()=>n.invalidateQueries({queryKey:["insights"]})}),v=async()=>{r(!0);const k={relationship_days:t!=null&&t.start_date?Math.floor((new Date-new Date(t.start_date))/(1e3*60*60*24)):0,recent_emotions:a.map(E=>({user:E.user_name,emotion:E.emotion,love_language:E.love_language})),recent_notes_count:c.length,upcoming_events:h.map(E=>E.title),savings_progress:t!=null&&t.current_savings&&(t!=null&&t.savings_goal)?(t.current_savings/t.savings_goal*100).toFixed(0):0},T=await $.integrations.Core.InvokeLLM({prompt:`Based on this couple's relationship data, generate 3 personalized insights/tips.
      
      Context:
      - Together for ${k.relationship_days} days
      - Recent emotional check-ins: ${JSON.stringify(k.recent_emotions)}
      - Upcoming events: ${k.upcoming_events.join(", ")||"None"}
      - Savings goal progress: ${k.savings_progress}%
      - Recent notes exchanged: ${k.recent_notes_count}
      
      Generate insights that are:
      1. A communication tip based on their love languages
      2. A date suggestion based on their mood patterns
      3. A relationship pattern observation
      
      Be warm, supportive, and specific to their situation.`,response_json_schema:{type:"object",properties:{insights:{type:"array",items:{type:"object",properties:{type:{type:"string"},title:{type:"string"},content:{type:"string"}}}}}}});for(const E of T.insights||[])await f.mutateAsync(E);r(!1)},y=k=>({communication_tip:us,date_suggestion:Ir,pattern:LT,milestone:dt,weekly_summary:ri})[k]||Sx,x=k=>({communication_tip:"from-blue-500 to-cyan-500",date_suggestion:"from-pink-500 to-rose-500",pattern:"from-purple-500 to-violet-500",milestone:"from-amber-500 to-orange-500",weekly_summary:"from-green-500 to-emerald-500"})[k]||"from-gray-500 to-slate-500",C=o.filter(k=>!k.is_read).length;return d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card rounded-3xl p-6 max-w-md w-full max-h-[85vh] overflow-y-auto animate-slide-up",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:d.jsx(ri,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold gradient-text",children:"Insights"}),C>0&&d.jsxs("p",{className:"text-xs text-white/50",children:[C," new"]})]})]}),d.jsx(X,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-white/50 hover:text-white",children:d.jsx(_r,{className:"w-5 h-5"})})]}),d.jsx(X,{onClick:v,disabled:i,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl h-12 mb-6",children:i?d.jsxs(d.Fragment,{children:[d.jsx(ii,{className:"w-5 h-5 mr-2 animate-spin"})," Analyzing..."]}):d.jsxs(d.Fragment,{children:[d.jsx(eF,{className:"w-5 h-5 mr-2"})," Generate New Insights"]})}),d.jsxs("div",{className:"space-y-4",children:[o.map(k=>{const T=y(k.type);return d.jsx("div",{className:`rounded-2xl p-4 smooth-transition cursor-pointer ${k.is_read?"bg-white/5":"bg-white/10 shadow-lg"}`,onClick:()=>!k.is_read&&p.mutate(k.id),children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${x(k.type)} flex items-center justify-center flex-shrink-0`,children:d.jsx(T,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-bold text-white",children:k.title}),!k.is_read&&d.jsx("span",{className:"w-2 h-2 rounded-full bg-pink-500"})]}),d.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.content})]})]})},k.id)}),o.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Sx,{className:"w-16 h-16 mx-auto mb-4 text-white/20"}),d.jsx("p",{className:"text-white/40",children:"No insights yet"}),d.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Generate some!"})]})]})]})})}function z3({user:t,onClose:e}){const n=sn(),[i,r]=b.useState(""),[o,a]=b.useState(!1),[c,h]=b.useState([]),[f,p]=b.useState(!1),v=b.useRef(null),{data:y=[]}=De({queryKey:["chatNotes"],queryFn:()=>$.entities.Note.list("-created_date",50),refetchInterval:3e3}),{data:x}=De({queryKey:["partnerMood"],queryFn:async()=>{const _=Oe(new Date,"yyyy-MM-dd");return(await $.entities.DailyCheckIn.list("-created_date")).find(I=>I.date===_&&I.user_name!==(t==null?void 0:t.full_name))}}),C=we({mutationFn:_=>$.entities.Note.create({content:_,author_name:(t==null?void 0:t.full_name)||"Anonymous"}),onSuccess:()=>{n.invalidateQueries({queryKey:["chatNotes"]}),r("")}}),k=async()=>{p(!0),a(!0);const _=x?`Partner is feeling ${x.emotion} and needs ${x.love_language.replace(/_/g," ")}`:"No mood data available",S=await $.integrations.Core.InvokeLLM({prompt:`Generate 4 sweet, romantic message suggestions for someone to send to their partner.
      Context: ${_}
      Make them warm, genuine, and varied in length.`,response_json_schema:{type:"object",properties:{suggestions:{type:"array",items:{type:"string"}}}}});h(S.suggestions||[]),p(!1)},T=()=>{i.trim()&&C.mutate(i)},E=_=>{r(_),a(!1)};return b.useEffect(()=>{var _;(_=v.current)==null||_.scrollIntoView({behavior:"smooth"})},[y]),d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card rounded-3xl w-full max-w-md h-[80vh] flex flex-col animate-slide-up",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:d.jsx(dt,{className:"w-5 h-5 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-bold text-white",children:"Love Notes"}),x&&d.jsxs("p",{className:"text-xs text-white/50",children:["Partner feels ",x.emotion]})]})]}),d.jsx(X,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-white/50 hover:text-white",children:d.jsx(_r,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[[...y].reverse().map(_=>{const S=_.author_name===(t==null?void 0:t.full_name);return d.jsx("div",{className:`flex ${S?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${S?"bg-gradient-to-br from-pink-500 to-purple-600 text-white rounded-br-sm":"bg-white/10 text-white rounded-bl-sm"}`,children:[d.jsx("p",{className:"text-sm",children:_.content}),d.jsx("p",{className:`text-xs mt-1 ${S?"text-white/70":"text-white/40"}`,children:Oe(new Date(_.created_date),"h:mm a")})]})},_.id)}),d.jsx("div",{ref:v})]}),o&&d.jsxs("div",{className:"px-4 py-3 border-t border-white/10 bg-purple-500/10",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-xs font-semibold text-purple-300 flex items-center gap-1",children:[d.jsx(ri,{className:"w-3 h-3"})," AI Suggestions"]}),d.jsx(X,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 px-2 text-white/50",children:d.jsx(_r,{className:"w-3 h-3"})})]}),f?d.jsx("div",{className:"flex items-center justify-center py-4",children:d.jsx(ii,{className:"w-5 h-5 animate-spin text-purple-400"})}):d.jsx("div",{className:"space-y-2",children:c.map((_,S)=>d.jsx("button",{onClick:()=>E(_),className:"w-full text-left text-sm bg-white/5 rounded-xl px-3 py-2 text-white/80 hover:bg-white/10 smooth-transition",children:_},S))})]}),d.jsx("div",{className:"p-4 border-t border-white/10",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(X,{variant:"outline",size:"icon",onClick:k,className:"rounded-full flex-shrink-0 border-white/20 text-purple-400 hover:bg-purple-500/20",children:d.jsx(ri,{className:"w-4 h-4"})}),d.jsx(rt,{value:i,onChange:_=>r(_.target.value),onKeyPress:_=>_.key==="Enter"&&T(),placeholder:"Send a love note...",className:"flex-1 bg-white/5 border-white/10 rounded-full text-white"}),d.jsx(X,{onClick:T,disabled:!i.trim(),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full",children:d.jsx(MT,{className:"w-4 h-4"})})]})})]})})}const Ju=t=>`/${t}`;function U3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState(!1),[c,h]=b.useState(!1),[f,p]=b.useState(!1),[v,y]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const A=await $.auth.me();console.log("[Dashboard] auth.me()",A),n(A)}catch(A){console.error("Auth error:",A)}finally{y(!1)}})()},[]),b.useEffect(()=>{if(!e)return;const M=async()=>{const O=(await $.entities.UserPresence.list()).find(J=>J.user_name===e.full_name);O?await $.entities.UserPresence.update(O.id,{status:"online",last_seen:new Date().toISOString()}):await $.entities.UserPresence.create({user_name:e.full_name,status:"online",last_seen:new Date().toISOString()})};M();const A=setInterval(M,3e4);return()=>{clearInterval(A)}},[e]);const{data:x}=De({queryKey:["relationship"],queryFn:async()=>{var M,A;try{const j=(A=(M=$==null?void 0:$.entities)==null?void 0:M.RelationshipData)==null?void 0:A.list;if(typeof j!="function")return null;const O=await j();return console.log("[Dashboard] RelationshipData.list()",O),(O==null?void 0:O[0])||null}catch(j){return console.error("RelationshipData fetch error:",j),null}}}),{data:C}=De({queryKey:["presence"],queryFn:async()=>{const M=await $.entities.UserPresence.list("-last_seen"),A=new Date;return M.map(j=>{const O=new Date(j.last_seen),J=(A-O)/1e3/60;return{...j,status:J<2?"online":J<10?"away":"offline"}})},refetchInterval:15e3}),{data:k}=De({queryKey:["latestNote"],queryFn:async()=>(await $.entities.Note.list("-created_date",1))[0]||null}),{data:T}=De({queryKey:["upcomingEvents"],queryFn:async()=>{const M=await $.entities.Event.list("date",3),A=new Date;return M.filter(j=>new Date(j.date)>=A)}}),{data:E}=De({queryKey:["partnerCheckIn",e==null?void 0:e.full_name],queryFn:async()=>{const M=Oe(new Date,"yyyy-MM-dd");return(await $.entities.DailyCheckIn.list("-created_date")).find(j=>j.date===M&&j.user_name!==(e==null?void 0:e.full_name))},refetchInterval:6e4,enabled:!!e}),{data:_}=De({queryKey:["listeningSession"],queryFn:async()=>(await $.entities.ListeningSession.list("-created_date",1)).find(A=>A.is_active)||null,refetchInterval:3e3}),{data:S}=De({queryKey:["allMemories"],queryFn:async()=>{const[M,A,j]=await Promise.all([$.entities.Note.list("-created_date"),$.entities.Photo.list("-created_date"),$.entities.Event.list("-created_date")]);return[...M,...A,...j]}}),I=we({mutationFn:M=>$.entities.RelationshipData.update(x.id,{current_savings:M}),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship"]})}});return x?(C!=null&&C.filter(M=>M.status==="online"&&M.user_name!==(e==null?void 0:e.full_name)),d.jsxs("div",{className:"container mx-auto max-w-2xl px-4 space-y-6 pb-24",children:[i&&d.jsx(R3,{user:e,onClose:()=>r(!1)}),o&&S&&d.jsx(O3,{memories:S,onClose:()=>a(!1)}),c&&d.jsx(F3,{relationshipData:x,onClose:()=>h(!1)}),f&&d.jsx(z3,{user:e,onClose:()=>p(!1)}),d.jsxs("div",{className:"pt-2 animate-slide-up",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Welcome Home"}),d.jsxs("p",{className:"text-gray-500 mt-1",children:[e==null?void 0:e.full_name," "]})]}),_&&d.jsx(va,{to:Ju("Media"),className:"block",children:d.jsx("div",{className:"glass-card rounded-2xl p-4 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative",children:[_.cover_art?d.jsx("img",{src:_.cover_art,alt:"",className:"w-14 h-14 rounded-xl"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:d.jsx(Kr,{className:"w-6 h-6 text-white"})}),d.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:d.jsx(PT,{className:"w-2 h-2 text-white"})})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-xs text-purple-600 font-medium",children:" Listening Together"}),d.jsx("p",{className:"text-gray-800 font-semibold truncate",children:_.song_title}),d.jsx("p",{className:"text-gray-500 text-sm",children:_.song_artist})]})]})})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-slide-up",children:[d.jsxs("button",{onClick:()=>r(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center mb-3",children:d.jsx(dt,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Check-In"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Share how you feel"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center mb-3",children:d.jsx(ri,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Memory Galaxy"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Explore together"})]}),d.jsxs("button",{onClick:()=>h(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center mb-3",children:d.jsx(LT,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Insights"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"AI relationship tips"})]}),d.jsxs("button",{onClick:()=>p(!0),className:"glass-card rounded-2xl p-4 text-left hover-lift",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center mb-3",children:d.jsx(us,{className:"w-5 h-5 text-white"})}),d.jsx("h3",{className:"text-gray-800 font-semibold",children:"Love Notes"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Send a message"})]})]}),E&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 bg-gradient-to-br from-pink-50 to-purple-50 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(dt,{className:"w-5 h-5 text-pink-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Partner's Mood"})]}),d.jsx("span",{className:"text-xs text-gray-400",children:Oe(new Date(E.created_date),"MMM d, h:mm a")})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("p",{className:"text-gray-700",children:[d.jsx("span",{className:"font-semibold",children:E.user_name})," is feeling"," ",d.jsx("span",{className:"font-semibold text-pink-600",children:E.emotion})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",style:{width:`${E.energy_level*10}%`}})}),d.jsxs("span",{className:"text-gray-500 text-sm",children:[E.energy_level,"/10 "]})]}),d.jsxs("div",{className:"bg-white/60 rounded-xl p-3",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"They need today:"}),d.jsxs("p",{className:"text-gray-800 font-semibold mt-1",children:[" ",E.love_language.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase())]})]})]})]}),d.jsx(aF,{startDate:x.start_date}),C&&C.length>0&&d.jsxs("div",{className:"space-y-3 animate-slide-up",children:[d.jsx("h2",{className:"text-lg font-bold text-gray-800 px-1",children:"Presence"}),C.map(M=>d.jsx(P3,{name:M.user_name,status:M.status,customStatus:M.custom_status,lastSeen:M.last_seen},M.id))]}),d.jsx(A3,{current:x.current_savings,goal:x.savings_goal,onUpdate:M=>I.mutate(M)}),k&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(us,{className:"w-5 h-5 text-purple-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Latest Note"})]}),d.jsx("p",{className:"text-gray-700 leading-relaxed mb-2",children:k.content}),d.jsxs("p",{className:"text-gray-400 text-sm",children:[k.author_name,"  ",Oe(new Date(k.created_date),"MMM d, h:mm a")]}),d.jsx(va,{to:Ju("Media"),className:"text-pink-500 font-medium mt-3 inline-block text-sm",children:"View all notes "})]}),T&&T.length>0&&d.jsxs("div",{className:"glass-card rounded-2xl p-5 animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(Ir,{className:"w-5 h-5 text-pink-500"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Upcoming"})]}),d.jsx("div",{className:"space-y-3",children:T.map(M=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500 to-purple-500 flex flex-col items-center justify-center",children:[d.jsx("span",{className:"text-[10px] font-medium text-white/80",children:Oe(new Date(M.date),"MMM")}),d.jsx("span",{className:"text-lg font-bold text-white",children:Oe(new Date(M.date),"d")})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-gray-800 font-semibold",children:M.title}),M.time&&d.jsx("p",{className:"text-gray-500 text-sm",children:M.time})]})]},M.id))}),d.jsx(va,{to:Ju("Schedule"),className:"text-pink-500 font-medium mt-4 inline-block text-sm",children:"View calendar "})]})]})):d.jsx("div",{className:"flex items-center justify-center min-h-screen p-6",children:d.jsxs("div",{className:"text-center space-y-4 max-w-sm",children:[d.jsx(ii,{className:"w-8 h-8 animate-spin text-pink-500 mx-auto"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-700 font-semibold",children:"No relationship data yet"}),d.jsx("p",{className:"text-gray-500 text-sm",children:"Create your anniversary and partner info to get started."})]}),d.jsx(va,{to:Ju("Profile"),children:d.jsx(X,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Go to Profile"})})]})})}function $3(){var v;const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState({start_date:"",partner1_name:"",partner2_name:"",savings_goal:1e4});b.useEffect(()=>{$.auth.me().then(y=>{console.log("[Profile] auth.me()",y),n(y)}).catch(y=>{console.error("[Profile] auth.me error",y)})},[]);const{data:c}=De({queryKey:["relationship"],queryFn:async()=>{var y,x;try{const C=(x=(y=$==null?void 0:$.entities)==null?void 0:y.RelationshipData)==null?void 0:x.list;if(typeof C!="function")return null;const k=await C();return console.log("[Profile] RelationshipData.list()",k),(k==null?void 0:k[0])||null}catch(C){return console.error("RelationshipData fetch error:",C),null}}});b.useEffect(()=>{c&&a({start_date:c.start_date||"",partner1_name:c.partner1_name||"",partner2_name:c.partner2_name||"",savings_goal:c.savings_goal||1e4})},[c]);const{data:h}=De({queryKey:["stats"],queryFn:async()=>{var T,E,_,S,I,M,A,j,O,J,Q,ne;const[y,x,C,k]=await Promise.all([((_=(E=(T=$.entities)==null?void 0:T.Note)==null?void 0:E.list)==null?void 0:_.call(E))??[],((M=(I=(S=$.entities)==null?void 0:S.Photo)==null?void 0:I.list)==null?void 0:M.call(I))??[],((O=(j=(A=$.entities)==null?void 0:A.Music)==null?void 0:j.list)==null?void 0:O.call(j))??[],((ne=(Q=(J=$.entities)==null?void 0:J.Event)==null?void 0:Q.list)==null?void 0:ne.call(Q))??[]]);return{notes:y.length,photos:x.length,music:C.length,events:k.length}}}),f=we({mutationFn:async y=>c?$.entities.RelationshipData.update(c.id,y):$.entities.RelationshipData.create(y),onSuccess:()=>{t.invalidateQueries({queryKey:["relationship"]}),r(!1)}}),p=()=>{$.auth.logout()};return d.jsxs("div",{className:"container mx-auto max-w-2xl px-4 pb-24 space-y-6",children:[d.jsx("div",{className:"pt-4",children:d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Profile"})}),d.jsx("div",{className:"glass-card rounded-2xl p-5",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:d.jsx(AT,{className:"w-8 h-8 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:(e==null?void 0:e.full_name)||"User"}),d.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email})]})]})}),h&&d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(dt,{className:"w-5 h-5 text-pink-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.notes}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Notes"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(xd,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.photos}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Photos"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(Kr,{className:"w-5 h-5 text-cyan-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.music}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Songs"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-3 text-center",children:[d.jsx(Ir,{className:"w-5 h-5 text-amber-500 mx-auto mb-1"}),d.jsx("p",{className:"text-xl font-bold text-gray-800",children:h.events}),d.jsx("p",{className:"text-gray-400 text-xs",children:"Events"})]})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(iF,{className:"w-5 h-5 text-gray-400"}),d.jsx("h3",{className:"text-gray-800 font-bold",children:"Relationship Settings"})]}),!i&&d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>r(!0),className:"rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:d.jsx(X5,{className:"w-4 h-4"})})]}),i?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Anniversary Date"}),d.jsx(rt,{type:"date",value:o.start_date,onChange:y=>a({...o,start_date:y.target.value}),className:"rounded-xl"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Partner 1"}),d.jsx(rt,{placeholder:"Name",value:o.partner1_name,onChange:y=>a({...o,partner1_name:y.target.value}),className:"rounded-xl"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Partner 2"}),d.jsx(rt,{placeholder:"Name",value:o.partner2_name,onChange:y=>a({...o,partner2_name:y.target.value}),className:"rounded-xl"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-gray-500 text-sm mb-2 block",children:"Savings Goal ($)"}),d.jsx(rt,{type:"number",value:o.savings_goal,onChange:y=>a({...o,savings_goal:parseFloat(y.target.value)}),className:"rounded-xl"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(X,{variant:"outline",onClick:()=>r(!1),className:"flex-1 rounded-xl",children:"Cancel"}),d.jsxs(X,{onClick:()=>f.mutate(o),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",loading:f.isPending,children:[d.jsx(tF,{className:"w-4 h-4 mr-2"})," Save"]})]})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-gray-500",children:"Anniversary"}),d.jsx("span",{className:"text-gray-800 font-medium",children:c!=null&&c.start_date?new Date(c.start_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Not set"})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[d.jsx("span",{className:"text-gray-500",children:"Partners"}),d.jsx("span",{className:"text-gray-800 font-medium",children:c!=null&&c.partner1_name&&(c!=null&&c.partner2_name)?`${c.partner1_name} & ${c.partner2_name}`:"Not set"})]}),d.jsxs("div",{className:"flex justify-between py-2",children:[d.jsx("span",{className:"text-gray-500",children:"Savings Goal"}),d.jsxs("span",{className:"text-gray-800 font-medium",children:["$",((v=c==null?void 0:c.savings_goal)==null?void 0:v.toLocaleString())||"10,000"]})]})]})]}),d.jsxs(X,{onClick:p,variant:"outline",className:"w-full rounded-2xl border-red-200 text-red-500 hover:bg-red-50 h-12",children:[d.jsx(Z5,{className:"w-5 h-5 mr-2"}),"Log Out"]})]})}function Sd({className:t="",...e}){return d.jsx("textarea",{className:`w-full rounded-xl min-h-[80px] border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-400 focus:border-pink-300 ${t}`,...e})}function BT({children:t,value:e,onChange:n,className:i="",...r}){return d.jsx("select",{value:e,onChange:n,className:`h-11 w-full rounded-xl border border-gray-300 bg-white px-3 text-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-400 focus:border-pink-300 ${i}`,...r,children:t})}function VT({children:t}){return d.jsx("div",{className:"select-content",children:t})}function qT({children:t,value:e}){return d.jsx("option",{value:e,children:t})}function HT({className:t="",...e}){return d.jsx("div",{className:`h-11 w-full rounded-xl border border-gray-300 bg-white px-3 text-sm ${t}`,...e})}function WT({children:t}){return d.jsx("span",{children:t})}const ec=[{value:"restaurant",label:"Restaurants",icon:rF,color:"from-orange-500 to-red-500"},{value:"movie",label:"Movies",icon:Q5,color:"from-purple-500 to-indigo-500"},{value:"tiktok",label:"TikToks",icon:ay,color:"from-pink-500 to-rose-500"},{value:"date_idea",label:"Date Ideas",icon:dt,color:"from-pink-500 to-purple-500"},{value:"youtube",label:"YouTube",icon:sF,color:"from-red-500 to-red-600"},{value:"other",label:"Other",icon:IT,color:"from-gray-500 to-gray-600"}];function B3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState("all"),[c,h]=b.useState({title:"",url:"",category:"other",notes:""}),[f,p]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:v=[]}=De({queryKey:["bookmarks"],queryFn:()=>$.entities.Bookmark.list("-created_date")}),y=we({mutationFn:_=>$.entities.Bookmark.create({..._,added_by:(e==null?void 0:e.full_name)||"Anonymous"}),onSuccess:()=>{t.invalidateQueries({queryKey:["bookmarks"]}),r(!1),h({title:"",url:"",category:"other",notes:""})}}),x=we({mutationFn:_=>$.entities.Bookmark.delete(_),onSuccess:()=>t.invalidateQueries({queryKey:["bookmarks"]})}),C=async()=>{if(!c.url)return;p(!0);const _=c.url.toLowerCase();let S="other";if(_.includes("tiktok")?S="tiktok":_.includes("youtube")||_.includes("youtu.be")?S="youtube":_.includes("yelp")||_.includes("doordash")||_.includes("uber")?S="restaurant":(_.includes("imdb")||_.includes("netflix")||_.includes("hulu"))&&(S="movie"),c.title)h(I=>({...I,category:S}));else{const I=await $.integrations.Core.InvokeLLM({prompt:`Given this URL: ${c.url}
        Extract or generate a short, descriptive title (max 50 chars).
        Return only the title, nothing else.`,response_json_schema:{type:"object",properties:{title:{type:"string"}}}});h(M=>({...M,title:I.title,category:S}))}p(!1)},k=o==="all"?v:v.filter(_=>_.category===o),T=_=>{const S=ec.find(I=>I.value===_);return S?S.icon:IT},E=_=>{const S=ec.find(I=>I.value===_);return S?S.color:"from-gray-500 to-gray-600"};return d.jsxs("div",{className:"container mx-auto max-w-2xl px-4 pb-24 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between pt-2",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Saved"}),d.jsxs(X,{onClick:()=>r(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl h-11 px-5",children:[d.jsx(yr,{className:"w-4 h-4 mr-2"})," Add"]})]}),d.jsxs("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:[d.jsx(X,{variant:o==="all"?"default":"outline",onClick:()=>a("all"),className:`rounded-full whitespace-nowrap ${o==="all"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"All"}),ec.map(({value:_,label:S,color:I})=>d.jsx(X,{variant:o===_?"default":"outline",onClick:()=>a(_),className:`rounded-full whitespace-nowrap ${o===_?`bg-gradient-to-r ${I} text-white border-0`:"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:S},_))]}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:k.map(_=>{const S=T(_.category);return d.jsx("div",{className:"glass-card rounded-2xl p-4 hover-lift animate-slide-up",children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${E(_.category)} flex items-center justify-center flex-shrink-0`,children:d.jsx(S,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-gray-800 font-semibold truncate",children:_.title}),_.notes&&d.jsx("p",{className:"text-gray-500 text-sm mt-1 line-clamp-2",children:_.notes}),d.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:["Added by ",_.added_by]})]}),d.jsxs("div",{className:"flex gap-2",children:[_.url&&d.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Open ${_.title}`,className:"w-11 h-11 rounded-xl bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200 smooth-transition",children:d.jsx(bT,{className:"w-4 h-4"})}),d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>x.mutate(_.id),"aria-label":`Delete ${_.title}`,className:"w-11 h-11 rounded-xl text-red-500 hover:bg-red-50",children:d.jsx(eu,{className:"w-4 h-4"})})]})]})},_.id)})}),k.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(CT,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No bookmarks yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Save restaurants, movies, and more!"})]}),d.jsx(Pi,{open:i,onOpenChange:r,children:d.jsxs(Mi,{className:"glass-card",children:[d.jsx(kl,{children:d.jsx(Cl,{className:"gradient-text text-xl",children:"Save Something"})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[d.jsx(rt,{placeholder:"Paste a link...",value:c.url,onChange:_=>h({...c,url:_.target.value}),onBlur:C,className:"rounded-xl h-11"}),d.jsx(rt,{placeholder:"Title",value:c.title,onChange:_=>h({...c,title:_.target.value}),className:"rounded-xl h-11"}),d.jsxs(BT,{value:c.category,onValueChange:_=>h({...c,category:_}),children:[d.jsx(HT,{className:"rounded-xl h-11",children:d.jsx(WT,{placeholder:"Category"})}),d.jsx(VT,{children:ec.map(_=>d.jsx(qT,{value:_.value,children:_.label},_.value))})]}),d.jsx(Sd,{placeholder:"Notes (optional)",value:c.notes,onChange:_=>h({...c,notes:_.target.value}),className:"rounded-xl min-h-[80px]"}),d.jsx(X,{onClick:()=>y.mutate(c),disabled:!c.title||f,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl h-11",children:f?d.jsx(ii,{className:"w-5 h-5 animate-spin"}):"Save Bookmark"})]})]})})]})}function V3(t){return d.jsx("input",{type:"checkbox",...t})}function KT({defaultValue:t,children:e,className:n}){return d.jsx("div",{className:n,children:e})}function QT({children:t,className:e}){return d.jsx("div",{className:e,children:t})}function Vs({value:t,children:e,className:n,onClick:i}){return d.jsx("button",{onClick:i,className:n,"data-value":t,children:e})}function qs({value:t,children:e,className:n}){return d.jsx("div",{className:n,children:e})}const ha=[{value:"anniversary",label:"Anniversary",icon:dt,color:"bg-pink-500",textColor:"text-pink-500",bgLight:"bg-pink-100"},{value:"together",label:"Together Time",icon:DT,color:"bg-purple-500",textColor:"text-purple-500",bgLight:"bg-purple-100"},{value:"brayden_work",label:"Brayden's Work",icon:wx,color:"bg-blue-500",textColor:"text-blue-500",bgLight:"bg-blue-100"},{value:"youna_work",label:"Youna's Work",icon:wx,color:"bg-amber-500",textColor:"text-amber-500",bgLight:"bg-amber-100"},{value:"other",label:"Other",icon:Ir,color:"bg-gray-500",textColor:"text-gray-500",bgLight:"bg-gray-100"}],q3=[{label:" Date Night",title:"Date Night",category:"together"},{label:" Anniversary",title:"Monthly Anniversary",category:"anniversary",recurring:!0},{label:" Brayden Work",title:"Work",category:"brayden_work"},{label:" Youna Work",title:"Work",category:"youna_work"},{label:" Dinner",title:"Dinner Together",category:"together"},{label:" Movie Night",title:"Movie Night",category:"together"},{label:" Trip",title:"Trip",category:"together"},{label:" Stay Home",title:"Stay Home Day",category:"together"}];function H3(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(new Date),[o,a]=b.useState(new Date),[c,h]=b.useState(!1),[f,p]=b.useState(null),[v,y]=b.useState(!1),[x,C]=b.useState(null),[k,T]=b.useState(""),[E,_]=b.useState(""),[S,I]=b.useState({title:"",date:Oe(new Date,"yyyy-MM-dd"),time:"",location:"",notes:"",link:"",category:"other",is_recurring:!1}),[M,A]=b.useState(!1),[j,O]=b.useState("calendar");b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:J=[]}=De({queryKey:["events"],queryFn:()=>$.entities.Event.list("date")}),{data:Q=[]}=De({queryKey:["dateIdeas"],queryFn:()=>$.entities.DateIdea.list("-created_date")}),{data:ne=[]}=De({queryKey:["tasks"],queryFn:()=>$.entities.SharedTask.list("-created_date")}),B=we({mutationFn:U=>$.entities.Event.create(U),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),h(!1),W()}}),Ie=we({mutationFn:({id:U,data:Me})=>$.entities.Event.update(U,Me),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),p(null)}}),ft=we({mutationFn:U=>$.entities.Event.delete(U),onSuccess:()=>{t.invalidateQueries({queryKey:["events"]}),p(null)}}),ji=we({mutationFn:U=>$.entities.DateIdea.create({idea:U,added_by:e==null?void 0:e.full_name}),onSuccess:()=>{t.invalidateQueries({queryKey:["dateIdeas"]}),T("")}}),Xe=we({mutationFn:U=>$.entities.DateIdea.update(U,{is_used:!0,used_date:Oe(new Date,"yyyy-MM-dd")}),onSuccess:()=>t.invalidateQueries({queryKey:["dateIdeas"]})}),W=()=>{I({title:"",date:Oe(o||new Date,"yyyy-MM-dd"),time:"",location:"",notes:"",link:"",category:"other",is_recurring:!1})},R=SF(i),re=RT(i),H=xF({start:R,end:re}),oe=R.getDay(),_e=[...Array(oe).fill(null),...H],Je=U=>U?J.filter(Me=>{const on=new Date(Me.date);return!!(Yf(on,U)||Me.is_recurring&&on.getDate()===U.getDate())}):[],Pe=U=>ha.find(Me=>Me.value===U)||ha[4],xe=U=>{U.preventDefault(),B.mutate(S)},ce=U=>{I({...S,title:U.title,category:U.category,is_recurring:U.recurring||!1,date:Oe(o||new Date,"yyyy-MM-dd")}),h(!0)},Mt=async U=>{if(U.preventDefault(),!E.trim())return;A(!0);const Me=await $.integrations.Core.InvokeLLM({prompt:`Parse this event: "${E}". Today: ${Oe(new Date,"yyyy-MM-dd")}. Extract title, date (YYYY-MM-DD), time (HH:MM), location. Category from: anniversary, together, brayden_work, youna_work, other. JSON only.`,response_json_schema:{type:"object",properties:{title:{type:"string"},date:{type:"string"},time:{type:"string"},location:{type:"string"},category:{type:"string"}},required:["title","date"]}});I({...S,title:Me.title||"",date:Me.date||Oe(o||new Date,"yyyy-MM-dd"),time:Me.time||"",location:Me.location||"",category:Me.category||"other"}),_(""),A(!1),h(!0)},zn=()=>{const U=Q.filter(on=>!on.is_used);if(U.length===0)return;const Me=U[Math.floor(Math.random()*U.length)];C(Me)},iu=U=>{I({...S,title:U.idea,category:"together",date:Oe(new Date,"yyyy-MM-dd")}),Xe.mutate(U.id),C(null),y(!1),h(!0)},ps=Je(o);return d.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-4 pb-24",children:[d.jsxs("div",{className:"flex items-center justify-between pt-4",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Schedule"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(X,{onClick:()=>y(!0),variant:"outline",className:"rounded-full h-10 px-4 border-pink-200 text-pink-500",children:[d.jsx(Cx,{className:"w-4 h-4 mr-1"})," Date Jar"]}),d.jsx(X,{onClick:()=>{W(),h(!0)},className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full h-10 px-4",children:d.jsx(yr,{className:"w-4 h-4"})})]})]}),d.jsxs(KT,{value:j,onValueChange:O,children:[d.jsxs(QT,{className:"grid grid-cols-2 bg-gray-100 rounded-xl p-1",children:[d.jsx(Vs,{value:"calendar",className:"rounded-lg data-[state=active]:bg-white",children:"Calendar"}),d.jsx(Vs,{value:"lists",className:"rounded-lg data-[state=active]:bg-white",children:"Lists"})]}),d.jsxs(qs,{value:"calendar",className:"space-y-4 mt-4",children:[d.jsx("form",{onSubmit:Mt,className:"glass-card rounded-2xl p-3",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx(rt,{value:E,onChange:U=>_(U.target.value),placeholder:'Try: "Dinner Friday 7pm at Olive Garden"',disabled:M,className:"flex-1 rounded-xl h-10"}),d.jsx(X,{type:"submit",disabled:!E.trim()||M,className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl px-4 h-10",children:M?d.jsx(ii,{className:"w-4 h-4 animate-spin"}):d.jsx(ri,{className:"w-4 h-4"})})]})}),d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:q3.map((U,Me)=>d.jsx(X,{variant:"outline",onClick:()=>ce(U),className:"rounded-full whitespace-nowrap text-sm h-8 border-gray-200",children:U.label},Me))}),d.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>r(I3(i,1)),className:"rounded-full h-8 w-8",children:d.jsx(TT,{className:"w-5 h-5"})}),d.jsx("h2",{className:"text-lg font-bold text-gray-800",children:Oe(i,"MMMM yyyy")}),d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>r(jT(i,1)),className:"rounded-full h-8 w-8",children:d.jsx(NT,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((U,Me)=>d.jsx("div",{className:"text-center text-xs font-semibold text-gray-400 py-1",children:U},Me))}),d.jsx("div",{className:"grid grid-cols-7 gap-1",children:_e.map((U,Me)=>{const on=U?Je(U):[],kd=U&&Yf(U,new Date),ru=U&&o&&Yf(U,o);return d.jsxs("button",{onClick:()=>U&&a(U),disabled:!U,className:`aspect-square rounded-xl text-sm flex flex-col items-center justify-center ${U?kd?"bg-gradient-to-br from-pink-500 to-purple-500 text-white font-bold shadow-md":ru?"bg-pink-100 text-pink-700 font-semibold ring-2 ring-pink-400":"bg-gray-50 hover:bg-gray-100 text-gray-700":"invisible"}`,children:[d.jsx("span",{children:U&&Oe(U,"d")}),on.length>0&&d.jsx("div",{className:"flex gap-0.5 mt-0.5",children:on.slice(0,3).map((su,Fo)=>d.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Pe(su.category).color}`},Fo))})]},Me)})}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-100",children:ha.map(U=>d.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${U.color}`}),d.jsx("span",{children:U.label})]},U.value))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between px-1",children:[d.jsx("h2",{className:"font-bold text-gray-800",children:o?Oe(o,"EEEE, MMM d"):"Select a date"}),d.jsx(X,{variant:"ghost",size:"sm",onClick:()=>{I({...S,date:Oe(o||new Date,"yyyy-MM-dd")}),h(!0)},className:"text-pink-500 h-8",children:d.jsx(yr,{className:"w-4 h-4"})})]}),ps.length>0?ps.map(U=>{const Me=Pe(U.category),on=Me.icon;return d.jsx("div",{onClick:()=>p(U),className:`rounded-xl p-3 ${Me.bgLight} border-l-4 ${Me.color.replace("bg-","border-")} cursor-pointer hover:shadow-md smooth-transition`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-9 h-9 rounded-lg ${Me.color} flex items-center justify-center`,children:d.jsx(on,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:U.title}),U.is_recurring&&d.jsx(kx,{className:"w-3 h-3 text-gray-400"}),U.link&&d.jsx(G5,{className:"w-3 h-3 text-gray-400"})]}),d.jsxs("div",{className:"flex gap-2 text-xs text-gray-500",children:[U.time&&d.jsx("span",{children:U.time}),U.location&&d.jsxs("span",{children:[" ",U.location]})]})]})]})},U.id)}):d.jsxs("div",{className:"text-center py-6 text-gray-400",children:[d.jsx(Ir,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),d.jsx("p",{className:"text-sm",children:"No events"})]})]})]}),d.jsx(qs,{value:"lists",className:"mt-4",children:d.jsx(W3,{user:e,tasks:ne,queryClient:t})})]}),d.jsx(Pi,{open:c,onOpenChange:h,children:d.jsxs(Mi,{className:"glass-card max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx(kl,{children:d.jsx(Cl,{className:"gradient-text text-xl",children:"Add Event"})}),d.jsxs("form",{onSubmit:xe,className:"space-y-3 pt-2",children:[d.jsx(rt,{placeholder:"Event title",value:S.title,onChange:U=>I({...S,title:U.target.value}),required:!0,className:"rounded-xl h-10"}),d.jsxs(BT,{value:S.category,onValueChange:U=>I({...S,category:U}),children:[d.jsx(HT,{className:"rounded-xl h-10",children:d.jsx(WT,{})}),d.jsx(VT,{children:ha.map(U=>d.jsx(qT,{value:U.value,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-3 h-3 rounded-full ${U.color}`}),U.label]})},U.value))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx(rt,{type:"date",value:S.date,onChange:U=>I({...S,date:U.target.value}),required:!0,className:"rounded-xl h-10"}),d.jsx(rt,{type:"time",value:S.time,onChange:U=>I({...S,time:U.target.value}),className:"rounded-xl h-10"})]}),d.jsx(rt,{placeholder:"Location",value:S.location,onChange:U=>I({...S,location:U.target.value}),className:"rounded-xl h-10"}),d.jsx(rt,{placeholder:"Link (reservation, tickets...)",value:S.link,onChange:U=>I({...S,link:U.target.value}),className:"rounded-xl h-10"}),d.jsx(Sd,{placeholder:"Notes...",value:S.notes,onChange:U=>I({...S,notes:U.target.value}),className:"rounded-xl min-h-[60px]"}),d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(kx,{className:"w-4 h-4 text-gray-500"}),d.jsx("span",{className:"text-sm",children:"Repeat monthly"})]}),d.jsx(V3,{checked:S.is_recurring,onCheckedChange:U=>I({...S,is_recurring:U})})]}),d.jsxs("div",{className:"flex gap-2 pt-1",children:[d.jsx(X,{type:"button",variant:"outline",onClick:()=>h(!1),className:"flex-1 rounded-xl h-10",children:"Cancel"}),d.jsx(X,{type:"submit",className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-10",children:"Save"})]})]})]})}),d.jsx(K3,{event:f,onClose:()=>p(null),onUpdate:Ie,onDelete:ft,categories:ha}),d.jsx(Pi,{open:v,onOpenChange:y,children:d.jsxs(Mi,{className:"glass-card max-w-sm",children:[d.jsx(kl,{children:d.jsx(Cl,{className:"gradient-text text-xl flex items-center gap-2",children:" Date Night Jar"})}),d.jsxs("div",{className:"space-y-4",children:[x?d.jsxs("div",{className:"bg-gradient-to-br from-pink-100 to-purple-100 rounded-2xl p-5 text-center",children:[d.jsx("p",{className:"text-2xl mb-2",children:""}),d.jsx("p",{className:"text-lg font-semibold text-gray-800 mb-4",children:x.idea}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(X,{variant:"outline",onClick:()=>C(null),className:"flex-1 rounded-xl",children:"Try Again"}),d.jsx(X,{onClick:()=>iu(x),className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Schedule It!"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs(X,{onClick:zn,disabled:Q.filter(U=>!U.is_used).length===0,className:"w-full h-16 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-2xl text-lg",children:[d.jsx(Cx,{className:"w-5 h-5 mr-2"})," Pull a Date Idea!"]}),d.jsxs("p",{className:"text-center text-gray-400 text-sm",children:[Q.filter(U=>!U.is_used).length," ideas in jar"]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Add new idea:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(rt,{value:k,onChange:U=>T(U.target.value),placeholder:"Picnic in the park...",className:"flex-1 rounded-xl h-10"}),d.jsx(X,{onClick:()=>k&&ji.mutate(k),disabled:!k,className:"rounded-xl h-10 px-4 bg-pink-500 text-white",children:"Add"})]})]}),Q.length>0&&d.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:Q.slice(0,10).map(U=>d.jsx("div",{className:`text-sm p-2 rounded-lg ${U.is_used?"bg-gray-100 text-gray-400 line-through":"bg-pink-50 text-gray-700"}`,children:U.idea},U.id))})]})]})})]})}function W3({user:t,tasks:e,queryClient:n}){const[i,r]=b.useState(""),[o,a]=b.useState("general"),c=[{value:"general",label:"To-Do",icon:""},{value:"groceries",label:"Groceries",icon:""},{value:"chores",label:"Chores",icon:""},{value:"movies",label:"Movies to Watch",icon:""}],h=we({mutationFn:y=>$.entities.SharedTask.create(y),onSuccess:()=>{n.invalidateQueries({queryKey:["tasks"]}),r("")}}),f=we({mutationFn:({id:y,completed:x})=>$.entities.SharedTask.update(y,{is_completed:!x,completed_by:x?null:t==null?void 0:t.full_name}),onSuccess:()=>n.invalidateQueries({queryKey:["tasks"]})}),p=we({mutationFn:y=>$.entities.SharedTask.delete(y),onSuccess:()=>n.invalidateQueries({queryKey:["tasks"]})}),v=e.filter(y=>y.list_type===o);return d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:c.map(y=>d.jsxs(X,{variant:o===y.value?"default":"outline",onClick:()=>a(y.value),className:`rounded-full whitespace-nowrap h-9 ${o===y.value?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"border-gray-200"}`,children:[y.icon," ",y.label]},y.value))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(rt,{value:i,onChange:y=>r(y.target.value),placeholder:"Add item...",className:"flex-1 rounded-xl h-10",onKeyPress:y=>y.key==="Enter"&&i&&h.mutate({title:i,list_type:o,added_by:t==null?void 0:t.full_name})}),d.jsx(X,{onClick:()=>i&&h.mutate({title:i,list_type:o,added_by:t==null?void 0:t.full_name}),disabled:!i,className:"bg-pink-500 text-white rounded-xl h-10 px-4",children:d.jsx(yr,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"space-y-2",children:[v.map(y=>d.jsxs("div",{className:`glass-card rounded-xl p-3 flex items-center gap-3 ${y.is_completed?"opacity-60":""}`,children:[d.jsx("button",{onClick:()=>f.mutate({id:y.id,completed:y.is_completed}),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center ${y.is_completed?"bg-green-500 border-green-500":"border-gray-300"}`,children:y.is_completed&&d.jsx(xx,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`font-medium ${y.is_completed?"line-through text-gray-400":"text-gray-800"}`,children:y.title}),d.jsx("p",{className:"text-xs text-gray-400",children:y.added_by})]}),d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>p.mutate(y.id),className:"text-gray-400 hover:text-red-500 h-8 w-8",children:d.jsx(_r,{className:"w-4 h-4"})})]},y.id)),v.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-400",children:[d.jsx(xx,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),d.jsx("p",{className:"text-sm",children:"No items yet"})]})]})]})}function K3({event:t,onClose:e,onUpdate:n,onDelete:i,categories:r}){const[o,a]=b.useState((t==null?void 0:t.memory_note)||""),[c,h]=b.useState(!1);if(!t)return null;const f=r.find(x=>x.value===t.category)||r[4],p=f.icon,v=b3(new Date(t.date)),y=async x=>{var T;const C=(T=x.target.files)==null?void 0:T[0];if(!C)return;h(!0);const{file_url:k}=await $.integrations.Core.UploadFile({file:C});n.mutate({id:t.id,data:{memory_photo:k}}),h(!1)};return d.jsx(Pi,{open:!!t,onOpenChange:e,children:d.jsxs(Mi,{className:"glass-card max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:`-mx-6 -mt-6 p-4 ${f.bgLight}`,children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl ${f.color} flex items-center justify-center`,children:d.jsx(p,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t.title}),d.jsx("p",{className:"text-gray-500 text-sm",children:Oe(new Date(t.date),"EEEE, MMMM d, yyyy")})]})]})}),d.jsxs("div",{className:"space-y-4 pt-2",children:[t.time&&d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx(K5,{className:"w-4 h-4"}),t.time]}),t.location&&d.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[d.jsx(oy,{className:"w-4 h-4"}),t.location]}),t.link&&d.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-pink-500 hover:underline",children:[d.jsx(bT,{className:"w-4 h-4"}),"Open Link"]}),t.notes&&d.jsx("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-700 text-sm",children:t.notes}),v&&d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[d.jsx(dt,{className:"w-4 h-4 text-pink-500"})," Memory"]}),t.memory_photo&&d.jsx("img",{src:t.memory_photo,alt:"",className:"w-full h-40 object-cover rounded-xl mb-3"}),d.jsxs("label",{className:"block mb-3",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"}),d.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 border-2 border-dashed border-gray-200 rounded-xl cursor-pointer hover:border-pink-300 text-gray-500 text-sm",children:[c?d.jsx(ii,{className:"w-4 h-4 animate-spin"}):d.jsx(xd,{className:"w-4 h-4"}),t.memory_photo?"Change photo":"Add photo"]})]}),d.jsx(Sd,{value:o,onChange:x=>a(x.target.value),onBlur:()=>n.mutate({id:t.id,data:{memory_note:o}}),placeholder:"Write about this memory...",className:"rounded-xl"})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx(X,{variant:"outline",onClick:()=>i.mutate(t.id),className:"rounded-xl border-red-200 text-red-500 hover:bg-red-50",children:"Delete"}),d.jsx(X,{onClick:e,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl",children:"Close"})]})]})]})})}function GT(t,e){const n=b.useRef(e);b.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Q3=1;function G3(t){return Object.freeze({__version:Q3,map:t})}function Z3(t,e){return Object.freeze({...t,...e})}const ZT=b.createContext(null),YT=ZT.Provider;function ly(){const t=b.useContext(ZT);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Y3(t){function e(n,i){const{instance:r,context:o}=t(n).current;return b.useImperativeHandle(i,()=>r),n.children==null?null:ro.createElement(YT,{value:o},n.children)}return b.forwardRef(e)}function X3(t){function e(n,i){const[r,o]=b.useState(!1),{instance:a}=t(n,o).current;b.useImperativeHandle(i,()=>a),b.useEffect(function(){r&&a.update()},[a,r,n.children]);const c=a._contentNode;return c?QS.createPortal(n.children,c):null}return b.forwardRef(e)}function J3(t){function e(n,i){const{instance:r}=t(n).current;return b.useImperativeHandle(i,()=>r),null}return b.forwardRef(e)}function XT(t,e){const n=b.useRef();b.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function uy(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function ez(t,e){return function(i,r){const o=ly(),a=t(uy(i,o),o);return GT(o.map,i.attribution),XT(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var zp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Cb,function(n){var i="1.9.4";function r(s){var l,u,m,g;for(u=1,m=arguments.length;u<m;u++){g=arguments[u];for(l in g)s[l]=g[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var m=u.call(arguments,2);return function(){return s.apply(l,m.length?m.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,l,u){var m,g,w,N;return N=function(){m=!1,g&&(w.apply(u,g),g=!1)},w=function(){m?g=arguments:(s.apply(u,arguments),setTimeout(N,l),m=!0)},w}function p(s,l,u){var m=l[1],g=l[0],w=m-g;return s===m&&u?s:((s-g)%w+w)%w+g}function v(){return!1}function y(s,l){if(l===!1)return s;var u=Math.pow(10,l===void 0?6:l);return Math.round(s*u)/u}function x(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return x(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in l)s.options[u]=l[u];return s.options}function T(s,l,u){var m=[];for(var g in s)m.push(encodeURIComponent(u?g.toUpperCase():g)+"="+encodeURIComponent(s[g]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function _(s,l){return s.replace(E,function(u,m){var g=l[m];if(g===void 0)throw new Error("No value provided for variable "+u);return typeof g=="function"&&(g=g(l)),g})}var S=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function I(s,l){for(var u=0;u<s.length;u++)if(s[u]===l)return u;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var j=0;function O(s){var l=+new Date,u=Math.max(0,16-(l-j));return j=l+u,window.setTimeout(s,u)}var J=window.requestAnimationFrame||A("RequestAnimationFrame")||O,Q=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ne(s,l,u){if(u&&J===O)s.call(l);else return J.call(window,a(s,l))}function B(s){s&&Q.call(window,s)}var Ie={__proto__:null,extend:r,create:o,bind:a,get lastId(){return c},stamp:h,throttle:f,wrapNum:p,falseFn:v,formatNum:y,trim:x,splitWords:C,setOptions:k,getParamString:T,template:_,isArray:S,indexOf:I,emptyImageUrl:M,requestFn:J,cancelFn:Q,requestAnimFrame:ne,cancelAnimFrame:B};function ft(){}ft.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=l.__super__=this.prototype,m=o(u);m.constructor=l,l.prototype=m;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(l[g]=this[g]);return s.statics&&r(l,s.statics),s.includes&&(ji(s.includes),r.apply(null,[m].concat(s.includes))),r(m,s),delete m.statics,delete m.includes,m.options&&(m.options=u.options?o(u.options):{},r(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,N=m._initHooks.length;w<N;w++)m._initHooks[w].call(this)}},l},ft.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},ft.mergeOptions=function(s){return r(this.prototype.options,s),this},ft.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ji(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=S(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Xe={on:function(s,l,u){if(typeof s=="object")for(var m in s)this._on(m,s[m],l);else{s=C(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],l,u)}return this},off:function(s,l,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],l);else{s=C(s);for(var g=arguments.length===1,w=0,N=s.length;w<N;w++)g?this._off(s[w]):this._off(s[w],l,u)}return this},_on:function(s,l,u,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,u)===!1){u===this&&(u=void 0);var g={fn:l,ctx:u};m&&(g.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(g)}},_off:function(s,l,u){var m,g,w;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(g=0,w=m.length;g<w;g++)m[g].fn=v;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var N=this._listens(s,l,u);if(N!==!1){var P=m[N];this._firingCount&&(P.fn=v,this._events[s]=m=m.slice()),m.splice(N,1)}}},fire:function(s,l,u){if(!this.listens(s,u))return this;var m=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var g=this._events[s];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,N=g.length;w<N;w++){var P=g[w],D=P.fn;P.once&&this.off(s,D,P.ctx),D.call(P.ctx||this,m)}this._firingCount--}}return u&&this._propagateEvent(m),this},listens:function(s,l,u,m){typeof s!="string"&&console.warn('"string" type argument expected');var g=l;typeof l!="function"&&(m=!!l,g=void 0,u=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,g,u)!==!1)return!0;if(m){for(var N in this._eventParents)if(this._eventParents[N].listens(s,l,u,m))return!0}return!1},_listens:function(s,l,u){if(!this._events)return!1;var m=this._events[s]||[];if(!l)return!!m.length;u===this&&(u=void 0);for(var g=0,w=m.length;g<w;g++)if(m[g].fn===l&&m[g].ctx===u)return g;return!1},once:function(s,l,u){if(typeof s=="object")for(var m in s)this._on(m,s[m],l,!0);else{s=C(s);for(var g=0,w=s.length;g<w;g++)this._on(s[g],l,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Xe.addEventListener=Xe.on,Xe.removeEventListener=Xe.clearAllEventListeners=Xe.off,Xe.addOneTimeEventListener=Xe.once,Xe.fireEvent=Xe.fire,Xe.hasEventListeners=Xe.listens;var W=ft.extend(Xe);function R(s,l,u){this.x=u?Math.round(s):s,this.y=u?Math.round(l):l}var re=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(s){return this.clone()._add(H(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(H(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new R(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new R(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(s){s=H(s);var l=s.x-this.x,u=s.y-this.y;return Math.sqrt(l*l+u*u)},equals:function(s){return s=H(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=H(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function H(s,l,u){return s instanceof R?s:S(s)?new R(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new R(s.x,s.y):new R(s,l,u)}function oe(s,l){if(s)for(var u=l?[s,l]:s,m=0,g=u.length;m<g;m++)this.extend(u[m])}oe.prototype={extend:function(s){var l,u;if(!s)return this;if(s instanceof R||typeof s[0]=="number"||"x"in s)l=u=H(s);else if(s=_e(s),l=s.min,u=s.max,!l||!u)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=u.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,u;return typeof s[0]=="number"||s instanceof R?s=H(s):s=_e(s),s instanceof oe?(l=s.min,u=s.max):l=u=s,l.x>=this.min.x&&u.x<=this.max.x&&l.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=_e(s);var l=this.min,u=this.max,m=s.min,g=s.max,w=g.x>=l.x&&m.x<=u.x,N=g.y>=l.y&&m.y<=u.y;return w&&N},overlaps:function(s){s=_e(s);var l=this.min,u=this.max,m=s.min,g=s.max,w=g.x>l.x&&m.x<u.x,N=g.y>l.y&&m.y<u.y;return w&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,u=this.max,m=Math.abs(l.x-u.x)*s,g=Math.abs(l.y-u.y)*s;return _e(H(l.x-m,l.y-g),H(u.x+m,u.y+g))},equals:function(s){return s?(s=_e(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function _e(s,l){return!s||s instanceof oe?s:new oe(s,l)}function Je(s,l){if(s)for(var u=l?[s,l]:s,m=0,g=u.length;m<g;m++)this.extend(u[m])}Je.prototype={extend:function(s){var l=this._southWest,u=this._northEast,m,g;if(s instanceof xe)m=s,g=s;else if(s instanceof Je){if(m=s._southWest,g=s._northEast,!m||!g)return this}else return s?this.extend(ce(s)||Pe(s)):this;return!l&&!u?(this._southWest=new xe(m.lat,m.lng),this._northEast=new xe(g.lat,g.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),u.lat=Math.max(g.lat,u.lat),u.lng=Math.max(g.lng,u.lng)),this},pad:function(s){var l=this._southWest,u=this._northEast,m=Math.abs(l.lat-u.lat)*s,g=Math.abs(l.lng-u.lng)*s;return new Je(new xe(l.lat-m,l.lng-g),new xe(u.lat+m,u.lng+g))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof xe||"lat"in s?s=ce(s):s=Pe(s);var l=this._southWest,u=this._northEast,m,g;return s instanceof Je?(m=s.getSouthWest(),g=s.getNorthEast()):m=g=s,m.lat>=l.lat&&g.lat<=u.lat&&m.lng>=l.lng&&g.lng<=u.lng},intersects:function(s){s=Pe(s);var l=this._southWest,u=this._northEast,m=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>=l.lat&&m.lat<=u.lat,N=g.lng>=l.lng&&m.lng<=u.lng;return w&&N},overlaps:function(s){s=Pe(s);var l=this._southWest,u=this._northEast,m=s.getSouthWest(),g=s.getNorthEast(),w=g.lat>l.lat&&m.lat<u.lat,N=g.lng>l.lng&&m.lng<u.lng;return w&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Pe(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Pe(s,l){return s instanceof Je?s:new Je(s,l)}function xe(s,l,u){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,u!==void 0&&(this.alt=+u)}xe.prototype={equals:function(s,l){if(!s)return!1;s=ce(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+y(this.lat,s)+", "+y(this.lng,s)+")"},distanceTo:function(s){return zn.distance(this,ce(s))},wrap:function(){return zn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,u=l/Math.cos(Math.PI/180*this.lat);return Pe([this.lat-l,this.lng-u],[this.lat+l,this.lng+u])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function ce(s,l,u){return s instanceof xe?s:S(s)&&typeof s[0]!="object"?s.length===3?new xe(s[0],s[1],s[2]):s.length===2?new xe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new xe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new xe(s,l,u)}var Mt={latLngToPoint:function(s,l){var u=this.projection.project(s),m=this.scale(l);return this.transformation._transform(u,m)},pointToLatLng:function(s,l){var u=this.scale(l),m=this.transformation.untransform(s,u);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,u=this.scale(s),m=this.transformation.transform(l.min,u),g=this.transformation.transform(l.max,u);return new oe(m,g)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?p(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?p(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new xe(u,l,m)},wrapLatLngBounds:function(s){var l=s.getCenter(),u=this.wrapLatLng(l),m=l.lat-u.lat,g=l.lng-u.lng;if(m===0&&g===0)return s;var w=s.getSouthWest(),N=s.getNorthEast(),P=new xe(w.lat-m,w.lng-g),D=new xe(N.lat-m,N.lng-g);return new Je(P,D)}},zn=r({},Mt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var u=Math.PI/180,m=s.lat*u,g=l.lat*u,w=Math.sin((l.lat-s.lat)*u/2),N=Math.sin((l.lng-s.lng)*u/2),P=w*w+Math.cos(m)*Math.cos(g)*N*N,D=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P));return this.R*D}}),iu=6378137,ps={R:iu,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,u=this.MAX_LATITUDE,m=Math.max(Math.min(u,s.lat),-u),g=Math.sin(m*l);return new R(this.R*s.lng*l,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(s){var l=180/Math.PI;return new xe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=iu*Math.PI;return new oe([-s,-s],[s,s])}()};function U(s,l,u,m){if(S(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=u,this._d=m}U.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new R((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Me(s,l,u,m){return new U(s,l,u,m)}var on=r({},zn,{code:"EPSG:3857",projection:ps,transformation:function(){var s=.5/(Math.PI*ps.R);return Me(s,.5,-s,.5)}()}),kd=r({},on,{code:"EPSG:900913"});function ru(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function su(s,l){var u="",m,g,w,N,P,D;for(m=0,w=s.length;m<w;m++){for(P=s[m],g=0,N=P.length;g<N;g++)D=P[g],u+=(g?"L":"M")+D.x+" "+D.y;u+=l?te.svg?"z":"x":""}return u||"M0 0"}var Fo=document.documentElement.style,ou="ActiveXObject"in window,tN=ou&&!document.addEventListener,dy="msLaunchUri"in navigator&&!("documentMode"in document),Cd=Un("webkit"),fy=Un("android"),my=Un("android 2")||Un("android 3"),nN=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),iN=fy&&Un("Google")&&nN<537&&!("AudioNode"in window),Td=!!window.opera,py=!dy&&Un("chrome"),gy=Un("gecko")&&!Cd&&!Td&&!ou,rN=!py&&Un("safari"),vy=Un("phantom"),yy="OTransition"in Fo,sN=navigator.platform.indexOf("Win")===0,_y=ou&&"transition"in Fo,Nd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!my,wy="MozPerspective"in Fo,oN=!window.L_DISABLE_3D&&(_y||Nd||wy)&&!yy&&!vy,zo=typeof orientation<"u"||Un("mobile"),aN=zo&&Cd,lN=zo&&Nd,xy=!window.PointerEvent&&window.MSPointerEvent,Sy=!!(window.PointerEvent||xy),Ey="ontouchstart"in window||!!window.TouchEvent,uN=!window.L_NO_TOUCH&&(Ey||Sy),cN=zo&&Td,hN=zo&&gy,dN=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fN=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return s}(),mN=function(){return!!document.createElement("canvas").getContext}(),bd=!!(document.createElementNS&&ru("svg").createSVGRect),pN=!!bd&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),gN=!bd&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),vN=navigator.platform.indexOf("Mac")===0,yN=navigator.platform.indexOf("Linux")===0;function Un(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var te={ie:ou,ielt9:tN,edge:dy,webkit:Cd,android:fy,android23:my,androidStock:iN,opera:Td,chrome:py,gecko:gy,safari:rN,phantom:vy,opera12:yy,win:sN,ie3d:_y,webkit3d:Nd,gecko3d:wy,any3d:oN,mobile:zo,mobileWebkit:aN,mobileWebkit3d:lN,msPointer:xy,pointer:Sy,touch:uN,touchNative:Ey,mobileOpera:cN,mobileGecko:hN,retina:dN,passiveEvents:fN,canvas:mN,svg:bd,vml:gN,inlineSvg:pN,mac:vN,linux:yN},ky=te.msPointer?"MSPointerDown":"pointerdown",Cy=te.msPointer?"MSPointerMove":"pointermove",Ty=te.msPointer?"MSPointerUp":"pointerup",Ny=te.msPointer?"MSPointerCancel":"pointercancel",Id={touchstart:ky,touchmove:Cy,touchend:Ty,touchcancel:Ny},by={touchstart:kN,touchmove:au,touchend:au,touchcancel:au},gs={},Iy=!1;function _N(s,l,u){return l==="touchstart"&&EN(),by[l]?(u=by[l].bind(this,u),s.addEventListener(Id[l],u,!1),u):(console.warn("wrong event specified:",l),v)}function wN(s,l,u){if(!Id[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Id[l],u,!1)}function xN(s){gs[s.pointerId]=s}function SN(s){gs[s.pointerId]&&(gs[s.pointerId]=s)}function Py(s){delete gs[s.pointerId]}function EN(){Iy||(document.addEventListener(ky,xN,!0),document.addEventListener(Cy,SN,!0),document.addEventListener(Ty,Py,!0),document.addEventListener(Ny,Py,!0),Iy=!0)}function au(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var u in gs)l.touches.push(gs[u]);l.changedTouches=[l],s(l)}}function kN(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Et(l),au(s,l)}function CN(s){var l={},u,m;for(m in s)u=s[m],l[m]=u&&u.bind?u.bind(s):u;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var TN=200;function NN(s,l){s.addEventListener("dblclick",l);var u=0,m;function g(w){if(w.detail!==1){m=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var N=jy(w);if(!(N.some(function(D){return D instanceof HTMLLabelElement&&D.attributes.for})&&!N.some(function(D){return D instanceof HTMLInputElement||D instanceof HTMLSelectElement}))){var P=Date.now();P-u<=TN?(m++,m===2&&l(CN(w))):m=1,u=P}}}return s.addEventListener("click",g),{dblclick:l,simDblclick:g}}function bN(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Pd=cu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Uo=cu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),My=Uo==="webkitTransition"||Uo==="OTransition"?Uo+"End":"transitionend";function Ly(s){return typeof s=="string"?document.getElementById(s):s}function $o(s,l){var u=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!u||u==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);u=m?m[l]:null}return u==="auto"?null:u}function Te(s,l,u){var m=document.createElement(s);return m.className=l||"",u&&u.appendChild(m),m}function We(s){var l=s.parentNode;l&&l.removeChild(s)}function lu(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function vs(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function ys(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Md(s,l){if(s.classList!==void 0)return s.classList.contains(l);var u=uu(s);return u.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(u)}function pe(s,l){if(s.classList!==void 0)for(var u=C(l),m=0,g=u.length;m<g;m++)s.classList.add(u[m]);else if(!Md(s,l)){var w=uu(s);Ld(s,(w?w+" ":"")+l)}}function it(s,l){s.classList!==void 0?s.classList.remove(l):Ld(s,x((" "+uu(s)+" ").replace(" "+l+" "," ")))}function Ld(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function uu(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function gn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&IN(s,l)}function IN(s,l){var u=!1,m="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),u?(u.Enabled=l!==100,u.Opacity=l):s.style.filter+=" progid:"+m+"(opacity="+l+")"}function cu(s){for(var l=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in l)return s[u];return!1}function Pr(s,l,u){var m=l||new R(0,0);s.style[Pd]=(te.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(u?" scale("+u+")":"")}function ot(s,l){s._leaflet_pos=l,te.any3d?Pr(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Mr(s){return s._leaflet_pos||new R(0,0)}var Bo,Vo,Ad;if("onselectstart"in document)Bo=function(){fe(window,"selectstart",Et)},Vo=function(){Fe(window,"selectstart",Et)};else{var qo=cu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bo=function(){if(qo){var s=document.documentElement.style;Ad=s[qo],s[qo]="none"}},Vo=function(){qo&&(document.documentElement.style[qo]=Ad,Ad=void 0)}}function Dd(){fe(window,"dragstart",Et)}function jd(){Fe(window,"dragstart",Et)}var hu,Rd;function Od(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(du(),hu=s,Rd=s.style.outlineStyle,s.style.outlineStyle="none",fe(window,"keydown",du))}function du(){hu&&(hu.style.outlineStyle=Rd,hu=void 0,Rd=void 0,Fe(window,"keydown",du))}function Ay(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Fd(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var PN={__proto__:null,TRANSFORM:Pd,TRANSITION:Uo,TRANSITION_END:My,get:Ly,getStyle:$o,create:Te,remove:We,empty:lu,toFront:vs,toBack:ys,hasClass:Md,addClass:pe,removeClass:it,setClass:Ld,getClass:uu,setOpacity:gn,testProp:cu,setTransform:Pr,setPosition:ot,getPosition:Mr,get disableTextSelection(){return Bo},get enableTextSelection(){return Vo},disableImageDrag:Dd,enableImageDrag:jd,preventOutline:Od,restoreOutline:du,getSizedParentNode:Ay,getScale:Fd};function fe(s,l,u,m){if(l&&typeof l=="object")for(var g in l)Ud(s,g,l[g],u);else{l=C(l);for(var w=0,N=l.length;w<N;w++)Ud(s,l[w],u,m)}return this}var $n="_leaflet_events";function Fe(s,l,u,m){if(arguments.length===1)Dy(s),delete s[$n];else if(l&&typeof l=="object")for(var g in l)$d(s,g,l[g],u);else if(l=C(l),arguments.length===2)Dy(s,function(P){return I(l,P)!==-1});else for(var w=0,N=l.length;w<N;w++)$d(s,l[w],u,m);return this}function Dy(s,l){for(var u in s[$n]){var m=u.split(/\d/)[0];(!l||l(m))&&$d(s,m,null,null,u)}}var zd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ud(s,l,u,m){var g=l+h(u)+(m?"_"+h(m):"");if(s[$n]&&s[$n][g])return this;var w=function(P){return u.call(m||s,P||window.event)},N=w;!te.touchNative&&te.pointer&&l.indexOf("touch")===0?w=_N(s,l,w):te.touch&&l==="dblclick"?w=NN(s,w):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(zd[l]||l,w,te.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(P){P=P||window.event,Vd(s,P)&&N(P)},s.addEventListener(zd[l],w,!1)):s.addEventListener(l,N,!1):s.attachEvent("on"+l,w),s[$n]=s[$n]||{},s[$n][g]=w}function $d(s,l,u,m,g){g=g||l+h(u)+(m?"_"+h(m):"");var w=s[$n]&&s[$n][g];if(!w)return this;!te.touchNative&&te.pointer&&l.indexOf("touch")===0?wN(s,l,w):te.touch&&l==="dblclick"?bN(s,w):"removeEventListener"in s?s.removeEventListener(zd[l]||l,w,!1):s.detachEvent("on"+l,w),s[$n][g]=null}function Lr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Bd(s){return Ud(s,"wheel",Lr),this}function Ho(s){return fe(s,"mousedown touchstart dblclick contextmenu",Lr),s._leaflet_disable_click=!0,this}function Et(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ar(s){return Et(s),Lr(s),this}function jy(s){if(s.composedPath)return s.composedPath();for(var l=[],u=s.target;u;)l.push(u),u=u.parentNode;return l}function Ry(s,l){if(!l)return new R(s.clientX,s.clientY);var u=Fd(l),m=u.boundingClientRect;return new R((s.clientX-m.left)/u.x-l.clientLeft,(s.clientY-m.top)/u.y-l.clientTop)}var MN=te.linux&&te.chrome?window.devicePixelRatio:te.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Oy(s){return te.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/MN:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Vd(s,l){var u=l.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var LN={__proto__:null,on:fe,off:Fe,stopPropagation:Lr,disableScrollPropagation:Bd,disableClickPropagation:Ho,preventDefault:Et,stop:Ar,getPropagationPath:jy,getMousePosition:Ry,getWheelDelta:Oy,isExternalTarget:Vd,addListener:fe,removeListener:Fe},Fy=W.extend({run:function(s,l,u,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Mr(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,u=this._duration*1e3;l<u?this._runFrame(this._easeOut(l/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var u=this._startPos.add(this._offset.multiplyBy(s));l&&u._round(),ot(this._el,u),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Se=W.extend({options:{crs:on,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Uo&&te.any3d&&!te.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,My,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,u){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ce(s),l,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,u.zoom):this._tryAnimatedPan(s,u.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(te.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,u){var m=this.getZoomScale(l),g=this.getSize().divideBy(2),w=s instanceof R?s:this.latLngToContainerPoint(s),N=w.subtract(g).multiplyBy(1-1/m),P=this.containerPointToLatLng(g.add(N));return this.setView(P,l,{zoom:u})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Pe(s);var u=H(l.paddingTopLeft||l.padding||[0,0]),m=H(l.paddingBottomRight||l.padding||[0,0]),g=this.getBoundsZoom(s,!1,u.add(m));if(g=typeof l.maxZoom=="number"?Math.min(l.maxZoom,g):g,g===1/0)return{center:s.getCenter(),zoom:g};var w=m.subtract(u).divideBy(2),N=this.project(s.getSouthWest(),g),P=this.project(s.getNorthEast(),g),D=this.unproject(N.add(P).divideBy(2).add(w),g);return{center:D,zoom:g}},fitBounds:function(s,l){if(s=Pe(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,l);return this.setView(u.center,u.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=H(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fy,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){pe(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,u){if(u=u||{},u.animate===!1||!te.any3d)return this.setView(s,l,u);this._stop();var m=this.project(this.getCenter()),g=this.project(s),w=this.getSize(),N=this._zoom;s=ce(s),l=l===void 0?N:l;var P=Math.max(w.x,w.y),D=P*this.getZoomScale(N,l),z=g.distanceTo(m)||1,G=1.42,se=G*G;function ge(at){var ku=at?-1:1,wb=at?D:P,xb=D*D-P*P+ku*se*se*z*z,Sb=2*wb*se*z,ef=xb/Sb,y_=Math.sqrt(ef*ef+1)-ef,Eb=y_<1e-9?-18:Math.log(y_);return Eb}function qt(at){return(Math.exp(at)-Math.exp(-at))/2}function vt(at){return(Math.exp(at)+Math.exp(-at))/2}function yn(at){return qt(at)/vt(at)}var Zt=ge(0);function ks(at){return P*(vt(Zt)/vt(Zt+G*at))}function gb(at){return P*(vt(Zt)*yn(Zt+G*at)-qt(Zt))/se}function vb(at){return 1-Math.pow(1-at,1.5)}var yb=Date.now(),g_=(ge(1)-Zt)/G,_b=u.duration?1e3*u.duration:1e3*g_*.8;function v_(){var at=(Date.now()-yb)/_b,ku=vb(at)*g_;at<=1?(this._flyToFrame=ne(v_,this),this._move(this.unproject(m.add(g.subtract(m).multiplyBy(gb(ku)/z)),N),this.getScaleZoom(P/ks(ku),N),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),v_.call(this),this},flyToBounds:function(s,l){var u=this._getBoundsCenterZoom(s,l);return this.flyTo(u.center,u.zoom,l)},setMaxBounds:function(s){return s=Pe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var u=this.getCenter(),m=this._limitCenter(u,this._zoom,Pe(s));return u.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var u=H(l.paddingTopLeft||l.padding||[0,0]),m=H(l.paddingBottomRight||l.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(s),N=this.getPixelBounds(),P=_e([N.min.add(u),N.max.subtract(m)]),D=P.getSize();if(!P.contains(w)){this._enforcingBounds=!0;var z=w.subtract(P.getCenter()),G=P.extend(w).getSize().subtract(D);g.x+=z.x<0?-G.x:G.x,g.y+=z.y<0?-G.y:G.y,this.panTo(this.unproject(g),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),m=l.divideBy(2).round(),g=u.divideBy(2).round(),w=m.subtract(g);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),u=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,u,s):navigator.geolocation.getCurrentPosition(l,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,u=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,u=s.coords.longitude,m=new xe(l,u),g=m.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var N=this.getBoundsZoom(g);this.setView(m,w.maxZoom?Math.min(N,w.maxZoom):N)}var P={latlng:m,bounds:g,timestamp:s.timestamp};for(var D in s.coords)typeof s.coords[D]=="number"&&(P[D]=s.coords[D]);this.fire("locationfound",P)}},addHandler:function(s,l){if(!l)return this;var u=this[s]=new l(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)We(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Te("div",u,l||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new Je(l,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,u){s=Pe(s),u=H(u||[0,0]);var m=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),N=s.getNorthWest(),P=s.getSouthEast(),D=this.getSize().subtract(u),z=_e(this.project(P,m),this.project(N,m)).getSize(),G=te.any3d?this.options.zoomSnap:1,se=D.x/z.x,ge=D.y/z.y,qt=l?Math.max(se,ge):Math.min(se,ge);return m=this.getScaleZoom(qt,m),G&&(m=Math.round(m/(G/100))*(G/100),m=l?Math.ceil(m/G)*G:Math.floor(m/G)*G),Math.max(g,Math.min(w,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var u=this._getTopLeftPoint(s,l);return new oe(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var u=this.options.crs;return l=l===void 0?this._zoom:l,u.scale(s)/u.scale(l)},getScaleZoom:function(s,l){var u=this.options.crs;l=l===void 0?this._zoom:l;var m=u.zoom(s*u.scale(l));return isNaN(m)?1/0:m},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(H(s),l)},layerPointToLatLng:function(s){var l=H(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ce(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Pe(s))},distance:function(s,l){return this.options.crs.distance(ce(s),ce(l))},containerPointToLayerPoint:function(s){return H(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return H(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(H(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Ry(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ly(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&te.any3d,pe(s,"leaflet-container"+(te.touch?" leaflet-touch":"")+(te.retina?" leaflet-retina":"")+(te.ielt9?" leaflet-oldie":"")+(te.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=$o(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ot(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pe(s.markerPane,"leaflet-zoom-hide"),pe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,u){ot(this._mapPane,new R(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var g=this._zoom!==l;this._moveStart(g,u)._move(s,l)._moveEnd(g),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,u,m){l===void 0&&(l=this._zoom);var g=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?u&&u.pinch&&this.fire("zoom",u):((g||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ot(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Fe:fe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),te.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var u=[],m,g=l==="mouseout"||l==="mouseover",w=s.target||s.srcElement,N=!1;w;){if(m=this._targets[h(w)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){N=!0;break}if(m&&m.listens(l,!0)&&(g&&!Vd(w,s)||(u.push(m),g))||w===this._container)break;w=w.parentNode}return!u.length&&!N&&!g&&this.listens(l,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var u=s.type;u==="mousedown"&&Od(l),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,u){if(s.type==="click"){var m=r({},s);m.type="preclick",this._fireDOMEvent(m,m.type,u)}var g=this._findEventTargets(s,l);if(u){for(var w=[],N=0;N<u.length;N++)u[N].listens(l,!0)&&w.push(u[N]);g=w.concat(g)}if(g.length){l==="contextmenu"&&Et(s);var P=g[0],D={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var z=P.getLatLng&&(!P._radius||P._radius<=10);D.containerPoint=z?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(s),D.layerPoint=this.containerPointToLayerPoint(D.containerPoint),D.latlng=z?P.getLatLng():this.layerPointToLatLng(D.layerPoint)}for(N=0;N<g.length;N++)if(g[N].fire(l,D,!0),D.originalEvent._stopped||g[N].options.bubblingMouseEvents===!1&&I(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Mr(this._mapPane)||new R(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var u=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var u=this.getSize()._divideBy(2);return this.project(s,l)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,u){var m=this._getNewPixelOrigin(u,l);return this.project(s,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,l,u){var m=this._getNewPixelOrigin(u,l);return _e([this.project(s.getSouthWest(),l)._subtract(m),this.project(s.getNorthWest(),l)._subtract(m),this.project(s.getSouthEast(),l)._subtract(m),this.project(s.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,u){if(!u)return s;var m=this.project(s,l),g=this.getSize().divideBy(2),w=new oe(m.subtract(g),m.add(g)),N=this._getBoundsOffset(w,u,l);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?s:this.unproject(m.add(N),l)},_limitOffset:function(s,l){if(!l)return s;var u=this.getPixelBounds(),m=new oe(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(s,l,u){var m=_e(this.project(l.getNorthEast(),u),this.project(l.getSouthWest(),u)),g=m.min.subtract(s.min),w=m.max.subtract(s.max),N=this._rebound(g.x,-w.x),P=this._rebound(g.y,-w.y);return new R(N,P)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),u=this.getMaxZoom(),m=te.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(l,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){it(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var u=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,l),!0)},_createAnimProxy:function(){var s=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var u=Pd,m=this._proxy.style[u];Pr(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Pr(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),g=this._getCenterOffset(s)._divideBy(1-1/m);return u.animate!==!0&&!this.getSize().contains(g)?!1:(ne(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,u,m){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&it(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function AN(s,l){return new Se(s,l)}var Nn=ft.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),u=this.getPosition(),m=s._controlCorners[u];return pe(l,"leaflet-control"),u.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Wo=function(s){return new Nn(s)};Se.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",u=this._controlContainer=Te("div",l+"control-container",this._container);function m(g,w){var N=l+g+" "+l+w;s[g+w]=Te("div",N,u)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)We(this._controlCorners[s]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zy=Nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,u,m){return u<m?-1:m<u?1:0}},initialize:function(s,l,u){k(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Nn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):it(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return it(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Te("div",s),u=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ho(l),Bd(l);var m=this._section=Te("section",s+"-list");u&&(this._map.on("click",this.collapse,this),fe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Te("a",s+"-toggle",l);g.href="#",g.title="Layers",g.setAttribute("role","button"),fe(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Et(w),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Te("div",s+"-base",m),this._separator=Te("div",s+"-separator",m),this._overlaysList=Te("div",s+"-overlays",m),l.appendChild(m)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:u}),this.options.sortLayers&&this._layers.sort(a(function(m,g){return this.options.sortFunction(m.layer,g.layer,m.name,g.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lu(this._baseLayersList),lu(this._overlaysList),this._layerControlInputs=[];var s,l,u,m,g=0;for(u=0;u<this._layers.length;u++)m=this._layers[u],this._addItem(m),l=l||m.overlay,s=s||!m.overlay,g+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&g>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),u=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,l)},_createRadioElement:function(s,l){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=u,m.firstChild},_addItem:function(s){var l=document.createElement("label"),u=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=u):m=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(m),m.layerId=h(s.layer),fe(m,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+s.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(m),w.appendChild(g);var N=s.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,u,m=[],g=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)l=s[w],u=this._getLayer(l.layerId).layer,l.checked?m.push(u):l.checked||g.push(u);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<m.length;w++)this._map.hasLayer(m[w])||this._map.addLayer(m[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,u,m=this._map.getZoom(),g=s.length-1;g>=0;g--)l=s[g],u=this._getLayer(l.layerId).layer,l.disabled=u.options.minZoom!==void 0&&m<u.options.minZoom||u.options.maxZoom!==void 0&&m>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,fe(s,"click",Et),this.expand();var l=this;setTimeout(function(){Fe(s,"click",Et),l._preventClick=!1})}}),DN=function(s,l,u){return new zy(s,l,u)},qd=Nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",u=Te("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,u,m,g){var w=Te("a",u,m);return w.innerHTML=s,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Ho(w),fe(w,"click",Ar),fe(w,"click",g,this),fe(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";it(this._zoomInButton,l),it(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(pe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(pe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Se.mergeOptions({zoomControl:!0}),Se.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qd,this.addControl(this.zoomControl))});var jN=function(s){return new qd(s)},Uy=Nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",u=Te("div",l),m=this.options;return this._addScales(m,l+"-line",u),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,u){s.metric&&(this._mScale=Te("div",l,u)),s.imperial&&(this._iScale=Te("div",l,u))},_update:function(){var s=this._map,l=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),u=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,u,l/s)},_updateImperial:function(s){var l=s*3.2808399,u,m,g;l>5280?(u=l/5280,m=this._getRoundNum(u),this._updateScale(this._iScale,m+" mi",m/u)):(g=this._getRoundNum(l),this._updateScale(this._iScale,g+" ft",g/l))},_updateScale:function(s,l,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),u=s/l;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,l*u}}),RN=function(s){return new Uy(s)},ON='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Hd=Nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(te.inlineSvg?ON+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Te("div","leaflet-control-attribution"),Ho(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Se.mergeOptions({attributionControl:!0}),Se.addInitHook(function(){this.options.attributionControl&&new Hd().addTo(this)});var FN=function(s){return new Hd(s)};Nn.Layers=zy,Nn.Zoom=qd,Nn.Scale=Uy,Nn.Attribution=Hd,Wo.layers=DN,Wo.zoom=jN,Wo.scale=RN,Wo.attribution=FN;var Bn=ft.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bn.addTo=function(s,l){return s.addHandler(l,this),this};var zN={Events:Xe},$y=te.touch?"touchstart mousedown":"mousedown",Ri=W.extend({options:{clickTolerance:3},initialize:function(s,l,u,m){k(this,m),this._element=s,this._dragStartTarget=l||s,this._preventOutline=u},enable:function(){this._enabled||(fe(this._dragStartTarget,$y,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ri._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,$y,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Md(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ri._dragging===this&&this.finishDrag();return}if(!(Ri._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ri._dragging=this,this._preventOutline&&Od(this._element),Dd(),Bo(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,u=Ay(this._element);this._startPoint=new R(l.clientX,l.clientY),this._startPos=Mr(this._element),this._parentScale=Fd(u);var m=s.type==="mousedown";fe(document,m?"mousemove":"touchmove",this._onMove,this),fe(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,u=new R(l.clientX,l.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Et(s),this._moved||(this.fire("dragstart"),this._moved=!0,pe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ot(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){it(document.body,"leaflet-dragging"),this._lastTarget&&(it(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),jd(),Vo();var l=this._moved&&this._moving;this._moving=!1,Ri._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function By(s,l,u){var m,g=[1,4,2,8],w,N,P,D,z,G,se,ge;for(w=0,G=s.length;w<G;w++)s[w]._code=Dr(s[w],l);for(P=0;P<4;P++){for(se=g[P],m=[],w=0,G=s.length,N=G-1;w<G;N=w++)D=s[w],z=s[N],D._code&se?z._code&se||(ge=fu(z,D,se,l,u),ge._code=Dr(ge,l),m.push(ge)):(z._code&se&&(ge=fu(z,D,se,l,u),ge._code=Dr(ge,l),m.push(ge)),m.push(D));s=m}return s}function Vy(s,l){var u,m,g,w,N,P,D,z,G;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=ce([0,0]),ge=Pe(s),qt=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());qt<1700&&(se=Wd(s));var vt=s.length,yn=[];for(u=0;u<vt;u++){var Zt=ce(s[u]);yn.push(l.project(ce([Zt.lat-se.lat,Zt.lng-se.lng])))}for(P=D=z=0,u=0,m=vt-1;u<vt;m=u++)g=yn[u],w=yn[m],N=g.y*w.x-w.y*g.x,D+=(g.x+w.x)*N,z+=(g.y+w.y)*N,P+=N*3;P===0?G=yn[0]:G=[D/P,z/P];var ks=l.unproject(H(G));return ce([ks.lat+se.lat,ks.lng+se.lng])}function Wd(s){for(var l=0,u=0,m=0,g=0;g<s.length;g++){var w=ce(s[g]);l+=w.lat,u+=w.lng,m++}return ce([l/m,u/m])}var UN={__proto__:null,clipPolygon:By,polygonCenter:Vy,centroid:Wd};function qy(s,l){if(!l||!s.length)return s.slice();var u=l*l;return s=VN(s,u),s=BN(s,u),s}function Hy(s,l,u){return Math.sqrt(Ko(s,l,u,!0))}function $N(s,l,u){return Ko(s,l,u)}function BN(s,l){var u=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,g=new m(u);g[0]=g[u-1]=1,Kd(s,g,l,0,u-1);var w,N=[];for(w=0;w<u;w++)g[w]&&N.push(s[w]);return N}function Kd(s,l,u,m,g){var w=0,N,P,D;for(P=m+1;P<=g-1;P++)D=Ko(s[P],s[m],s[g],!0),D>w&&(N=P,w=D);w>u&&(l[N]=1,Kd(s,l,u,m,N),Kd(s,l,u,N,g))}function VN(s,l){for(var u=[s[0]],m=1,g=0,w=s.length;m<w;m++)qN(s[m],s[g])>l&&(u.push(s[m]),g=m);return g<w-1&&u.push(s[w-1]),u}var Wy;function Ky(s,l,u,m,g){var w=m?Wy:Dr(s,u),N=Dr(l,u),P,D,z;for(Wy=N;;){if(!(w|N))return[s,l];if(w&N)return!1;P=w||N,D=fu(s,l,P,u,g),z=Dr(D,u),P===w?(s=D,w=z):(l=D,N=z)}}function fu(s,l,u,m,g){var w=l.x-s.x,N=l.y-s.y,P=m.min,D=m.max,z,G;return u&8?(z=s.x+w*(D.y-s.y)/N,G=D.y):u&4?(z=s.x+w*(P.y-s.y)/N,G=P.y):u&2?(z=D.x,G=s.y+N*(D.x-s.x)/w):u&1&&(z=P.x,G=s.y+N*(P.x-s.x)/w),new R(z,G,g)}function Dr(s,l){var u=0;return s.x<l.min.x?u|=1:s.x>l.max.x&&(u|=2),s.y<l.min.y?u|=4:s.y>l.max.y&&(u|=8),u}function qN(s,l){var u=l.x-s.x,m=l.y-s.y;return u*u+m*m}function Ko(s,l,u,m){var g=l.x,w=l.y,N=u.x-g,P=u.y-w,D=N*N+P*P,z;return D>0&&(z=((s.x-g)*N+(s.y-w)*P)/D,z>1?(g=u.x,w=u.y):z>0&&(g+=N*z,w+=P*z)),N=s.x-g,P=s.y-w,m?N*N+P*P:new R(g,w)}function vn(s){return!S(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Qy(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vn(s)}function Gy(s,l){var u,m,g,w,N,P,D,z;if(!s||s.length===0)throw new Error("latlngs not passed");vn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var G=ce([0,0]),se=Pe(s),ge=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());ge<1700&&(G=Wd(s));var qt=s.length,vt=[];for(u=0;u<qt;u++){var yn=ce(s[u]);vt.push(l.project(ce([yn.lat-G.lat,yn.lng-G.lng])))}for(u=0,m=0;u<qt-1;u++)m+=vt[u].distanceTo(vt[u+1])/2;if(m===0)z=vt[0];else for(u=0,w=0;u<qt-1;u++)if(N=vt[u],P=vt[u+1],g=N.distanceTo(P),w+=g,w>m){D=(w-m)/g,z=[P.x-D*(P.x-N.x),P.y-D*(P.y-N.y)];break}var Zt=l.unproject(H(z));return ce([Zt.lat+G.lat,Zt.lng+G.lng])}var HN={__proto__:null,simplify:qy,pointToSegmentDistance:Hy,closestPointOnSegment:$N,clipSegment:Ky,_getEdgeIntersection:fu,_getBitCode:Dr,_sqClosestPointOnSegment:Ko,isFlat:vn,_flat:Qy,polylineCenter:Gy},Qd={project:function(s){return new R(s.lng,s.lat)},unproject:function(s){return new xe(s.y,s.x)},bounds:new oe([-180,-90],[180,90])},Gd={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,u=this.R,m=s.lat*l,g=this.R_MINOR/u,w=Math.sqrt(1-g*g),N=w*Math.sin(m),P=Math.tan(Math.PI/4-m/2)/Math.pow((1-N)/(1+N),w/2);return m=-u*Math.log(Math.max(P,1e-10)),new R(s.lng*l*u,m)},unproject:function(s){for(var l=180/Math.PI,u=this.R,m=this.R_MINOR/u,g=Math.sqrt(1-m*m),w=Math.exp(-s.y/u),N=Math.PI/2-2*Math.atan(w),P=0,D=.1,z;P<15&&Math.abs(D)>1e-7;P++)z=g*Math.sin(N),z=Math.pow((1-z)/(1+z),g/2),D=Math.PI/2-2*Math.atan(w*z)-N,N+=D;return new xe(N*l,s.x*l/u)}},WN={__proto__:null,LonLat:Qd,Mercator:Gd,SphericalMercator:ps},KN=r({},zn,{code:"EPSG:3395",projection:Gd,transformation:function(){var s=.5/(Math.PI*Gd.R);return Me(s,.5,-s,.5)}()}),Zy=r({},zn,{code:"EPSG:4326",projection:Qd,transformation:Me(1/180,1,-1/180,.5)}),QN=r({},Mt,{projection:Qd,transformation:Me(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var u=l.lng-s.lng,m=l.lat-s.lat;return Math.sqrt(u*u+m*m)},infinite:!0});Mt.Earth=zn,Mt.EPSG3395=KN,Mt.EPSG3857=on,Mt.EPSG900913=kd,Mt.EPSG4326=Zy,Mt.Simple=QN;var bn=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var u=this.getEvents();l.on(u,this),this.once("remove",function(){l.off(u,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Se.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},_addLayers:function(s){s=s?S(s)?s:[s]:[];for(var l=0,u=s.length;l<u;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,u=this._getZoomSpan();for(var m in this._zoomBoundLayers){var g=this._zoomBoundLayers[m].options;s=g.minZoom===void 0?s:Math.min(s,g.minZoom),l=g.maxZoom===void 0?l:Math.max(l,g.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _s=bn.extend({initialize:function(s,l){k(this,l),this._layers={};var u,m;if(s)for(u=0,m=s.length;u<m;u++)this.addLayer(s[u])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),u,m;for(u in this._layers)m=this._layers[u],m[s]&&m[s].apply(m,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var u in this._layers)s.call(l,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),GN=function(s,l){return new _s(s,l)},si=_s.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),_s.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),_s.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Je;for(var l in this._layers){var u=this._layers[l];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),ZN=function(s,l){return new si(s,l)},ws=ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(u,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,l){var u=this.options,m=u[l+"Size"];typeof m=="number"&&(m=[m,m]);var g=H(m),w=H(l==="shadow"&&u.shadowAnchor||u.iconAnchor||g&&g.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(u.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),g&&(s.style.width=g.x+"px",s.style.height=g.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return te.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function YN(s){return new ws(s)}var Qo=ws.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Qo.imagePath!="string"&&(Qo.imagePath=this._detectIconPath()),(this.options.imagePath||Qo.imagePath)+ws.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(u,m,g){var w=m.exec(u);return w&&w[g]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Te("div","leaflet-default-icon-path",document.body),l=$o(s,"background-image")||$o(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Yy=Bn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ri(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&it(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,u=l._map,m=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=Mr(l._icon),N=u.getPixelBounds(),P=u.getPixelOrigin(),D=_e(N.min._subtract(P).add(g),N.max._subtract(P).subtract(g));if(!D.contains(w)){var z=H((Math.max(D.max.x,w.x)-D.max.x)/(N.max.x-D.max.x)-(Math.min(D.min.x,w.x)-D.min.x)/(N.min.x-D.min.x),(Math.max(D.max.y,w.y)-D.max.y)/(N.max.y-D.max.y)-(Math.min(D.min.y,w.y)-D.min.y)/(N.min.y-D.min.y)).multiplyBy(m);u.panBy(z,{animate:!1}),this._draggable._newPos._add(z),this._draggable._startPos._add(z),ot(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ne(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,u=l._shadow,m=Mr(l._icon),g=l._map.layerPointToLatLng(m);u&&ot(u,m),l._latlng=g,s.latlng=g,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),mu=bn.extend({options:{icon:new Qo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),m=!1;u!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),pe(u,l),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(u,"focus",this._panOnFocus,this);var g=s.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(pe(g,l),g.alt=""),this._shadow=g,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yy)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yy(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&gn(this._icon,s),this._shadow&&gn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,u=l.iconSize?H(l.iconSize):H(0,0),m=l.iconAnchor?H(l.iconAnchor):H(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:u.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function XN(s,l){return new mu(s,l)}var Oi=bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pu=Oi.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Oi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,u=this._clickTolerance(),m=[s+u,l+u];this._pxBounds=new oe(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function JN(s,l){return new pu(s,l)}var Zd=pu.extend({initialize:function(s,l,u){if(typeof l=="number"&&(l=r({},u,{radius:l})),k(this,l),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Oi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,u=this._map,m=u.options.crs;if(m.distance===zn.distance){var g=Math.PI/180,w=this._mRadius/zn.R/g,N=u.project([l+w,s]),P=u.project([l-w,s]),D=N.add(P).divideBy(2),z=u.unproject(D).lat,G=Math.acos((Math.cos(w*g)-Math.sin(l*g)*Math.sin(z*g))/(Math.cos(l*g)*Math.cos(z*g)))/g;(isNaN(G)||G===0)&&(G=w/Math.cos(Math.PI/180*l)),this._point=D.subtract(u.getPixelOrigin()),this._radius=isNaN(G)?0:D.x-u.project([z,s-G]).x,this._radiusY=D.y-N.y}else{var se=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(se).x}this._updateBounds()}});function eb(s,l,u){return new Zd(s,l,u)}var oi=Oi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,u=null,m=Ko,g,w,N=0,P=this._parts.length;N<P;N++)for(var D=this._parts[N],z=1,G=D.length;z<G;z++){g=D[z-1],w=D[z];var se=m(s,g,w,!0);se<l&&(l=se,u=m(s,g,w))}return u&&(u.distance=Math.sqrt(l)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gy(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ce(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Je,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],u=vn(s),m=0,g=s.length;m<g;m++)u?(l[m]=ce(s[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(s[m]);return l},_project:function(){var s=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new R(s,s);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,u){var m=s[0]instanceof xe,g=s.length,w,N;if(m){for(N=[],w=0;w<g;w++)N[w]=this._map.latLngToLayerPoint(s[w]),u.extend(N[w]);l.push(N)}else for(w=0;w<g;w++)this._projectLatlngs(s[w],l,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,u,m,g,w,N,P,D;for(u=0,g=0,w=this._rings.length;u<w;u++)for(D=this._rings[u],m=0,N=D.length;m<N-1;m++)P=Ky(D[m],D[m+1],s,m,!0),P&&(l[g]=l[g]||[],l[g].push(P[0]),(P[1]!==D[m+1]||m===N-2)&&(l[g].push(P[1]),g++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,u=0,m=s.length;u<m;u++)s[u]=qy(s[u],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var u,m,g,w,N,P,D=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,w=this._parts.length;u<w;u++)for(P=this._parts[u],m=0,N=P.length,g=N-1;m<N;g=m++)if(!(!l&&m===0)&&Hy(s,P[g],P[m])<=D)return!0;return!1}});function tb(s,l){return new oi(s,l)}oi._flat=Qy;var xs=oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vy(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=oi.prototype._convertLatLngs.call(this,s),u=l.length;return u>=2&&l[0]instanceof xe&&l[0].equals(l[u-1])&&l.pop(),l},_setLatLngs:function(s){oi.prototype._setLatLngs.call(this,s),vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,u=new R(l,l);if(s=new oe(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,g=this._rings.length,w;m<g;m++)w=By(this._rings[m],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,u,m,g,w,N,P,D,z;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,D=this._parts.length;w<D;w++)for(u=this._parts[w],N=0,z=u.length,P=z-1;N<z;P=N++)m=u[N],g=u[P],m.y>s.y!=g.y>s.y&&s.x<(g.x-m.x)*(s.y-m.y)/(g.y-m.y)+m.x&&(l=!l);return l||oi.prototype._containsPoint.call(this,s,!0)}});function nb(s,l){return new xs(s,l)}var ai=si.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=S(s)?s:s.features,u,m,g;if(l){for(u=0,m=l.length;u<m;u++)g=l[u],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var N=gu(s,w);return N?(N.feature=_u(s),N.defaultOptions=N.options,this.resetStyle(N),w.onEachFeature&&w.onEachFeature(s,N),this.addLayer(N)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function gu(s,l){var u=s.type==="Feature"?s.geometry:s,m=u?u.coordinates:null,g=[],w=l&&l.pointToLayer,N=l&&l.coordsToLatLng||Yd,P,D,z,G;if(!m&&!u)return null;switch(u.type){case"Point":return P=N(m),Xy(w,s,P,l);case"MultiPoint":for(z=0,G=m.length;z<G;z++)P=N(m[z]),g.push(Xy(w,s,P,l));return new si(g);case"LineString":case"MultiLineString":return D=vu(m,u.type==="LineString"?0:1,N),new oi(D,l);case"Polygon":case"MultiPolygon":return D=vu(m,u.type==="Polygon"?1:2,N),new xs(D,l);case"GeometryCollection":for(z=0,G=u.geometries.length;z<G;z++){var se=gu({geometry:u.geometries[z],type:"Feature",properties:s.properties},l);se&&g.push(se)}return new si(g);case"FeatureCollection":for(z=0,G=u.features.length;z<G;z++){var ge=gu(u.features[z],l);ge&&g.push(ge)}return new si(g);default:throw new Error("Invalid GeoJSON object.")}}function Xy(s,l,u,m){return s?s(l,u):new mu(u,m&&m.markersInheritOptions&&m)}function Yd(s){return new xe(s[1],s[0],s[2])}function vu(s,l,u){for(var m=[],g=0,w=s.length,N;g<w;g++)N=l?vu(s[g],l-1,u):(u||Yd)(s[g]),m.push(N);return m}function Xd(s,l){return s=ce(s),s.alt!==void 0?[y(s.lng,l),y(s.lat,l),y(s.alt,l)]:[y(s.lng,l),y(s.lat,l)]}function yu(s,l,u,m){for(var g=[],w=0,N=s.length;w<N;w++)g.push(l?yu(s[w],vn(s[w])?0:l-1,u,m):Xd(s[w],m));return!l&&u&&g.length>0&&g.push(g[0].slice()),g}function Ss(s,l){return s.feature?r({},s.feature,{geometry:l}):_u(l)}function _u(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Jd={toGeoJSON:function(s){return Ss(this,{type:"Point",coordinates:Xd(this.getLatLng(),s)})}};mu.include(Jd),Zd.include(Jd),pu.include(Jd),oi.include({toGeoJSON:function(s){var l=!vn(this._latlngs),u=yu(this._latlngs,l?1:0,!1,s);return Ss(this,{type:(l?"Multi":"")+"LineString",coordinates:u})}}),xs.include({toGeoJSON:function(s){var l=!vn(this._latlngs),u=l&&!vn(this._latlngs[0]),m=yu(this._latlngs,u?2:l?1:0,!0,s);return l||(m=[m]),Ss(this,{type:(u?"Multi":"")+"Polygon",coordinates:m})}}),_s.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(u){l.push(u.toGeoJSON(s).geometry.coordinates)}),Ss(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var u=l==="GeometryCollection",m=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(s);if(u)m.push(w.geometry);else{var N=_u(w);N.type==="FeatureCollection"?m.push.apply(m,N.features):m.push(N)}}}),u?Ss(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Jy(s,l){return new ai(s,l)}var ib=Jy,wu=bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,u){this._url=s,this._bounds=Pe(l),k(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&vs(this._image),this},bringToBack:function(){return this._map&&ys(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Pe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Te("img");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Pr(this._image,u,l)},_reset:function(){var s=this._image,l=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=l.getSize();ot(s,l.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){gn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),rb=function(s,l,u){return new wu(s,l,u)},e_=wu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Te("video");if(pe(l,"leaflet-image-layer"),this._zoomAnimated&&pe(l,"leaflet-zoom-animated"),this.options.className&&pe(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=a(this.fire,this,"load"),s){for(var u=l.getElementsByTagName("source"),m=[],g=0;g<u.length;g++)m.push(u[g].src);this._url=u.length>0?m:[l.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var N=Te("source");N.src=this._url[w],l.appendChild(N)}}});function sb(s,l,u){return new e_(s,l,u)}var t_=wu.extend({_initImage:function(){var s=this._image=this._url;pe(s,"leaflet-image-layer"),this._zoomAnimated&&pe(s,"leaflet-zoom-animated"),this.options.className&&pe(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function ob(s,l,u){return new t_(s,l,u)}var Vn=bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof xe||S(s))?(this._latlng=ce(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&gn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&gn(this._container,1),this.bringToFront(),this.options.interactive&&(pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(gn(this._container,0),this._removeTimeout=setTimeout(a(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vs(this._container),this},bringToBack:function(){return this._map&&ys(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof si){l=null;var u=this._source._layers;for(var m in u)if(u[m]._map){l=u[m];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=H(this.options.offset),u=this._getAnchor();this._zoomAnimated?ot(this._container,s.add(u)):l=l.add(s).add(u);var m=this._containerBottom=-l.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Se.include({_initOverlay:function(s,l,u,m){var g=l;return g instanceof s||(g=new s(m).setContent(l)),u&&g.setLatLng(u),g}}),bn.include({_initOverlay:function(s,l,u,m){var g=u;return g instanceof s?(k(g,m),g._source=this):(g=l&&!m?l:new s(m,this),g.setContent(u)),g}});var xu=Vn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Vn.prototype.openOn.call(this,s)},onAdd:function(s){Vn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oi||this._source.on("preclick",Lr))},onRemove:function(s){Vn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oi||this._source.off("preclick",Lr))},getEvents:function(){var s=Vn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Te("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Te("div",s+"-content-wrapper",l);if(this._contentNode=Te("div",s+"-content",u),Ho(l),Bd(this._contentNode),fe(l,"contextmenu",Lr),this._tipContainer=Te("div",s+"-tip-container",l),this._tip=Te("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Te("a",s+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',fe(m,"click",function(g){Et(g),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),l.width=u+1+"px",l.whiteSpace="",l.height="";var m=s.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&m>g?(l.height=g+"px",pe(s,w)):it(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();ot(this._container,l.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt($o(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+l,m=this._containerWidth,g=new R(this._containerLeft,-u-this._containerBottom);g._add(Mr(this._container));var w=s.layerPointToContainerPoint(g),N=H(this.options.autoPanPadding),P=H(this.options.autoPanPaddingTopLeft||N),D=H(this.options.autoPanPaddingBottomRight||N),z=s.getSize(),G=0,se=0;w.x+m+D.x>z.x&&(G=w.x+m-z.x+D.x),w.x-G-P.x<0&&(G=w.x-P.x),w.y+u+D.y>z.y&&(se=w.y+u-z.y+D.y),w.y-se-P.y<0&&(se=w.y-P.y),(G||se)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([G,se]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ab=function(s,l){return new xu(s,l)};Se.mergeOptions({closePopupOnClick:!0}),Se.include({openPopup:function(s,l,u){return this._initOverlay(xu,s,l,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),bn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(xu,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof si||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ar(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Oi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Su=Vn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Vn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Vn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Vn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,u,m=this._map,g=this._container,w=m.latLngToContainerPoint(m.getCenter()),N=m.layerPointToContainerPoint(s),P=this.options.direction,D=g.offsetWidth,z=g.offsetHeight,G=H(this.options.offset),se=this._getAnchor();P==="top"?(l=D/2,u=z):P==="bottom"?(l=D/2,u=0):P==="center"?(l=D/2,u=z/2):P==="right"?(l=0,u=z/2):P==="left"?(l=D,u=z/2):N.x<w.x?(P="right",l=0,u=z/2):(P="left",l=D+(G.x+se.x)*2,u=z/2),s=s.subtract(H(l,u,!0)).add(G).add(se),it(g,"leaflet-tooltip-right"),it(g,"leaflet-tooltip-left"),it(g,"leaflet-tooltip-top"),it(g,"leaflet-tooltip-bottom"),pe(g,"leaflet-tooltip-"+P),ot(g,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&gn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),lb=function(s,l){return new Su(s,l)};Se.include({openTooltip:function(s,l,u){return this._initOverlay(Su,s,l,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),bn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Su,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[l](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof si||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(fe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),fe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,u,m;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(u),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var n_=ws.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(lu(l),l.appendChild(u.html)):l.innerHTML=u.html!==!1?u.html:"",u.bgPos){var m=H(u.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function ub(s){return new n_(s)}ws.Default=Qo;var Go=bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:te.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),We(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ys(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof R?s:new R(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,u=-s(-1/0,1/0),m=0,g=l.length,w;m<g;m++)w=l[m].style.zIndex,l[m]!==this._container&&w&&(u=s(u,+w));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!te.ielt9){gn(this._container,this.options.opacity);var s=+new Date,l=!1,u=!1;for(var m in this._tiles){var g=this._tiles[m];if(!(!g.current||!g.loaded)){var w=Math.min(1,(s-g.loaded)/200);gn(g.el,w),w<1?l=!0:(g.active?u=!0:this._onOpaqueTile(g),g.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),l&&(B(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=l-Math.abs(s-u),this._onUpdateLevel(u)):(We(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var m=this._levels[s],g=this._map;return m||(m=this._levels[s]={},m.el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=g.project(g.unproject(g.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,g.getCenter(),g.getZoom()),v(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,l,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)We(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,u,m){var g=Math.floor(s/2),w=Math.floor(l/2),N=u-1,P=new R(+g,+w);P.z=+N;var D=this._tileCoordsToKey(P),z=this._tiles[D];return z&&z.active?(z.retain=!0,!0):(z&&z.loaded&&(z.retain=!0),N>m?this._retainParent(g,w,N,m):!1)},_retainChildren:function(s,l,u,m){for(var g=2*s;g<2*s+2;g++)for(var w=2*l;w<2*l+2;w++){var N=new R(g,w);N.z=u+1;var P=this._tileCoordsToKey(N),D=this._tiles[P];if(D&&D.active){D.retain=!0;continue}else D&&D.loaded&&(D.retain=!0);u+1<m&&this._retainChildren(g,w,u+1,m)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,u,m){var g=Math.round(l);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!m||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,l)},_setZoomTransform:function(s,l,u){var m=this._map.getZoomScale(u,s.zoom),g=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,u)).round();te.any3d?Pr(s.el,g,m):ot(s.el,g)},_resetGrid:function(){var s=this._map,l=s.options.crs,u=this._tileSize=this.getTileSize(),m=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],m).x/u.x),Math.ceil(s.project([0,l.wrapLng[1]],m).x/u.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],m).y/u.x),Math.ceil(s.project([l.wrapLat[1],0],m).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,u=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(u,this._tileZoom),g=l.project(s,this._tileZoom).floor(),w=l.getSize().divideBy(m*2);return new oe(g.subtract(w),g.add(w))},_update:function(s){var l=this._map;if(l){var u=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),g=this._pxBoundsToTileRange(m),w=g.getCenter(),N=[],P=this.options.keepBuffer,D=new oe(g.getBottomLeft().subtract([P,-P]),g.getTopRight().add([P,-P]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var z in this._tiles){var G=this._tiles[z].coords;(G.z!==this._tileZoom||!D.contains(new R(G.x,G.y)))&&(this._tiles[z].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var se=g.min.y;se<=g.max.y;se++)for(var ge=g.min.x;ge<=g.max.x;ge++){var qt=new R(ge,se);if(qt.z=this._tileZoom,!!this._isValidTile(qt)){var vt=this._tiles[this._tileCoordsToKey(qt)];vt?vt.current=!0:N.push(qt)}}if(N.sort(function(Zt,ks){return Zt.distanceTo(w)-ks.distanceTo(w)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(ge=0;ge<N.length;ge++)this._addTile(N[ge],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var u=this._globalTileRange;if(!l.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!l.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return Pe(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,u=this.getTileSize(),m=s.scaleBy(u),g=m.add(u),w=l.unproject(m,s.z),N=l.unproject(g,s.z);return[w,N]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),u=new Je(l[0],l[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),u=new R(+l[0],+l[1]);return u.z=+l[2],u},_removeTile:function(s){var l=this._tiles[s];l&&(We(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){pe(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=v,s.onmousemove=v,te.ielt9&&this.options.opacity<1&&gn(s,this.options.opacity)},_addTile:function(s,l){var u=this._getTilePos(s),m=this._tileCoordsToKey(s),g=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(g),this.createTile.length<2&&ne(a(this._tileReady,this,s,null,g)),ot(g,u),this._tiles[m]={el:g,coords:s,current:!0},l.appendChild(g),this.fire("tileloadstart",{tile:g,coords:s})},_tileReady:function(s,l,u){l&&this.fire("tileerror",{error:l,tile:u,coords:s});var m=this._tileCoordsToKey(s);u=this._tiles[m],u&&(u.loaded=+new Date,this._map._fadeAnimated?(gn(u.el,0),B(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),l||(pe(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),te.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new R(this._wrapX?p(s.x,this._wrapX):s.x,this._wrapY?p(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new oe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function cb(s){return new Go(s)}var Es=Go.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&te.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var u=document.createElement("img");return fe(u,"load",a(this._tileOnLoad,this,l,u)),fe(u,"error",a(this._tileOnError,this,l,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var l={r:te.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=u),l["-y"]=u}return _(this._url,r(l,this.options))},_tileOnLoad:function(s,l){te.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,u){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),s(u,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,u=this.options.zoomReverse,m=this.options.zoomOffset;return u&&(s=l-s),s+m},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=v,l.onerror=v,!l.complete)){l.src=M;var u=this._tiles[s].coords;We(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:u})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",M),Go.prototype._removeTile.call(this,s)},_tileReady:function(s,l,u){if(!(!this._map||u&&u.getAttribute("src")===M))return Go.prototype._tileReady.call(this,s,l,u)}});function i_(s,l){return new Es(s,l)}var r_=Es.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var u=r({},this.defaultWmsParams);for(var m in l)m in this.options||(u[m]=l[m]);l=k(this,l);var g=l.detectRetina&&te.retina?2:1,w=this.getTileSize();u.width=w.x*g,u.height=w.y*g,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Es.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),u=this._crs,m=_e(u.project(l[0]),u.project(l[1])),g=m.min,w=m.max,N=(this._wmsVersion>=1.3&&this._crs===Zy?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),P=Es.prototype.getTileUrl.call(this,s);return P+T(this.wmsParams,P,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function hb(s,l){return new r_(s,l)}Es.WMS=r_,i_.wms=hb;var li=bn.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var u=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,l),w=m.multiplyBy(-u).add(g).subtract(this._map._getNewPixelOrigin(s,l));te.any3d?Pr(this._container,w,u):ot(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),u=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new oe(u,u.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),s_=li.extend({options:{tolerance:0},getEvents:function(){var s=li.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){li.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");fe(s,"mousemove",this._onMouseMove,this),fe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,We(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){li.prototype._update.call(this);var s=this._bounds,l=this._container,u=s.getSize(),m=te.retina?2:1;ot(l,s.min),l.width=m*u.x,l.height=m*u.y,l.style.width=u.x+"px",l.style.height=u.y+"px",te.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){li.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,u=l.next,m=l.prev;u?u.prev=m:this._drawLast=m,m?m.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),u=[],m,g;for(g=0;g<l.length;g++){if(m=Number(l[g]),isNaN(m))return;u.push(m)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var u=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var u,m,g,w,N=s._parts,P=N.length,D=this._ctx;if(P){for(D.beginPath(),u=0;u<P;u++){for(m=0,g=N[u].length;m<g;m++)w=N[u][m],D[m?"lineTo":"moveTo"](w.x,w.y);l&&D.closePath()}this._fillStroke(D,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,u=this._ctx,m=Math.max(Math.round(s._radius),1),g=(Math.max(Math.round(s._radiusY),1)||m)/m;g!==1&&(u.save(),u.scale(1,g)),u.beginPath(),u.arc(l.x,l.y/g,m,0,Math.PI*2,!1),g!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,l){var u=l.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),u,m,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(m=u);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(it(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var u,m,g=this._drawFirst;g;g=g.next)u=g.layer,u.options.interactive&&u._containsPoint(l)&&(m=u);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(pe(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,u){this._map._fireDOMEvent(l,u||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var u=l.next,m=l.prev;if(u)u.prev=m;else return;m?m.next=u:u&&(this._drawFirst=u),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var u=l.next,m=l.prev;if(m)m.next=u;else return;u?u.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function o_(s){return te.canvas?new s_(s):null}var Zo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),db={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(li.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Zo("shape");pe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Zo("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;We(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,u=s._fill,m=s.options,g=s._container;g.stroked=!!m.stroke,g.filled=!!m.fill,m.stroke?(l||(l=s._stroke=Zo("stroke")),g.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=S(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(g.removeChild(l),s._stroke=null),m.fill?(u||(u=s._fill=Zo("fill")),g.appendChild(u),u.color=m.fillColor||m.color,u.opacity=m.fillOpacity):u&&(g.removeChild(u),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),u=Math.round(s._radius),m=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+u+","+m+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){vs(s._container)},_bringToBack:function(s){ys(s._container)}},Eu=te.vml?Zo:ru,Yo=li.extend({_initContainer:function(){this._container=Eu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Eu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){li.prototype._update.call(this);var s=this._bounds,l=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,u.setAttribute("width",l.x),u.setAttribute("height",l.y)),ot(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Eu("path");s.options.className&&pe(l,s.options.className),s.options.interactive&&pe(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){We(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,u=s.options;l&&(u.stroke?(l.setAttribute("stroke",u.color),l.setAttribute("stroke-opacity",u.opacity),l.setAttribute("stroke-width",u.weight),l.setAttribute("stroke-linecap",u.lineCap),l.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?l.setAttribute("stroke-dasharray",u.dashArray):l.removeAttribute("stroke-dasharray"),u.dashOffset?l.setAttribute("stroke-dashoffset",u.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),u.fill?(l.setAttribute("fill",u.fillColor||u.color),l.setAttribute("fill-opacity",u.fillOpacity),l.setAttribute("fill-rule",u.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,su(s._parts,l))},_updateCircle:function(s){var l=s._point,u=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||u,g="a"+u+","+m+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(l.x-u)+","+l.y+g+u*2+",0 "+g+-u*2+",0 ";this._setPath(s,w)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){vs(s._path)},_bringToBack:function(s){ys(s._path)}});te.vml&&Yo.include(db);function a_(s){return te.svg||te.vml?new Yo(s):null}Se.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&o_(s)||a_(s)}});var l_=xs.extend({initialize:function(s,l){xs.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Pe(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function fb(s,l){return new l_(s,l)}Yo.create=Eu,Yo.pointsToPath=su,ai.geometryToLayer=gu,ai.coordsToLatLng=Yd,ai.coordsToLatLngs=vu,ai.latLngToCoords=Xd,ai.latLngsToCoords=yu,ai.getFeature=Ss,ai.asFeature=_u,Se.mergeOptions({boxZoom:!0});var u_=Bn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bo(),Dd(),this._startPoint=this._map.mouseEventToContainerPoint(s),fe(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new oe(this._point,this._startPoint),u=l.getSize();ot(this._box,l.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(We(this._box),it(this._container,"leaflet-crosshair")),Vo(),jd(),Fe(document,{contextmenu:Ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Se.addInitHook("addHandler","boxZoom",u_),Se.mergeOptions({doubleClickZoom:!0});var c_=Bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,u=l.getZoom(),m=l.options.zoomDelta,g=s.originalEvent.shiftKey?u-m:u+m;l.options.doubleClickZoom==="center"?l.setZoom(g):l.setZoomAround(s.containerPoint,g)}});Se.addInitHook("addHandler","doubleClickZoom",c_),Se.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var h_=Bn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ri(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){it(this._map._container,"leaflet-grab"),it(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Pe(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),u=this._initialWorldOffset,m=this._draggable._newPos.x,g=(m-l+u)%s+l-u,w=(m+l+u)%s-l-u,N=Math.abs(g+u)<Math.abs(w+u)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(s){var l=this._map,u=l.options,m=!u.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),m)l.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,N=u.easeLinearity,P=g.multiplyBy(N/w),D=P.distanceTo([0,0]),z=Math.min(u.inertiaMaxSpeed,D),G=P.multiplyBy(z/D),se=z/(u.inertiaDeceleration*N),ge=G.multiplyBy(-se/2).round();!ge.x&&!ge.y?l.fire("moveend"):(ge=l._limitOffset(ge,l.options.maxBounds),ne(function(){l.panBy(ge,{duration:se,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Se.addInitHook("addHandler","dragging",h_),Se.mergeOptions({keyboard:!0,keyboardPanDelta:80});var d_=Bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),fe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,u=s.scrollTop||l.scrollTop,m=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},u=this.keyCodes,m,g;for(m=0,g=u.left.length;m<g;m++)l[u.left[m]]=[-1*s,0];for(m=0,g=u.right.length;m<g;m++)l[u.right[m]]=[s,0];for(m=0,g=u.down.length;m<g;m++)l[u.down[m]]=[0,s];for(m=0,g=u.up.length;m<g;m++)l[u.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},u=this.keyCodes,m,g;for(m=0,g=u.zoomIn.length;m<g;m++)l[u.zoomIn[m]]=s;for(m=0,g=u.zoomOut.length;m<g;m++)l[u.zoomOut[m]]=-s},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,u=this._map,m;if(l in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(m=this._panKeys[l],s.shiftKey&&(m=H(m).multiplyBy(3)),u.options.maxBounds&&(m=u._limitOffset(H(m),u.options.maxBounds)),u.options.worldCopyJump){var g=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(m)));u.panTo(g)}else u.panBy(m)}else if(l in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Ar(s)}}});Se.addInitHook("addHandler","keyboard",d_),Se.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var f_=Bn.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Oy(s),u=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),m),Ar(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,w=u?Math.ceil(g/u)*u:g,N=s._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,N&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+N):s.setZoomAround(this._lastMousePos,l+N))}});Se.addInitHook("addHandler","scrollWheelZoom",f_);var mb=600;Se.mergeOptions({tapHold:te.touchNative&&te.safari&&te.mobile,tapTolerance:15});var m_=Bn.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new R(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",Et),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),mb),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Fe(document,"touchend",Et),Fe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new R(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});u._simulated=!0,l.target.dispatchEvent(u)}});Se.addInitHook("addHandler","tapHold",m_),Se.mergeOptions({touchZoom:te.touch,bounceAtZoomLimits:!0});var p_=Bn.extend({addHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){it(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var u=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(u.add(m)._divideBy(2))),this._startDist=u.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),Et(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,u=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]),g=u.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(g,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&g<1||this._zoom>l.getMaxZoom()&&g>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=u._add(m)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var N=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(N,this,!0),Et(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Se.addInitHook("addHandler","touchZoom",p_),Se.BoxZoom=u_,Se.DoubleClickZoom=c_,Se.Drag=h_,Se.Keyboard=d_,Se.ScrollWheelZoom=f_,Se.TapHold=m_,Se.TouchZoom=p_,n.Bounds=oe,n.Browser=te,n.CRS=Mt,n.Canvas=s_,n.Circle=Zd,n.CircleMarker=pu,n.Class=ft,n.Control=Nn,n.DivIcon=n_,n.DivOverlay=Vn,n.DomEvent=LN,n.DomUtil=PN,n.Draggable=Ri,n.Evented=W,n.FeatureGroup=si,n.GeoJSON=ai,n.GridLayer=Go,n.Handler=Bn,n.Icon=ws,n.ImageOverlay=wu,n.LatLng=xe,n.LatLngBounds=Je,n.Layer=bn,n.LayerGroup=_s,n.LineUtil=HN,n.Map=Se,n.Marker=mu,n.Mixin=zN,n.Path=Oi,n.Point=R,n.PolyUtil=UN,n.Polygon=xs,n.Polyline=oi,n.Popup=xu,n.PosAnimation=Fy,n.Projection=WN,n.Rectangle=l_,n.Renderer=li,n.SVG=Yo,n.SVGOverlay=t_,n.TileLayer=Es,n.Tooltip=Su,n.Transformation=U,n.Util=Ie,n.VideoOverlay=e_,n.bind=a,n.bounds=_e,n.canvas=o_,n.circle=eb,n.circleMarker=JN,n.control=Wo,n.divIcon=ub,n.extend=r,n.featureGroup=ZN,n.geoJSON=Jy,n.geoJson=ib,n.gridLayer=cb,n.icon=YN,n.imageOverlay=rb,n.latLng=ce,n.latLngBounds=Pe,n.layerGroup=GN,n.map=AN,n.marker=XN,n.point=H,n.polygon=nb,n.polyline=tb,n.popup=ab,n.rectangle=fb,n.setOptions=k,n.stamp=h,n.svg=a_,n.svgOverlay=ob,n.tileLayer=i_,n.tooltip=lb,n.transformation=Me,n.version=i,n.videoOverlay=sb;var pb=window.L;n.noConflict=function(){return window.L=pb,this},window.L=n})})(zp,zp.exports);var nu=zp.exports;const Ed=jx(nu);function cy(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function hy(t,e){return e==null?function(i,r){const o=b.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=b.useRef();o.current||(o.current=t(i,r));const a=b.useRef(i),{instance:c}=o.current;return b.useEffect(function(){a.current!==i&&(e(c,i,a.current),a.current=i)},[c,i,r]),o}}function tz(t,e){b.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function JT(t){return function(n){const i=ly(),r=t(uy(n,i),i);return GT(i.map,n.attribution),XT(r.current,n.eventHandlers),tz(r.current,i),r}}function nz(t,e){const n=hy(t,e),i=JT(n);return Y3(i)}function iz(t,e){const n=hy(t),i=ez(n,e);return X3(i)}function rz(t,e){const n=hy(t,e),i=JT(n);return J3(i)}function sz(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function eN(){return ly().map}function oz(t){const e=eN();return b.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Up(){return Up=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Up.apply(this,arguments)}function az({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:c,whenReady:h,zoom:f,...p},v){const[y]=b.useState({className:r,id:o,style:c}),[x,C]=b.useState(null);b.useImperativeHandle(v,()=>(x==null?void 0:x.map)??null,[x]);const k=b.useCallback(E=>{if(E!==null&&x===null){const _=new nu.Map(E,p);n!=null&&f!=null?_.setView(n,f):t!=null&&_.fitBounds(t,e),h!=null&&_.whenReady(h),C(G3(_))}},[]);b.useEffect(()=>()=>{x==null||x.map.remove()},[x]);const T=x?ro.createElement(YT,{value:x},i):a??null;return ro.createElement("div",Up({},y,{ref:k}),T)}const lz=b.forwardRef(az),em=nz(function({position:e,...n},i){const r=new nu.Marker(e,n);return cy(r,Z3(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),tm=iz(function(e,n){const i=new nu.Popup(e,n.overlayContainer);return cy(i,n)},function(e,n,{position:i},r){b.useEffect(function(){const{instance:a}=e;function c(f){f.popup===a&&(a.update(),r(!0))}function h(f){f.popup===a&&r(!1)}return n.map.on({popupopen:c,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:c,popupclose:h}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),uz=rz(function({url:e,...n},i){const r=new nu.TileLayer(e,uy(n,i));return cy(r,i)},function(e,n,i){sz(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});delete Ed.Icon.Default.prototype._getIconUrl;Ed.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Dx=new Ed.DivIcon({html:'<div style="background: linear-gradient(135deg, #FF6B9D, #C96DD8); width: 32px; height: 32px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 15px rgba(255,107,157,0.4); border: 2px solid white;"><span style="transform: rotate(45deg); font-size: 14px;"></span></div>',className:"custom-heart-marker",iconSize:[32,32],iconAnchor:[16,32]}),cz=new Ed.DivIcon({html:'<div style="background: linear-gradient(135deg, #3B82F6, #06B6D4); width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 3px 12px rgba(59,130,246,0.4);"></div>',className:"custom-location-marker",iconSize:[24,24],iconAnchor:[12,12]});function hz({center:t}){const e=eN();return b.useEffect(()=>{t&&e.setView(t,14)},[t,e]),null}function dz({onMapClick:t}){return oz({click:e=>t(e.latlng)}),null}function fz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(null),[o,a]=b.useState(!1),[c,h]=b.useState(!1),[f,p]=b.useState(null),[v,y]=b.useState({title:"",description:"",date:Oe(new Date,"yyyy-MM-dd")}),[x,C]=b.useState("memories"),[k,T]=b.useState(null);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:E=[]}=De({queryKey:["locations"],queryFn:()=>$.entities.LocationShare.list("-last_updated"),refetchInterval:15e3}),{data:_=[]}=De({queryKey:["memoryPins"],queryFn:()=>$.entities.MemoryPin.list("-created_date")}),{data:S=[]}=De({queryKey:["photosWithLocation"],queryFn:async()=>(await $.entities.Photo.list("-created_date")).filter(Ie=>Ie.latitude&&Ie.longitude)}),I=we({mutationFn:async B=>{const Ie=E.find(ft=>ft.user_name===(e==null?void 0:e.full_name));return Ie?$.entities.LocationShare.update(Ie.id,{latitude:B.latitude,longitude:B.longitude,is_active:!0,last_updated:new Date().toISOString()}):$.entities.LocationShare.create({user_name:(e==null?void 0:e.full_name)||"Anonymous",latitude:B.latitude,longitude:B.longitude,is_active:!0,last_updated:new Date().toISOString()})},onSuccess:()=>{t.invalidateQueries({queryKey:["locations"]}),a(!1)}}),M=we({mutationFn:B=>$.entities.MemoryPin.create(B),onSuccess:()=>{t.invalidateQueries({queryKey:["memoryPins"]}),h(!1),y({title:"",description:"",date:Oe(new Date,"yyyy-MM-dd")}),p(null)}}),A=we({mutationFn:B=>$.entities.MemoryPin.delete(B),onSuccess:()=>{t.invalidateQueries({queryKey:["memoryPins"]}),T(null)}}),j=()=>{navigator.geolocation&&(a(!0),navigator.geolocation.getCurrentPosition(B=>{const Ie={latitude:B.coords.latitude,longitude:B.coords.longitude};r([Ie.latitude,Ie.longitude]),I.mutate(Ie)},()=>a(!1)))},O=B=>{x==="memories"&&(p(B),h(!0))},J=()=>{!f||!v.title||M.mutate({...v,latitude:f.lat,longitude:f.lng})},Q=E.filter(B=>{if(!B.is_active)return!1;const Ie=new Date(B.last_updated);return(new Date-Ie)/1e3/60<5}),ne=_[0]?[_[0].latitude,_[0].longitude]:Q[0]?[Q[0].latitude,Q[0].longitude]:[40.7128,-74.006];return d.jsxs("div",{className:"h-screen flex flex-col pb-24",children:[d.jsxs("div",{className:"px-4 pt-3 pb-2 space-y-3 bg-gradient-to-b from-white to-transparent",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text pt-2",children:"Our Map"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(X,{variant:x==="memories"?"default":"outline",onClick:()=>C("memories"),className:`flex-1 rounded-xl h-10 ${x==="memories"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"border-gray-200"}`,children:[d.jsx(dt,{className:"w-4 h-4 mr-2"}),"Memories"]}),d.jsxs(X,{variant:x==="live"?"default":"outline",onClick:()=>C("live"),className:`flex-1 rounded-xl h-10 ${x==="live"?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"border-gray-200"}`,children:[d.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Live"]})]}),x==="live"&&d.jsx(X,{onClick:j,disabled:o,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl h-11",children:o?d.jsxs(d.Fragment,{children:[d.jsx(ii,{className:"w-5 h-5 mr-2 animate-spin"})," Updating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Ex,{className:"w-5 h-5 mr-2"})," Share My Location"]})}),x==="memories"&&d.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Tap anywhere on the map to pin a memory "})]}),x==="memories"&&_.length>0&&d.jsx("div",{className:"px-4 pb-3",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:_.map(B=>d.jsxs("button",{onClick:()=>{T(B),r([B.latitude,B.longitude])},className:"glass-card rounded-xl p-3 min-w-[140px] flex-shrink-0 text-left hover:shadow-md smooth-transition",children:[d.jsx("p",{className:"font-semibold text-gray-800 text-sm truncate",children:B.title}),d.jsx("p",{className:"text-gray-400 text-xs mt-1",children:B.date?Oe(new Date(B.date),"MMM d, yyyy"):""})]},B.id))})}),x==="live"&&Q.length>0&&d.jsx("div",{className:"px-4 pb-3",children:d.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:Q.map(B=>d.jsxs("button",{onClick:()=>r([B.latitude,B.longitude]),className:"glass-card rounded-xl p-3 min-w-[140px] flex-shrink-0 text-left",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),d.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:B.user_name})]}),d.jsx("p",{className:"text-gray-400 text-xs mt-1",children:B.last_updated?new Date(B.last_updated).toLocaleTimeString():""})]},B.id))})}),d.jsxs("div",{className:"flex-1 relative rounded-t-3xl overflow-hidden mx-2 shadow-lg",children:[d.jsxs(lz,{center:ne,zoom:13,style:{height:"100%",width:"100%"},className:"z-0 rounded-t-3xl",children:[d.jsx(uz,{attribution:" OpenStreetMap",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),d.jsx(hz,{center:i}),x==="memories"&&d.jsx(dz,{onMapClick:O}),x==="memories"&&_.map(B=>d.jsx(em,{position:[B.latitude,B.longitude],icon:Dx,children:d.jsx(tm,{className:"custom-popup",children:d.jsxs("div",{className:"text-center p-1 min-w-[150px]",children:[B.photo_url&&d.jsx("img",{src:B.photo_url,alt:"",className:"w-full h-24 object-cover rounded-lg mb-2"}),d.jsx("p",{className:"font-bold text-gray-800",children:B.title}),B.description&&d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:B.description}),B.date&&d.jsx("p",{className:"text-xs text-gray-400 mt-2",children:Oe(new Date(B.date),"MMM d, yyyy")}),d.jsx("button",{onClick:()=>A.mutate(B.id),className:"mt-2 text-red-500 text-xs hover:underline",children:"Remove"})]})})},B.id)),x==="memories"&&S.map(B=>d.jsx(em,{position:[B.latitude,B.longitude],icon:Dx,children:d.jsx(tm,{children:d.jsxs("div",{className:"text-center p-1",children:[d.jsx("img",{src:B.url,alt:"",className:"w-28 h-28 object-cover rounded-lg mb-2"}),d.jsx("p",{className:"text-sm text-gray-700",children:B.caption||"Photo Memory"})]})})},B.id)),x==="live"&&Q.map(B=>d.jsx(em,{position:[B.latitude,B.longitude],icon:cz,children:d.jsx(tm,{children:d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"font-semibold text-gray-800",children:B.user_name}),d.jsx("p",{className:"text-xs text-gray-500",children:B.last_updated?new Date(B.last_updated).toLocaleString():""})]})})},B.id))]}),x==="memories"&&d.jsx("button",{onClick:()=>{i&&(p({lat:i[0],lng:i[1]}),h(!0))},"aria-label":"Add memory pin",className:"absolute bottom-4 right-4 w-14 h-14 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-lg flex items-center justify-center z-[1000]",children:d.jsx(yr,{className:"w-6 h-6"})})]}),d.jsx(Pi,{open:c,onOpenChange:h,children:d.jsxs(Mi,{className:"glass-card max-w-sm",children:[d.jsx(kl,{children:d.jsxs(Cl,{className:"gradient-text text-xl flex items-center gap-2",children:[d.jsx(oy,{className:"w-5 h-5"})," Pin a Memory"]})}),d.jsxs("div",{className:"space-y-3 pt-2",children:[d.jsx(rt,{placeholder:"What happened here?",value:v.title,onChange:B=>y({...v,title:B.target.value}),className:"rounded-xl h-11"}),d.jsx(Sd,{placeholder:"Tell the story...",value:v.description,onChange:B=>y({...v,description:B.target.value}),className:"rounded-xl min-h-[80px]"}),d.jsx(rt,{type:"date",value:v.date,onChange:B=>y({...v,date:B.target.value}),className:"rounded-xl h-11"}),d.jsxs(X,{onClick:J,disabled:!v.title,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",loading:addPinMutation.isPending,children:[d.jsx(dt,{className:"w-5 h-5 mr-2"})," Save Memory"]})]})]})})]})}function mz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState("");b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:o=[]}=De({queryKey:["notes"],queryFn:()=>$.entities.Note.list("-created_date")}),a=we({mutationFn:p=>$.entities.Note.create(p),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),r("")}}),c=we({mutationFn:({id:p,isFavorite:v})=>$.entities.Note.update(p,{is_favorite:!v}),onSuccess:()=>t.invalidateQueries({queryKey:["notes"]})}),h=we({mutationFn:p=>$.entities.Note.delete(p),onSuccess:()=>t.invalidateQueries({queryKey:["notes"]})}),f=p=>{p.preventDefault(),i.trim()&&a.mutate({content:i,author_name:(e==null?void 0:e.full_name)||"Anonymous"})};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("form",{onSubmit:f,className:"glass-card rounded-2xl p-4 flex gap-3",children:[d.jsx(rt,{value:i,onChange:p=>r(p.target.value),placeholder:"Write a love note...",className:"flex-1 rounded-xl"}),d.jsx(X,{type:"submit",disabled:!i.trim()||a.isPending,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-full w-11 h-11 p-0",children:d.jsx(MT,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-3",children:[o.map(p=>d.jsx("div",{className:"glass-card rounded-2xl p-4 hover-lift animate-slide-up",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-gray-800 leading-relaxed mb-2",children:p.content}),d.jsxs("p",{className:"text-gray-400 text-xs",children:[p.author_name,"  ",Oe(new Date(p.created_date),"MMM d, h:mm a")]})]}),d.jsxs("div",{className:"flex gap-1 ml-3",children:[d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>c.mutate({id:p.id,isFavorite:p.is_favorite}),className:"rounded-full w-8 h-8",children:d.jsx(dt,{className:"w-4 h-4",fill:p.is_favorite?"#FF6B9D":"none",stroke:"#FF6B9D"})}),d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>h.mutate(p.id),className:"rounded-full text-red-500 hover:bg-red-50 w-8 h-8",children:d.jsx(eu,{className:"w-4 h-4"})})]})]})},p.id)),o.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(us,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No notes yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Send a love note!"})]})]})]})}function pz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1),[o,a]=b.useState(null),[c,h]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:f=[]}=De({queryKey:["photos"],queryFn:()=>$.entities.Photo.list("-created_date")}),p=we({mutationFn:async({file:T})=>{const{file_url:E}=await $.integrations.Core.UploadFile({file:T});return $.entities.Photo.create({url:E,uploaded_by:(e==null?void 0:e.full_name)||"Anonymous"})},onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),r(!1)}}),v=we({mutationFn:({id:T,caption:E})=>$.entities.Photo.update(T,{caption:E}),onSuccess:()=>t.invalidateQueries({queryKey:["photos"]})}),y=we({mutationFn:({id:T,isFavorite:E})=>$.entities.Photo.update(T,{is_favorite:!E}),onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),o&&a(T=>({...T,is_favorite:!T.is_favorite}))}}),x=we({mutationFn:T=>$.entities.Photo.delete(T),onSuccess:()=>{t.invalidateQueries({queryKey:["photos"]}),a(null)}}),C=async T=>{h(!0);const E=await $.integrations.Core.InvokeLLM({prompt:"Describe this couple's photo in a romantic, heartfelt way. Keep it short (2-3 sentences).",file_urls:[T.url],response_json_schema:{type:"object",properties:{description:{type:"string"}}}});await $.entities.Photo.update(T.id,{ai_description:E.description}),t.invalidateQueries({queryKey:["photos"]}),a({...T,ai_description:E.description}),h(!1)},k=async T=>{var _;const E=(_=T.target.files)==null?void 0:_[0];E&&(r(!0),p.mutate({file:E}),T.target.value="")};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"glass-card rounded-2xl p-5 flex flex-col items-center justify-center cursor-pointer hover-lift smooth-transition border-2 border-dashed border-pink-200 hover:border-pink-400",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:k,disabled:i,className:"hidden"}),i?d.jsx(ii,{className:"w-10 h-10 text-pink-500 animate-spin mb-2"}):d.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center mb-2",children:d.jsx(Op,{className:"w-6 h-6 text-white"})}),d.jsx("p",{className:"font-semibold text-gray-700",children:i?"Uploading...":"Upload Photo"}),d.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Add to your memories"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map((T,E)=>d.jsx("div",{className:"animate-slide-up cursor-pointer",style:{transform:`rotate(${E%2===0?-2:2}deg)`,animationDelay:`${E*.05}s`},onClick:()=>a(T),children:d.jsxs("div",{className:"bg-white p-2 pb-12 rounded-sm shadow-lg hover:shadow-xl hover:scale-105 hover:rotate-0 smooth-transition relative",children:[d.jsx("img",{src:T.url,alt:T.caption||"Photo",className:"w-full aspect-square object-cover"}),T.is_favorite&&d.jsx("div",{className:"absolute top-4 right-4 bg-pink-500 rounded-full p-1.5 shadow-md",children:d.jsx(dt,{className:"w-3 h-3 text-white",fill:"white"})}),d.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:d.jsx("input",{type:"text",placeholder:"Add caption...",defaultValue:T.caption||"",onClick:_=>_.stopPropagation(),onBlur:_=>{_.target.value!==T.caption&&v.mutate({id:T.id,caption:_.target.value})},className:"w-full text-gray-600 bg-transparent border-none outline-none placeholder:text-gray-300 text-center",style:{fontFamily:"Caveat, cursive",fontSize:"16px"}})})]})},T.id))}),f.length===0&&!i&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Op,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No photos yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Upload your first memory!"})]}),d.jsx(Pi,{open:!!o,onOpenChange:()=>a(null),children:d.jsx(Mi,{className:"max-w-md p-0 overflow-hidden bg-white rounded-2xl",children:o&&d.jsxs("div",{children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:o.url,alt:"",className:"w-full max-h-[50vh] object-cover"}),d.jsx("button",{onClick:()=>a(null),className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-black/50 flex items-center justify-center text-white hover:bg-black/70 smooth-transition",children:d.jsx(_r,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"p-5 space-y-4",children:[o.caption&&d.jsxs("p",{className:"text-gray-700 text-lg text-center",style:{fontFamily:"Caveat, cursive"},children:['"',o.caption,'"']}),d.jsxs("p",{className:"text-gray-400 text-sm text-center",children:[o.uploaded_by,"  ",Oe(new Date(o.created_date),"MMM d, yyyy")]}),o.ai_description?d.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-4 text-white",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(ri,{className:"w-4 h-4"}),d.jsx("span",{className:"font-semibold text-sm",children:"AI Memory"})]}),d.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:o.ai_description})]}):d.jsx(X,{onClick:()=>C(o),disabled:c,className:"w-full rounded-xl h-11 bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600",children:c?d.jsxs(d.Fragment,{children:[d.jsx(ii,{className:"w-4 h-4 mr-2 animate-spin"})," Generating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(ri,{className:"w-4 h-4 mr-2"})," Generate AI Memory"]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[d.jsxs(X,{onClick:()=>y.mutate({id:o.id,isFavorite:o.is_favorite}),className:`rounded-xl h-12 font-medium ${o.is_favorite?"bg-pink-500 hover:bg-pink-600 text-white":"bg-pink-50 hover:bg-pink-100 text-pink-600 border border-pink-200"}`,children:[d.jsx(dt,{className:"w-5 h-5 mr-2",fill:o.is_favorite?"white":"none"}),o.is_favorite?"Favorited":"Favorite"]}),d.jsxs(X,{onClick:()=>x.mutate(o.id),className:"rounded-xl h-12 font-medium bg-red-50 hover:bg-red-100 text-red-500 border border-red-200",children:[d.jsx(eu,{className:"w-5 h-5 mr-2"}),"Delete"]})]})]})]})})})]})}function gz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(!1);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]);const{data:o=[]}=De({queryKey:["videos"],queryFn:()=>$.entities.Video.list("-created_date")}),a=we({mutationFn:async f=>{const{file_url:p}=await $.integrations.Core.UploadFile({file:f});return $.entities.Video.create({url:p,uploaded_by:(e==null?void 0:e.full_name)||"Anonymous"})},onSuccess:()=>{t.invalidateQueries({queryKey:["videos"]}),r(!1)}}),c=we({mutationFn:f=>$.entities.Video.delete(f),onSuccess:()=>t.invalidateQueries({queryKey:["videos"]})}),h=async f=>{var v;const p=(v=f.target.files)==null?void 0:v[0];p&&(r(!0),a.mutate(p),f.target.value="")};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("label",{className:"glass-card rounded-2xl p-6 flex flex-col items-center justify-center cursor-pointer hover-lift smooth-transition",children:[d.jsx("input",{type:"file",accept:"video/*",onChange:h,disabled:i,className:"hidden"}),i?d.jsx(ii,{className:"w-12 h-12 text-pink-400 animate-spin mb-3"}):d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center mb-3",children:d.jsx(Op,{className:"w-8 h-8 text-white"})}),d.jsx("p",{className:"font-semibold text-white",children:i?"Uploading...":"Upload Video"}),d.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Share your moments"})]}),d.jsx("div",{className:"space-y-4",children:o.map(f=>d.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden hover-lift animate-slide-up",children:[d.jsx("video",{src:f.url,controls:!0,className:"w-full aspect-video object-cover"}),d.jsxs("div",{className:"p-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium",children:f.title||"Video"}),d.jsx("p",{className:"text-white/40 text-sm",children:f.uploaded_by})]}),d.jsx(X,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),className:"rounded-full text-red-400 hover:bg-red-500/20",children:d.jsx(eu,{className:"w-4 h-4"})})]})]},f.id))}),o.length===0&&!i&&d.jsxs("div",{className:"text-center py-16",children:[d.jsx(ay,{className:"w-16 h-16 mx-auto mb-4 text-white/20"}),d.jsx("p",{className:"text-white/40",children:"No videos yet"}),d.jsx("p",{className:"text-white/30 text-sm mt-1",children:"Upload your first video!"})]})]})}function vz(){const t=sn(),[e,n]=b.useState(null),[i,r]=b.useState(""),[o,a]=b.useState([]),[c,h]=b.useState(!1),[f,p]=b.useState(null),[v,y]=b.useState(null),[x,C]=b.useState("all"),[k,T]=b.useState(!1),[E,_]=b.useState(""),S=b.useRef(null);b.useEffect(()=>{$.auth.me().then(n).catch(()=>{})},[]),b.useEffect(()=>()=>{S.current&&S.current.pause()},[]);const{data:I=[]}=De({queryKey:["music"],queryFn:()=>$.entities.Music.list("-created_date")}),{data:M=[]}=De({queryKey:["playlists"],queryFn:()=>$.entities.Playlist.list("-created_date")}),{data:A}=De({queryKey:["listeningSession"],queryFn:async()=>(await $.entities.ListeningSession.list("-created_date",1)).find(R=>R.is_active)||null,refetchInterval:2e3}),j=we({mutationFn:W=>$.entities.Playlist.create({name:W}),onSuccess:()=>{t.invalidateQueries({queryKey:["playlists"]}),_(""),T(!1)}}),O=we({mutationFn:W=>$.entities.Music.create({...W,added_by:(e==null?void 0:e.full_name)||"Anonymous"}),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),J=we({mutationFn:({id:W,isFavorite:R})=>$.entities.Music.update(W,{is_favorite:!R}),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),Q=we({mutationFn:W=>$.entities.Music.delete(W),onSuccess:()=>t.invalidateQueries({queryKey:["music"]})}),ne=we({mutationFn:async W=>{const R=await $.entities.ListeningSession.list();for(const re of R.filter(H=>H.is_active))await $.entities.ListeningSession.update(re.id,{is_active:!1});return $.entities.ListeningSession.create({song_id:W.id,song_title:W.title,song_artist:W.artist,preview_url:W.preview_url,cover_art:W.cover_art,is_playing:!0,is_active:!0,started_by:e==null?void 0:e.full_name})},onSuccess:()=>t.invalidateQueries({queryKey:["listeningSession"]})}),B=we({mutationFn:({id:W,data:R})=>$.entities.ListeningSession.update(W,R),onSuccess:()=>t.invalidateQueries({queryKey:["listeningSession"]})}),Ie=async()=>{if(!i.trim())return;h(!0);const R=await(await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(i)}&media=music&limit=10`)).json();a(R.results||[]),h(!1)},ft=W=>{var R;O.mutate({title:W.trackName,artist:W.artistName,album:W.collectionName,cover_art:(R=W.artworkUrl100)==null?void 0:R.replace("100x100","600x600"),preview_url:W.previewUrl,itunes_url:W.trackViewUrl,spotify_search_url:`https://open.spotify.com/search/${encodeURIComponent(W.trackName+" "+W.artistName)}`}),a([]),r("")},ji=(W,R)=>{if(S.current&&S.current.pause(),v===R){y(null);return}const re=new Audio(W);re.play(),re.onended=()=>y(null),S.current=re,y(R)},Xe=x==="all"?I:x==="favorites"?I.filter(W=>W.is_favorite):I.filter(W=>W.playlist_id===x);return d.jsxs("div",{className:"space-y-4",children:[A&&d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-4 text-white",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(PT,{className:"w-4 h-4 animate-pulse"}),d.jsx("span",{className:"font-semibold text-sm",children:"Listening Together"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[A.cover_art?d.jsx("img",{src:A.cover_art,alt:"",className:"w-14 h-14 rounded-xl shadow-lg"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-white/20 flex items-center justify-center",children:d.jsx(Kr,{className:"w-6 h-6"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-semibold truncate",children:A.song_title}),d.jsx("p",{className:"text-white/70 text-sm truncate",children:A.song_artist})]}),d.jsx(X,{onClick:()=>B.mutate({id:A.id,data:{is_playing:!A.is_playing}}),className:"rounded-full bg-white/20 hover:bg-white/30 w-11 h-11 p-0",children:A.is_playing?d.jsx(Gf,{className:"w-5 h-5"}):d.jsx(Zf,{className:"w-5 h-5"})})]}),d.jsx(X,{variant:"ghost",onClick:()=>B.mutate({id:A.id,data:{is_active:!1}}),className:"w-full mt-3 text-white/70 hover:text-white hover:bg-white/10 text-sm h-8",children:"End Session"})]}),d.jsxs("div",{className:"glass-card rounded-2xl p-4",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx(rt,{placeholder:"Search for songs...",value:i,onChange:W=>r(W.target.value),onKeyPress:W=>W.key==="Enter"&&Ie(),className:"flex-1 rounded-xl h-11"}),d.jsx(X,{onClick:Ie,disabled:c,className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl px-5 h-11",children:d.jsx(nF,{className:"w-4 h-4"})})]}),o.length>0&&d.jsx("div",{className:"mt-3 max-h-64 overflow-y-auto space-y-2 border-t pt-3",children:o.map(W=>d.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 flex items-center gap-3",children:[d.jsx("img",{src:W.artworkUrl60,alt:"",className:"w-12 h-12 rounded-lg shadow"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-gray-800 font-medium text-sm truncate",children:W.trackName}),d.jsx("p",{className:"text-gray-500 text-xs truncate",children:W.artistName})]}),d.jsx(X,{onClick:()=>ft(W),className:"bg-pink-500 hover:bg-pink-600 text-white rounded-full h-9 w-9 p-0",children:d.jsx(yr,{className:"w-4 h-4"})})]},W.trackId))})]}),d.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[d.jsx(X,{variant:x==="all"?"default":"outline",onClick:()=>C("all"),className:`rounded-full whitespace-nowrap text-sm h-9 ${x==="all"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:"All Songs"}),d.jsx(X,{variant:x==="favorites"?"default":"outline",onClick:()=>C("favorites"),className:`rounded-full whitespace-nowrap text-sm h-9 ${x==="favorites"?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:" Favorites"}),M.map(W=>d.jsx(X,{variant:x===W.id?"default":"outline",onClick:()=>C(W.id),className:`rounded-full whitespace-nowrap text-sm h-9 ${x===W.id?"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0":"border-gray-200 text-gray-600"}`,children:W.name},W.id)),d.jsx(X,{variant:"outline",onClick:()=>T(!0),className:"rounded-full border-gray-200 text-gray-600 h-9 w-9 p-0",children:d.jsx(yr,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"space-y-2",children:Xe.map(W=>d.jsxs("div",{className:"glass-card rounded-xl p-3 flex items-center gap-3 hover-lift cursor-pointer",onClick:()=>p(W),children:[W.cover_art?d.jsx("img",{src:W.cover_art,alt:"",className:"w-14 h-14 rounded-xl object-cover shadow"}):d.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center",children:d.jsx(Kr,{className:"w-6 h-6 text-white"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-gray-800 font-semibold truncate",children:W.title}),d.jsx("p",{className:"text-gray-500 text-sm truncate",children:W.artist||"Unknown"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[W.is_favorite&&d.jsx(dt,{className:"w-4 h-4 text-pink-500",fill:"#FF6B9D"}),W.preview_url&&d.jsx(X,{variant:"ghost",size:"icon",onClick:R=>{R.stopPropagation(),ji(W.preview_url,W.id)},className:"rounded-full w-10 h-10",children:v===W.id?d.jsx(Gf,{className:"w-5 h-5 text-pink-500"}):d.jsx(Zf,{className:"w-5 h-5 text-gray-400"})})]})]},W.id))}),Xe.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Kr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),d.jsx("p",{className:"text-gray-400",children:"No songs yet"}),d.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Search to add music!"})]}),d.jsx(Pi,{open:!!f,onOpenChange:()=>p(null),children:d.jsx(Mi,{className:"max-w-sm p-0 overflow-hidden bg-white rounded-2xl",children:f&&d.jsxs("div",{children:[d.jsxs("div",{className:"relative bg-gradient-to-br from-pink-500 to-purple-600 p-6 pb-8",children:[d.jsx("button",{onClick:()=>p(null),className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white",children:d.jsx(_r,{className:"w-4 h-4"})}),d.jsx("div",{className:"text-center",children:f.cover_art?d.jsx("img",{src:f.cover_art,alt:"",className:"w-36 h-36 rounded-2xl mx-auto shadow-2xl object-cover"}):d.jsx("div",{className:"w-36 h-36 rounded-2xl mx-auto bg-white/20 flex items-center justify-center",children:d.jsx(Kr,{className:"w-16 h-16 text-white"})})})]}),d.jsxs("div",{className:"p-5 -mt-4 relative",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-800",children:f.title}),d.jsx("p",{className:"text-gray-500",children:f.artist}),f.album&&d.jsx("p",{className:"text-gray-400 text-sm",children:f.album})]}),f.preview_url&&d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsx(X,{onClick:()=>ji(f.preview_url,f.id),className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",children:v===f.id?d.jsxs(d.Fragment,{children:[d.jsx(Gf,{className:"w-5 h-5 mr-2"})," Pause"]}):d.jsxs(d.Fragment,{children:[d.jsx(Zf,{className:"w-5 h-5 mr-2"})," Play Preview"]})}),d.jsxs(X,{onClick:()=>ne.mutate(f),variant:"outline",className:"w-full border-purple-200 text-purple-600 hover:bg-purple-50 rounded-xl h-11",children:[d.jsx(DT,{className:"w-5 h-5 mr-2"})," Listen Together"]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[f.itunes_url&&d.jsx("a",{href:f.itunes_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-900 text-white rounded-xl py-2.5 font-medium text-sm",children:" Apple"}),f.spotify_search_url&&d.jsx("a",{href:f.spotify_search_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-green-500 text-white rounded-xl py-2.5 font-medium text-sm",children:" Spotify"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(X,{onClick:()=>{J.mutate({id:f.id,isFavorite:f.is_favorite}),p(W=>({...W,is_favorite:!W.is_favorite}))},className:`flex-1 rounded-xl h-10 ${f.is_favorite?"bg-pink-500 hover:bg-pink-600 text-white":"bg-pink-50 hover:bg-pink-100 text-pink-600"}`,children:[d.jsx(dt,{className:"w-4 h-4 mr-1",fill:f.is_favorite?"white":"none"}),f.is_favorite?"Favorited":"Favorite"]}),d.jsx(X,{variant:"outline",onClick:()=>{Q.mutate(f.id),p(null)},className:"rounded-xl h-10 border-red-200 text-red-500 hover:bg-red-50 px-3",children:d.jsx(eu,{className:"w-4 h-4"})})]})]})]})})}),d.jsx(Pi,{open:k,onOpenChange:T,children:d.jsx(Mi,{className:"glass-card",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-lg font-bold gradient-text",children:"Create Playlist"}),d.jsx(rt,{placeholder:"Playlist name...",value:E,onChange:W=>_(W.target.value),className:"rounded-xl h-11"}),d.jsx(X,{onClick:()=>j.mutate(E),disabled:!E.trim(),className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-xl h-11",children:"Create"})]})})})]})}function yz(){return d.jsxs("div",{className:"container mx-auto max-w-2xl px-4 pb-24",children:[d.jsx("h1",{className:"text-3xl font-bold gradient-text pt-4 mb-6",children:"Memories"}),d.jsxs(KT,{defaultValue:"notes",className:"w-full",children:[d.jsxs(QT,{className:"glass-card w-full grid grid-cols-4 p-1 mb-6 rounded-2xl bg-gray-100",children:[d.jsxs(Vs,{value:"notes",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(us,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Notes"})]}),d.jsxs(Vs,{value:"photos",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(xd,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Photos"})]}),d.jsxs(Vs,{value:"videos",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(ay,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Videos"})]}),d.jsxs(Vs,{value:"music",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-pink-500 data-[state=active]:to-purple-500 data-[state=active]:text-white text-gray-500 flex flex-col items-center gap-1 py-2",children:[d.jsx(Kr,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"Music"})]})]}),d.jsx(qs,{value:"notes",children:d.jsx(mz,{})}),d.jsx(qs,{value:"photos",children:d.jsx(pz,{})}),d.jsx(qs,{value:"videos",children:d.jsx(gz,{})}),d.jsx(qs,{value:"music",children:d.jsx(vz,{})})]})]})}function _z(){const[t,e]=b.useState(!1),[n,i]=b.useState(""),r=$g();async function o(){i(""),e(!0);try{const a=new di;await PD(El,a),r("/")}catch(a){i((a==null?void 0:a.message)||"Sign in failed")}finally{e(!1)}}return d.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-gradient-to-b from-white to-pink-50",children:d.jsxs("div",{className:"w-full max-w-sm bg-white/90 backdrop-blur-lg border border-gray-200 rounded-2xl shadow-xl p-6",children:[d.jsx("h1",{className:"text-2xl font-semibold tracking-tight mb-2",children:"Welcome back"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sign in to continue"}),n&&d.jsx("div",{className:"text-sm text-red-600 mb-3",children:n}),d.jsx(X,{onClick:o,disabled:t,className:"w-full",children:t?"Signing in":"Sign in with Google"})]})})}const wz=[{to:"/schedule",label:"Schedule",icon:Ir},{to:"/media",label:"Media",icon:Y5},{to:"/bookmarks",label:"Saved",icon:CT},{to:"/map",label:"Map",icon:oy},{to:"/profile",label:"Profile",icon:AT}];function xz(){return d.jsx("nav",{className:"fixed bottom-[env(safe-area-inset-bottom,0)+12px] left-1/2 -translate-x-1/2 z-50 w-[95%] max-w-md bg-white/85 backdrop-blur-xl border border-white/40 rounded-2xl shadow-lg",children:d.jsx("ul",{className:"flex items-center justify-between px-3 py-2",children:wz.map(({to:t,label:e,icon:n})=>d.jsx("li",{children:d.jsxs($M,{to:t,className:({isActive:i})=>["flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-xl transition-colors",i?"text-primary":"text-gray-600 hover:text-gray-800"].join(" "),children:[d.jsx(n,{className:"w-5 h-5"}),d.jsx("span",{className:"text-xs font-medium",children:e})]})},t))})})}function Sz(){const[t,e]=b.useState(void 0);return b.useEffect(()=>ek(El,e),[]),t}function Ez({children:t}){const e=Sz(),n=kr();return e===void 0?null:e?t:d.jsx(IM,{to:"/signin",state:{from:n},replace:!0})}function kz(){const e=kr().pathname==="/signin";return d.jsxs("div",{className:"min-h-screen pb-[calc(env(safe-area-inset-bottom,0)+84px)] bg-white",children:[d.jsxs(q0,{children:[d.jsx(ui,{path:"/signin",element:d.jsx(_z,{})}),d.jsx(ui,{path:"/*",element:d.jsx(Ez,{children:d.jsxs(q0,{children:[d.jsx(ui,{path:"/",element:d.jsx(U3,{})}),d.jsx(ui,{path:"/profile",element:d.jsx($3,{})}),d.jsx(ui,{path:"/bookmarks",element:d.jsx(B3,{})}),d.jsx(ui,{path:"/schedule",element:d.jsx(H3,{})}),d.jsx(ui,{path:"/map",element:d.jsx(fz,{})}),d.jsx(ui,{path:"/media",element:d.jsx(yz,{})})]})})})]}),!e&&d.jsx(xz,{})]})}function Cz(){return d.jsx(FM,{children:d.jsx(kz,{})})}const Tz=new dP;nm.createRoot(document.getElementById("root")).render(d.jsx(ro.StrictMode,{children:d.jsx(NP,{client:Tz,children:d.jsx(Cz,{})})}));
